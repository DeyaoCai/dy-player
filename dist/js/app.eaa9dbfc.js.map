{"version":3,"sources":["webpack://dy-player/./src/components/canvasConfig.ts","webpack://dy-player/./src/App.vue?3291","webpack://dy-player/./src/views/Index.vue?0dcf","webpack://dy-player/./src/music/Music.ts","webpack://dy-player/./src/utils.ts","webpack://dy-player/./src/units/appendStyle.ts","webpack://dy-player/./src/picture/Picture.ts","webpack://dy-player/./src/music/MusicConfig.ts","webpack://dy-player/./src/music/MusicVisualizer.ts","webpack://dy-player/./src/components/NavBar.vue?435e","webpack://dy-player/src/components/NavBar.vue","webpack://dy-player/./src/components/NavBar.vue?6ae8","webpack://dy-player/./src/components/NavBar.vue","webpack://dy-player/./src/components/MusicSearchBox.vue?8c13","webpack://dy-player/./proxy/httpConf.js","webpack://dy-player/./proxy/http.js","webpack://dy-player/./src/units/ListBox.ts","webpack://dy-player/./src/components/ListBoxView.vue?d362","webpack://dy-player/./src/components/ProgressBar.vue?4ea3","webpack://dy-player/./src/tools/Drag.ts","webpack://dy-player/src/components/ProgressBar.vue","webpack://dy-player/./src/components/ProgressBar.vue?8cec","webpack://dy-player/./src/components/ProgressBar.vue","webpack://dy-player/src/components/ListBoxView.vue","webpack://dy-player/./src/components/ListBoxView.vue?9c87","webpack://dy-player/./src/components/ListBoxView.vue","webpack://dy-player/src/components/MusicSearchBox.vue","webpack://dy-player/./src/components/MusicSearchBox.vue?84b6","webpack://dy-player/./src/components/MusicSearchBox.vue","webpack://dy-player/./src/components/MusicLocalBox.vue?1a8d","webpack://dy-player/src/components/MusicLocalBox.vue","webpack://dy-player/./src/components/MusicLocalBox.vue?ded0","webpack://dy-player/./src/components/MusicLocalBox.vue","webpack://dy-player/./src/components/ModifyBox.vue?e29d","webpack://dy-player/src/components/ModifyBox.vue","webpack://dy-player/./src/components/ModifyBox.vue?26e1","webpack://dy-player/./src/components/ModifyBox.vue","webpack://dy-player/./src/components/ThreeView.vue?f70f","webpack://dy-player/./src/components/ThreeViewUtils.ts","webpack://dy-player/src/components/ThreeView.vue","webpack://dy-player/./src/components/ThreeView.vue?d875","webpack://dy-player/./src/components/ThreeView.vue","webpack://dy-player/./src/components/CanvasView.vue?1437","webpack://dy-player/src/components/CanvasView.vue","webpack://dy-player/./src/components/CanvasView.vue?2603","webpack://dy-player/./src/components/CanvasView.vue","webpack://dy-player/./src/components/CanvasPic.vue?c525","webpack://dy-player/./src/tools/random.js","webpack://dy-player/./src/tools/PS.ts","webpack://dy-player/src/components/CanvasPic.vue","webpack://dy-player/./src/components/CanvasPic.vue?d12d","webpack://dy-player/./src/components/CanvasPic.vue","webpack://dy-player/./src/components/CanvasTitle.vue?d31c","webpack://dy-player/src/components/CanvasTitle.vue","webpack://dy-player/./src/components/CanvasTitle.vue?2055","webpack://dy-player/./src/components/CanvasTitle.vue","webpack://dy-player/./src/components/CanvasText.vue?de39","webpack://dy-player/src/components/CanvasText.vue","webpack://dy-player/./src/components/CanvasText.vue?b20f","webpack://dy-player/./src/components/CanvasText.vue","webpack://dy-player/./src/components/VideoView.vue?2e43","webpack://dy-player/src/components/VideoView.vue","webpack://dy-player/./src/components/VideoView.vue?42bf","webpack://dy-player/./src/components/VideoView.vue","webpack://dy-player/./src/components/DomClock.vue?905b","webpack://dy-player/./src/tools/Time.ts","webpack://dy-player/./src/components/DomClockItem.vue?e6aa","webpack://dy-player/src/components/DomClockItem.vue","webpack://dy-player/./src/components/DomClockItem.vue?36ab","webpack://dy-player/./src/components/DomClockItem.vue","webpack://dy-player/src/components/DomClock.vue","webpack://dy-player/./src/components/DomClock.vue?6d8e","webpack://dy-player/./src/components/DomClock.vue","webpack://dy-player/./src/components/GameUI.vue?911a","webpack://dy-player/src/components/GameUI.vue","webpack://dy-player/./src/components/GameUI.vue?5b9a","webpack://dy-player/./src/components/GameUI.vue","webpack://dy-player/src/views/Index.vue","webpack://dy-player/./src/views/Index.vue?0a0f","webpack://dy-player/./src/views/Index.vue","webpack://dy-player/src/App.vue","webpack://dy-player/./src/App.vue?b170","webpack://dy-player/./src/App.vue","webpack://dy-player/./src/registerServiceWorker.ts","webpack://dy-player/./src/main.ts","webpack://dy-player/./src/tools/DomUtil.ts","webpack://dy-player/./src/tools/GetType.ts","webpack://dy-player/./src/tools/ListEqual.ts","webpack://dy-player/./src/tools/ShortCut.ts","webpack://dy-player/./src/tools/Sound.ts","webpack://dy-player/webpack/bootstrap","webpack://dy-player/webpack/runtime/chunk loaded","webpack://dy-player/webpack/runtime/compat get default export","webpack://dy-player/webpack/runtime/define property getters","webpack://dy-player/webpack/runtime/global","webpack://dy-player/webpack/runtime/hasOwnProperty shorthand","webpack://dy-player/webpack/runtime/make namespace object","webpack://dy-player/webpack/runtime/jsonp chunk loading","webpack://dy-player/webpack/startup"],"names":["TrackItem","trackList","key","name","defValue","value","valueType","min","max","desc","this","setVal","val","savePresets","Track","defaultValue","constructor","name_","current","playing","list","commonConfigs","forEach","item","defaultVal","push","undefined","Object","defineProperty","get","console","log","length","configName","index","len","play","setIndex","thisItem","enc","dec","setMin","setMax","reset","createTrackClass","className","string","eval","trackConfigs","required","multiple","biquadFilterFrequency","balanceTrackConfigs","map","ModifyManager","updateCommonOptions","setList","TrackList","init","find","exportPresets","presets","importPresets","replacer","splice","replace","prev","next","add","call","arguments","delete","copy","createALink","data","fileName","parentNode","blob","Blob","type","url","URL","createObjectURL","link","href","download","document","body","parent","loadPresets","constructorList","constructorName","hasDto","some","i","options","TrackClass","config","filter","includes","item_","curVal","location","reload","result","$a","JSON","stringify","click","localStorage","setItem","parse","getItem","hasDot","e","track","conf","setConfig","render","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","commonOptions","_e","_l","modifyManager","CanvasView","musicData","realTimeData","EventTarget_","callback","listeners","stack","l","removeEventListener","event","target","MusicDataFlags","RhythmPoint","vol","isRhythmPoint","EventTar","fnMap","ev","fns","MVData","soundTrackArr","prevAvrLevel","prevAddSpeed","total","reduce","a","b","avrLevel","addSpeed","RhythmPointVolumeFloatRange","getTrackByName","getVal","rhythmPoint","shockNum","Event","dispatchEvent","soundTrackArrMaxLen","shift","MusicData","originData","GameScore","score","gameScore","DomUtil","classList","innerHTML","toString","prevNode","GameCombo","combo","GameNode","gameList","isDebug","gameInner","calculateScore","Date","now","remove","time","dom","style","hueRange","deg","innerDom","addEventListener","endFunction","currentTime","Math","abs","delay","setCurrentScore","Sound","GameList","mv","delayTime","ended","currentScore","totalScore","maxCombo","missCount","uselessCount","isStop","isMiss","setCombo","buffer","gameNode","indexOf","eventTarget","GameScene","gameData","x","per","join","destroy","UniqueList","findIndex","id","Color","round","rate","r","g","dCompose","MakeThrottle","prevTime","propertyKey","descriptor","fn","apply","appendStyle","compName","styleStr","forceUpdate","cacheMap","createElement","head","appendChild","canvas","pciCanvas","Picture","musicConfig","compressRate","ctx","getContext","cacheList","cacheImg","img","onload","setImage","src","width","height","drawImage","imageData","getImageData","color","aviOfArr","noNeedChangeCurrentImgAviColor","currentImgAviColor","makeEl","test","offsetWidth","offsetHeight","pciCtx","y","w","h","sumOfArr","arr","sum","num","MusicConfig","_x","_y","_main","main","images","imageGroup","pictureCanvasCtx","setPictureCanvasCtx","currentImgSrc","changePic","mouseMoveConf","enent","touches","clientX","clientY","keys","lrc","reverse","unshift","pop","shockAtOnce","picDom","load","shock","volume","createPanner","context","panner","ac","panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","positionX","positionY","positionZ","setOrientation","setPosition","initListener","constext","listener","forwardX","forwardY","forwardZ","upX","upY","upZ","createBiquadFilters","input","output","biquadFilters","frequency","createBiquadFilter","biquadFilter","connect","createAudioSource","$audio","source","createMediaElementSource","crossOrigin","autoplay","onended","window","dy_player_mv_cache","MusicVisualizer","obj","notClearPrev","cur","isDestoryed","destory","AudioContext","webkitAudioContext","analyser","createAnalyser","analyserBefore","gain","createGain","size","fftSize","createDelay","destination","xhr","XMLHttpRequest","draw","changeVolume","visualize","fun","stopType","abort","open","responseType","response","send","pause","suspend","arrayBuffer","decodeAudioData","err","path","n","count","stop","resetLatestPlayTime","ArrayBuffer","decode","bufferSource","createBufferSource","start","latestPlayTime","isPhone","res","decodeData","percent","Uint8Array","frequencyBinCount","requestAnimationFrame","webkitrequestAnimationFrame","mozrequestAnimationFrame","hidden","getByteFrequencyData","setVolume","class","active","on","$event","navList","_v","_s","stopPropagation","_t","component","makeAjax","cb","then","fullUrl","protocol","hostname","fetch","encodeURI","xhrFields","withCredentials","credentials","json","catch","special","ajax","camel","str","split","toUpperCase","slice","httpConf","file","route","ListBox","shallPlay","focus","isFocus","itemId","directives","rawName","expression","ref","domProps","blur","composing","$set","tabs","tabItem","getImgUrl","backgroundImage","transform","song","_index","searchText","rename","touchEv","moveEv","endEv","Drag","option","direction","oriPoint","ori","pre","doNotStopWhenMatch","resetPositionWhenTouch","position","isTouching","_direction","touched","cachePosition","$el","DOMRect","getBoundingClientRect","rect","bottom","top","right","left","setEl","screenX","screenY","moved","cancelBubble","preventDefault","offset","getOffset","oriPosition","ThreeViewUtils","scene","material","cubes","directions","currentPosi","geometry","cube","z","circles","perDeg","PI","data_","circle","sin","cos","sphere","light","Random","max_","min_","sign_","exec","GetType","unique","int","boolean","random","sign","aisleMap","PS","aisleType","cutType","ret","line","cutFnMap","xOffset","yOffset","zoom","aisleData","getAisle","1","2","3","handelEnded","list_","index_","Time","stamp","getFullYear","to00","getMonth","getDate","getHours","getMinutes","getSeconds","to000","getMilliseconds","formConfig","label","ready","registered","cached","updatefound","updated","offline","error","IsPhone","navigator","userAgent","App","$mount","sDom","eDom","sDom_","eDom_","hasChild","node","nodeType","childNodes","every","isEmptyTag","textContent","isTag","tagName","child","targetTagNames","endAt","toLowerCase","tag","newNode","removeChild","nodeName","targetType","contains","createTextNode","template","oldDom","newDom","insertBefore","nextSibling","isTagNode","text","textNode","end","start_","mid_","end_","nodeValue","insertAfter","prototype","getType","findEqualByKey","deleteEqualByKey","replaceEqualByKey","concatListEqual","lists","subLists","ListEqual","keyMap","keyMap_","ShortCutAbstract","keyNum","makeShortCutInitFn","ShortCut","maps","describeMaps","wrap","triggered","slef","$body","querySelector","hasInited","ctrlKey","altKey","shiftKey","which","describeMaps_","cmd","cacheTriggered","message","setTimeout","triggeredCacheLength","toast","shortCut","soundMap","change","confirm","done","warning","CacheList","playEnd","getAudio","volumeMap","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","d","definition","o","enumerable","globalThis","Function","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","143","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"js/app.eaa9dbfc.js","sourcesContent":["import {DomUtil} from \"@/tools/DomUtil\";\r\nimport {GetType} from \"@/tools/GetType\";\r\nimport {ListEqual} from \"@/tools/ListEqual\";\r\n\r\ninterface ITrackListItem {\r\n  key: string;\r\n  name: string;\r\n  defValue: number;\r\n  value: number;\r\n  valueType: string;\r\n  min: number;\r\n  max: number;\r\n  desc: string;\r\n}\r\nclass TrackItem implements ITrackListItem{\r\n\r\n  key: string;\r\n  name: string;\r\n  defValue: number;\r\n  value: number;\r\n  valueType: string;\r\n  min: number;\r\n  max: number;\r\n  desc: string;\r\n  trackList: TrackList;\r\n\r\n  constructor(trackList: TrackList, key: string, name: string, defValue: number, value: number, valueType: string, min: number, max: number, desc: string) {\r\n    this.trackList = trackList;\r\n    this.key = key;\r\n    this.name = name;\r\n    this.defValue = defValue;\r\n    this.value = value;\r\n    this.valueType = valueType;\r\n    this.min = min;\r\n    this.max = max;\r\n    this.desc = desc;\r\n  }\r\n\r\n  public enc() {\r\n    this.setVal(this.value + 1);\r\n    return this;\r\n  }\r\n\r\n  public dec() {\r\n    this.setVal(this.value - 1);\r\n    return this;\r\n  }\r\n  public setMin(){\r\n    this.setVal(this.min);\r\n    return this;\r\n  }\r\n  public setMax(){\r\n    this.setVal(this.max);\r\n    return this;\r\n  }\r\n  public setVal (val: number){\r\n    if (val > this.max) val = this.max;\r\n    if (val < this.min) val = this.min;\r\n    this.value = val;\r\n    this.trackList.savePresets('');\r\n    return this;\r\n  }\r\n  public reset(){\r\n    this.setVal(this.defValue);\r\n    return this;\r\n  }\r\n}\r\n\r\nexport class Track {\r\n  static commonConfigs: { [index: string]: [string, string, number, string, number, number, string][] } = {};\r\n  static name_ = 'Track';\r\n\r\n  trackList: TrackList;\r\n  current: number;\r\n  playing: number;\r\n  list: TrackItem[];\r\n  name: string;\r\n  constructor(name: string, trackList: TrackList, defaultValue: { [index: string]: number } = {}) {\r\n    // @ts-ignore;\r\n    this.name = (name || this.constructor.name_);\r\n    this.current = 0;\r\n    this.playing = 0;\r\n    this.trackList = trackList;\r\n    this.list = [];\r\n    // @ts-ignore; // this.constructor.name_ 由于代码混淆导致 this.constructor.name 与预期不符， 故手动设置\r\n    Track.commonConfigs[this.constructor.name_].forEach(item => {\r\n      const [key, name, defValue, valueType, min, max, desc] = item;\r\n      const defaultVal = defaultValue[key];\r\n      this.list.push(new TrackItem(trackList, key, name, defValue, defaultVal !== undefined ? defaultVal : defValue, valueType, min, max, desc));\r\n    });\r\n\r\n    this.list.forEach(item => {\r\n      Object.defineProperty(this, item.key, {\r\n        get() {\r\n          return item.value;\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  rename(name: string){\r\n    console.log(name)\r\n    this.name = name;\r\n    this.trackList.savePresets('');\r\n  }\r\n  get len() {\r\n    return this.list.length\r\n  }\r\n  public getVal(configName: string){\r\n    return ListEqual.findByKey(this.list, configName).value;\r\n  }\r\n\r\n  // 设置轨道\r\n  public setIndex(index: number) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n    return this;\r\n  }\r\n\r\n  // 设置轨道， 打开轨道编辑器\r\n  public play() {\r\n    this.playing = this.current;\r\n    return this;\r\n  }\r\n\r\n  public prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n    return this;\r\n  }\r\n\r\n  public next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n    return this;\r\n  }\r\n\r\n  public enc() {\r\n    const thisItem = this.list[this.current];\r\n    thisItem.enc();\r\n    return this;\r\n  }\r\n\r\n  public dec() {\r\n    const thisItem = this.list[this.current];\r\n    thisItem.dec();\r\n    return this;\r\n  }\r\n  setMin(){\r\n    const thisItem = this.list[this.current];\r\n    thisItem.setMin();\r\n    return this;\r\n  }\r\n  setMax(){\r\n    const thisItem = this.list[this.current];\r\n    thisItem.setMax();\r\n    return this;\r\n  }\r\n  public setVal (val: number){\r\n    const thisItem = this.list[this.current];\r\n    thisItem.setVal(val);\r\n    return this;\r\n  }\r\n  public reset(){\r\n    const thisItem = this.list[this.current];\r\n    thisItem.reset();\r\n    return this;\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nfunction createTrackClass(className: string) {\r\n  const string = `\r\nclass ${className} extends Track {\r\n  static name_ = '${className}';\r\n  constructor() {\r\n    const [...rest] = arguments;\r\n    super(...rest);\r\n  }\r\n\r\n  static setConfig(key, name, defaultValue, valueType, min, max, desc) {\r\n    Track.commonConfigs.${className} || (Track.commonConfigs.${className} = []);\r\n    Track.commonConfigs.${className}.push([key, name, defaultValue, valueType, min, max, desc]);\r\n    return ${className};\r\n  }\r\n}`;\r\n  return eval(`(${string})`);\r\n}\r\n\r\n\r\n\r\n\r\nconst trackConfigs = [\r\n  {\r\n    name: 'CommonOptionsTrack', required: true, list: [\r\n      ['CanvasView', '开启音频可视化轨道', 0, 'int', 0, 1, '是否启用'],\r\n      ['CanvasPic', '开启背景轨道', 0, 'int', 0, 1, '是否启用'],\r\n      ['CanvasPicMalfunction', '开启背景轨道故障特效', 0, 'int', 0, 1, '是否启用'],\r\n      ['CanvasText', '开启歌词轨道', 0, 'int', 0, 1, '是否启用'],\r\n      ['CanvasTextMalfunction', '开启歌词轨道故障特效', 0, 'int', 0, 1, '是否启用'],\r\n      ['changeBG_When_LRC_Changed', '背景歌词同步切换', 1, 'int', 0, 1, '是否启用'],\r\n      ['VideoView', '开启视频轨道1', 0, 'int', 0, 1, '是否启用'],\r\n      ['VideoView1', '开启视频轨道2', 0, 'int', 0, 1, '是否启用'],\r\n      ['DomClock', '显示时钟', 0, 'int', 0, 1, '是否启用'],\r\n      ['gameUI', '显示游戏界面', 0, 'int', 0, 1, '是否启用'],\r\n      ['gameScene', '显示游戏场景', 0, 'int', 0, 1, '是否启用'],\r\n    ]\r\n  },\r\n  {\r\n    name: 'GameTrack', required: true, list: [\r\n      ['RhythmPointVolumeFloatRange', '节奏点浮动范围', 1, 'int', 0, 30, '值越大， 则节奏点越少'],\r\n      ['RhythmPointTimeout', '节奏点最小间隔', 15, 'int', 0, 30, 'timeout = (num * 10) ms'],\r\n      ['RhythmPointRemoveFloatRange', '节奏点消除范围', 20, 'int', 5, 60, 'range = (num * 10)'],\r\n      ['RhythmPointMissTipSound', 'miss提示音', 0, 'int', 0, 1, '是否开启'],\r\n      ['RhythmPointCenterPointOffset', '轨道偏移量', -30, 'int', -60, 60, '轨道偏移量'],\r\n      ['trick', '开启作弊模式', 0, 'int', 0, 1, '是否开启'],\r\n    ]\r\n  },\r\n  {\r\n    multiple: true,\r\n    required: true,\r\n    name: 'CanvasTrack', list: [\r\n      ['disable', '是否启用', 0, 'int', 0, 1, '是否启用'],\r\n      ['renderType', '渲染方式', 2, 'int', 0, 3, '渲染方式'],\r\n      ['direction', '渲染方向', 0, 'int', 0, 1, '渲染方式'],\r\n      ['baseSizeType', '基础尺寸单位', 0, 'int', 0, 1, '0: 屏幕较小边， 1： 屏幕较大边'],\r\n      ['noZero', '删除无效数据', 1, 'int', 0, 1, '将频谱数据复制一份， 并逆向拼接在源数据后面'],\r\n      ['copyData', '复制并反向数据', 1, 'int', 0, 1, '将频谱数据复制一份， 并逆向拼接在源数据后面'],\r\n      ['showDataBefore', '展示均衡前的数据', 0, 'int', 0, 1, '展示均衡前的数据'],\r\n      ['midPositionX', 'X中心位子', 50, 'int', 0, 100, '绘制中心位于屏幕位置， 0在最左， 100在最右'],\r\n      ['midPositionY', 'Y中心位子', 50, 'int', 0, 100, '绘制中心位于屏幕位置， 0在最上， 100在最下'],\r\n      ['clearPrevView', '保留上次渲染', 70, 'int', 0, 100, '保留上次绘制（百分比）'],\r\n      ['mainRadius', '基线距中心点位置（Y轴）', 25, 'int', -100, 100, '圆形时为半径, 百分比基于基础尺寸单位'],\r\n      ['avrLevelMainRadiusModify', '频谱均值基线距离修正系数', 25, 'int', 0, 100, '基线随频谱修正系数（百分比）'],\r\n      ['mainRadiusOpacity', '基线透明度', 75, 'int', 0, 100, '基线透明度'],\r\n      ['mainRadiusLineWidth', '基线宽度', 3, 'int', 0, 100, '基线宽度， 千分比基准此村'],\r\n      ['floatRange', '频谱波动范围', 2, 'int', -10, 10, '频谱波动范围 相对基础尺寸 百分制'],\r\n      ['avrLevelFloatRangeModify', '频谱均值波动范围修正系数', 25, 'int', 0, 100, '基线随频谱修正系数（百分比）'],\r\n      ['stepModify', '频谱间隔修正', 10, 'int', 0, 100, ' 十分比预设'],\r\n      ['lineLineWidth', '频谱宽度', 3, 'int', 0, 100, ' 千分比预设'],\r\n      ['dataModify', '频谱修正系数', 15, 'int', 0, 100, '十分比预设'],\r\n      ['dataOffsetModify', '频谱偏移修正系数', 6, 'int', -100, 100, '百分比预设'],\r\n      ['minHeightModify', '频谱最小修正系数', -0, 'int', -300, 100, '百分比预设'],\r\n      ['threshold', '阈值', 7, 'int', 0, 100, '百分比预设']\r\n    ]\r\n  },\r\n  {name: 'VideoTrack', list: []}\r\n];\r\n\r\n\r\nexport const biquadFilterFrequency = [31, 63, 125, 250, 500, 1000, 2000, 4000, 8000, 16000, 20000, 24000];\r\nconst balanceTrackConfigs = {\r\n  name: 'BalanceTrack',\r\n  required: true,\r\n  list: biquadFilterFrequency.map((item, index) => [`balance${index}`, `${item}`, 0, 'int', -12, 12, 'db'])\r\n};\r\ntrackConfigs.push(balanceTrackConfigs);\r\n\r\n\r\n\r\nexport class ModifyManager {\r\n  updateCommonOptions?: Function;\r\n  list: [TrackList, ...Track[]] | [];\r\n  playing: number;\r\n  current: number;\r\n\r\n  constructor(updateCommonOptions?: Function) {\r\n    this.list = [];\r\n    this.playing = 0;\r\n    this.current = 0;\r\n    this.setList([new TrackList(this)]);\r\n    this.setIndex(0);\r\n    updateCommonOptions && (this.updateCommonOptions = updateCommonOptions);\r\n    this.init();\r\n  }\r\n  getTrackByName(name: TTrackClass){\r\n    // @ts-ignore;\r\n    return this.list[0].list.find(item => item.constructor.name_ === name);\r\n  }\r\n\r\n\r\n  init() {\r\n    // @ts-ignore;\r\n    this.updateCommonOptions && this.updateCommonOptions();\r\n    return this;\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n  savePresets() {\r\n    this.list[0]?.savePresets('');\r\n    return this;\r\n  }\r\n\r\n  exportPresets(){\r\n    this.list[0]?.exportPresets();\r\n    return this;\r\n  }\r\n  importPresets(presets: any){\r\n    this.list[0]?.importPresets(presets);\r\n    return this;\r\n  }\r\n  setList(list: [TrackList, ...Track[]]) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    return this;\r\n  }\r\n\r\n  replace(index: number, replacer: Track) {\r\n    this.list.splice(index, 1, replacer);\r\n    return this;\r\n  }\r\n\r\n  // 设置轨道\r\n  setIndex(index: number) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n    return this;\r\n  }\r\n\r\n  // 设置轨道， 打开轨道编辑器\r\n  play() {\r\n    this.playing = this.current;\r\n    if (this.current === 0) {\r\n      // @ts-ignore;\r\n      this.replace(1, this.list[this.current])\r\n    }\r\n    this.list[this.current].play();\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n    return this;\r\n  }\r\n\r\n  enc() {\r\n    // @ts-ignore;\r\n    this.list[this.current] && this.list[this.current].enc();\r\n    this.list[0]?.savePresets('');\r\n    return this;\r\n  }\r\n\r\n  dec() {\r\n    // @ts-ignore;\r\n    this.list[this.current] && this.list[this.current].dec();\r\n    this.list[0]?.savePresets('');\r\n    return this;\r\n  }\r\n\r\n  prevItem() {\r\n    this.list[this.current] && this.list[this.current].prev();\r\n    return this;\r\n  }\r\n\r\n  nextItem() {\r\n    this.list[this.current] && this.list[this.current].next();\r\n    return this;\r\n  }\r\n\r\n  up() {\r\n\r\n    // @ts-ignore;\r\n    this.list[0].prev();\r\n    return this;\r\n  }\r\n\r\n  down() {\r\n    // @ts-ignore;\r\n    this.list[0].next();\r\n    return this;\r\n  }\r\n\r\n  add() {\r\n    // @ts-ignore;\r\n    this.list[0]?.add.call(this.list[0], ...arguments);\r\n    // @ts-ignore;\r\n    this.list[0]?.savePresets('');\r\n    return this;\r\n  }\r\n\r\n  delete() {\r\n    // @ts-ignore;\r\n    this.list[0].delete.call(this.list[0], ...arguments);\r\n    // @ts-ignore;\r\n    this.list[0]?.savePresets();\r\n    return this;\r\n  }\r\n\r\n  copy() {\r\n    // @ts-ignore;\r\n    this.list[0].copy.call(this.list[0], ...arguments);\r\n    // @ts-ignore;\r\n    this.list[0].savePresets();\r\n    return this;\r\n  }\r\n}\r\n\r\n\r\nfunction createALink (data: any, fileName: string, parentNode?: Element): Element{\r\n  const blob = new Blob([data], {type:\"text/plain;charset=utf-8\"});\r\n  const url = URL.createObjectURL(blob);\r\n  const link: Element = DomUtil.node('a', fileName);\r\n  // @ts-ignore;\r\n  link.href = url;\r\n  // @ts-ignore;\r\n  link.download = fileName;\r\n  DomUtil.append(parentNode || document.body, link);\r\n  return link;\r\n}\r\n\r\n\r\n// 轨道列表管理器\r\n// 可以是 canvas 轨道 和视频轨道 // 左侧第一栏\r\nclass TrackList {\r\n  static name_ = 'TrackList';\r\n\r\n  playing: number;\r\n  current: number;\r\n  parent: ModifyManager;\r\n  list: (ModifyManager|Track)[];\r\n\r\n  constructor(parent: ModifyManager) {\r\n    this.list = [];\r\n    this.parent = parent;\r\n    this.playing = 0;\r\n    this.current = 0;\r\n    this.loadPresets();\r\n\r\n    constructorList.forEach((constructor) => {\r\n      // @ts-ignore;\r\n      const constructorName = constructor.name_;\r\n      // @ts-ignore;\r\n      const hasDto = this.list.some(i => i.constructor.name_ === constructorName);\r\n      if (!hasDto) {\r\n        // @ts-ignore;\r\n        this.add({type: constructorName, name: constructorName})\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n\r\n  add(options: {\r\n    type?: 'CanvasTrack' | 'VideoTrack' | 'CommonOptionsTrack' | 'BalanceTrack' | 'GameTrack';\r\n    name?: string;\r\n    data?: {[index: string]: number}\r\n  } = {}, len = 1) {\r\n    const {type = 'CanvasTrack', name, data} = options;\r\n    for (let i = 0; i < len; i++) {\r\n      // @ts-ignore;\r\n      TrackClass[type] && this.list.push(new TrackClass[type](name, this, data));\r\n    }\r\n    this.setIndex(this.len - 1);\r\n    return this;\r\n  }\r\n\r\n  delete() {\r\n    const item = this.list[this.current];\r\n    // @ts-ignore;\r\n    const className = item.constructor.name_;\r\n    const config = trackConfigs.find(config => config.name === className);\r\n    // 不是多项的不让删， 最后一条不让删\r\n    // @ts-ignore;\r\n    if (!config.multiple || this.list.filter(item => item.constructor.name_ === className).length<=1) {\r\n      return;\r\n    }\r\n    if (item) {\r\n      this.list.splice(this.current, 1);\r\n      this.setIndex(0);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  copy() {\r\n    const item = this.list[this.current];\r\n    // @ts-ignore;\r\n    const className = item.constructor.name_;\r\n    const config = trackConfigs.find(config => config.name === className);\r\n    // 不是多项的不让复制\r\n    // @ts-ignore;\r\n    if (!config.multiple) return;\r\n    // @ts-ignore;\r\n    if (item && !['CommonOptionsTrack', 'BalanceTrack'].includes(item.constructor.name_)) {\r\n      // @ts-ignore;\r\n      this.list.splice(this.current, 0, new item.constructor(item.name + 'Copy', this, item));\r\n      this.setIndex(this.current + 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  setList(list: (Track|ModifyManager)[]) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    return this;\r\n  }\r\n\r\n  // 设置轨道\r\n  setIndex(index: number) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n    return this;\r\n  }\r\n\r\n  // 设置轨道， 打开轨道编辑器\r\n  play() {\r\n    this.playing = this.current;\r\n    // @ts-ignore;\r\n    this.parent.replace(1, this.list[this.current]);\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n    return this;\r\n  }\r\n\r\n  importPresets(presets: any){\r\n    presets.forEach((item: any, index: number) => {\r\n      // @ts-ignore;\r\n      const prev = this.list.find(item_ => item_.constructor.name_ === item.type);\r\n      // @ts-ignore;\r\n      if (prev && !['CanvasTrack'].includes(item.type)) {\r\n        prev.list.forEach((val: any) => {\r\n          const curVal = item.data[val.key];\r\n          GetType.isEmpty(curVal) || (val.value = curVal)\r\n        })\r\n      } else {\r\n        this.add(item);\r\n      }\r\n    });\r\n    this.savePresets('');\r\n    // @ts-ignore;\r\n    location.reload();\r\n    return this;\r\n  }\r\n  exportPresets(){\r\n    const result = this.list.map(item => {\r\n      const data:{[idnex: string]: number} = {};\r\n      // @ts-ignore;\r\n      item.list.forEach((key: ITrackListItem) => {\r\n        // @ts-ignore;\r\n        data[key.key] = item[key.key];\r\n      });\r\n      // @ts-ignore;\r\n      return {name: item.name, data, type: item.constructor.name_}\r\n    });\r\n\r\n    const $a = createALink(JSON.stringify(result), `dy_player.preset`);\r\n    // @ts-ignore;\r\n    $a.click();\r\n    DomUtil.remove($a);\r\n  }\r\n  savePresets(name: string) {\r\n    const result = this.list.map(item => {\r\n      const data:{[idnex: string]: number} = {};\r\n      // @ts-ignore;\r\n      item.list.forEach((key: ITrackListItem) => {\r\n        // @ts-ignore;\r\n        data[key.key] = item[key.key];\r\n      });\r\n      // @ts-ignore;\r\n      return {name: item.name, data, type: item.constructor.name_}\r\n    });\r\n\r\n    this.parent?.updateCommonOptions && this.parent?.updateCommonOptions();\r\n    localStorage.setItem('configPresets', JSON.stringify(result));\r\n    return this;\r\n  }\r\n\r\n  loadPresets() {\r\n    try {\r\n      const presets = JSON.parse(localStorage.getItem('configPresets') || '[]');\r\n\r\n      presets.length || presets.push({});\r\n\r\n      constructorList.forEach(constructor => {\r\n        // @ts-ignore;\r\n        const constructorName = constructor.name_;\r\n        // @ts-ignore;\r\n        const hasDot = presets.some(i => i.type === constructorName);\r\n        if (!hasDot) {\r\n          // @ts-ignore;\r\n          this.add({type: constructorName, name: constructorName})\r\n        }\r\n      });\r\n\r\n      // @ts-ignore;\r\n      presets.forEach(item => {\r\n        this.add(item);\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      console.log('load presets fail.');\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\n\r\nconst TrackClass: {[index: string]: Track} = {\r\n};\r\ntype TTrackClass = keyof typeof TrackClass;\r\ntrackConfigs.forEach(config => {\r\n  const track = TrackClass[config.name] = createTrackClass(config.name);\r\n  config.list.forEach(conf => {\r\n    track.setConfig(...conf)\r\n  });\r\n\r\n});\r\nconst constructorList: Track[] = trackConfigs.filter(config => config.required).map(config =>  TrackClass[config.name]);\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Index')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('NavBar'),_c('div',{staticClass:\"box-wrap\"},[_c('MusicSearchBox'),_c('MusicLocalBox'),_c('ModifyBox')],1),_c('div',{staticClass:\"canvas-view-wrap\"},[(_vm.commonOptions.gameUI)?_c('GameUI'):_vm._e(),(_vm.commonOptions.CanvasPic)?_c('CanvasPic'):_vm._e(),(_vm.commonOptions.CanvasText)?_c('CanvasText'):_vm._e(),_vm._l((_vm.modifyManager.list[0].list),function(item,index){return [(_vm.commonOptions.CanvasView && item && item.constructor.name_ === 'CanvasTrack')?_c('CanvasView',{attrs:{\"config\":item}}):_vm._e()]})],2),(_vm.commonOptions.VideoView)?_c('VideoView',{attrs:{\"index\":0}}):_vm._e(),(_vm.commonOptions.VideoView1)?_c('VideoView',{attrs:{\"index\":1}}):_vm._e(),(_vm.commonOptions.DomClock)?_c('DomClock'):_vm._e(),(_vm.musicData.realTimeData.data)?_c('ThreeView'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {MusicConfig} from \"./MusicConfig\";\r\nimport {MusicVisualizer} from \"./MusicVisualizer\";\r\n\r\n// @ts-ignore;\r\nimport {ModifyManager} from \"./canvasConfig.js\";\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\nimport {Sound} from \"@/tools/Sound\"\r\n// @ts-ignore;\r\n\r\n\r\nclass EventTarget_ {\r\n  listeners: {[index: string]: any} = {};\r\n  public addEventListener(type: string, callback: Function) {\r\n    if(!(type in this.listeners)) {\r\n      this.listeners[type] = [];\r\n    }\r\n    this.listeners[type].push(callback);\r\n  }\r\n  public removeEventListener(type: string, callback: Function): any {\r\n    if(!(type in this.listeners)) {\r\n      return;\r\n    }\r\n    const stack = this.listeners[type];\r\n    for(let i = 0, l = stack.length; i < l; i++) {\r\n      if(stack[i] === callback){\r\n        stack.splice(i, 1);\r\n        return this.removeEventListener(type, callback);\r\n      }\r\n    }\r\n  }\r\n  public dispatchEvent(event: Event) {\r\n    if(!(event.type in this.listeners)) {\r\n      return;\r\n    }\r\n    const stack = this.listeners[event.type];\r\n    // @ts-ignore;\r\n    event.target = this;\r\n    for(let i = 0, l = stack.length; i < l; i++) {\r\n      stack[i].call(this, event);\r\n    }\r\n  }\r\n}\r\n\r\nexport class MusicDataFlags {\r\n  dataFlag: number = 0;\r\n  shockFlag: number = 0;\r\n}\r\n\r\nclass RhythmPoint{\r\n  isRhythmPoint: boolean;\r\n  vol: number;\r\n  constructor(vol: number, isRhythmPoint: boolean){\r\n    this.vol = vol;\r\n    this.isRhythmPoint = isRhythmPoint;\r\n  }\r\n}\r\n\r\ntype IColor = [number, number, number, number] | [number, number, number];\r\n\r\nclass EventTar {\r\n  fnMap:{[index: string]: Function[]} = {};\r\n  addEventListener(type: string, callback: Function){\r\n    this.fnMap[type] || (this.fnMap[type] = []);\r\n    this.fnMap[type].push(callback)\r\n  }\r\n  dispatchEvent(ev: Event){\r\n    const fns = this.fnMap[ev.type];\r\n    fns && fns.forEach(i => i(ev));\r\n  }\r\n}\r\nclass MVData{\r\n  event: EventTar = new EventTar();\r\n  prevAddSpeed: number = 0;\r\n  prevAvrLevel: number = 0;\r\n  data?: Uint8Array;\r\n  avrLevel: number = 0;\r\n  total: number = 0;\r\n  addSpeed: number = 0;\r\n  soundTrackArr: RhythmPoint[] = [];\r\n  soundTrackArrMaxLen: number = 100;\r\n  shockNum: number = 0;\r\n  modifyManager: ModifyManager;\r\n  constructor(modifyManager: ModifyManager){\r\n    this.modifyManager = modifyManager;\r\n  }\r\n  update(data: Uint8Array){\r\n    const {soundTrackArr, prevAvrLevel, prevAddSpeed} = this;\r\n    this.data = data;\r\n    this.total = data.reduce((a = 0, b = 0) => (a + b));\r\n    const avrLevel = this.avrLevel = this.total / data.length;\r\n    const addSpeed = this.addSpeed = avrLevel - prevAvrLevel;\r\n\r\n    const RhythmPointVolumeFloatRange = this.modifyManager.getTrackByName('GameTrack').getVal('RhythmPointVolumeFloatRange');\r\n    /**\r\n     * 转折点， 声音开始变大的第一帧。 乐器的吹奏、敲击（或者人发声）的瞬间， 大概率会使音量提高。\r\n     * 所以就是 音量从减小， 突变到开始升高表示是个节奏点；\r\n     */\r\n    const isRhythmPoint = prevAddSpeed <= 0 && addSpeed > RhythmPointVolumeFloatRange / 10;\r\n\r\n    const rhythmPoint = new RhythmPoint(avrLevel, isRhythmPoint);\r\n    soundTrackArr.push(rhythmPoint);\r\n    if (isRhythmPoint) {\r\n      this.shockNum ++;\r\n      const ev = new Event('shock');\r\n      // @ts-ignore;\r\n      ev.rhythmPoint = rhythmPoint;\r\n      this.event.dispatchEvent(ev);\r\n    }\r\n\r\n    if (soundTrackArr.length > this.soundTrackArrMaxLen) {\r\n      soundTrackArr.shift();\r\n    }\r\n\r\n    this.prevAddSpeed = addSpeed;\r\n    this.prevAvrLevel = avrLevel;\r\n\r\n    this.event.dispatchEvent(new Event('update'));\r\n  }\r\n}\r\n\r\nexport class MusicData {\r\n  realTimeData: MVData;\r\n  originData: MVData;\r\n  currentImgAviColor: IColor = [0,0,0,0];\r\n  calculateColors: [IColor, IColor] = [[255, 255, 255], [255, 255, 255]];\r\n  modifyManager: ModifyManager;\r\n  constructor(\r\n    modifyManager: ModifyManager\r\n  ){\r\n    this.modifyManager = modifyManager;\r\n    this.realTimeData = new MVData(modifyManager);\r\n    this.originData = new MVData(modifyManager);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nclass GameScore{\r\n  static prevNode?: Node;\r\n  constructor(score: number | string){\r\n    const gameScore = DomUtil.node('div');\r\n    gameScore.classList.add('game-score');\r\n    gameScore.innerHTML = score.toString();\r\n    DomUtil.append(document.body, gameScore);\r\n    GameScore.prevNode && DomUtil.remove(GameScore.prevNode);\r\n    GameScore.prevNode = gameScore;\r\n  }\r\n}\r\n\r\n\r\nclass GameCombo{\r\n  static prevNode?: Node;\r\n  constructor(combo: number){\r\n    GameCombo.prevNode && DomUtil.remove(GameCombo.prevNode);\r\n    GameCombo.prevNode = undefined;\r\n    if (combo > 5) {\r\n      const gameScore = DomUtil.node('div');\r\n      gameScore.classList.add('game-combo');\r\n      gameScore.innerHTML = `${combo || 0} x combo`;\r\n      DomUtil.append(document.body, gameScore);\r\n      GameCombo.prevNode = gameScore;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nclass GameNode {\r\n  gameList: GameList;\r\n  dom: Node;\r\n  score?: number;\r\n  time: number;\r\n  isDebug?: boolean = false;\r\n  modifyManager: ModifyManager;\r\n  constructor(\r\n    gameList: GameList,\r\n    rhythmPoint: RhythmPoint,\r\n    isDebug: boolean = false,\r\n    gameInner: Element,\r\n    modifyManager: ModifyManager,\r\n  ){\r\n    this.gameList = gameList;\r\n    this.time = Date.now();\r\n    this.modifyManager = modifyManager;\r\n    const dom = this.dom = DomUtil.node('div');\r\n    dom.className = 'game-item';\r\n\r\n    if (isDebug) {\r\n      this.isDebug = isDebug;\r\n      // @ts-ignore;\r\n      dom.style = `animation: gamingDebug linear 0.8s;`;\r\n    }\r\n\r\n    const hueRange = 120;\r\n    const deg = rhythmPoint.vol * this.modifyManager.getTrackByName('GameTrack').getVal('RhythmPointCenterPointOffset');\r\n\r\n    const innerDom = DomUtil.node('div');\r\n    DomUtil.append(dom, innerDom);\r\n    // @ts-ignore;\r\n      innerDom.style = `\r\n      transform: rotate(${deg}deg) translate(0, calc(${150 + rhythmPoint.vol/3}px));\r\n      background-color: hsl(${90 - hueRange * rhythmPoint.vol / 255}, 50%, 50%);\r\n    `;\r\n    DomUtil.append(gameInner, dom);\r\n\r\n    dom.addEventListener(\"webkitAnimationEnd\", this.endFunction);\r\n    dom.addEventListener(\"animationend\", this.endFunction);\r\n  }\r\n  calculateScore(currentTime: number){\r\n    const {gameList, time} = this;\r\n    this.score = Math.abs(currentTime - time - gameList.delay);\r\n  }\r\n  remove(){\r\n    const {dom} = this;\r\n    this.gameList.setCurrentScore(this.score);\r\n\r\n    if (this.score !== undefined) {\r\n      Sound.play(\"done\");\r\n    }else {\r\n      this.modifyManager.getTrackByName('GameTrack').getVal('RhythmPointMissTipSound') && Sound.play('warning');\r\n    }\r\n\r\n    dom.removeEventListener('webkitAnimationEnd', this.endFunction);\r\n    dom.removeEventListener('animationend', this.endFunction);\r\n    dom && DomUtil.remove(dom);\r\n  }\r\n  endFunction = (ev?: Event) => {\r\n    if (this.isDebug) {\r\n      this.calculateScore(Date.now())\r\n    }\r\n    this.remove();\r\n    this.gameList.remove(this);\r\n  }\r\n}\r\n\r\n\r\nexport class GameList {\r\n  currentTime: number = 0;\r\n  durationTime: number = 0;\r\n  ended: boolean = false;\r\n  combo: number = 0;\r\n  maxCombo: number = 0;\r\n  currentScore: number = 0;\r\n  totalScore: number = 0;\r\n  total: number = 0;\r\n  missCount: number = 0;\r\n  uselessCount: number = 0;\r\n  mv: MusicVisualizer;\r\n  gameInner: Element;\r\n  modifyManager: ModifyManager;\r\n  public endSong(){\r\n    this.ended = true;\r\n  }\r\n  public startSong(){\r\n    this.ended = false;\r\n    this.currentScore = 0;\r\n    this.totalScore = 0;\r\n    this.total = 0;\r\n    this.combo = 0;\r\n    this.maxCombo = 0;\r\n    this.missCount = 0;\r\n    this.uselessCount = 0;\r\n  }\r\n\r\n  constructor(\r\n    mv: MusicVisualizer,\r\n    gameInner: Element,\r\n    modifyManager: ModifyManager\r\n  ){\r\n\r\n    this.modifyManager = modifyManager;\r\n    this.mv = mv;\r\n    this.delay = this.mv.delay.delayTime.value * 1000\r\n    this.gameInner = gameInner;\r\n  }\r\n  setCombo(isStop: boolean){\r\n    isStop ? (this.combo = 0) : (this.combo ++);\r\n    this.combo > this.maxCombo && (this.maxCombo = this.combo);\r\n    new GameCombo(this.combo);\r\n  }\r\n\r\n  setCurrentScore(score: number | undefined){\r\n    this.currentScore = score || 0;\r\n    this.totalScore += (score || 0);\r\n    const isMiss = score === undefined;\r\n\r\n    isMiss && (this.missCount ++);\r\n    this.setCombo(isMiss);\r\n    new GameScore(isMiss ? 'miss' : `score - ${score}`);\r\n  }\r\n  eventTarget: EventTarget_ = new EventTarget_();\r\n  delay: number;\r\n  buffer: number = 150;\r\n  duration: number = 2000;\r\n  list: GameNode[] = [];\r\n\r\n  find(time: number): GameNode | undefined {\r\n    const {buffer, delay} = this;\r\n    // return this.list[0];\r\n    return this.list.find((item) => Math.abs(time - item.time - delay) < buffer);\r\n  }\r\n  indexOf(gameNode: GameNode){\r\n    return this.list.indexOf(gameNode);\r\n  }\r\n  remove(gameNode: GameNode){\r\n    const index = this.indexOf(gameNode);\r\n    index !== -1 && this.list.splice(index,1);\r\n  }\r\n  createGameNode(rhythmPoint: RhythmPoint, isDebug: boolean = false){\r\n    const gameNode = new GameNode(this, rhythmPoint, isDebug, this.gameInner, this.modifyManager);\r\n    this.list.push(gameNode);\r\n    this.total ++;\r\n    return gameNode;\r\n  }\r\n  setBuffer(buffer: number){\r\n    this.buffer = buffer;\r\n    this.eventTarget.dispatchEvent(new Event('bufferChange'));\r\n  }\r\n  shootGameNode(){\r\n    // 得分 目前时间 - 开始生成时间 - delay\r\n    const time = Date.now();\r\n    const gameNode = this.find(time);\r\n    if (gameNode) {\r\n      gameNode.calculateScore(time);\r\n\r\n      gameNode.endFunction();\r\n    } else {\r\n      this.uselessCount ++;\r\n      new GameScore('userLess press');\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport class GameScene {\r\n  dom: Node;\r\n  time: number;\r\n  modifyManager: ModifyManager;\r\n  constructor(gameData: MVData, musicData: MusicData, gameInner: Element, modifyManager: ModifyManager){\r\n    this.modifyManager = modifyManager;\r\n    this.time = Date.now();\r\n    const dom = this.dom = DomUtil.node('div');\r\n    dom.className = 'game-scene';\r\n    // @ts-ignore;\r\n    let list = [...gameData.data].filter(i => i).filter((x, i) => !(i % 16));\r\n    // list.length || (list = [0]);\r\n    const per = 360 / list.length;\r\n    const deg = musicData.originData.avrLevel * (modifyManager.getTrackByName('GameTrack').getVal('RhythmPointCenterPointOffset') || 0);\r\n    // @ts-ignore;\r\n    dom.innerHTML = list.map((item: number, index: number) => {\r\n      return `<div style=\"transform: rotateZ(${-(index) * per + 180 +deg}deg) translate(0, calc(400px + ${item * 10}px));\"></div>`;\r\n    }).join('');\r\n\r\n    DomUtil.append(gameInner, dom);\r\n\r\n    dom.addEventListener(\"webkitAnimationEnd\", this.destroy);\r\n    dom.addEventListener(\"animationend\", this.destroy);\r\n  }\r\n  remove(){\r\n    const {dom} = this;\r\n    dom.removeEventListener('webkitAnimationEnd', this.destroy);\r\n    dom.removeEventListener('animationend', this.destroy);\r\n    dom && DomUtil.remove(dom);\r\n  }\r\n  destroy = () => {\r\n    this.remove();\r\n  }\r\n}\r\n\r\ninterface UniqueListItem {\r\n  id: number|string;\r\n  [index: string]: any;\r\n}\r\nexport class UniqueList {\r\n  list: UniqueListItem[] = [];\r\n  enter(item: UniqueListItem){\r\n    const index = this.list.findIndex(item_ => item.id === item_.id);\r\n    index === -1 ? this.list.push(item) : this.list.splice(index, 1);\r\n  }\r\n}\r\n\r\nexport class Color {\r\n  static compose(i: number) {\r\n    i = i / 255;\r\n    return Math.round((i + (i - .5) * (1 - i)) * 255);\r\n  }\r\n  static dCompose(i: number, time = 0) {\r\n    i = i / 255;\r\n    let rate = (1 - i);\r\n    while (time + 3) {\r\n      rate *= (1 - i);\r\n      time --;\r\n    }\r\n    return Math.round((1- rate) * 255);\r\n  }\r\n  static getPure(r: number, g: number, b: number, time = 2): [IColor, IColor]{\r\n    // 同时减去最小值\r\n    const min = Math.min(r, g, b);\r\n    const per = min / 256;\r\n    const {dCompose, reduce} = Color\r\n    return [\r\n      [\r\n        dCompose(r, time),\r\n        dCompose(r, time),\r\n        dCompose(r, time)\r\n      ], [\r\n        dCompose(reduce(r, per), time + 2),\r\n        dCompose(reduce(g, per), time + 2),\r\n        dCompose(reduce(b, per), time + 2)\r\n      ]\r\n    ];\r\n  }\r\n  static reduce(r: number, per: number){\r\n    return Math.round((r - 255 * per) / (1  -  per));\r\n  }\r\n}\r\n\r\n\r\n","export function MakeThrottle_(fn: Function, time = 300) {\r\n  let prevTime = 0;\r\n  const ret = function () {\r\n    if (Date.now() - prevTime - ret.time > 0) {\r\n      fn.apply(null, [...arguments]);\r\n      prevTime = Date.now();\r\n    }\r\n  }\r\n  ret.time = time;\r\n  return ret;\r\n}\r\n\r\nexport function MakeThrottle(time = 300) {\r\n  let prevTime = 0;\r\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const fn = target[propertyKey];\r\n    target[propertyKey] = function () {\r\n      if (Date.now() - prevTime - time > 0) {\r\n        fn.apply(target, [...arguments]);\r\n        prevTime = Date.now();\r\n      }\r\n    }\r\n  }\r\n}\r\n","export function appendStyle(compName: string, styleStr: string, forceUpdate: boolean = false) {\r\n  // @ts-ignore;\r\n  appendStyle.cacheMap || (appendStyle.cacheMap = {});\r\n  // @ts-ignore;\r\n  if (forceUpdate || !appendStyle.cacheMap[compName]) {\r\n    const style = document.createElement('style');\r\n    style.innerHTML = styleStr.replace(/<\\/?style.*?>/g, '');\r\n    document.head.appendChild(style);\r\n    // @ts-ignore;\r\n    appendStyle.cacheMap[compName] = styleStr;\r\n  } else {\r\n    console.log(`[style][${compName}] is already exist!`);\r\n  }\r\n}\r\n","import {appendStyle} from \"@/units/appendStyle\";\r\n\r\nappendStyle(``, ``);\r\n\r\nlet canvas = document.createElement('canvas');\r\n\r\nconst pciCanvas = document.createElement('canvas');\r\n\r\n\r\nexport class Picture {\r\n  static pciCanvas = pciCanvas;\r\n  static pciCtx = pciCanvas.getContext(\"2d\");\r\n  compressRate: number;\r\n  canvas: Element;\r\n  ctx: any;\r\n  musicConfig: any;\r\n  cacheList: Element[];\r\n  cacheImg: {[index: string]: number[]};\r\n  constructor(musicConfig: any) {\r\n    this.compressRate = 0.1;\r\n    this.musicConfig = musicConfig;\r\n    this.canvas = canvas = canvas || document.createElement(\"canvas\");\r\n    this.ctx = canvas.getContext('2d');\r\n    this.cacheList = [];\r\n    this.cacheImg = {};\r\n  }\r\n\r\n  static setImage(img: any) {\r\n    const {offsetWidth, offsetHeight} = document.body;\r\n    Picture.pciCanvas.width = offsetWidth;\r\n    Picture.pciCanvas.height = offsetHeight;\r\n    Picture && Picture.pciCtx && Picture.pciCtx.drawImage(img, (offsetWidth - img.width) / 2, (offsetHeight - img.height) / 2, img.width, img.height);\r\n  }\r\n\r\n  static getImageData(x: number, y: number, w: number, h: number):ImageData {\r\n    // @ts-ignore;\r\n    return Picture.pciCtx && Picture.pciCtx.getImageData(x, y, w, h);\r\n  }\r\n\r\n  makeEl() {\r\n    const img = document.createElement(\"img\");\r\n    const {cacheList, cacheImg, ctx, compressRate} = this;\r\n    img.onload = () => {\r\n      Picture.setImage(img);\r\n      if (!cacheImg[img.src]) {\r\n        const {width, height} = img;\r\n        canvas.width = width * compressRate;\r\n        canvas.height = height * compressRate;\r\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        const result:number[][] = [[], [], [], []];\r\n        imageData.data.forEach((color: number, index: number) => {\r\n          result[index % 4].push(color);\r\n        });\r\n        cacheImg[img.src] = [\r\n          aviOfArr(result[0]), aviOfArr(result[1]), aviOfArr(result[2]), aviOfArr(result[3])\r\n        ];\r\n      }\r\n      // @ts-ignore;\r\n      img.noNeedChangeCurrentImgAviColor || (this.musicConfig.currentImgAviColor = cacheImg[img.src]);\r\n      cacheList.push(img);\r\n    };\r\n    return img;\r\n  }\r\n\r\n  load(url: string, noNeedChangeCurrentImgAviColor?: boolean) {\r\n    if (!url) return;\r\n    const img = this.cacheList.shift() || this.makeEl();\r\n    // @ts-ignore;\r\n    img.noNeedChangeCurrentImgAviColor = noNeedChangeCurrentImgAviColor;\r\n    // @ts-ignore;\r\n    img.src = /:\\/\\//.test(url) ? url : `./img/${url}`;\r\n    return img;\r\n  }\r\n}\r\n\r\n\r\nfunction sumOfArr(arr: number[]) {\r\n  return arr.reduce((sum, num) => sum += num, 0);\r\n}\r\n\r\nfunction aviOfArr(arr: number[]) {\r\n  return Math.round(sumOfArr(arr) / arr.length);\r\n}\r\n\r\n","// @ts-ignore;\r\nimport {MakeThrottle} from \"@/utils\";\r\nimport {Picture} from \"@/picture/Picture\";\r\n\r\n\r\n// 图片\r\ninterface IMusicConfigOptions {\r\n  images: string[];\r\n}\r\n\r\nexport class MusicConfig {\r\n  lrc: string = '';\r\n  ended?:Function;\r\n  pictureCanvasCtx?: Picture;\r\n  picDom?: Node = undefined;\r\n  imageGroup: string[][] = [];\r\n\r\n  mouseMoveConf = {x: 0, y: 0, w: 1, h: 1, _x: .5, _y: .5}; // 鼠标位置\r\n  // 当前图片计算出来的色调\r\n  currentImgAviColor: [number, number, number, number] =  [255, 255, 255, 1];\r\n  // 当前主音量\r\n  volume: { _main: number; main: number; } = {\r\n    _main: 1,\r\n    main: .01,\r\n  };\r\n  // 当前图片的链接\r\n  currentImgSrc:string = '';\r\n\r\n  constructor(options: IMusicConfigOptions){\r\n    const {images} = options;\r\n    this.imageGroup = [options.images];\r\n\r\n\r\n    const pictureCanvasCtx = new Picture(this);\r\n    this.setPictureCanvasCtx(pictureCanvasCtx);\r\n\r\n    this.currentImgSrc = images[0];\r\n\r\n    if (this.currentImgSrc) {\r\n      this.changePic(undefined, true);\r\n    }\r\n  }\r\n  handelMouseMove(ev: Event){\r\n    if (ev.target !== document.body) return;\r\n    const {mouseMoveConf} = this;\r\n    // @ts-ignore;\r\n    const enent = ev.touches ? ev.touches[0] : ev;\r\n    // @ts-ignore;\r\n    const [x, y, w, h] = [enent.clientX, enent.clientY, enent.target.offsetWidth, enent.target.offsetHeight];\r\n    const conf = {\r\n      x, y, w, h,\r\n      _x: (x - w / 2) / w,\r\n      _y: (y - h / 2) / h\r\n    };\r\n    Object.keys(mouseMoveConf).forEach(key => {\r\n      // @ts-ignore;\r\n      mouseMoveConf[key] = conf[key]\r\n    })\r\n  }\r\n  @MakeThrottle(1)\r\n  shock() {\r\n    // DesktopImage.play(musicConfig.currentImgSrc);\r\n  };\r\n  setLrc(lrc: string){\r\n    this.lrc = lrc;\r\n  }\r\n  getImageData(x: number, y: number, w: number, h: number): ImageData{\r\n    return Picture.getImageData(x, y, w, h);\r\n  };\r\n\r\n\r\n  changePicGroup(reverse: boolean) {\r\n    const {imageGroup} = this;\r\n    if (imageGroup.length) {\r\n      // @ts-ignore;\r\n      reverse ? imageGroup.unshift(imageGroup.pop()) : imageGroup.push(imageGroup.shift());\r\n    }\r\n    this.changePic();\r\n  }\r\n  // 切换图片 // 传参 isReverse // false 时 下一张 true 时 上一张\r\n  changePic(reverse?: boolean, shockAtOnce?: boolean) {\r\n    const images = this.imageGroup[0];\r\n    if (images.length) {\r\n      // @ts-ignore;\r\n      reverse ? images.unshift(images.pop()) : images.push(images.shift());\r\n      this.currentImgSrc = images[0];\r\n      if (this.pictureCanvasCtx) {\r\n        this.picDom =  this.pictureCanvasCtx.load(this.currentImgSrc);\r\n      }\r\n\r\n      shockAtOnce && this.shock();\r\n    }\r\n\r\n  }\r\n  // 增加音量\r\n  encVolume() {\r\n    let {main} = this.volume;\r\n    main = main + 0.05;\r\n    if (main < 0) main = 0;\r\n    if (main > 1) main = 1;\r\n    this.volume.main = main;\r\n  }\r\n  // 减小音量\r\n  decVolumn() {\r\n    let {main} = this.volume;\r\n    main = main - 0.05;\r\n    if (main < 0) main = 0;\r\n    if (main > 1) main = 1;\r\n    this.volume.main = main;\r\n  }\r\n  setPictureCanvasCtx (pictureCanvasCtx: Picture){\r\n    this.pictureCanvasCtx = pictureCanvasCtx;\r\n  }\r\n}\r\n\r\n\r\n\r\n","// 其他 AudioContext API 移步 https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext\r\n// @ts-ignore;\r\nimport {MusicConfig} from \"src/music/MusicConfig\";\r\n// @ts-ignore;\r\nimport {biquadFilterFrequency} from \"@/components/canvasConfig\";\r\n\r\n\r\n\r\n\r\ninterface IMusicVisualizerConifg {\r\n  musicConfig: MusicConfig;\r\n  size: number;\r\n  draw?: Function;\r\n  volume?: number;\r\n  notClearPrev?: boolean;\r\n}\r\n\r\nfunction createPanner(context: MusicVisualizer){\r\n  const panner = context.ac.createPanner();\r\n  panner.panningModel = 'HRTF';\r\n  panner.distanceModel = 'inverse';\r\n  panner.refDistance = 1;\r\n  panner.maxDistance = 10;\r\n  panner.rolloffFactor = 10;\r\n  panner.coneInnerAngle = 360;\r\n  panner.coneOuterAngle = 0;\r\n  panner.coneOuterGain = 0;\r\n\r\n\r\n  if (panner.orientationX) {\r\n    panner.orientationX.value = 0;\r\n    panner.orientationY.value = 0;\r\n    panner.orientationZ.value = 0;\r\n\r\n    panner.positionX.value = 0;\r\n    panner.positionY.value = 0;\r\n    panner.positionZ.value = 0;\r\n  } else {\r\n    panner.setOrientation && panner.setOrientation(0,0,0);\r\n    panner.setPosition && panner.setPosition(0,0,0)\r\n  }\r\n\r\n  return panner;\r\n}\r\n\r\nfunction initListener (constext: MusicVisualizer){\r\n  const listener = constext.ac.listener;\r\n\r\n  if (listener.forwardX) {\r\n\r\n    listener.forwardX.value = 0;\r\n    listener.forwardY.value = 1;\r\n    listener.forwardZ.value = 0;\r\n\r\n    listener.upX.value = 0;\r\n    listener.upY.value = 0;\r\n    listener.upZ.value = 1;\r\n\r\n\r\n    listener.positionX.value = 0;\r\n    listener.positionY.value = 0;\r\n    listener.positionZ.value = 0;\r\n  } else {\r\n\r\n    listener.setOrientation && listener.setOrientation(0, 1, 0, 0, 0, 1);\r\n    listener.setPosition && listener.setPosition(0, 0, 0)\r\n  }\r\n  return listener;\r\n}\r\n\r\n\r\nfunction createBiquadFilters(context: MusicVisualizer, input: AudioNode, output: AudioNode) {\r\n  // @ts-ignore;\r\n  const biquadFilters =  biquadFilterFrequency.map(frequency => createBiquadFilter(context, frequency));\r\n  // @ts-ignore;\r\n  biquadFilters.forEach(biquadFilter => {\r\n    input.connect(biquadFilter);\r\n    input = biquadFilter;\r\n  });\r\n  input.connect(output);\r\n  return biquadFilters;\r\n}\r\n\r\nfunction createBiquadFilter(context: MusicVisualizer, frequency: number) {\r\n  const biquadFilter = context.ac.createBiquadFilter();\r\n  biquadFilter.type = 'peaking';\r\n  biquadFilter.frequency.value = frequency;\r\n  return biquadFilter;\r\n}\r\n\r\nfunction createAudioSource(context: MusicVisualizer) {\r\n  const $audio = context.$audio = document.createElement('audio');\r\n  const source = context.ac.createMediaElementSource($audio);\r\n  $audio.crossOrigin = \"anonymous\";\r\n  $audio.autoplay = true;\r\n  $audio.volume = context.musicConfig.volume.main;\r\n\r\n  $audio.onended = () => context.musicConfig.ended && context.musicConfig.ended();\r\n  return {$audio, source}\r\n}\r\n\r\n// @ts-ignore;\r\nwindow.dy_player_mv_cache || (window.dy_player_mv_cache = []);\r\n\r\nexport class MusicVisualizer {\r\n  static dtos: MusicVisualizer[] = [];\r\n  duration: number = 1;\r\n  playing: boolean = false;\r\n  stopType: string = '';\r\n  source?: any = null;\r\n  latestPlayTime: number = 0;\r\n  count: number = 0;\r\n  delay: DelayNode;\r\n  musicConfig: MusicConfig;\r\n  gain: GainNode;\r\n  // merger: ChannelMergerNode;\r\n  // splitter: ChannelSplitterNode;\r\n  // gainNodes: { main: GainNode, left: GainNode, right: GainNode };\r\n  size: number;\r\n  analyser: AnalyserNode;\r\n  analyserBefore: AnalyserNode;\r\n\r\n  biquadFilters: BiquadFilterNode[];\r\n  draw?: Function;\r\n  resetLatestPlayTime: boolean = false;\r\n  xhr: XMLHttpRequest;\r\n  panner: PannerNode;\r\n  $audio: HTMLMediaElement;\r\n  isDestoryed: boolean = false;\r\n  // 音频上下文\r\n  ac: AudioContext;\r\n  constructor(obj: IMusicVisualizerConifg) {\r\n    if (!obj.notClearPrev) {\r\n      // @ts-ignore;\r\n      while (dy_player_mv_cache.length){\r\n        // @ts-ignore;\r\n        const cur = dy_player_mv_cache.shift();\r\n        cur.isDestoryed = true;\r\n        cur.destory();\r\n      }\r\n    }\r\n    // @ts-ignore;\r\n    dy_player_mv_cache.push(this);\r\n    // @ts-ignore;\r\n    this.ac = new (window.AudioContext || window.webkitAudioContext)();\r\n\r\n    this.musicConfig = obj.musicConfig;\r\n\r\n    const {$audio, source} = createAudioSource(this);\r\n    this.$audio = $audio;\r\n    $audio.volume = 0.01;\r\n    const panner = this.panner = createPanner(this);\r\n    initListener(this);\r\n\r\n    const analyser = this.analyser = this.ac.createAnalyser();\r\n    const analyserBefore = this.analyserBefore = this.ac.createAnalyser();\r\n    const gain = this.gain = this.ac.createGain();\r\n    gain.gain.value = 0.5;\r\n\r\n\r\n    this.size = obj.size || 8;\r\n    analyserBefore.fftSize = analyser.fftSize = this.size * 2;\r\n\r\n\r\n    const delay = this.delay = this.ac.createDelay();\r\n    delay.delayTime.value = 0.8;\r\n    // navigator.mediaDevices.getUserMedia({audio: true, video: false}).then(res=> {\r\n    //   const node = this.ac.createMediaStreamSource(res);\r\n    //   $audio.autoplay = false;\r\n    //   node.connect(analyserBefore);\r\n    // });\r\n\r\n\r\n    source.connect(analyserBefore);\r\n    // 音源 -> 滤波器\r\n    // @ts-ignore;\r\n    this.biquadFilters = createBiquadFilters(this, analyserBefore, delay);\r\n\r\n    delay.connect(analyser);\r\n    analyser.connect(panner); // 最终听到的\r\n    panner.connect(gain);\r\n    gain.connect(this.ac.destination);\r\n\r\n\r\n    // ajax\r\n    this.xhr = new XMLHttpRequest();\r\n    this.draw = obj.draw;\r\n\r\n    obj.volume && this.changeVolume(obj.volume);\r\n    this.visualize();\r\n  }\r\n\r\n  load(url: string, fun: Function) {\r\n    this.stopType = '';\r\n    this.playing = false;\r\n    this.xhr.abort();\r\n    this.xhr.open(\"GET\", url);\r\n    this.xhr.responseType = \"arraybuffer\";\r\n    this.xhr.onload = () => {\r\n      fun(this.xhr.response);\r\n    };\r\n    this.xhr.send();\r\n  };\r\n  destory(){\r\n    this.$audio && this.$audio.pause();\r\n    this.ac.suspend();\r\n  }\r\n\r\n\r\n// BaseAudioContext.decodeAudioData()用来生成AudioBuffer\r\n// AudioBuffer供AudioBufferSourceNode使用，这样，AudioBufferSourceNode才可以播放音频数据\r\n  decode(arrayBuffer: ArrayBuffer, fun: Function) {\r\n    this.ac.decodeAudioData(arrayBuffer, function (buffer: any) {\r\n      fun(buffer);\r\n    }, function (err: Error) {\r\n      console.log(err);\r\n    });\r\n  };\r\n\r\n  play(path: ArrayBuffer | string) {\r\n    const n = ++this.count;\r\n    this.source && this.source[this.source.stop ? \"stop\" : \"noteOff\"](); // 开始前先暂停之前音频的播放，防止多份音频同时播放\r\n    this.resetLatestPlayTime = true;\r\n\r\n    if (path instanceof ArrayBuffer) {\r\n      this.decode(path, (buffer: ArrayBuffer) => {\r\n        if (n !== this.count) return;\r\n        const bufferSource: AudioBufferSourceNode = this.ac.createBufferSource();\r\n        // 将解码成功后的buffer赋值给bufferSource的buffer属性\r\n        // @ts-ignore;\r\n        bufferSource.buffer = buffer;\r\n        // bufferSource.loop = true;\r\n        bufferSource.connect(this.analyserBefore);\r\n        // @ts-ignore;\r\n        bufferSource[bufferSource.start ? \"start\" : \"noteOn\"](0);\r\n        this.source = bufferSource;\r\n        this.resetLatestPlayTime && (this.latestPlayTime = this.ac.currentTime);\r\n      });\r\n    } else {\r\n      // @ts-ignore;\r\n      if (window.isPhone) {\r\n        this.load(path, (arrayBuffer: ArrayBuffer) => {\r\n          if (n !== this.count) return;\r\n          this.decode(arrayBuffer, (buffer: ArrayBuffer) => {\r\n            this.playing = true;\r\n            if (n !== this.count) return;\r\n            const bufferSource: AudioBufferSourceNode = this.ac.createBufferSource();\r\n            // @ts-ignore;\r\n            bufferSource.buffer = buffer;\r\n            bufferSource.connect(this.analyserBefore);\r\n            // @ts-ignore;\r\n            bufferSource[bufferSource.start ? \"start\" : \"noteOn\"](0);\r\n            this.source = bufferSource;\r\n            bufferSource.onended = () => {\r\n              if (this.stopType) {\r\n              } else {\r\n                this.musicConfig.ended && this.musicConfig.ended();\r\n              }\r\n            };\r\n            this.resetLatestPlayTime && (this.latestPlayTime = this.ac.currentTime);\r\n          });\r\n        });\r\n      } else {\r\n        if (process.env.VUE_APP_DE_PLAYER_ENV === 'prod') {\r\n          this.load(path, (res: any) => {\r\n            const {ac} = this;\r\n            const source = ac.createBufferSource();\r\n            ac.decodeAudioData(res, function (decodeData) {\r\n              source.buffer = decodeData;\r\n              source.connect(ac.destination);\r\n              source.start();\r\n            })\r\n          })\r\n        } else {\r\n          this.$audio.src = path;\r\n        }\r\n      }\r\n\r\n\r\n    }\r\n  };\r\n\r\n  // 主音量控制方法\r\n  changeVolume(percent: number) {\r\n    // @ts-ignore;\r\n    this.musicConfig.volume.main = percent;\r\n  };\r\n\r\n  // 左右声道控制方法\r\n  setVolume() {\r\n    const {musicConfig} = this;\r\n    const {main,} = musicConfig.volume;\r\n\r\n    this.$audio.volume = main;\r\n    const {panner} = this;\r\n\r\n    const {x, y, w, h} = musicConfig.mouseMoveConf;\r\n\r\n    const _x = (x-w/2)/w;\r\n    const _y = -(y-h/2)/h;\r\n\r\n    if (panner.positionX) {\r\n      panner.positionX.value = _x;\r\n      panner.positionY.value = _y;\r\n    } else {\r\n      panner.setPosition && panner.setPosition(_x,_y,0)\r\n    }\r\n  };\r\n\r\n  visualize() {\r\n    const realTimeData = new Uint8Array(this.analyser.frequencyBinCount);//数组长度是fftsize的一半\r\n    const originData = new Uint8Array(this.analyserBefore.frequencyBinCount);//数组长度是fftsize的一半\r\n\r\n    const requestAnimationFrame = window.requestAnimationFrame ||\r\n      // @ts-ignore;\r\n      window.webkitrequestAnimationFrame ||\r\n      // @ts-ignore;\r\n      window.mozrequestAnimationFrame;//兼容\r\n    const fn = () => {\r\n      // @ts-ignore;\r\n      if (!window.hidden) {\r\n        if (this.draw) {\r\n          this.analyser.getByteFrequencyData(realTimeData);// 将音频频域数据复制到传入的Uint8Array数组\r\n          this.analyserBefore.getByteFrequencyData(originData);// 将音频频域数据复制到传入的Uint8Array数组\r\n          this.draw({realTimeData, originData});\r\n        }\r\n        this.setVolume();\r\n      }\r\n      this.isDestoryed || requestAnimationFrame(fn);\r\n    }\r\n    requestAnimationFrame(fn);\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"nav-bar\",class:{active: _vm.active},on:{\"click\":function($event){_vm.active =! _vm.active}}},[_c('ul',[_vm._l((_vm.navList.list),function(item,index){return _c('li',[(item.type==='fileReader')?[_c('label',{attrs:{\"for\":item.id}},[_vm._v(\" \"+_vm._s(item.name)+\" \"),_c('input',{attrs:{\"type\":\"file\",\"id\":item.id},on:{\"change\":function($event){$event.stopPropagation();item.callback && item.callback($event)}}})])]:[_c('div',{on:{\"click\":function($event){$event.stopPropagation();item.callback && item.callback()}}},[_vm._v(_vm._s(item.name))])]],2)}),_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"nav-bar\" :class=\"{active: active}\" @click=\"active =! active\">\r\n    <ul>\r\n      <li v-for=\"(item, index) in navList.list\">\r\n        <template v-if=\"item.type==='fileReader'\">\r\n          <label :for=\"item.id\">\r\n            {{item.name}}\r\n            <input type=\"file\" :id=\"item.id\" @change.stop=\"item.callback && item.callback($event)\">\r\n          </label>\r\n        </template>\r\n        <template v-else>\r\n          <div @click.stop=\"item.callback && item.callback()\">{{item.name}}</div>\r\n        </template>\r\n      </li>\r\n      <slot></slot>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n  export default {\r\n    name: 'BalanceView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList',\r\n    ],\r\n    data() {\r\n      return {\r\n        balanceTrack: this.modifyManager.balanceTrack,\r\n        searchText: '',\r\n        active: false,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n    },\r\n    methods: {\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .nav-bar {\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    width: 60px;\r\n    height: 60px;\r\n    padding-right: 60px;\r\n    overflow: hidden;\r\n    z-index: 3010;\r\n    transition: all .3s;\r\n    background-color: rgba(255,255,255,.3);\r\n    &.active{\r\n      width: 100%;\r\n    }\r\n    ul{\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      /deep/li{\r\n        display: flex;\r\n        height: 60px;\r\n        padding: 0 10px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        white-space: nowrap;\r\n        background-color: rgba(255,255,255,.3);\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./NavBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NavBar.vue?vue&type=template&id=d6d933a2&scoped=true&\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js&\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NavBar.vue?vue&type=style&index=0&id=d6d933a2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d6d933a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ListBoxView',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default [\"album.js\",\"artists.js\",\"artist_album.js\",\"artist_desc.js\",\"artist_list.js\",\"artist_mv.js\",\"artist_sub.js\",\"artist_sublist.js\",\"banner.js\",\"check_music.js\",\"comment.js\",\"comment_album.js\",\"comment_dj.js\",\"comment_hot.js\",\"comment_like.js\",\"comment_music.js\",\"comment_mv.js\",\"comment_playlist.js\",\"comment_video.js\",\"daily_signin.js\",\"dj_catelist.js\",\"dj_detail.js\",\"dj_hot.js\",\"dj_paygift.js\",\"dj_program.js\",\"dj_program_detail.js\",\"dj_recommend.js\",\"dj_recommend_type.js\",\"dj_sub.js\",\"dj_sublist.js\",\"event.js\",\"fm_trash.js\",\"follow.js\",\"like.js\",\"likelist.js\",\"login.js\",\"login_cellphone.js\",\"login_refresh.js\",\"login_status.js\",\"logout.js\",\"lyric.js\",\"mv_detail.js\",\"mv_first.js\",\"mv_sub.js\",\"mv_url.js\",\"personalized.js\",\"personalized_djprogram.js\",\"personalized_mv.js\",\"personalized_newsong.js\",\"personalized_privatecontent.js\",\"personal_fm.js\",\"playlist_catlist.js\",\"playlist_create.js\",\"playlist_detail.js\",\"playlist_hot.js\",\"playlist_subscribe.js\",\"playlist_tracks.js\",\"playlist_update.js\",\"program_recommend.js\",\"recommend_resource.js\",\"recommend_songs.js\",\"related_allvideo.js\",\"related_playlist.js\",\"resource_like.js\",\"search.js\",\"search_hot.js\",\"search_multimatch.js\",\"search_suggest.js\",\"send_playlist.js\",\"send_text.js\",\"simi_artist.js\",\"simi_mv.js\",\"simi_playlist.js\",\"simi_song.js\",\"simi_user.js\",\"song_detail.js\",\"song_url.js\",\"toplist.js\",\"toplist_artist.js\",\"toplist_detail.js\",\"top_album.js\",\"top_artists.js\",\"top_list.js\",\"top_mv.js\",\"top_playlist.js\",\"top_playlist_highquality.js\",\"top_song.js\",\"user_audio.js\",\"user_cloud.js\",\"user_cloud_search.js\",\"user_detail.js\",\"user_dj.js\",\"user_event.js\",\"user_followeds.js\",\"user_follows.js\",\"user_playlist.js\",\"user_record.js\",\"user_subcount.js\",\"user_update.js\",\"video_detail.js\",\"video_sub.js\",\"video_url.js\",\"weblog.js\"]","// const fs = require(\"fs\");\r\n// const path = require(\"path\");\r\n\r\nfunction makeAjax(url) {\r\n  return function (data) {\r\n    const cb = {fn: null, then: fn => (cb.fn = fn)}\r\n    const fullUrl = `${location.protocol}//${location.hostname}:3000` + url + (data ? (\"?\" + Object.keys(data).map(item => item + \"=\" + data[item]).join(\"&\")) : \"\");\r\n    fetch(encodeURI(fullUrl), {\r\n      xhrFields: {withCredentials: true},\r\n      credentials: 'include'\r\n    }).then(res => {\r\n      res.json().then(res => cb.fn && cb.fn(res)).catch(e => console.log(e));\r\n    });\r\n    return fn => cb.fn = fn;\r\n  }\r\n}\r\n\r\nconst special = {\r\n  'daily_signin.js': '/daily_signin',\r\n  'fm_trash.js': '/fm_trash',\r\n  'personal_fm.js': '/personal_fm'\r\n}\r\nexport const ajax = {};\r\n\r\nfunction camel(str) {\r\n  return str.replace(/\\//, \"\")\r\n    .split(/\\//)\r\n    .map((item, index) =>\r\n      index ?\r\n        (item[0].toUpperCase() + item.slice(1)) :\r\n        item\r\n    ).join(\"\");\r\n}\r\nimport httpConf from './httpConf.js';\r\nhttpConf.forEach(file => {\r\n  if (!(/\\.js$/i.test(file))) return;\r\n  let route = (file in special) ? special[file] : '/' + file.replace(/\\.js$/i, '').replace(/_/g, '/');\r\n  ajax[camel(route)] = makeAjax(route)\r\n});\r\n\r\n","interface IListBoxOption {\r\n\r\n  play?: Function;\r\n  playing?: number;\r\n  current?: number;\r\n}\r\n\r\nexport class ListBox {\r\n  play?: Function;\r\n  playing: number = 0;\r\n  current: number = 0;\r\n  list: (ListBox|Object)[];\r\n  constructor(options: IListBoxOption = {}) {\r\n    // @ts-ignore;\r\n    Object.keys(options).forEach(key => this[key] = options[key]);\r\n    this.play = () => this;\r\n    if (options.play) {\r\n      this.play = () => {\r\n        options.play && options.play(...arguments);\r\n        this.playing = this.current;\r\n      }\r\n    }\r\n    this.list = [];\r\n    this.playing = 0;\r\n    this.current = 0;\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n\r\n  setList(list: (ListBox|Object)[], shallPlay?: boolean) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    if (shallPlay) this.play && this.play();\r\n    return this;\r\n  }\r\n\r\n  setIndex(index: number) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    return this;\r\n  }\r\n\r\n  prev(type: string) {\r\n    console.log(type)\r\n    // @ts-ignore;\r\n    this.setIndex((this.current - 1 + this.len) % this.len, ...arguments);\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    // @ts-ignore;\r\n    this.setIndex((this.current + 1) % this.len, ...arguments);\r\n    return this;\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"music-wrap\",class:{focus: _vm.isFocus},attrs:{\"for\":_vm.itemId}},[_c('div',{staticClass:\"search-box\",class:{focus: _vm.isFocus}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.config.searchText),expression:\"config.searchText\"}],ref:\"input\",attrs:{\"id\":_vm.itemId,\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"网易云音乐\"},domProps:{\"value\":(_vm.config.searchText)},on:{\"focus\":_vm.focus,\"blur\":_vm.blur,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.config, \"searchText\", $event.target.value)}}})]),_c('div',{staticClass:\"music-lists\"},[_vm._l((_vm.config.tabs.list),function(tabItem,index){return _c('div',{staticClass:\"song-list\",class:{\n        prev: index === (_vm.tabs.current - 1 + _vm.tabs.list.length) % _vm.tabs.list.length,\n        active: index === _vm.tabs.current,\n        next: index === (_vm.tabs.current + 1) % _vm.tabs.list.length,\n      }},[(_vm.getImgUrl(tabItem.list[tabItem.current]))?_c('span',{style:({backgroundImage: (\"url('\" + (_vm.getImgUrl(tabItem.list[tabItem.current])) + \"')\")})}):_vm._e(),_c('div',[_c('ul',{style:({transform: (\"translateY(-\" + (50 * tabItem.current) + \"px)\")})},_vm._l((tabItem.list),function(song,_index){return _c('li',{class:{active: tabItem.current === _index, playing: tabItem.playing === _index},on:{\"click\":function($event){$event.stopPropagation();return tabItem.setIndex(_index, 'list_box_click')}}},[_c('span',[(_vm.config.type === 'modify' && index === 1)?_c('ProgressBar',{attrs:{\"template\":\"\",\"config\":song}}):[(_vm.getImgUrl(song))?_c('img',{attrs:{\"src\":_vm.getImgUrl(song)}}):_vm._e(),_vm._v(\" \"+_vm._s(song.name)+\" \"),_c('span',{staticClass:\"button\",on:{\"click\":function($event){tabItem.setIndex(_index, 'list_box_click').play('list_box_click')}}},[_vm._v(\"play\")]),(tabItem.copy)?_c('span',{staticClass:\"button\",on:{\"click\":function($event){tabItem.setIndex(_index, 'list_box_click').copy('list_box_click')}}},[_vm._v(\"copy\")]):_vm._e(),(tabItem.delete)?_c('span',{staticClass:\"button\",on:{\"click\":function($event){tabItem.setIndex(_index, 'list_box_click').delete('list_box_click')}}},[_vm._v(\"delete\")]):_vm._e(),(song.rename)?_c('span',{staticClass:\"button\",on:{\"click\":function($event){_vm.config.searchText && song.rename(_vm.config.searchText, 'list_box_click')}}},[_vm._v(\"rename\")]):_vm._e()]],2)])}),0)])])}),_c('div',{staticClass:\"music-lists-prev\",on:{\"click\":function($event){$event.stopPropagation();return _vm.tabs.prev()}}}),_c('div',{staticClass:\"music-lists-next\",on:{\"click\":function($event){$event.stopPropagation();return _vm.tabs.next()}}})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"progress-bar-wrap\"},[_c('div',{staticClass:\"progress-bar\"},[_c('span',[_vm._v(_vm._s(_vm.config.name))]),_c('span',[_vm._v(_vm._s(_vm.config.min))]),_c('div',{ref:\"drag\",on:{\"mousedown\":function($event){return _vm.touchEv($event)},\"mousemove\":function($event){return _vm.moveEv($event)},\"mouseup\":function($event){return _vm.endEv()},\"mouseleave\":function($event){return _vm.endEv()}}},[_c('span',{style:(_vm.barStyle)})]),_c('span',[_vm._v(_vm._s(_vm.config.max))]),_c('span',{on:{\"click\":function($event){return _vm.config.setMin()}}},[_vm._v(\"min\")]),_c('span',{on:{\"click\":function($event){return _vm.config.dec()}}},[_vm._v(\"dec\")]),_c('span',[_vm._v(_vm._s(_vm.config.value))]),_c('span',{on:{\"click\":function($event){return _vm.config.enc()}}},[_vm._v(\"enc\")]),_c('span',{on:{\"click\":function($event){return _vm.config.setMax()}}},[_vm._v(\"max\")]),_c('span',{on:{\"click\":function($event){return _vm.config.reset()}}},[_vm._v(\"reset\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","interface IPosition {\r\n  x: number;\r\n  y: number;\r\n}\r\ninterface IOption {\r\n  direction?: '' | 'x' | 'y' | 'xy';\r\n  doNotStopWhenMatch?: boolean;\r\n  position?: IPosition;\r\n  resetPositionWhenTouch?: boolean;\r\n}\r\nclass Drag {\r\n  rect?: {w: number, h: number};\r\n  position: IPosition;\r\n  $el?: EventTarget | null;\r\n  direction: '' | 'x' | 'y' | 'xy';\r\n  _direction: '' | 'x' | 'y' | 'xy';\r\n  oriPoint: IPosition;\r\n  ori: IPosition;\r\n  pre: IPosition;\r\n  now: IPosition;\r\n  doNotStopWhenMatch?: boolean;\r\n  isTouching: boolean;\r\n  touched: boolean;\r\n  cachePosition: IPosition[];\r\n  moved: boolean = false;\r\n  DOMRect?: DOMRect;\r\n  resetPositionWhenTouch: boolean;\r\n  constructor(option: IOption = {}) {\r\n    this.direction = option.direction || 'xy';\r\n    this.oriPoint = {y: 0, x: 0};\r\n    this.ori = {y: 0, x: 0};\r\n    this.pre = {y: 0, x: 0};\r\n    this.now = {y: 0, x: 0};\r\n    this.doNotStopWhenMatch = option.doNotStopWhenMatch;\r\n    this.resetPositionWhenTouch = option.resetPositionWhenTouch || false;\r\n\r\n    this.position = option.position || {x: 0, y: 0};\r\n    this.isTouching = false;\r\n    this._direction = '';\r\n    this.touched = false;\r\n    // 存储用于计算平均速度\r\n    this.cachePosition =[];\r\n  }\r\n  setEl($el: EventTarget | null){\r\n    this.$el = $el;\r\n    // @ts-ignore;\r\n    const DOMRect = this.DOMRect = $el.getBoundingClientRect();\r\n    this.rect = {h: DOMRect.bottom - DOMRect.top, w: DOMRect.right - DOMRect.left}\r\n  }\r\n\r\n  touchEv(ev: Event) {\r\n    this.setEl(ev.target);\r\n    if (this.resetPositionWhenTouch) {\r\n      const {position, DOMRect} = this;\r\n      if (DOMRect) {\r\n        // @ts-ignore;\r\n        position.x = ev.screenX - DOMRect.left;\r\n        // @ts-ignore;\r\n        position.y = ev.screenY - DOMRect.top;\r\n      }\r\n\r\n    }\r\n      // 假设不触发开始事件， 则move事件也不应该触发\r\n    this.touched = true;\r\n    // @ts-ignore;\r\n    let {clientY, clientX} = ev.touches ? ev.touches[0] : ev;\r\n    this.oriPoint = {y: clientY, x: clientX};\r\n    if (!this.direction.includes('x')) {clientX = 0;}\r\n    if (!this.direction.includes('y')) {clientY = 0;}\r\n    this.ori = {y: clientY, x: clientX};\r\n    this.pre = {y: clientY, x: clientX};\r\n    this.now = {y: clientY, x: clientX};\r\n    this.isTouching = true;\r\n    this.moved = false;\r\n    this.cachePosition = [];\r\n    this._direction = '';\r\n  }\r\n\r\n  moveEv(ev: Event) {\r\n    if (!this.touched) return;\r\n    // @ts-ignore;\r\n    const {clientY, clientX} = ev.touches ? ev.touches[0] : ev;\r\n    const now = {y: 0, x: 0};\r\n    this._direction || (this._direction = Math.abs(clientX - this.oriPoint.x) < Math.abs(clientY - this.oriPoint.y) ? 'y' : 'x');\r\n    if (this.direction.includes('x')) {now.x = clientX;}\r\n    if (this.direction.includes('y')) {now.y = clientY;}\r\n\r\n    this.cachePosition.push(now);\r\n\r\n    if (this.direction.includes(this._direction)) {\r\n      this.pre = this.now;\r\n      this.now = now;\r\n      if (!this.doNotStopWhenMatch) {\r\n        ev.cancelBubble = true;\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  endEv() {\r\n    this.touched = false;\r\n    this.isTouching = false;\r\n    const offset = this.getOffset();\r\n    const oriPosition = this.position;\r\n    const rect = this.rect;\r\n    const position = {\r\n      x: oriPosition.x + offset.x,\r\n      y: oriPosition.y + offset.y,\r\n    };\r\n    if (rect) {\r\n      position.x < 0 && (position.x = 0);\r\n      position.y < 0 && (position.y = 0);\r\n      position.x > rect.w && (position.x = rect.w);\r\n      position.y > rect.h && (position.y = rect.h);\r\n    }\r\n    this.position = position;\r\n  }\r\n\r\n  getPercent(){\r\n    const {rect, position,isTouching} = this;\r\n    const offset = this.getOffset();\r\n    if (rect) {\r\n      return {\r\n        x: (position.x + (isTouching ? offset.x : 0)) / rect.w,\r\n        y: (position.y + (isTouching ? offset.y : 0)) / rect.h,\r\n      }\r\n    }\r\n  }\r\n  setPercent(per: IPosition){\r\n    const {rect, position} = this;\r\n    const {x, y} = per;\r\n    if (rect) {\r\n      position.x = x * rect.w;\r\n      position.y = y * rect.h;\r\n    }\r\n  }\r\n  getOffset() {\r\n    return {\r\n      y: this.now.y - this.ori.y,\r\n      x: this.now.x - this.ori.x,\r\n    }\r\n  }\r\n\r\n  getSpeed() {\r\n    return {\r\n      y: this.now.y - this.pre.y,\r\n      x: this.now.x - this.pre.x,\r\n    }\r\n  }\r\n}\r\n\r\nexport default Drag;\r\n","<template>\r\n  <div class=\"progress-bar-wrap\">\r\n    <div class=\"progress-bar\">\r\n      <span>{{config.name}}</span>\r\n      <span>{{config.min}}</span>\r\n      <div\r\n        @mousedown=\"touchEv($event)\"\r\n        @mousemove=\"moveEv($event)\"\r\n        @mouseup=\"endEv()\"\r\n        @mouseleave=\"endEv()\"\r\n        ref=\"drag\"\r\n      >\r\n        <span :style=\"barStyle\"></span>\r\n      </div>\r\n      <span>{{config.max}}</span>\r\n      <span @click=\"config.setMin()\">min</span>\r\n      <span @click=\"config.dec()\">dec</span>\r\n      <span>{{config.value}}</span>\r\n      <span @click=\"config.enc()\">enc</span>\r\n      <span @click=\"config.setMax()\">max</span>\r\n      <span @click=\"config.reset()\">reset</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import Drag from \"../tools/Drag\";\r\n\r\n  export default {\r\n    name: 'ProgressBar',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'commonOptions_'\r\n    ],\r\n    props: ['config'],\r\n    data() {\r\n      return {\r\n        drag: new Drag({\r\n          doNotStopWhenMatch: true,\r\n          resetPositionWhenTouch: true\r\n        }),\r\n      }\r\n    },\r\n    methods: {\r\n      touchEv(ev){\r\n        this.drag.touchEv(ev);\r\n      },\r\n      moveEv(ev){\r\n        this.drag.moveEv(ev);\r\n      },\r\n      endEv(ev){\r\n        this.drag.endEv(ev);\r\n        this.setPer()\r\n      },\r\n      setPer(){\r\n        if (!this.$el || this.drag.isTouching) return;\r\n        const {config, drag} = this;\r\n        drag.setPercent({x: (this.currentVal - config.min) / (config.max - config.min), y: 0});\r\n      },\r\n    },\r\n    computed: {\r\n      percent(){\r\n        const {drag} = this;\r\n        const {isTouching, position} = drag;\r\n        const per = drag.getPercent();\r\n        return per ? per.x : 0;\r\n      },\r\n      barStyle(){\r\n        const {isTouching} = this.drag;\r\n        return {\r\n          width: `${this.percent * 100}%`,\r\n          transition: `all ${isTouching ? 0 : .3}s`\r\n        }\r\n      },\r\n      currentVal(){\r\n        const {config} = this;\r\n        if (!config) return 0;\r\n        return config.value;\r\n      }\r\n    },\r\n    watch: {\r\n      currentVal: {\r\n        immediate: true,\r\n        handler(){\r\n          this.setPer();\r\n        }\r\n      },\r\n      config: {\r\n        immediate: true,\r\n        handler(){\r\n          this.setPer();\r\n        }\r\n      },\r\n      percent(){\r\n        const {config} = this;\r\n        config.setVal(Math.round(this.percent * (config.max - config.min)) + config.min);\r\n      },\r\n    },\r\n    mounted() {\r\n      const {config, drag} = this;\r\n      config.current = 8;\r\n      drag.setEl(this.$refs.drag);\r\n      this.setPer();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .progress-bar-wrap{\r\n    padding: 0 10px;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .progress-bar {\r\n    position: relative;\r\n\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    overflow: hidden;\r\n    z-index: 5000;\r\n    user-select: none;\r\n    display: flex;\r\n    >span{\r\n      padding: 0 4px;\r\n      cursor: pointer;\r\n      min-width: 40px;\r\n      font-size: 16px;\r\n    }\r\n    >div{\r\n      position: relative;\r\n      flex: 1 1 0;\r\n      cursor: pointer;\r\n\r\n      &::before{\r\n        position: absolute;\r\n        content: '';\r\n        display: block;\r\n        width: 100%;\r\n        height: 1px;\r\n        background-color: rgba(255,255,255,.8);\r\n        top: 50%;\r\n        left: 0;\r\n        transform: translateY(-50%) scale(1, 0.5);\r\n        border-radius: 10px;\r\n      }\r\n      >span{\r\n        position: relative;\r\n        display: block;\r\n        height: 100%;\r\n        &::after{\r\n          display: block;\r\n          content: '';\r\n          position: absolute;\r\n          width: 20px;\r\n          height: 20px;\r\n          background-color: rgba(255,255,255,1);\r\n          right: 0;\r\n          top: 50%;\r\n          transform: translate(50%, -50%);\r\n          border-radius: 4px;\r\n        }\r\n\r\n      }\r\n      &::after{\r\n        position: absolute;\r\n        content: '';\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        left: 0;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ProgressBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProgressBar.vue?vue&type=template&id=3982f1bd&scoped=true&\"\nimport script from \"./ProgressBar.vue?vue&type=script&lang=js&\"\nexport * from \"./ProgressBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProgressBar.vue?vue&type=style&index=0&id=3982f1bd&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3982f1bd\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <label :for=\"itemId\" class=\"music-wrap\" :class=\"{focus: isFocus}\">\r\n    <div class=\"search-box\" :class=\"{focus: isFocus}\">\r\n      <input :id=\"itemId\" ref=\"input\" type=\"text\" v-model=\"config.searchText\" autocomplete=\"off\" placeholder=\"网易云音乐\" @focus=\"focus\" @blur=\"blur\">\r\n    </div>\r\n    <div class=\"music-lists\">\r\n      <div\r\n        class=\"song-list\"\r\n        v-for=\"(tabItem, index) in config.tabs.list\"\r\n        :class=\"{\r\n          prev: index === (tabs.current - 1 + tabs.list.length) % tabs.list.length,\r\n          active: index === tabs.current,\r\n          next: index === (tabs.current + 1) % tabs.list.length,\r\n        }\"\r\n      >\r\n        <span\r\n          v-if=\"getImgUrl(tabItem.list[tabItem.current])\"\r\n          :style=\"{backgroundImage: `url('${getImgUrl(tabItem.list[tabItem.current])}')`}\"\r\n        ></span>\r\n        <div>\r\n          <ul\r\n            :style=\"{transform: `translateY(-${50 * tabItem.current}px)`}\">\r\n            <li\r\n              v-for=\"(song, _index) in tabItem.list\"\r\n              :class=\"{active: tabItem.current === _index, playing: tabItem.playing === _index}\"\r\n              @click.stop=\"tabItem.setIndex(_index, 'list_box_click')\"\r\n            >\r\n              <span>\r\n\r\n                <ProgressBar template v-if=\"config.type === 'modify' && index === 1\" :config=\"song\"></ProgressBar>\r\n                <template v-else>\r\n                  <img :src=\"getImgUrl(song)\" v-if=\"getImgUrl(song)\"/>\r\n                  {{ song.name }}\r\n                  <span class=\"button\" @click=\"tabItem.setIndex(_index, 'list_box_click').play('list_box_click')\">play</span>\r\n                  <span v-if=\"tabItem.copy\" class=\"button\" @click=\"tabItem.setIndex(_index, 'list_box_click').copy('list_box_click')\">copy</span>\r\n                  <span v-if=\"tabItem.delete\" class=\"button\" @click=\"tabItem.setIndex(_index, 'list_box_click').delete('list_box_click')\">delete</span>\r\n                  <span\r\n                    v-if=\"song.rename\"\r\n                    class=\"button\"\r\n                    @click=\"config.searchText && song.rename(config.searchText, 'list_box_click')\"\r\n                  >rename</span>\r\n                </template>\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"music-lists-prev\" @click.stop=\"tabs.prev()\">  </div>\r\n      <div class=\"music-lists-next\" @click.stop=\"tabs.next()\">  </div>\r\n    </div>\r\n  </label>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import ProgressBar from './ProgressBar';\r\n  export default {\r\n    name: 'ListBoxView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ProgressBar\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    props: ['config'],\r\n    computed: {\r\n      tabs(){\r\n        return this.config.tabs;\r\n      },\r\n      itemId(){\r\n        return `ListBoxView_${this.config.focusKey}`;\r\n      }\r\n    },\r\n    watch: {\r\n    },\r\n    data(){;\r\n      return {\r\n        isFocus: false\r\n      }\r\n    },\r\n    methods: {\r\n      focus(){\r\n        const time = this.isFocus_ = Date.now();\r\n        setTimeout(() => {\r\n          time === this.isFocus_ && (this.isFocus = true);\r\n        }, 300)\r\n      },\r\n      blur(){\r\n        const time = this.isFocus_ = Date.now();\r\n        setTimeout(() => {\r\n          time === this.isFocus_ && (this.isFocus = false);\r\n        }, 300)\r\n      },\r\n      getImgUrl(song) {\r\n        return song && (song.coverImgUrl || song.al && song.al.picUrl || song.album && song.album.picUrl);\r\n      },\r\n    },\r\n    beforeDestory() {\r\n    },\r\n    mounted() {\r\n      this.navList.enter({\r\n        name: this.config.name,\r\n        id: this.itemId,\r\n        callback: () => {\r\n          this.$refs.input.focus()\r\n        }\r\n      });\r\n      const {musicConfig, gameList, mv, config} = this;\r\n      const {tabs} = config;\r\n      this.$shortCut = new ShortCut();\r\n\r\n      config.type === 'modify' && this.$shortCut.init(this.$refs.input, {\r\n        common: {\r\n          w: () => config.tabs.up('list_box_shortcut'),\r\n          s: () => config.tabs.down('list_box_shortcut'),\r\n          q: () => config.tabs.prev('list_box_shortcut'),\r\n          e: () => config.tabs.next('list_box_shortcut'),\r\n          enter: () => config.searchText ? tabs.search && tabs.search() : tabs.play && tabs.play(),\r\n          107: () => config.tabs.add(undefined, 'list_box_shortcut'),\r\n          delete: () => config.tabs.delete(undefined, 'list_box_shortcut'),\r\n          c: () => config.tabs.copy(undefined, 'list_box_shortcut'),\r\n          4: () => config.tabs.dec('list_box_shortcut'),\r\n          6: () => config.tabs.enc('list_box_shortcut'),\r\n          left: () => config.tabs.dec('list_box_shortcut'),\r\n          right: () => config.tabs.enc('list_box_shortcut'),\r\n          a: () => config.tabs.dec('list_box_shortcut'),\r\n          d: () => config.tabs.enc('list_box_shortcut'),\r\n          8: () => config.tabs.prevItem('list_box_shortcut'),\r\n          2: () => config.tabs.nextItem('list_box_shortcut'),\r\n          up: () => config.tabs.prevItem('list_box_shortcut'),\r\n          down: () => config.tabs.nextItem('list_box_shortcut'),\r\n          esc: () => this.$refs.input.blur('list_box_shortcut'),\r\n        },\r\n        alt: {},\r\n        shift: {},\r\n        ctrl: {}\r\n      }, {\r\n        common: {\r\n          w: `上一项`,\r\n          s: `下一项`,\r\n          q: `左翻页`,\r\n          e: `右翻页`,\r\n          107: `添加配置`,\r\n          delete: `删除配置`,\r\n          c: `复制当前配置`,\r\n          4: `参数小`,\r\n          6: `参数大`,\r\n          left: `参数小`,\r\n          right: `参数大`,\r\n          a: `参数小`,\r\n          d: `参数大`,\r\n          8: `上一项`,\r\n          2: `下一项`,\r\n          up: `上一项`,\r\n          down: `下一项`,\r\n          esc: `关闭配置页面`,\r\n        },\r\n        alt: {},\r\n        shift: {},\r\n        ctrl: {}\r\n      });\r\n\r\n\r\n      config.type === 'listBox' && this.$shortCut.init(this.$refs.input, {\r\n        common: {\r\n          up: () => config.tabs.list[config.tabs.current].prev('list_box_shortcut'),\r\n          down: () => config.tabs.list[config.tabs.current].next('list_box_shortcut'),\r\n          left: () => config.searchText || config.tabs.prev('list_box_shortcut'),\r\n          right: () => config.searchText || config.tabs.next('list_box_shortcut'),\r\n          enter: () => config.search && config.searchText ? config.search() : config.tabs.list[config.tabs.current].play(),\r\n          backspace: () => config.searchText || config.tabs.current && config.tabs.prev('list_box_shortcut'),\r\n          esc: () => this.$refs.input.blur(),\r\n        },\r\n      }, {\r\n        common: {\r\n          up: `上一项`,\r\n          down: `下一项`,\r\n          left: `上一页`,\r\n          right: `上一页`,\r\n          enter: `搜索|播放|确认`,\r\n          backspace: `删除|返回上一页`,\r\n          esc: `关闭页面`,\r\n        },\r\n      });\r\n\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          [this.config.focusKey]: () => {\r\n            this.$refs.input.focus()\r\n          },\r\n        },\r\n      }, {\r\n        alt: {\r\n          [this.config.focusKey]: `打开页面`,\r\n        },\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n  .music-wrap {\r\n    user-select: none;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    transform-origin: center center;\r\n    transform: translate(-50%, -50%) scale(0.7, 0.7);\r\n    opacity: 0;\r\n    transition: all .3s;\r\n    will-change: opacity, transform, background-color;\r\n\r\n    &::before {\r\n      content: '';\r\n      display: block;\r\n      width: 400%;\r\n      height: 400%;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      background-color: rgba(0, 0, 0, 0.9);\r\n    }\r\n\r\n    .music-lists {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      height: 50%;\r\n      width: 50%;\r\n      .music-lists-prev,\r\n      .music-lists-next{\r\n        position: absolute;\r\n        top: 0;\r\n        height: 100%;\r\n        width: 50%;\r\n        background-color: rgba(255,255,255,0.01);\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 0 10px;\r\n        z-index: 4;\r\n      }\r\n      .music-lists-prev{\r\n        right: 100%;\r\n      }\r\n      .music-lists-next{\r\n        left: 100%;\r\n      }\r\n      .song-list {\r\n        background-color: #222;\r\n        position: absolute;\r\n        left: 50%;\r\n        top: 50%;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        padding: 20px;\r\n        justify-content: center;\r\n        transition: all .3s;\r\n        border: 0;\r\n\r\n        > span {\r\n          display: block;\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          background-size: cover;\r\n          background-repeat: no-repeat;\r\n          background-position: center center;\r\n          opacity: 0.5;\r\n          filter: blur(0px);\r\n          transition: all 0.4s;\r\n          will-change: opacity;\r\n        }\r\n\r\n        img {\r\n          position: relative;\r\n          opacity: 1;\r\n          width: 14px;\r\n          height: 14px;\r\n          margin-right: 6px;\r\n          border-radius: 4px;\r\n          border: 0;\r\n        }\r\n\r\n        ul {\r\n          position: relative;\r\n          transform: translateX(-100%);\r\n          top: 50%;\r\n          transition: all 1s;\r\n          opacity: 0;\r\n          transform-origin: top;\r\n\r\n          li {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            white-space: nowrap;\r\n            color: #ccc;\r\n            font-size: 20px;\r\n            line-height: 50px;\r\n            height: 50px;\r\n            width: 100%;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            transform: translate(0, 0, 0);\r\n            text-shadow: 0 4px 4px #000;\r\n            will-change: transform;\r\n            position: relative;\r\n            &::after{\r\n              position: absolute;\r\n              content: '';\r\n              display: block;\r\n              top: 0;\r\n              left: 0;\r\n\r\n              width: 100%;\r\n              height: 100%;\r\n            }\r\n\r\n            >span {\r\n              display: flex;\r\n              width: 100%;\r\n              align-items: center;\r\n              justify-content: center;\r\n              transform: translateY(0) scale(0.6, 0.6);\r\n              transition: all 1s;\r\n              will-change: transform;\r\n\r\n              .button{\r\n                display: block;\r\n                padding: 4px;\r\n                color: rgba(255,255,0,1);\r\n                cursor: pointer;\r\n              }\r\n            }\r\n\r\n\r\n            &.playing {\r\n              span {\r\n                transform: translateY(0) scale(0.9, 0.9);\r\n              }\r\n            }\r\n\r\n            &.active {\r\n              opacity: 1;\r\n              &::after{\r\n                display: none;\r\n              }\r\n\r\n              span {\r\n                transform: translateY(0) scale(1, 1);\r\n              }\r\n            }\r\n            &:hover{\r\n              background-color: rgba(255,255,0,.1);\r\n            }\r\n          }\r\n        }\r\n        &.prev {\r\n          z-index: 1;\r\n          border-radius: 50% 0 0 50%;\r\n          transform: translate(-100%, -50%) scale(.8, .8);\r\n        }\r\n\r\n\r\n\r\n        &.next {\r\n          z-index: 2;\r\n          border-radius: 0 50% 50% 0;\r\n          transform: translate(0, -50%) scale(.8, .8);\r\n        }\r\n        &:only-child,\r\n        &.active {\r\n          z-index: 3;\r\n          border-radius: 10%;\r\n          transform: translate(-50%, -50%);\r\n          > span {\r\n            opacity: .8;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.focus {\r\n      z-index: 3009 !important;\r\n      opacity: 1;\r\n      transform: translate(-50%, -50%) scale(1, 1);\r\n\r\n      .song-list {\r\n\r\n        ul {\r\n          opacity: 0.5;\r\n        }\r\n\r\n        &.active {\r\n          opacity: 1;\r\n\r\n          ul {\r\n            opacity: 1;\r\n            transform: translateX(0);\r\n          }\r\n        }\r\n\r\n        > div {\r\n          height: 100%;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .search-box {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    justify-content: center;\r\n    height: 10%;\r\n    overflow: hidden;\r\n\r\n    input {\r\n      text-align: right;\r\n      border: 0;\r\n      padding: 0 20px;\r\n      outline: 0;\r\n      color: #fff;\r\n      font-size: 52px;\r\n      text-shadow: 0 0 8px #ffa800;\r\n      background-color: transparent;\r\n\r\n      &::-webkit-input-placeholder {\r\n        color: rgba(255, 255, 255, 0.8);\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ListBoxView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ListBoxView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ListBoxView.vue?vue&type=template&id=93795514&\"\nimport script from \"./ListBoxView.vue?vue&type=script&lang=js&\"\nexport * from \"./ListBoxView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ListBoxView.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n\r\n  import {ajax} from \"../../proxy/http\";\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import {ListBox} from \"../units/ListBox\";\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'MusicSearchBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      const tabs = new ListBox();\r\n      const lrcs = new ListBox({\r\n        play: (type) => {\r\n          const curLrc = lrcs.list[lrcs.current];\r\n          this.mv.$audio.currentTime = curLrc.time / 10;\r\n        },\r\n        setIndex(index, type = '') {\r\n          if (this.setIndexFlag && !type) return this;\r\n          if (['list_box_click', 'list_box_shortcut'].includes(type)) {\r\n            const time = this.setIndexFlag = Date.now();\r\n            setTimeout(() => {\r\n              if(time === this.setIndexFlag) {\r\n                this.setIndexFlag = undefined;\r\n              }\r\n            }, 3000);\r\n          }\r\n          if (index > this.len - 1) index = this.len - 1;\r\n          if (index < 0) index = 0;\r\n          this.current = index;\r\n          return this;\r\n        }\r\n      });\r\n      const sheet = new ListBox({\r\n        play: (message) => this.play(message),\r\n      });\r\n      const sheetList = new ListBox({\r\n        play: () => {\r\n          ajax.playlistDetail({id: this.sheetList.list[this.sheetList.current].id})(res => {\r\n            this.sheet.setList(res.playlist.tracks, true);\r\n          });\r\n        },\r\n      });\r\n      tabs.setList([sheetList, sheet, lrcs]);\r\n\r\n      return {\r\n        config: {\r\n          type: 'listBox',\r\n          name: '网易云音乐',\r\n          tabs,\r\n          searchText: '',\r\n          focusKey: 'q',\r\n          search: () => this.search()\r\n        },\r\n        currentTime: 0,\r\n        timer: null,\r\n        tabs,\r\n        lrcs,\r\n        sheet,\r\n        sheetList,\r\n        account: null,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n      \"lrcs.current\"() {\r\n        const {list, current} = this.lrcs;\r\n        this.modifyManager.getTrackByName('CommonOptionsTrack').getVal('changeBG_When_LRC_Changed') && this.musicConfig.changePic();\r\n        this.musicConfig.setLrc(list[current] && list[current].name || '');\r\n      },\r\n      currentTime: {\r\n        immediate: true,\r\n        handler() {\r\n          const currentTime = this.mv.$audio.currentTime;\r\n          this.gameList.currentTime = currentTime * 1000;\r\n          const index = parseInt(currentTime * 10);\r\n          let curIndex = 0;\r\n          this.lrcs.list.some((item, _index) => {\r\n            if (item.time <= index) {\r\n              curIndex = _index\r\n            }\r\n            return item.time > index;\r\n          });\r\n          this.lrcs.setIndex(curIndex);\r\n        }\r\n      },\r\n      account: {\r\n        immediate: true,\r\n        handler() {\r\n          if (this.account) {\r\n            this.getUserSongList();\r\n          }\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      getLrc() {\r\n        const song = this.sheet.list[this.sheet.current];\r\n        if (song) {\r\n          ajax.lyric({id: song.id || song.songId})(res => {\r\n            const lrcList = res.lrc.lyric.split(/\\n/).map(item => {\r\n              const info = item.match(/(?:\\[)(\\d+)(?::)([^\\]]+)(?:\\])([^\\[\\]]*)/);\r\n              // 转成百毫秒数\r\n              return {name: info ? info[3] : \"\", time: info ? parseInt((+info[1] * 60 + +info[2]) * 10) : 0,}\r\n            });\r\n            this.lrcs.setList(lrcList);\r\n          });\r\n          this.lrcs.setList([]);\r\n        }\r\n\r\n      },\r\n      login() {\r\n        const user = {phone: localStorage.getItem('userPhone'), password: localStorage.getItem('password'),};\r\n        if (!user.password || !user.password) {\r\n          ShortCut.toast(['正式环境位开放远程歌曲']);\r\n          setTimeout(() => {\r\n            ShortCut.toast(['请使用测试歌曲']);\r\n          }, 600);\r\n          return;\r\n        }\r\n        ajax.loginCellphone(user)(res => {\r\n          this.account = res.account;\r\n          this.getMySheets();\r\n        });\r\n      },\r\n      getImgUrl(song) {\r\n        return song && (song.coverImgUrl || song.al && song.al.picUrl || song.album && song.album.picUrl);\r\n      },\r\n      getSongUrl() {\r\n        const {mv} = this;\r\n        const song = this.sheet.list[this.sheet.current];\r\n        if (song) {\r\n          this.gameList.durationTime = mv.duration = mv.duration = song.duration || song.dt;\r\n          ajax.songUrl({id: song.id})(res => {\r\n            mv.play(res.data[0].url);\r\n          });\r\n        }\r\n\r\n      },\r\n      play(message) {\r\n        const {gameList, mv} = this;\r\n        const play = () => {\r\n          gameList.startSong();\r\n          mv.stopType = message;\r\n          this.getSongUrl();\r\n          this.getLrc();\r\n          this.tabs.setIndex(1);\r\n          // 清除输入\r\n          this.config.searchText = \"\";\r\n        };\r\n        if (mv.$audio.paused){\r\n          play()\r\n        } else {\r\n          mv.$audio.pause();\r\n          setTimeout(() => {\r\n            play()\r\n          }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n        }\r\n\r\n      },\r\n      getUserSongList() {\r\n        ajax.userPlaylist({uid: this.account.id})(res => {\r\n          this.sheetList.setList(res.playlist, true);\r\n        });\r\n      },\r\n      getMySheets() {\r\n        ajax.recommendSongs()(res => {\r\n          this.sheet.setList(res.recommend || []);\r\n        });\r\n      },\r\n      like(){\r\n        const song = this.sheet.list[this.sheet.current];\r\n        const sheet = this.sheetList.list[0];\r\n\r\n        sheet && song && ajax.playlistTracks({\r\n          op: 'add',\r\n          pid: sheet.id,\r\n          tracks: song.id\r\n        })(res => {\r\n          console.log('like');\r\n        });\r\n      },\r\n      // 搜索\r\n      search() {\r\n        this.config.searchText && ajax.search({keywords: this.config.searchText})(res => {\r\n          this.sheet.setList(res.result.songs, true);\r\n          this.config.searchText = '';\r\n        })\r\n      },\r\n    },\r\n    beforeDestory() {\r\n      clearInterval(this.timer);\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv} = this;\r\n      musicConfig.ended = () => {\r\n        setTimeout(() => {\r\n          gameList.endSong();\r\n          setTimeout(() => {\r\n            this.sheet.next();\r\n            this.sheet.play();\r\n          }, 5000);\r\n        }, mv.delay.delayTime.value * 1000 + gameList.buffer + 1000)\r\n      };\r\n      this.timer = setInterval(() => (this.currentTime = Date.now()), 50);\r\n      this.login();\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          left: () => {\r\n            const nextTime = mv.$audio.currentTime - 5;\r\n            mv.$audio.currentTime = nextTime>=0 ? nextTime : 0;\r\n          },\r\n          right: () => {\r\n            const nextTime = mv.$audio.currentTime + 5;\r\n            mv.$audio.currentTime = nextTime <= mv.$audio.duration ? nextTime : mv.$audio.duration;\r\n          },\r\n          p: () => mv.$audio.paused ? mv.$audio.play() : mv.$audio.pause(),\r\n        },\r\n        ctrl: {\r\n          left: () => musicConfig.changePic(true),\r\n          right: () => musicConfig.changePic(),\r\n        }\r\n      }, {\r\n        alt: {\r\n          left: `退后5s`,\r\n          right: `前进5s`,\r\n          p: `暂停/播放`,\r\n        },\r\n        ctrl: {\r\n          left: `上一张图片`,\r\n          right: `下一张图片`,\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./MusicSearchBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./MusicSearchBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MusicSearchBox.vue?vue&type=template&id=702fa70c&\"\nimport script from \"./MusicSearchBox.vue?vue&type=script&lang=js&\"\nexport * from \"./MusicSearchBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ListBoxView',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import {ListBox} from \"../units/ListBox\";\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'MusicLocalBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    data() {\r\n      const tabs = new ListBox({\r\n      });\r\n      const songList = new ListBox({\r\n        play: () => {\r\n          this.play()\r\n        },\r\n      });\r\n      tabs.setList([songList]);\r\n      songList.setList([{name: 'testSong', url: './sound/testSound.mp3'}]);\r\n\r\n      return {\r\n        config: {\r\n          type: 'listBox',\r\n          name: '测试歌曲',\r\n          tabs,\r\n          searchText: './sound/testSound.mp3',\r\n          focusKey: 'w',\r\n          search: () => {\r\n            const {gameList, mv} = this;\r\n            const play = () => {\r\n              gameList.startSong();\r\n              mv.play(this.config.searchText);\r\n              // 清除输入\r\n              this.config.searchText = \"\";\r\n            };\r\n            if (mv.$audio.paused){\r\n              play()\r\n            } else {\r\n              mv.$audio.pause();\r\n              setTimeout(() => {\r\n                play()\r\n              }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n            }\r\n\r\n          }\r\n        },\r\n        tabs,\r\n        songList,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n    },\r\n    methods: {\r\n      play(message) {\r\n        const {gameList, mv} = this;\r\n        const play = () => {\r\n          gameList.startSong();\r\n          mv.stopType = message;\r\n          mv.play(this.songList.list[this.songList.current].url);\r\n          // 清除输入\r\n          this.searchText = \"\";\r\n        };\r\n        if (mv.$audio.paused){\r\n          play()\r\n        } else {\r\n          mv.$audio.pause();\r\n          setTimeout(() => {\r\n            play()\r\n          }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n        }\r\n\r\n      },\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv} = this;\r\n      // musicConfig.ended = () => {\r\n      //   setTimeout(() => {\r\n      //     gameList.endSong();\r\n      //     setTimeout(() => {\r\n      //       this.songList.next();\r\n      //       this.songList.play();\r\n      //     }, 5000);\r\n      //   }, mv.delay.delayTime.value * 1000 + gameList.buffer + 1000)\r\n      // };\r\n\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          left: () => {\r\n            const nextTime = mv.$audio.currentTime - 5;\r\n            mv.$audio.currentTime = nextTime>=0 ? nextTime : 0;\r\n          },\r\n          right: () => {\r\n            const nextTime = mv.$audio.currentTime + 5;\r\n            mv.$audio.currentTime = nextTime <= mv.$audio.duration ? nextTime : mv.$audio.duration;\r\n          },\r\n          p: () => mv.$audio.paused ? mv.$audio.play() : mv.$audio.pause(),\r\n        },\r\n        ctrl: {\r\n        }\r\n      }, {\r\n        alt: {\r\n          left: `退后5s`,\r\n          right: `前进5s`,\r\n          p: `暂停/播放`,\r\n        },\r\n        ctrl: {\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./MusicLocalBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./MusicLocalBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MusicLocalBox.vue?vue&type=template&id=7cecbcf8&\"\nimport script from \"./MusicLocalBox.vue?vue&type=script&lang=js&\"\nexport * from \"./MusicLocalBox.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ListBoxView',{attrs:{\"config\":_vm.config}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'ModifyBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: ['modifyManager', 'navList'],\r\n    data() {\r\n      return {\r\n        config: {\r\n          type: 'modify',\r\n          name: '参数调整',\r\n          tabs: this.modifyManager,\r\n          searchText: '',\r\n          focusKey: 'e',\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    watch: {},\r\n    methods: {\r\n      search() {\r\n      },\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .music-wrap {\r\n    /deep/.music-lists{\r\n      .song-list {\r\n        background-color: rgba(34, 34, 34, 0.3);\r\n      }\r\n    }\r\n\r\n    &::before {\r\n      background-color: rgba(0, 0, 0, 0);\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ModifyBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ModifyBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModifyBox.vue?vue&type=template&id=a24a1548&scoped=true&\"\nimport script from \"./ModifyBox.vue?vue&type=script&lang=js&\"\nexport * from \"./ModifyBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModifyBox.vue?vue&type=style&index=0&id=a24a1548&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a24a1548\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrap\",staticClass:\"three-view\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// @ts-ignore;\r\nimport * as THREE from 'three';\r\nexport class ThreeViewUtils{\r\n  static makeCubes(scene: THREE.Scene, material: THREE.Material, data: number[]) {\r\n    const cubes = [];\r\n\r\n    const directions = [[0, 1], [1, 0], [0, -1], [-1, 0],];\r\n    const currentPosi = [0, 0];\r\n    let current = 0;\r\n    let open = directions[0];\r\n    const start = directions[0];\r\n    while(data.length) {\r\n      // @ts-ignore;\r\n      open = directions.shift();\r\n      open === start && (current+=1);\r\n      while (\r\n        data.length && (\r\n          (open[1] === 1 && currentPosi[1] < current) ||\r\n          (open[1] === -1 && currentPosi[1] > -current) ||\r\n          (open[0] === 1 && currentPosi[0] < current) ||\r\n          (open[0] === -1 && currentPosi[0] > -current)\r\n        )\r\n        ) {\r\n        data.shift();\r\n        const geometry = new THREE.BoxBufferGeometry(0.8, 1, 0.8);\r\n        // const geometry = new THREE.CylinderBufferGeometry( 0.4, 0.4, 1, 32 );\r\n        const cube = new THREE.Mesh(geometry, material);\r\n        cube.position.x = currentPosi[0];\r\n        cube.position.z = currentPosi[1];\r\n        currentPosi[0] = (currentPosi[0] + open[0]);\r\n        currentPosi[1] = (currentPosi[1] + open[1]);\r\n        scene.add(cube);\r\n        cubes.push(cube);\r\n      }\r\n      directions.push(open);\r\n    }\r\n    return cubes;\r\n  }\r\n  static makeCircles(scene: THREE.Scene, material: THREE.Material, data: number[]){\r\n    const circles: THREE.CylinderBufferGeometry = [];\r\n    const perDeg =  Math.PI * 2 / data.length;\r\n    data.forEach((data_, index) => {\r\n      const geometry = new THREE.CylinderBufferGeometry( 0.7, 0.7, 5, 32 );\r\n      const circle = new THREE.Mesh(geometry, material);\r\n      circle.position.x = Math.sin(perDeg * index) * 15;\r\n      circle.position.z = Math.cos(perDeg * index) * 15;\r\n      scene.add(circle);\r\n      circles.push(circle);\r\n    });\r\n    return circles;\r\n  }\r\n  static makePointLight(scene: THREE.Scene, color: number) {\r\n    const sphere = new THREE.SphereBufferGeometry( 0.1, 16, 8 );\r\n    const light = new THREE.PointLight( color, 2, 50 );\r\n    light.add( new THREE.Mesh( sphere, new THREE.MeshBasicMaterial( { color: color } ) ) );\r\n    scene.add( light );\r\n    return light;\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"three-view\" ref=\"wrap\"></div>\r\n</template>\r\n<script>\r\n  import * as THREE from 'three';\r\n  import {ObjectLoader} from \"three/src/loaders/ObjectLoader\";\r\n  import {OrbitControls} from \"three/examples/jsm/controls/OrbitControls\";\r\n  import {LineGeometry} from \"three/examples/jsm/lines/LineGeometry\";\r\n  import { GeometryUtils } from 'three/examples/jsm/utils/GeometryUtils';\r\n  import { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\r\n  import {ThreeViewUtils} from \"./ThreeViewUtils\";\r\n\r\n  export default {\r\n    name: 'ThreeView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: ['index'],\r\n    inject: ['musicData'],\r\n    data() {\r\n      return {\r\n        camera: null,\r\n        scene: null,\r\n        renderer: null,\r\n        mesh: null,\r\n        light1: null,\r\n\r\n        time: 0,\r\n        width: 0, height: 0,\r\n        hasInit: false\r\n      }\r\n    },\r\n    computed: {},\r\n    methods: {\r\n      init() {\r\n\r\n        const {musicData} = this;\r\n\r\n        const container = this.$el;\r\n        const width = container.clientWidth;\r\n        const height = container.clientHeight;\r\n\r\n        const camera = this.camera = new THREE.PerspectiveCamera(30, width / height, 1, 10000);\r\n        camera.position.set(50, 50, 50);\r\n\r\n        const scene = this.scene = new THREE.Scene();\r\n\r\n        // Lights\r\n\r\n        // 环境光\r\n        scene.add(new THREE.AmbientLight(0xffffff, .3));\r\n\r\n        // 点光\r\n        this.pointLights = {\r\n          r: ThreeViewUtils.makePointLight(scene, 0xff00),\r\n          g: ThreeViewUtils.makePointLight(scene, 0x00ff00),\r\n          b: ThreeViewUtils.makePointLight(scene, 0x00ff),\r\n          rg: ThreeViewUtils.makePointLight(scene, 0xffff00),\r\n          rb: ThreeViewUtils.makePointLight(scene, 0xff00ff),\r\n          gb: ThreeViewUtils.makePointLight(scene, 0x00ffff),\r\n        };\r\n\r\n\r\n\r\n        // Renderer\r\n        const renderer = this.renderer = new THREE.WebGLRenderer();\r\n        renderer.shadowMap.enabled = true;\r\n        renderer.setPixelRatio(window.devicePixelRatio);\r\n        renderer.setSize(window.innerWidth, window.innerHeight);\r\n        renderer.domElement.className = 'three-view-canvas';\r\n        document.body.appendChild(renderer.domElement);\r\n\r\n\r\n        // Controls\r\n        const controls = new OrbitControls(camera, renderer.domElement);\r\n        controls.target.set(0, 1, 0);\r\n        controls.update();\r\n\r\n\r\n        const groundMaterial = new THREE.MeshPhongMaterial({color: 0x333333, shininess: 0});\r\n        // 地面\r\n        const ground = new THREE.Mesh(\r\n          new THREE.PlaneBufferGeometry(200, 200, 1, 1),\r\n          groundMaterial\r\n        );\r\n\r\n        ground.rotation.x = -Math.PI / 2; // rotates X/Y to X/Z\r\n        ground.receiveShadow = true;\r\n        scene.add(ground);\r\n\r\n        const material = new THREE.MeshPhysicalMaterial({\r\n          color: 0xffffff,\r\n          shininess: 10\r\n        });\r\n        this.cubes = ThreeViewUtils.makeCubes(scene, material, [...musicData.realTimeData.data]);\r\n        this.circles = ThreeViewUtils.makeCircles(scene, material, [...musicData.realTimeData.data]);\r\n\r\n        this.hasInit = true;\r\n      },\r\n      threeRenderer() {\r\n        if (this.hasInit) {\r\n          const {renderer, scene, camera, cubes, circles, time} = this;\r\n\r\n          const {avrLevel} = this.musicData.realTimeData;\r\n          const avrPer = avrLevel / 255;\r\n\r\n          this.time += avrLevel / 255 * .8 + 0.2;\r\n\r\n          Object.values(this.pointLights).forEach((light, index) => {\r\n            const index_ = index / 3 + 1;\r\n            const oriDeg = index * 120;\r\n            light.position.x = Math.sin(oriDeg + time / 30 * index_ * 1.5) * 15;\r\n            light.position.y = Math.cos(oriDeg + time / 30 * index_ * 2) * 10 + 20;\r\n            light.position.z = Math.cos(oriDeg + time / 30 * index_ * 3) * 15;\r\n          });\r\n\r\n          const data = [...this.musicData.realTimeData.data];\r\n          const perDeg =  Math.PI * 2 / data.length;\r\n          cubes && cubes.forEach((cube, index) => {\r\n            cube && (cube.scale.y = data[index] / 255 * 2.7 + 0.3);\r\n          });\r\n\r\n          circles && circles.forEach((circle, index) => {\r\n            if (circle) {\r\n              circle.scale.y = data[index] / 255 * 2.9 + 0.1;\r\n              circle.position.x = Math.sin(perDeg * index) * 30;\r\n              circle.position.z = Math.cos(perDeg * index) * 30;\r\n            }\r\n\r\n          });\r\n\r\n\r\n          renderer.render(scene, camera);\r\n        }\r\n      },\r\n    },\r\n    watch: {\r\n    },\r\n    beforeDestroy() {\r\n    },\r\n    mounted() {\r\n      this.width = this.$el.offsetWidth;\r\n      this.height = this.$el.offsetHeight;\r\n      this.init();\r\n      this.musicData.realTimeData.event.addEventListener('update', () => {\r\n        this.threeRenderer()\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .three-view {\r\n    position: absolute;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    top: 0;\r\n    left: 0;\r\n    overflow: hidden;\r\n    z-index: 2999;\r\n  }\r\n\r\n  .three-view canvas {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 4000;\r\n  }\r\n</style>\r\n<style>\r\n  .three-view-canvas {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 3000;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ThreeView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./ThreeView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ThreeView.vue?vue&type=template&id=7c88f1a2&scoped=true&\"\nimport script from \"./ThreeView.vue?vue&type=script&lang=js&\"\nexport * from \"./ThreeView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ThreeView.vue?vue&type=style&index=0&id=7c88f1a2&lang=less&scoped=true&\"\nimport style1 from \"./ThreeView.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c88f1a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-view\"},[_c('canvas',{ref:\"canvas\",attrs:{\"width\":_vm.width,\"height\":_vm.height}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'CanvasView',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0, height: 0,\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    props: ['config'],\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        deep: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          this.$canvas && this.ctx && this.renderCanvas()\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n        const {mv, musicData, config, musicConfig} = this;\r\n        const canvasConfig = config;\r\n        this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n        this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n        mv.size = canvasConfig.dataSize * 8;\r\n\r\n        const {height, width, ctx, viewCtx} = this;\r\n\r\n        const {originData, realTimeData, calculateColors} = musicData;\r\n\r\n        const {avrLevel, data} = realTimeData;\r\n        const dataBefore = originData.data;\r\n\r\n        // 拷贝并反向数据\r\n        const data1 = [...(canvasConfig.copyData ? data : [])];\r\n        data1.reverse();\r\n\r\n        let dataBefore_= [];\r\n        if (canvasConfig.showDataBefore) {\r\n          const data2 = [...(canvasConfig.copyData ? dataBefore : [])];\r\n          data2.reverse();\r\n          dataBefore_ = [...dataBefore, ...data2];\r\n          dataBefore_.reverse();\r\n        }\r\n\r\n        const renderData = [...data, ...data1, ...dataBefore_].filter(i=> canvasConfig.noZero ? i : true);\r\n        const {currentImgAviColor,  mouseMoveConf} = musicConfig;\r\n\r\n        const baseSize = [Math.min(height, width), Math.max(height, width)][canvasConfig.baseSizeType];\r\n\r\n        const midPosition = {\r\n          x: width * canvasConfig.midPositionX / 100,\r\n          y: height * canvasConfig.midPositionY / 100,\r\n        };\r\n\r\n        const mainRadius = baseSize * canvasConfig.mainRadius / 100 * (\r\n          100 - canvasConfig.avrLevelMainRadiusModify +\r\n          canvasConfig.avrLevelMainRadiusModify * avrLevel / 256\r\n        ) / 100;\r\n\r\n        const floatRange = baseSize * canvasConfig.floatRange / 100 * (\r\n          100 - canvasConfig.avrLevelFloatRangeModify +\r\n          canvasConfig.avrLevelFloatRangeModify * avrLevel / 256\r\n        ) / 100;\r\n\r\n        // 绘制背景色 // 半透明 是想保留一部分之前的绘制；\r\n        ctx.fillStyle = `rgba(0, 0, 0, ${canvasConfig.disable ? 1 : (1 - canvasConfig.clearPrevView / 100)})`;\r\n        ctx.fillRect(0, 0, this.width, this.height);\r\n\r\n        ctx.clearRect(0, 0, width, height);\r\n        viewCtx.clearRect(0, 0, width, height);\r\n\r\n        if (canvasConfig.disable) {\r\n          viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n          return;\r\n        }\r\n\r\n\r\n        // 中心区域园\r\n        ctx.fillStyle = ctx.strokeStyle = `rgba(${calculateColors[0].join(', ')}, ${canvasConfig.mainRadiusOpacity / 100})`;\r\n        ctx.lineWidth = baseSize * canvasConfig.mainRadiusLineWidth / 1000;\r\n        ctx.beginPath();\r\n        if (canvasConfig.direction === 0) {\r\n          ctx.arc(midPosition.x, midPosition.y, Math.abs(mainRadius), 0, 2 * Math.PI);\r\n        } else {\r\n\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n\r\n\r\n        const len = renderData.length || 1; // 防 除以0 报错；\r\n        const perDeg = Math.PI * 2 / (len || 1) * canvasConfig.stepModify / 10;\r\n\r\n        const halfPerDeg = perDeg / 2;\r\n        const rotate = Math.PI * 0;\r\n\r\n        ctx.lineWidth = baseSize * canvasConfig.lineLineWidth / 1000;\r\n        const rate = canvasConfig.dataModify / 10;\r\n        const offset = 1 + canvasConfig.dataOffsetModify / 100;\r\n        ctx.closePath();\r\n        const length  = renderData.length;\r\n        const minHeight =  canvasConfig.minHeightModify / 100;\r\n        renderData.forEach((val, index) => {\r\n\r\n          val = val / 256 + minHeight;\r\n          const  nextVal = renderData[(index + 1) % length] / 256 + minHeight;\r\n          const deg = perDeg * index + rotate;\r\n\r\n          function lin1() {\r\n            const _x = (index - len/2) * canvasConfig.stepModify;\r\n            // x, y;\r\n            const point1 = [\r\n              [\r\n                Math.sin(deg) * (val * rate  + offset * mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (val * rate  + offset * mainRadius)+ midPosition.y\r\n              ], [\r\n                midPosition.x + _x,\r\n                -(val * rate  + offset * mainRadius)+ midPosition.y,\r\n              ]\r\n            ][canvasConfig.direction];\r\n            const point2 = [\r\n              [\r\n                Math.sin(deg) * (val * rate * floatRange * 3 + offset*mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y\r\n              ],[\r\n                midPosition.x + _x,\r\n                -(val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y,\r\n              ]\r\n            ][canvasConfig.direction];\r\n            const lr = ctx.createLinearGradient(\r\n              point1[0],\r\n              point1[1],\r\n              point2[0],\r\n              point2[1],\r\n            );\r\n            lr.addColorStop(1, `rgba(${calculateColors[0].join(', ')}, 1)`);\r\n            lr.addColorStop(.75, `rgba(${calculateColors[1].join(', ')}, 1)`);\r\n            lr.addColorStop(0, `rgba(${calculateColors[1].join(', ')}, 1)`);\r\n            ctx.strokeStyle = lr;\r\n            ctx.beginPath();\r\n            ctx.moveTo(point1[0], point1[1]);\r\n            ctx.lineTo(point2[0], point2[1]);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n\r\n          const edge = val * rate * floatRange * 3+ mainRadius;\r\n          function line(){\r\n            ctx.strokeStyle = `rgba(${calculateColors[1].join(', ')}, ${avrLevel * 2/255 + 0.25})`;\r\n            const nextEdge = nextVal * rate * floatRange * 3 + mainRadius;\r\n            ctx.beginPath();\r\n            ctx.moveTo(\r\n              Math.sin(deg) *edge + midPosition.x,\r\n              Math.cos(deg) * edge+ midPosition.y\r\n            );\r\n            ctx.bezierCurveTo(\r\n              Math.sin(deg+perDeg/3) * edge + midPosition.x,\r\n              Math.cos(deg+perDeg/3) * edge+ midPosition.y,\r\n              Math.sin(deg+perDeg/3*2) * nextEdge + midPosition.x,\r\n              Math.cos(deg+perDeg/3*2) * nextEdge+ midPosition.y,\r\n              Math.sin(deg+perDeg) * nextEdge + midPosition.x,\r\n              Math.cos(deg+perDeg) * nextEdge+ midPosition.y,\r\n            );\r\n\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n          // lin1();\r\n          // line();\r\n          // dot();\r\n\r\n          ;[\r\n            lin1,\r\n            line,\r\n            rect,\r\n            dot\r\n          ][canvasConfig.renderType]()\r\n\r\n          function dot() {\r\n            ctx.fillStyle = `rgba(${calculateColors[1].join(', ')}, 1)`;\r\n            ctx.beginPath();\r\n\r\n            const _x = (index - len/2) * canvasConfig.stepModify + midPosition.x;\r\n            const position =[\r\n              [\r\n                Math.sin(deg) * edge + midPosition.x,\r\n                Math.cos(deg) * edge+ midPosition.y,\r\n              ],[\r\n                _x,\r\n                -(val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y\r\n              ]\r\n            ][canvasConfig.direction] || [];\r\n            const x = position[0];\r\n            const y = position[1];\r\n            ctx.arc(\r\n              x, y,\r\n              baseSize * canvasConfig.lineLineWidth / 1000,\r\n              0, 2 * Math.PI\r\n            );\r\n            ctx.closePath();\r\n            ctx.fill();\r\n          }\r\n          function rect() {\r\n            ctx.strokeStyle = `rgba(${calculateColors[1].join(', ')}, 1)`;\r\n            ctx.beginPath();\r\n            let renderVal = (val * rate  - canvasConfig.threshold / 10) * floatRange;\r\n            renderVal < 0 &&(renderVal = 0);\r\n            const dots = [\r\n              [ // 左\r\n                Math.sin(deg-halfPerDeg) * (mainRadius) + midPosition.x,\r\n                Math.cos(deg-halfPerDeg) * (mainRadius)+ midPosition.y\r\n              ],\r\n              [ // 右\r\n                Math.sin(deg+halfPerDeg) * (mainRadius) + midPosition.x,\r\n                Math.cos(deg+halfPerDeg) * (mainRadius)+ midPosition.y\r\n              ],\r\n              [ // 上\r\n                Math.sin(deg) * (-renderVal+ mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (-renderVal+ mainRadius)+ midPosition.y\r\n              ],\r\n              [ // 下\r\n                Math.sin(deg) * (renderVal+ mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (renderVal+ mainRadius)+ midPosition.y\r\n              ],\r\n            ];\r\n            ;[0,2,1,3,0,2].forEach(item => {\r\n              ctx.lineTo.apply(ctx, dots[item]);\r\n            })\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n        });\r\n        ctx.closePath();\r\n        viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasView.vue?vue&type=template&id=bd352cee&scoped=true&\"\nimport script from \"./CanvasView.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasView.vue?vue&type=style&index=0&id=bd352cee&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bd352cee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-view\"},[_c('canvas',{ref:\"canvas\",attrs:{\"width\":_vm.width,\"height\":_vm.height}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\nimport {GetType} from \"@/tools/GetType\";\r\nexport class Random {\r\n  exec() {\r\n    const {max_, min_, sign_} = this;\r\n    return Random.exec(max_, min_, sign_);\r\n  }\r\n  sign() {\r\n    this.sign_ = -1;\r\n    return this;\r\n  }\r\n  min(min) {\r\n    GetType.isNumber(min) && (this.min_ = min);\r\n    return this;\r\n  }\r\n\r\n  max(max) {\r\n    GetType.isNumber(max) && (this.max_ = max);\r\n    return this;\r\n  }\r\n\r\n  int(size, unique) {\r\n    const {max_, min_, sign_,} = this;\r\n    return Random.int(max_, min_, sign_, size, unique)\r\n  }\r\n\r\n  static exec(max_, min_, sign_) {\r\n    let val = Math.random();\r\n    GetType.isNumber(max_) && (val = val * max_);\r\n    GetType.isNumber(min_) && (val = val + min_);\r\n    sign_ && (val = val * -1);\r\n    return val;\r\n  }\r\n\r\n  static int(max = 1, min = 0, sign){\r\n    return (sign && Random.boolean() ? -1 : 1) * Math.round(Math.random() * max + min)\r\n  }\r\n  static boolean() {\r\n    return Math.round(Math.random());\r\n  }\r\n  static time(){\r\n    return Date.now().toString();\r\n  }\r\n  boolean(){\r\n    return  Random.boolean(size, rate)\r\n  }\r\n}\r\n\r\nexport function random() {\r\n  return new Random()\r\n}\r\n\r\n","const aisleMap = {\r\n  r: 0, g: 1, b: 2, a: 3\r\n};\r\ntype TAisleType = keyof typeof aisleMap;\r\n// @ts-ignore;\r\nimport {Random, random} from \"@/tools/random\";\r\nexport class PS {\r\n  aisleMap = aisleMap;\r\n  imageData: ImageData;\r\n\r\n  static cutFnMap: {[index: number]: () => number} = {\r\n    1: () => 255,\r\n    2: () => 0,\r\n    3: () => Random.int(255,0)\r\n  };\r\n  constructor(imageData: ImageData) {\r\n    this.imageData = imageData;\r\n  }\r\n\r\n  getAisle(aisleType: TAisleType, cutType: number = 0) {\r\n    const offset = this.aisleMap[aisleType];\r\n    if (offset === undefined) return [];\r\n    const {data, width, height} = this.imageData;\r\n\r\n    const ret: number[][] = [];\r\n    for (let y = 0; y < height; y++) {\r\n      const line: number[] = [];\r\n      ret.push(line);\r\n      const cur = width * y;\r\n      for (let x = 0; x < width; x++) {\r\n        line.push(data[(cur + x) * 4 + offset]);\r\n        cutType && (data[(cur + x) * 4 + offset] = PS.cutFnMap[cutType] &&  PS.cutFnMap[cutType]() || 255);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  aisleOffset(aisleType: TAisleType, xOffset = 0, yOffset = 0, zoom: number = 1, cutType: number = 0) {\r\n    const offset = this.aisleMap[aisleType];\r\n    if (offset === undefined) return;\r\n    const aisleData = this.getAisle(aisleType, cutType);\r\n    const {data, width, height} = this.imageData;\r\n    for (let y = 0; y < height; y++) {\r\n      const line = aisleData[y + yOffset] || {};\r\n      const cur = width * (y + yOffset) + xOffset;\r\n      for (let x = 0; x < width; x++) {\r\n        data[(cur + x) * 4 + offset] = (line[x] || 0) * zoom;\r\n      }\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random, random} from \"../tools/random\";\r\n  import {PS} from \"../tools/PS\";\r\n\r\n\r\n  export default {\r\n    name: 'CanvasPic',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'commonOptions_'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        shallMalfunction: 0,\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          this.commonOptions_.CanvasPicMalfunction && (this.shallMalfunction = 2);\r\n        }\r\n      },\r\n\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          this.$canvas && this.ctx && this.renderCanvas();\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n\r\n        const {height, width, ctx, imgCtx, musicConfig, musicData} = this;\r\n        const {realTimeData} = musicData;\r\n        const {avrLevel} = realTimeData;\r\n        ctx.putImageData(musicConfig.getImageData(0, 0, width, height), 0, 0);\r\n\r\n        if (this.shallMalfunction) {\r\n          const list = [0, 1, 2, 3, 4, 5];\r\n\r\n          function blur(id, x, y) {\r\n            return `<filter id=\"${id}\"><feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"${x},${y}\"></feGaussianBlur></filter>`;\r\n          }\r\n          document.querySelector('#svg-all').innerHTML = `<defs>${\r\n            list.map(item => blur(`blur${item * 2}`, 0, item ? avrLevel / 255 / item * 20 : 0)).join('')\r\n          }${\r\n            list.map(item => blur(`blur${item * 2}-v`, item ? avrLevel / 255 / item * 20 : 0, 0)).join('')\r\n          }${\r\n            list.map(item => blur(`blur${item * 2}--45`, item ? avrLevel / 255 / item * 20 : 0, 0)).join('')\r\n          }</defs>`;\r\n        }\r\n        const des = (index_ = 0) => {\r\n\r\n          const w = index_ ? Random.int(width, width / (index_ + index_ * .2)) : width;\r\n          const h = index_ ? Random.int(height, height / (index_ * 5)) : height / 10;\r\n          const x = (width - w) / 2;\r\n          const y = (height - h) / 2 + Random.int(h / 2, 0, true);\r\n\r\n          const imageData = musicConfig.getImageData(x, y, w, h);\r\n          if (!imageData) return;\r\n\r\n          const ps = new PS(imageData);\r\n          const dirR = Random.boolean();\r\n          const max = avrLevel / 4;\r\n\r\n          if (this.shallMalfunction) {\r\n            const fnMap = [\r\n              (off) => ps.aisleOffset('r', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n              (off) => ps.aisleOffset('g', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n              (off) => ps.aisleOffset('b', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n            ];\r\n\r\n            const index = Random.int(2, 0);\r\n            fnMap[index](Random.int(max, max / 2, true));\r\n            Random.boolean() && fnMap[(index + 1) % fnMap.length](Random.int(max, max / 3, true));\r\n            Random.boolean() && fnMap[(index + 2) % fnMap.length](Random.int(max, max / 4, true));\r\n            ctx.putImageData(ps.imageData, x + Random.int(20 * index_, 0, true), y + Random.int(10 * index_, 0, true));\r\n          }\r\n          ctx.putImageData(imageData, x, y);\r\n\r\n\r\n        }\r\n        if (musicConfig.picDom && this.shallMalfunction === 2) {\r\n          des(0);\r\n          // des(1);\r\n          // des(2);\r\n        }\r\n\r\n        this.viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n        this.shallMalfunction && (this.shallMalfunction --);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage.width = this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n      this.$canvasImage.height = this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n      this.imgCtx = this.$canvasImage.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 0.4;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasPic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasPic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasPic.vue?vue&type=template&id=0226e92a&scoped=true&\"\nimport script from \"./CanvasPic.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasPic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasPic.vue?vue&type=style&index=0&id=0226e92a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0226e92a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-view\"},[_c('div',{style:(_vm.textStyle)},[_vm._v(\"Happy new Year!\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"canvas-view\">\r\n    <div :style=\"textStyle\">Happy new Year!</div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random, } from \"../tools/random\";\r\n  import {musicConfig} from \"../music/MusicConfig\";\r\n\r\n  export default {\r\n    name: 'CanvasText',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        textStyle: ''\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          const {realTimeData, calculateColors} = musicData;\r\n          const {avrLevel} = realTimeData;\r\n          const per = avrLevel / 255;\r\n          const rate = Math.round(avrLevel / 255 * 100) + 10;\r\n          const opa = avrLevel / 255 + .75;\r\n          const scale = avrLevel / 255 / 2 + .75;\r\n          this.textStyle = `text-shadow: ${[\r\n            `0 0 ${rate}px #fff`,\r\n            `0 0 ${rate * 2}px #fff`,\r\n            `0 0 ${rate * 3}px #fff`,\r\n            `0 0 ${rate * 4}px #fff`,\r\n            `0 0 ${rate * 5}px #ff5722`,\r\n            `0 0 ${rate * 6}px #ff5722`,\r\n            `0 0 ${rate * 7}px #ff5722`,\r\n            `0 0 ${rate * 8}px #ff5722`,\r\n          ].join(',')}; opacity: ${opa > 1 ? 1 : opa}; transform: translate3d(0,0,0) scale(${scale}, ${scale}) rotate(${Random.exec(per*3, per*-3,)}deg)`;\r\n        }\r\n      }\r\n    },\r\n    methods: {}\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding-bottom: 40vh;\r\n    font-size: 120px;\r\n    font-family: \"微软雅黑\";\r\n    filter: brightness(110%);\r\n\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    will-change: opacity, box-shadow, transform;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasTitle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasTitle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasTitle.vue?vue&type=template&id=7a6a75bb&scoped=true&\"\nimport script from \"./CanvasTitle.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasTitle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasTitle.vue?vue&type=style&index=0&id=7a6a75bb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a6a75bb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-view\"},[_c('canvas',{ref:\"canvas\",attrs:{\"width\":_vm.width,\"height\":_vm.height}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random} from \"../tools/random\";\r\n  import {PS} from \"../tools/PS\";\r\n  import {Picture} from \"../picture/Picture\";\r\n\r\n  export default {\r\n    name: 'CanvasText',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        shallMalfunction: false,\r\n        size: 0,\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          this.$canvas && this.ctx && this.renderCanvas();\r\n        }\r\n      },\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          this.modifyManager.getTrackByName('CommonOptionsTrack').getVal('CanvasTextMalfunction') && (this.shallMalfunction = true);\r\n          this.size = 0;\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n        const {height, width, ctx, imgCtx, musicConfig, viewCtx, musicData} = this;\r\n        const {realTimeData, calculateColors} = musicData;\r\n        const {avrLevel} = realTimeData;\r\n\r\n        const w = width;\r\n        const h = 100;\r\n        const x = width / 2;\r\n        const y = height * .66;\r\n        let size =\r\n          this.size =\r\n            this.size ||\r\n            160 + Random.int(10 * avrLevel / 255, 0, true) - (musicConfig.lrc || '').length * 1.5;\r\n\r\n        // 清除原先的画布\r\n        ctx.clearRect(0, 0, width, height);\r\n        viewCtx.clearRect(0, 0, width, height);\r\n\r\n        if (musicConfig.lrc) {\r\n          ctx.fillStyle = `rgba(0,0,0,.5)`;\r\n          ctx.fillRect(0, height / 7 * 3.9, width, height / 7 * 1.3);\r\n        }\r\n\r\n        // 庞门正道标题体\r\n        ctx.font = `${size}px pmzdbtt`;\r\n\r\n\r\n        const measureText = ctx.measureText(musicConfig.lrc);\r\n        if (measureText.width > (width - 100)) {\r\n          size =\r\n            this.size =\r\n              Math.floor(this.size /measureText.width * (width - 100));\r\n          ctx.font = `${size}px pmzdbtt`;\r\n        }\r\n        // 字体居中\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.lineWidth = 1;\r\n\r\n        const percent = avrLevel / 255;\r\n        const offset = percent * size / 4 + 4;\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255).join(', ')}, ${percent})`;\r\n        ctx.strokeText(musicConfig.lrc, x + offset, y - offset);\r\n\r\n\r\n        const pattern = ctx.createPattern(Picture.pciCanvas,\"repeat\");\r\n        ctx.fillStyle = pattern;\r\n        ctx.fillText(musicConfig.lrc, x + offset, y - offset);\r\n\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255).join(', ')}, ${percent * 0.8})`;\r\n        ctx.strokeText(musicConfig.lrc, x + offset / 2, y - offset / 2);\r\n\r\n\r\n        ctx.fillStyle = `rgba(255,255,255,.3)`;\r\n        ctx.fillText(musicConfig.lrc, x + offset / 2, y - offset / 2);\r\n\r\n\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255 - i).join(', ')}, 1)`;\r\n        ctx.strokeText(musicConfig.lrc, x, y);\r\n\r\n\r\n        ctx.fillStyle = `rgba(${calculateColors[1].join(', ')}, 0.3)`;\r\n        ctx.fillText(musicConfig.lrc, x, y);\r\n\r\n\r\n\r\n\r\n        const des = (index_ = 0) => {\r\n          const W = ctx.measureText(musicConfig.lrc).width || 1;\r\n          if (!W) return;\r\n\r\n          const _w = W;\r\n          const _h = size * index_ / 4;\r\n          const __x = 0;\r\n          const __y = size;\r\n\r\n          const _x = (width - _w) / 2;\r\n          const _y = y - __y / 2 + Random.int(size - _h, 0);\r\n\r\n          if (_h < 0) return;\r\n          const imageData = ctx.getImageData(_x, _y, _w, _h);\r\n\r\n          const ps = new PS(imageData);\r\n          const max = (h - size) / 4;\r\n\r\n          if (this.shallMalfunction) {\r\n            const fnMap = [\r\n              () => ps.aisleOffset('r', Random.int(max, max / 2, true), Random.int(max, max / 2, true)),\r\n              () => ps.aisleOffset('g', Random.int(max, max / 3, true), Random.int(max, max / 3, true)),\r\n              () => ps.aisleOffset('b', Random.int(max, max / 4, true), Random.int(max, max / 4, true)),\r\n            ];\r\n            const len = fnMap.length;\r\n            let index = Random.int(2, 0);\r\n            fnMap[index]();\r\n            Random.boolean() && fnMap[++index % len]();\r\n            Random.boolean() && fnMap[++index % len]();\r\n          }\r\n\r\n          ctx.putImageData(ps.imageData, _x, _y);\r\n\r\n          viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n        };\r\n        if (musicConfig.picDom) {\r\n          des(1);\r\n          des(2);\r\n          des(3);\r\n        }\r\n        this.shallMalfunction = false;\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage.width = this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n      this.$canvasImage.height = this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n      this.imgCtx = this.$canvasImage.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    opacity: 0.8;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CanvasText.vue?vue&type=template&id=3153c9aa&scoped=true&\"\nimport script from \"./CanvasText.vue?vue&type=script&lang=js&\"\nexport * from \"./CanvasText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CanvasText.vue?vue&type=style&index=0&id=3153c9aa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3153c9aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-view\"},[_c('video',{attrs:{\"src\":_vm.src,\"autoplay\":\"autoplay\",\"muted\":\"\"},domProps:{\"muted\":true},on:{\"ended\":_vm.handelEnded}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"canvas-view\">\r\n    <video :src=\"src\" autoplay=\"autoplay\" muted @ended=\"handelEnded\"></video>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'VideoView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: ['index'],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      return {\r\n        ended: true,\r\n        shallChange: false,\r\n        current: this.index,\r\n        src: '',\r\n        srcs: [\r\n          './videos/1.mp4',\r\n          './videos/2.mp4',\r\n          './videos/3.mp4',\r\n          './videos/4.mp4',\r\n        ],\r\n        width: 0, height: 0,\r\n        play: () => {\r\n          // this.$refs.video && this.$refs.video.play();\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      changeVideo(){\r\n        return this.musicData.soundTrackArr.find(item => item.isChangeDot)\r\n      },\r\n    },\r\n    methods: {\r\n      handelEnded(){\r\n        this.ended = true;\r\n      },\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag'(){\r\n        if (this.ended) {\r\n          this.current ++;\r\n          this.src = this.srcs[this.current%this.srcs.length];\r\n          this.ended = false;\r\n        }\r\n      },\r\n    },\r\n    beforeDestroy(){\r\n      document.removeEventListener('click', this.play);\r\n    },\r\n    mounted() {\r\n      document.addEventListener('click', this.play);\r\n      this.play();\r\n      this.width = this.$el.offsetWidth;\r\n      this.height = this.$el.offsetHeight;\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    top: 0;\r\n    left: 0;\r\n    overflow: hidden;\r\n    z-index: 2950;\r\n    background-blend-mode: lighten;\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .canvas-view video {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./VideoView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./VideoView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoView.vue?vue&type=template&id=3830f794&scoped=true&\"\nimport script from \"./VideoView.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoView.vue?vue&type=style&index=0&id=3830f794&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3830f794\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dom-clock\"},_vm._l((_vm.time),function(list,index){return _c('div',{style:(_vm.d3wrapStyle)},_vm._l((list),function(list_,index_){return _c('div',[(index_)?[_c('span',[_vm._v(_vm._s(index ? ':' : '-'))])]:_vm._e(),_vm._l((list_),function(num){return [_c('DomClockItem',{attrs:{\"num\":num}})]})],2)}),0)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export class Time {\r\n  static format(stamp?: Date, format = `yea-mon-dat`){\r\n    const time  = stamp || new Date();\r\n    return  format.replace(/yea/g, time.getFullYear().toString())\r\n      .replace(/mon/g, Time.to00(time.getMonth() + 1))\r\n      .replace(/dat/g, Time.to00(time.getDate()))\r\n      .replace(/hou/g, Time.to00(time.getHours()))\r\n      .replace(/min/g, Time.to00(time.getMinutes()))\r\n      .replace(/sec/g, Time.to00(time.getSeconds()))\r\n      .replace(/mis/g, Time.to000(time.getMilliseconds()))\r\n  }\r\n  static to00(num: number){ return num>9 ? `${num}` : `0${num}`}\r\n  static to000(num: number){ return num>99 ? `${num}` : `0${Time.to00(num)}`}\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dom-clock-item-wrap\"},[_c('div',{staticClass:\"dom-clock-item\"},_vm._l((_vm.list),function(num,index){return _c('div',{class:{track: true}},[_c('div')])}),0),_c('div',{staticClass:\"dom-clock-item\"},_vm._l((_vm.list),function(num,index){return _c('div',{class:{active: num}},[_c('div')])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"dom-clock-item-wrap\">\r\n    <div class=\"dom-clock-item\">\r\n      <div v-for=\"(num, index) in list\" :class=\"{track: true}\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"dom-clock-item\">\r\n      <div v-for=\"(num, index) in list\" :class=\"{active: num}\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\n  import {musicData, musicDataFlags} from \"../music/Music\";\r\n  const list = [\r\n    [1, 1, 1, 1, 1, 1, 0],\r\n    [0, 1, 1, 0, 0, 0, 0],\r\n    [1, 1, 0, 1, 1, 0, 1],\r\n    [1, 1, 1, 1, 0, 0, 1],\r\n    [0, 1, 1, 0, 0, 1, 1],\r\n    [1, 0, 1, 1, 0, 1, 1],\r\n    [1, 0, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 1, 0, 1, 1],\r\n  ];\r\n  export default {\r\n    name: 'DomClockItem',\r\n    props: ['num'],\r\n    data(){\r\n      return {\r\n        musicData,\r\n        musicDataFlags\r\n      }\r\n    },\r\n    computed: {\r\n      list() {\r\n        return list[this.num]\r\n      },\r\n      // wrapStyle(){\r\n      //   const {data, avrLevel, total, cacheList, calculateColors} = this.musicData;\r\n      //   this.musicDataFlags.dataFlag;\r\n      //   return {\r\n      //     '--animateTime': `${.3 - avrLevel / 255 * 0.3}s`,\r\n      //     '--radius': `${avrLevel / 255 * 40}px`\r\n      //   }\r\n      // }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n      }\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n\r\n  .dom-clock-item-wrap {\r\n    --animateTime: 0.7s;\r\n    --radius: 40px;\r\n    --textRadius: 2px;\r\n    --radius_: 0;\r\n    --time: 0.05s;\r\n    --a: 80px;\r\n    --b: calc(var(--a) / 10);\r\n    --a2: calc(var(--a) * 2);\r\n    --ha: calc(var(--a) / 2);\r\n    --hb: calc(var(--b) / 2);\r\n    --h: calc(var(--b) / 2);\r\n    --offsetx: calc((var(--hb) + var(--h)) * -1);\r\n    --offsety: calc(var(--h) * -1);\r\n    --offset2: calc((var(--hb) + var(--h) * 2) * -1);\r\n\r\n    margin: calc(var(--b) * 2);\r\n    position: relative;\r\n    height: var(--a2);\r\n    line-height: var(--a2);\r\n    font-size: 40px;\r\n    width: var(--a);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-shadow:\r\n      0 0 calc(var(--textRadius) * 1) #fff,\r\n      0 0 calc(var(--textRadius) * 2) #fff,\r\n      0 0 calc(var(--textRadius) * 3) #fff,\r\n      0 0 calc(var(--textRadius) * 4) #fff,\r\n      0 0 calc(var(--textRadius) * 5) #ff5722,\r\n      0 0 calc(var(--textRadius) * 6) #ff5722,\r\n      0 0 calc(var(--textRadius) * 7) #ff5722,\r\n      0 0 calc(var(--textRadius) * 8) #ff5722;\r\n\r\n    .dom-clock-item {\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 100%;\r\n\r\n      > div {\r\n        position: absolute;\r\n        display: block;\r\n        transform: translateZ(0);\r\n        box-shadow:\r\n          0 0 calc(var(--radius_) * 1) #fff,\r\n          0 0 calc(var(--radius_) * 2) #fff,\r\n          0 0 calc(var(--radius_) * 3) #fff,\r\n          0 0 calc(var(--radius_) * 4) #fff,\r\n          0 0 calc(var(--radius_) * 5) #ff5722,\r\n          0 0 calc(var(--radius_) * 6) #ff5722,\r\n          0 0 calc(var(--radius_) * 7) #ff5722,\r\n          0 0 calc(var(--radius_) * 8) #ff5722;\r\n\r\n        > div {\r\n          width: 100%;\r\n          height: 100%;\r\n          background-color: rgba(0, 0, 0, 1);\r\n          clip-path: polygon(var(--hb) 0, calc(100% - var(--hb)) 0, 100% var(--hb), 100% calc(100% - var(--hb)), calc(100% - var(--hb)) 100%, var(--hb) 100%, 0 calc(100% - var(--hb)), 0 var(--hb));\r\n        }\r\n\r\n        &.track {\r\n          > div {\r\n            background-color: rgba(0, 0, 0, 1);\r\n          }\r\n        }\r\n\r\n        &.active {\r\n          box-shadow:\r\n            0 0 calc(var(--radius) * 1) #fff,\r\n            0 0 calc(var(--radius) * 2) #fff,\r\n            0 0 calc(var(--radius) * 3) #fff,\r\n            0 0 calc(var(--radius) * 4) #fff,\r\n            0 0 calc(var(--radius) * 5) #ff5722,\r\n            0 0 calc(var(--radius) * 6) #ff5722,\r\n            0 0 calc(var(--radius) * 7) #ff5722,\r\n            0 0 calc(var(--radius) * 8) #ff5722;\r\n          transform: translateZ(40px);\r\n\r\n          > div {\r\n            background-color: rgba(255, 255, 255, 1);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(1) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          top: var(--offset2);\r\n          left: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 1) cubic-bezier(.6,.42,.34,1.48);\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 1) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(2) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          top: var(--offsety);\r\n          right: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 2) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 2) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(3) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          bottom: var(--offsety);\r\n          right: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 3) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 3) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(4) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          bottom: var(--offset2);\r\n          right: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 4) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 4) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(5) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          left: var(--offsetx);\r\n          bottom: var(--offsety);\r\n          transition: all var(--animateTime) calc(var(--time) * 5) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 5) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(6) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          top: var(--offsety);\r\n          left: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 6) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 6) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(7) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          top: calc(50% - var(--hb));\r\n          left: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 7) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 7) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./DomClockItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./DomClockItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DomClockItem.vue?vue&type=template&id=f8f17254&scoped=true&\"\nimport script from \"./DomClockItem.vue?vue&type=script&lang=js&\"\nexport * from \"./DomClockItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DomClockItem.vue?vue&type=style&index=0&id=f8f17254&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8f17254\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"dom-clock\">\r\n    <div v-for=\"(list, index) in time\" :style=\"d3wrapStyle\">\r\n      <div v-for=\"(list_, index_) in list\">\r\n        <template v-if=\"index_\"><span>{{index ? ':' : '-'}}</span></template>\r\n        <template v-for=\"(num) in list_\">\r\n          <DomClockItem :num=\"num\"/>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Time} from \"../tools/Time\";\r\n  import DomClockItem from './DomClockItem.vue'\r\n\r\n  export default {\r\n    name: 'DomClock',\r\n    components: {DomClockItem},\r\n    data() {\r\n      return {\r\n        time: '',\r\n      }\r\n    },\r\n\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    computed: {\r\n      d3wrapStyle(){\r\n        const {musicConfig} = this;\r\n        const {_x, _y} = musicConfig.mouseMoveConf;\r\n        const maxDeg = 150;\r\n        return {\r\n          transform: `translateZ(-400px) rotateX(${-_y*maxDeg - 20}deg) rotateY(${_x*maxDeg}deg)`,\r\n        }\r\n      },\r\n      dataFlag(){\r\n        return this.musicDataFlags.dataFlag\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          // modifyManager.commonOptions.CanvasPicMalfunction && (this.shallMalfunction = 2);\r\n        }\r\n      },\r\n      'dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          const stamp = new Date();\r\n          this.time = [\r\n            Time.format(stamp, `yea mon dat`).split(' ').map(i => i.split('')),\r\n            Time.format(stamp, `hou min sec`).split(' ').map(i => i.split(''))\r\n          ];\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n      }\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .dom-clock {\r\n    position: absolute;\r\n    top: 20vh;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    flex: 1 1 0;\r\n    z-index: 2900;\r\n    perspective:1000px;\r\n\r\n    >div{\r\n      display: flex;\r\n      justify-content: center;\r\n      margin: 20px 0;\r\n      transform-style:preserve-3d;\r\n      >div{\r\n        display: flex;\r\n        align-items: flex-end;\r\n        >span{\r\n          opacity: 1;\r\n          margin: 20px;\r\n          font-size: 80px;\r\n          transform: translateZ(20px);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./DomClock.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./DomClock.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DomClock.vue?vue&type=template&id=591f40bb&scoped=true&\"\nimport script from \"./DomClock.vue?vue&type=script&lang=js&\"\nexport * from \"./DomClock.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DomClock.vue?vue&type=style&index=0&id=591f40bb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"591f40bb\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game-ui\",class:{active: _vm.gameList.ended}},[_c('div',{staticClass:\"progress\"},[_c('span',{style:(_vm.progressStyle)})]),_c('ul',[_vm._l((_vm.formConfigs),function(formConfig,index){return _c('li',[_c('div',[_vm._v(_vm._s(formConfig.label))]),_c('div',[_vm._v(_vm._s(_vm.gameList[formConfig.key]))])])}),_c('li',[_c('div',[_vm._v(\"realTimeData\")]),_c('div',[_vm._v(_vm._s(_vm.musicData.realTimeData.shockNum))])]),_c('li',[_c('div',[_vm._v(\"originData\")]),_c('div',[_vm._v(_vm._s(_vm.musicData.originData.shockNum))])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"game-ui\" :class=\"{active: gameList.ended}\">\r\n    <div class=\"progress\">\r\n      <span :style=\"progressStyle\"></span>\r\n    </div>\r\n    <ul>\r\n      <li v-for=\"(formConfig, index) in formConfigs\">\r\n        <div>{{formConfig.label}}</div>\r\n        <div>{{gameList[formConfig.key]}}</div>\r\n      </li>\r\n\r\n      <!--<li>-->\r\n        <!--<div>平均每击扣分</div>-->\r\n        <!--<div v-if=\"gameList.total\">{{gameList.totalScore / (gameList.total - gameList.missCount)}}</div>-->\r\n        <!--<div v-if=\"!gameList.total\">&#45;&#45;</div>-->\r\n      <!--</li>-->\r\n      <li>\r\n        <div>realTimeData</div>\r\n        <div>{{musicData.realTimeData.shockNum}}</div>\r\n      </li>\r\n      <li>\r\n        <div>originData</div>\r\n        <div>{{musicData.originData.shockNum}}</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'GameUI',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv'\r\n    ],\r\n    data() {\r\n      return {\r\n        formConfigs: [\r\n          {\r\n            key: 'total',\r\n            label: '节点数',\r\n          },\r\n          {\r\n            key: 'totalScore',\r\n            label: '扣除分数',\r\n          },\r\n          {\r\n            key: 'maxCombo',\r\n            label: '最大连击数',\r\n          },\r\n          {\r\n            key: 'missCount',\r\n            label: 'miss',\r\n          },\r\n          {\r\n            key: 'uselessCount',\r\n            label: '无效按键',\r\n          },\r\n\r\n        ]\r\n      }\r\n    },\r\n    computed: {\r\n      progressStyle() {\r\n        const {currentTime, durationTime} = this.gameList;\r\n        return {\r\n          transform: `scale(${durationTime ? currentTime / durationTime : 0}, 1)`\r\n        }\r\n      }\r\n    },\r\n    watch: {},\r\n    methods: {},\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .game-ui {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2999;\r\n\r\n    .progress {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      height: 6px;\r\n      width: 100%;\r\n      text-align: left;\r\n\r\n      span {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: linear-gradient(90deg, hsla(0, 50%, 50%, 1), hsla(-30, 50%, 50%, 1), hsla(0, 50%, 50%, 1));\r\n      }\r\n    }\r\n\r\n    ul {\r\n      overflow: hidden;\r\n      border-radius: 10%;\r\n      opacity: 0.4;\r\n      position: absolute;\r\n      width: 90%;\r\n      top: 50%;\r\n      left: 50%;\r\n      padding: 5vh 0 10vh 0;\r\n      transform: translate(-50%, -50%);\r\n      transition: all 0.6s ease-in-out;\r\n      border: 2px solid hsla(15, 50%, 50%, 0);\r\n      white-space: nowrap;\r\n\r\n      &::before {\r\n        content: '';\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        background: linear-gradient(hsla(0, 50%, 50%, 0.6), hsla(10, 50%, 50%, 0.2) 10%, hsla(20, 50%, 50%, 0.2) 90%, hsla(30, 50%, 50%, 0.6));\r\n        opacity: 0;\r\n        transition: all 0.6s ease-in-out;\r\n      }\r\n\r\n      li {\r\n        position: relative;\r\n        padding: 1vh 0;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        div {\r\n          padding: 0 1vw;\r\n\r\n          &:first-of-type {\r\n            flex: 1 1 0;\r\n            text-align: right;\r\n          }\r\n\r\n          &:last-of-type {\r\n            font-size: 32px;\r\n            color: #fff;\r\n            font-weight: bold;\r\n            flex: 5 5 0;\r\n            text-align: left;\r\n            transition: all 0.6s ease-in-out;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.active {\r\n      ul {\r\n        padding: 5vh 5vw 10vh 5vw;\r\n        opacity: 1;\r\n        width: 60%;\r\n        border: 2px solid hsla(15, 50%, 50%, 1);\r\n\r\n        &::before {\r\n          opacity: 1;\r\n        }\r\n\r\n        li {\r\n          div {\r\n            &:last-of-type {\r\n              flex: 1 1 0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./GameUI.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./GameUI.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GameUI.vue?vue&type=template&id=17b5a148&scoped=true&\"\nimport script from \"./GameUI.vue?vue&type=script&lang=js&\"\nexport * from \"./GameUI.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GameUI.vue?vue&type=style&index=0&id=17b5a148&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17b5a148\",\n  null\n  \n)\n\nexport default component.exports","<style lang=\"less\" scoped>\r\n</style>\r\n<template>\r\n  <div class=\"container\">\r\n    <NavBar></NavBar>\r\n    <div class=\"box-wrap\">\r\n      <MusicSearchBox></MusicSearchBox>\r\n      <MusicLocalBox></MusicLocalBox>\r\n      <ModifyBox></ModifyBox>\r\n    </div>\r\n    <div class=\"canvas-view-wrap\">\r\n      <GameUI v-if=\"commonOptions.gameUI\"></GameUI>\r\n      <CanvasPic v-if=\"commonOptions.CanvasPic\"></CanvasPic>\r\n      <CanvasText v-if=\"commonOptions.CanvasText\"></CanvasText>\r\n      <template v-for=\"(item, index) in modifyManager.list[0].list\">\r\n        <CanvasView\r\n          :config=\"item\"\r\n          v-if=\"commonOptions.CanvasView && item && item.constructor.name_ === 'CanvasTrack'\"\r\n        ></CanvasView>\r\n      </template>\r\n    </div>\r\n    <VideoView :index=\"0\" v-if=\"commonOptions.VideoView\"></VideoView>\r\n    <VideoView :index=\"1\" v-if=\"commonOptions.VideoView1\"></VideoView>\r\n    <DomClock v-if=\"commonOptions.DomClock\"></DomClock>\r\n    <ThreeView v-if=\"musicData.realTimeData.data\"></ThreeView>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {ShortCut, shortCut} from \"../tools/ShortCut\";\r\n  import {Color, GameList, GameScene, MusicData, MusicDataFlags, UniqueList} from \"../music/Music\";\r\n  import {MusicConfig} from \"../music/MusicConfig\";\r\n  import {MusicVisualizer} from \"../music/MusicVisualizer\";\r\n  import {DomUtil} from \"../tools/DomUtil\";\r\n  import {ModifyManager} from \"../components/canvasConfig\";\r\n\r\n  import NavBar from '../components/NavBar';\r\n  import MusicSearchBox from '../components/MusicSearchBox';\r\n  import MusicLocalBox from '../components/MusicLocalBox';\r\n  import ModifyBox from '../components/ModifyBox';\r\n  import ThreeView from '../components/ThreeView';\r\n  import CanvasView from '../components/CanvasView';\r\n  import CanvasPic from '../components/CanvasPic';\r\n  import CanvasTitle from '../components/CanvasTitle';\r\n  import CanvasText from '../components/CanvasText';\r\n  import VideoView from '../components/VideoView';\r\n  import DomClock from '../components/DomClock';\r\n  import GameUI from '../components/GameUI';\r\n\r\n\r\n\r\n  const globalData = (function () {\r\n\r\n    const modifyManager = new ModifyManager();\r\n\r\n    const commonOptions_ = modifyManager.getTrackByName('CommonOptionsTrack');\r\n\r\n    const balanceOptions = modifyManager.getTrackByName('BalanceTrack');\r\n    const gameWrap = DomUtil.node('div');\r\n    DomUtil.class(gameWrap, 'game-wrap');\r\n    DomUtil.append(document.body, gameWrap);\r\n\r\n    const gameInner = DomUtil.node('div');\r\n    DomUtil.class(gameInner, 'game-inner');\r\n    DomUtil.append(gameWrap, gameInner);\r\n\r\n    const musicDataFlags = new MusicDataFlags;\r\n\r\n    const musicData = new MusicData(modifyManager);\r\n\r\n    // @ts-ignore;\r\n    const images = ['22824.jpg', '22891.jpg'];\r\n    const musicConfig = new MusicConfig({\r\n      images,\r\n    });\r\n\r\n\r\n    const mv = new MusicVisualizer({\r\n      //定义的音频数组长度\r\n      size: Math.pow(2, 7),\r\n      // draw: draw,\r\n      musicConfig,\r\n      volume: 0.3\r\n    });\r\n\r\n    const gameList = new GameList(mv, gameInner, modifyManager);\r\n\r\n\r\n    const gameTrack = modifyManager.getTrackByName('GameTrack');\r\n    const createGameNode = function (ev) {\r\n      const gameUI = commonOptions_.getVal('gameUI');\r\n      // @ts-ignore;\r\n      gameUI && gameList.createGameNode(ev.rhythmPoint, gameTrack.getVal('trick'));\r\n    };\r\n\r\n    musicData.originData.event.addEventListener('shock', createGameNode);\r\n    musicData.originData.event.addEventListener('update', () => {\r\n      const gameScene = commonOptions_.getVal('gameScene');\r\n\r\n      if (!gameScene) return;\r\n      window.isPhone || new GameScene(musicData.originData, musicData, gameInner, modifyManager);\r\n      const {_x, _y} = musicConfig.mouseMoveConf;\r\n      const maxDeg = 180;\r\n      //@ts-ignore;d\r\n      gameInner.style = `transform: rotateY(${-_x * maxDeg}deg) rotateX(${_y * maxDeg}deg) translateZ(100px);`;\r\n    });\r\n\r\n\r\n    const navList = new UniqueList();\r\n    navList.enter({\r\n      name: '导出预设',\r\n      id: 'export_presets',\r\n      callback: () => {\r\n        modifyManager.exportPresets()\r\n      }\r\n    });\r\n\r\n    navList.enter({\r\n      type: 'fileReader',\r\n      name: '读取预设',\r\n      id: 'import_presets',\r\n      callback: (ev) => {\r\n        const files = ev.target.files;\r\n        console.log(files);\r\n        const reader = new FileReader();\r\n        reader.onload = function () {\r\n          try {\r\n            const res = JSON.parse(reader.result);\r\n            modifyManager.importPresets(res)\r\n          } catch (e) {\r\n            ShortCut.toast(['解析配置失败'])\r\n          }\r\n\r\n        };\r\n        files[0] && reader.readAsText(files[0]);\r\n      }\r\n    });\r\n\r\n    return {\r\n      balanceOptions,\r\n      navList,\r\n      commonOptions_,\r\n      modifyManager,\r\n      musicDataFlags,\r\n      musicData,\r\n      musicConfig,\r\n      gameList,\r\n      mv\r\n    }\r\n  })();\r\n\r\n\r\n  export default {\r\n    name: \"DashBoard\",\r\n    components: {\r\n      NavBar,\r\n      MusicSearchBox,\r\n      MusicLocalBox,\r\n      ModifyBox,\r\n      GameUI,\r\n      CanvasView,\r\n      VideoView,\r\n      CanvasPic,\r\n      CanvasText,\r\n      CanvasTitle,\r\n      DomClock,\r\n      ThreeView\r\n    },\r\n    provide() {\r\n      const {\r\n        navList,\r\n        commonOptions_,\r\n        modifyManager,\r\n        musicDataFlags,\r\n        musicData,\r\n        musicConfig,\r\n        gameList,\r\n        mv\r\n      } = this;\r\n      return {\r\n        navList,\r\n        commonOptions_,\r\n        modifyManager,\r\n        musicDataFlags,\r\n        musicData,\r\n        musicConfig,\r\n        gameList,\r\n        mv\r\n      }\r\n    },\r\n    computed: {\r\n      commonOptions() {\r\n        const commonOptions = {};\r\n        const list = this.commonOptions_.list;\r\n        list.forEach(item => {\r\n          commonOptions[item.key] = item.value;\r\n        });\r\n        return commonOptions;\r\n      }\r\n    },\r\n    mounted() {\r\n      const {musicData, musicDataFlags, musicConfig, mv} = this;\r\n      musicData.realTimeData.event.addEventListener('shock', () => {\r\n        musicDataFlags && musicDataFlags.shockFlag++;\r\n        musicConfig && musicConfig.shock();\r\n      });\r\n\r\n      shortCut.init(undefined, {\r\n        common: {\r\n          spacebar: () => this.gameList.shootGameNode(),\r\n          enter: () => this.gameList.shootGameNode(),\r\n        }\r\n      }, {common: {spacebar: '消除节奏点', enter: '消除节奏点'}});\r\n      mv.draw = (data) => {this.draw(data)};\r\n\r\n      // @ts-ignore;\r\n      document.addEventListener(window.isPhone ? \"touchmove\" : \"mousemove\", function (ev) {\r\n        musicConfig.handelMouseMove(ev)\r\n      });\r\n    },\r\n    data() {\r\n      return globalData;\r\n    },\r\n    watch: {\r\n      balanceOptions: {\r\n        immediate: true,\r\n        deep: true,\r\n        handler(){\r\n          const {balanceOptions, mv} = this;\r\n          mv.biquadFilters && mv.biquadFilters.forEach((i, index) => {\r\n            i.gain.value = balanceOptions.getVal(`balance${index}`);\r\n            i.gain.Q = 1;\r\n          });\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n\r\n      draw({realTimeData, originData}) {\r\n        const {modifyManager, musicDataFlags, musicData, musicConfig, gameList,} = this;\r\n        gameList.setBuffer(modifyManager.getTrackByName('GameTrack').getVal('RhythmPointRemoveFloatRange') * 10);\r\n        musicData.realTimeData.update(realTimeData);\r\n        musicData.originData.update(originData);\r\n\r\n        const [r, g, b, a] = musicConfig.currentImgAviColor;\r\n        const [[r1, g1, b1], [r2, g2, b2]] = musicData.calculateColors = Color.getPure(r, g, b);\r\n\r\n        const {soundTrackArr} = musicData.realTimeData;\r\n\r\n\r\n        // @ts-ignore;\r\n        this.commonOptions.gameUI && (document.querySelector('.sound-track').innerHTML = soundTrackArr.map(\r\n          // @ts-ignore;\r\n          (item) => `<li style=\"${[\r\n            `transform: translateY(-${item.vol}px);`,\r\n            `opacity: ${item.isRhythmPoint ? 1 : item.vol / 256 / 2 + .25};`,\r\n            `background-color: ${item.isRhythmPoint ? `rgba(${255 - r2},${255 - g2},${255 - b2}, 1)` : '#fff'};`\r\n          ].join('')}\"></li>`\r\n        ).join(''));\r\n\r\n        musicDataFlags.dataFlag++;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .container {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .canvas-view-wrap {\r\n    display: flex;\r\n    position: absolute;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=98b67e3c&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style1 from \"./Index.vue?vue&type=style&index=1&id=98b67e3c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"98b67e3c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <Index></Index>\n  </div>\n</template>\n<script>\n  import Index from './views/Index'\n  export default {\n    name: 'App',\n    components: {\n      Index,\n    }\n  }\n</script>\n\n<style lang=\"less\">\n\n  * {\n    border: 0;\n    padding: 0;\n    margin: 0;\n    outline: 0;\n    box-sizing: border-box;\n  }\n\n  *::-webkit-scrollbar {\n    width: 0;\n  }\n\n  ul, li {\n    list-style: none;\n  }\n\n  html, body {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    position: relative;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n  }\n\n  b {\n    display: block;\n    position: absolute;\n    background-size: 1920px 1080px;\n    border-radius: 2px;\n    z-index: 2;\n    color: pink;\n    text-align: center;\n  }\n\n  img {\n    width: 100%;\n    top: 0;\n    left: 0;\n    position: absolute;\n    opacity: 0;\n  }\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-39[0].rules[0].use[1]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].rules[0].use[0]!../node_modules/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4b5f7a9c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","function IsPhone() {\r\n  return /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)\r\n}\r\n// @ts-ignore;\r\nwindow.isPhone = IsPhone();\r\nimport './assets/style/index.less'\r\nimport App from './App.vue'\r\nimport './registerServiceWorker'\r\n\r\n\r\nimport Vue from 'vue'\r\n\r\nnew Vue({render: (h) => h(App),}).$mount('#app');\r\n\r\n\r\n// import { createApp } from 'vue'\r\n// createApp(App).mount('#app')\r\n","import {GetType} from \"@/tools/GetType\";\r\n\r\nexport class DomUtil {\r\n  static getBothAncestor(sDom: Node, eDom: Node) {\r\n    let sDom_: undefined | Node = sDom;\r\n    let eDom_: undefined | Node = eDom;\r\n    while (sDom_) {\r\n      if (DomUtil.hasChild(sDom_, eDom)) {\r\n        return sDom_;\r\n      }\r\n      // @ts-ignore;\r\n      sDom_ = sDom_.parentNode;\r\n    }\r\n    while (eDom_) {\r\n      if (DomUtil.hasChild(eDom_, sDom)) {\r\n        return eDom_;\r\n      }\r\n      // @ts-ignore;\r\n      eDom_ = eDom_.parentNode;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 判断一个节点是否为空节点， 文本节点\r\n   * @param node\r\n   */\r\n  static isEmptyTag(node: Node): boolean {\r\n    if (node.nodeType === 1) {\r\n      if (node.childNodes.length === 0) return true;\r\n      return [...node.childNodes].every(i => DomUtil.isEmptyTag(i))\r\n    } else if (node.nodeType === 3) {\r\n      return !node.textContent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isSameTag(a: Node, b: Node): boolean {\r\n    if (!(a && b)) return false;\r\n    if (a.nodeType === 3 && b.nodeType === 3) {\r\n      return true;\r\n    }\r\n    if (a.nodeType === 1 && b.nodeType === 1) {\r\n      // @ts-ignore;\r\n      return DomUtil.isTag(a, b.tagName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * parentNode 的子孙中是否包含 child\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static hasChild(parentNode: Node, child: Node): boolean {\r\n    const list = [...parentNode.childNodes];\r\n    // @ts-ignore;\r\n    return list.includes(child) || list.some(item => DomUtil.hasChild(item, child))\r\n  }\r\n\r\n  /**\r\n   * 判断child 的祖先中是否包含 parentNode\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static isChildOf(parentNode: ParentNode, child: Node | null) {\r\n    while (child) {\r\n      if (child.parentNode === parentNode) return true;\r\n      child = child.parentNode\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isAncestor(target: Node, dom: Node | null) {\r\n    while (dom && dom.parentNode) {\r\n      if (dom.parentNode === target) return true;\r\n      // @ts-ignore;\r\n      dom = dom.parentNode;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 传入节点的父级中最近的指定标签的一项， 直到 ’根节点‘\r\n   * @param node\r\n   * @param targetTagNames\r\n   * @param endAt 若传入该项， 则匹配到该项时会中断查找（此时不会返回值）\r\n   */\r\n  static findNearestTargetParentNodeByTag(node: Node | undefined | null, targetTagNames: string[] = [], endAt?: Node) {\r\n    targetTagNames = targetTagNames.map(i => i.toLowerCase())\r\n    while (node && !(endAt && node !== endAt)) {\r\n      // @ts-ignore;\r\n      const tagName = (node.tagName || '').toLowerCase();\r\n      if (targetTagNames.includes(tagName)) {\r\n        return node;\r\n      }\r\n      node = node.parentNode\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 替换 nodeName， 注意替换后，为新节点， 且原子节点均转移到新节点\r\n   * @param node\r\n   * @param tag\r\n   */\r\n  static changeTag(node: Node, tag: string) {\r\n    const newNode = DomUtil.node(tag);\r\n    [...node.childNodes].forEach(item => {\r\n      newNode.appendChild(item)\r\n    });\r\n    DomUtil.replace(node, newNode);\r\n    return newNode;\r\n  }\r\n\r\n  /**\r\n   * 将节点从父节点中移除， 如果有父节点的话\r\n   * @param dom\r\n   */\r\n  static remove(dom: Node) {\r\n    dom.parentNode && dom.parentNode.removeChild(dom);\r\n  }\r\n\r\n  /**\r\n   * 判断节点是否为指定标签类型\r\n   * @param dom\r\n   * @param tag\r\n   */\r\n  static isTag(dom: Node, tag: string = ''): boolean {\r\n    return dom.nodeName.toLowerCase() === tag.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * 判断父节点的节点\r\n   * @param dom\r\n   * @param targetType\r\n   */\r\n  static isParentNodeTheTargetType(dom: Node, targetType: string = '') {\r\n    const parentNode = dom.parentNode;\r\n    // @ts-ignore;\r\n    return parentNode && parentNode.tagName.toLowerCase() === targetType.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * 生成 tagName 的空标签\r\n   * @param tagName\r\n   * @param innerHTML\r\n   */\r\n  static node(tagName: string, innerHTML?: string) {\r\n    const node = document.createElement(tagName);\r\n    innerHTML && (node.innerHTML = innerHTML);\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param node\r\n   * @param className\r\n   */\r\n  static class(node: Node, className: string) {\r\n    if (node) {\r\n      // @ts-ignore;\r\n      node.classList.contains(className) || node.classList.add(className);\r\n    }\r\n  }\r\n\r\n  static removeClass(node: Node, className: string) {\r\n    if (node) {\r\n      // @ts-ignore;\r\n      node.classList.contains(className) || node.classList.remove(className)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 生成文本节点\r\n   * @param text\r\n   */\r\n  static text(text: string) {\r\n    return document.createTextNode(text);\r\n  }\r\n\r\n  static list(list: { [index: string]: any }[], template: string) {\r\n  }\r\n\r\n  /**\r\n   * 在之前插入， 如果有父节点的话\r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static insertBefore(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    if (parentNode) {\r\n      parentNode.insertBefore(newDom, oldDom)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 在最后插入子节点\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static append(parentNode: Node, child: Node): void;\r\n  static append(parentNode: Node, childList: Node[]): void;\r\n  static append(parentNode: Node, child: Node | Node[]) {\r\n    if (GetType.isArray(child)) {\r\n      // @ts-ignore;\r\n      child.forEach((i: Node) => {\r\n        parentNode.appendChild(i);\r\n      })\r\n    } else {\r\n      // @ts-ignore;\r\n      parentNode.appendChild(child);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 在开头插入子节点\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static prepend(parentNode: Node, child: Node) {\r\n    const prev = parentNode.childNodes[0];\r\n    if (prev) {\r\n      DomUtil.insertBefore(prev, child)\r\n    } else {\r\n      parentNode.appendChild(child);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 在节点后插入， 如果有父节点的话\r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static insertAfter(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    const nextSibling = oldDom.nextSibling;\r\n\r\n    if (!parentNode) return;\r\n    if (nextSibling) {\r\n      parentNode.insertBefore(newDom, nextSibling)\r\n    } else {\r\n      parentNode.appendChild(newDom);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 替换节点， 如果有父节点的话\r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static replace(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    if (parentNode) {\r\n      parentNode.insertBefore(newDom, oldDom);\r\n      parentNode.removeChild(oldDom);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * 判断是否为标签节点\r\n   * @param node\r\n   */\r\n  static isTagNode(node: Node) {\r\n    return node.nodeType === 1\r\n  }\r\n\r\n  /**\r\n   * 根据该节点的 tagName 生成新的同名标签, 忽略属性及子节点， 如传入 <p id=\"1\"></p> => <p></p>\r\n   * @param node\r\n   */\r\n  static copyEmptyTagNode(node: Node): Node {\r\n    if (!DomUtil.isTagNode(node)) return DomUtil.text('');\r\n    // @ts-ignore;\r\n    return DomUtil.node(node.tagName);\r\n  }\r\n\r\n  /**\r\n   * 递归查找第一个节点的文本节点，（如果首子节点为标签节点， 则递归查找其首子节点）\r\n   * @param dom\r\n   */\r\n  static findFirstTextNode(dom: Node | undefined) {\r\n    while (dom && dom.nodeType === 1) {\r\n      if (dom.nodeType === 1) {\r\n        return dom\r\n      }\r\n      dom = dom.childNodes[0]\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 递归查找第后一个节点的文本节点，（如果末子节点为标签节点， 则递归查找其末子节点）\r\n   * @param dom\r\n   */\r\n  static findLastTextNode(dom: Node | undefined) {\r\n    while (dom && dom.nodeType === 1) {\r\n      if (dom.nodeType === 1) {\r\n        return dom\r\n      }\r\n      dom = dom.childNodes[dom.childNodes.length - 1]\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n\r\n  /**\r\n   * 请文本拆分成三份， 中间的五部分未原来的节点\r\n   * @param textNode\r\n   * @param start\r\n   * @param end\r\n   */\r\n  static splitTextNode(textNode: Node, start: number | undefined, end: number | undefined) {\r\n    const textContent = textNode.textContent || '';\r\n    const start_ = textContent.slice(0, start || 0);\r\n    const mid_ = textContent.slice(start || 0, end || undefined);\r\n    const end_ = textContent.slice(end || textContent.length);\r\n    const sDom = start_ && DomUtil.text(start_);\r\n    const eDom = end_ && DomUtil.text(end_);\r\n\r\n    sDom && DomUtil.insertBefore(textNode, sDom);\r\n    textNode.nodeValue = mid_;\r\n    eDom && DomUtil.insertAfter(textNode, eDom);\r\n    return [sDom, textNode, eDom];\r\n  }\r\n}\r\n\r\n","export class GetType {\r\n  static getType(item: any) {\r\n    return Object.prototype.toString.call(item).slice(8, -1);\r\n  }\r\n\r\n  static isNumber(item: any) {\r\n    return GetType.getType(item) === \"Number\"\r\n  };\r\n\r\n  static isString(item: any) {\r\n    return GetType.getType(item) === \"String\"\r\n  };\r\n\r\n  static isArray(item: any) {\r\n    return GetType.getType(item) === \"Array\"\r\n  };\r\n\r\n  static isObject(item: any) {\r\n    return GetType.getType(item) === \"Object\"\r\n  };\r\n\r\n  static isBoolean(item: any) {\r\n    return GetType.getType(item) === \"Boolean\"\r\n  };\r\n\r\n  static isNull(item: any) {\r\n    return GetType.getType(item) === \"Null\"\r\n  };\r\n\r\n  static isUndefined(item: any) {\r\n    return GetType.getType(item) === \"Undefined\"\r\n  };\r\n\r\n  static isFunction(item: any) {\r\n    return GetType.getType(item) === \"Function\"\r\n  };\r\n\r\n  static isDate(item: any) {\r\n    return GetType.getType(item) === \"Date\"\r\n  };\r\n  static isEmpty(item:any){\r\n    return ['', undefined, null].includes(item);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","\r\nexport interface IOptions {\r\n  key?: string;\r\n  label?: string;\r\n  compType: string;\r\n  formCompType?: string;\r\n  tableCompType: string;\r\n  usage: []|string[];\r\n  readonly?: []|string[];\r\n  excludeWhenSubmit?: []|string[];\r\n  mapLists?: string[][];\r\n  maps: IIndexObj;\r\n  tableGroupCompType?: string;\r\n  [index: string]: any;\r\n}\r\nexport interface IPageConf {\r\n  apiPath?:[]|string[];\r\n  interfaceUrls?:IIndexObj;\r\n  options: []|IOptions[];\r\n  topBtn: []|string[];\r\n  rowBtn: []|string[];\r\n  enableAjax?: boolean;\r\n  formStepConf?: []|[string,string,[]][];\r\n  [index: string]: any;\r\n}\r\n\r\nexport interface IIndexObj {\r\n  [index: string]: any\r\n}\r\nexport interface IIndexFnObj {\r\n  [index: string]: Function\r\n}\r\n\r\n/**\r\n * 查找列表 list 中 键名为 key 且 键值为 val 的第一项\r\n * @param list 列表\r\n * @param key 用于删选的键名\r\n * @param val 用于删选的的键名的键值需要与之相等\r\n */\r\nexport function findEqualByKey(list: IIndexObj = [], key: string, val: any): any {\r\n  // 获取列表中 key === val 的 那一项， 保证返回一个对象（可能导致问题（如果用于vue 监听 可能会出现问题）| 暂时保证返回一个对象更优），TODO\r\n  return list.find((obj: IIndexObj) => obj[key] === val) || {};\r\n}\r\n/**\r\n * 删除列表 list 中 键名为 key 且 键值为 val 的项， 如果没有 则不处理\r\n * @param list 列表\r\n * @param key 用于筛选的字段名\r\n * @param val 用于筛选的的键名的键值需要与之相等\r\n */\r\nexport function deleteEqualByKey(list: any[], key: string, val: any){\r\n  const index = list.findIndex((item: any) => item[key] === val);\r\n  if (index !== -1) {\r\n    list.splice(index, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * 替换列表 list 中 键名为 key 且 键值为 val 的项， 如果没有 则压人\r\n * @param list 列表\r\n * @param key 用于筛选的字段名\r\n * @param val 用于筛选的的键名的键值需要与之相等\r\n * @param replacer 用于替换的元素\r\n */\r\nexport function replaceEqualByKey(list: any[], key: string, val: any, replacer: any) {\r\n  const index = list.findIndex((item: any) => item[key] === val);\r\n  if (!key) {\r\n    list.push(replacer)\r\n  } else if (index !== -1) {\r\n    list.splice(index, 1, replacer);\r\n  } else if (replacer) {\r\n    list.push(replacer)\r\n  }\r\n}\r\n/**\r\n * 合并多个数组到一个新数组， 或者说有条件的数组去重降维\r\n * @param lists 需要合并的数组的集合\r\n * @param key 用于去重的字段名\r\n * @param result 存放结果的数组， 默认空数组\r\n */\r\nexport function concatListEqual(lists: [[] | IIndexObj[] | undefined], key: string, result: IIndexObj[] = []){\r\n  lists.forEach((subLists: []|IIndexObj[]|undefined) => {\r\n    subLists && subLists.forEach(item => {\r\n      replaceEqualByKey(result, key, item[key], item)\r\n    })\r\n  })\r\n  return result;\r\n}\r\nexport class ListEqual{\r\n  /**\r\n   * 查找列表 list 中 键名为 key 且 键值为 val 的第一项\r\n   * @param list 列表\r\n   * @param key 用于删选的键名\r\n   * @param val 用于删选的的键名的键值需要与之相等\r\n   */\r\n  public static find(list: IIndexObj = [], key: string, val: any):any {\r\n    return findEqualByKey(list, key, val)\r\n  }\r\n  /**\r\n   * 查找列表 list 中 键名为 key 且 键值为 val 的第一项\r\n   * @param list 列表\r\n   * @param val 用于删选的的键名的键值需要与之相等\r\n   */\r\n  public static findByKey(list: IIndexObj = [], val: any):any {\r\n    return findEqualByKey(list, 'key', val)\r\n  }\r\n\r\n  /**\r\n   * 删除列表 list 中 键名为 key 且 键值为 val 的项， 如果没有 则不处理\r\n   * @param list 列表\r\n   * @param key 用于筛选的字段名\r\n   * @param val 用于筛选的的键名的键值需要与之相等\r\n   */\r\n  public static delete(list: any[], key: string, val: any) {\r\n    return deleteEqualByKey(list, key, val);\r\n  }\r\n\r\n  /**\r\n   * 删除列表 list 中 键名为 key 且 键值为 val 的项， 如果没有 则不处理\r\n   * @param list 列表\r\n   * @param val 用于筛选的的键名的键值需要与之相等\r\n   */\r\n  public static deleteByKey(list: any[], val: any) {\r\n    return deleteEqualByKey(list, 'key', val);\r\n  }\r\n\r\n  /**\r\n   * 替换列表 list 中 键名为 key 且 键值为 val 的项， 如果没有 则压人\r\n   * @param list 列表\r\n   * @param key 用于筛选的字段名\r\n   * @param val 用于筛选的的键名的键值需要与之相等\r\n   * @param replacer 用于替换的元素\r\n   */\r\n  public static replace(list: any[], key: string, val: any, replacer: any) {\r\n    return replaceEqualByKey(list, key, val, replacer);\r\n  }\r\n\r\n  /**\r\n   * 替换列表 list 中 键名为 key 且 键值为 val 的项， 如果没有 则压人\r\n   * @param list 列表\r\n   * @param val 用于筛选的的键名的键值需要与之相等\r\n   * @param replacer 用于替换的元素\r\n   */\r\n  public static replaceByKey(list: any[], val: any, replacer: any) {\r\n    return replaceEqualByKey(list, 'key', val, replacer);\r\n  }\r\n  /**\r\n   * 合并多个数组到一个新数组， 或者说有条件的数组去重降维\r\n   * @param lists 需要合并的数组的集合\r\n   * @param key 用于合并的字段名\r\n   * @param result 存放结果的数组， 默认空数组\r\n   */\r\n  public static concat(lists: [[]|IIndexObj[]|IOptions[]|undefined], key: string,result: IIndexObj[] = []) {\r\n    return concatListEqual(lists,key, result)\r\n  }\r\n  /**\r\n   * 合并多个数组到一个新数组， 或者说有条件的数组去重降维\r\n   * @param lists 需要合并的数组的集合\r\n   * @param result 存放结果的数组， 默认空数组\r\n   */\r\n  public static concatByKey(lists: [[]|IIndexObj[]|IOptions[]|undefined], result: IIndexObj[] = []) {\r\n    return concatListEqual(lists,'key', result)\r\n  }\r\n}\r\n","import {GetType} from \"./GetType\";\r\nimport {Sound} from \"./Sound\";\r\n// @ts-ignore;\r\nimport {Random} from './random';\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\n\r\nconst keyMap: {[index: string]: string} = {\r\n  \"0\": \"96\", \"1\": \"97\", \"2\": \"98\", \"3\": \"99\", \"4\": \"100\", \"5\": \"101\", \"6\": \"102\", \"7\": \"103\", \"8\": \"104\", \"9\": \"105\",\r\n\r\n  \"a\": \"65\", \"b\": \"66\", \"c\": \"67\", \"d\": \"68\", \"e\": \"69\", \"f\": \"70\", \"g\": \"71\",\r\n  \"h\": \"72\", \"i\": \"73\", \"j\": \"74\", \"k\": \"75\", \"l\": \"76\", \"m\": \"77\", \"n\": \"78\",\r\n  \"o\": \"79\", \"p\": \"80\", \"q\": \"81\",\r\n  \"r\": \"82\", \"s\": \"83\", \"t\": \"84\",\r\n  \"u\": \"85\", \"v\": \"86\", \"w\": \"87\",\r\n  \"x\": \"88\", \"y\": \"89\", \"z\": \"90\",\r\n\r\n  \"f1\": \"112\", \"f2\": \"113\", \"f3\": \"114\", \"f4\": \"115\",\r\n  \"f5\": \"116\", \"f6\": \"117\", \"f7\": \"118\", \"f8\": \"119\",\r\n  \"f9\": \"120\", \"f10\": \"121\", \"f11\": \"122\", \"f12\": \"123\",\r\n\r\n  \"+\": \"107\", \"-\": \"109\", \"*\": \"106\", \"/\": \"111\", \".\": \"110\",\r\n\r\n  \"backspace\": \"8\", \"tab\": \"9\",\r\n  \"clear\": \"12\", \"enter\": \"13\",\r\n  \"esc\": \"27\", \"spacebar\": \"32\",\r\n  \"left arrow\": \"37\", \"up arrow\": \"38\", \"right arrow\": \"39\", \"down arrow\": \"40\",\r\n  \"left\": \"37\", \"up\": \"38\", \"right\": \"39\", \"down\": \"40\",\r\n\r\n  \";:\": \"186\", \"<\": \"188\", \"=+\": \"187\", \"-_\": \"189\", \">\": \"190\", \"/?\": \"191\", \"`~\": \"192\",\r\n\r\n  \"page up\": \"33\", \"page down\": \"34\",\r\n  \"end\": \"35\", \"home\": \"36\",\r\n  \"insert\": \"45\", \"delete\": \"46\",\r\n\r\n  \"cape lock\": \"20\",\r\n  \"num lock\": \"144\",\r\n\r\n  \"[{\": \"219\", \"\\\\|\": \"220\",\r\n  \"]}\": \"221\", \"'\\\"\": \"222\",\r\n\r\n  \"shift\": \"16\", \"control\": \"17\", \"alt\": \"18\",\r\n\r\n  \"搜索\": \"170\", \"收藏\": \"171\", \"浏览器\": \"172\",\r\n  \"音量减\": \"174\", \"音量加\": \"175\", \"静音\": \"173\", \"停止\": \"179\",\r\n  \"邮件\": \"180\",\r\n};\r\ntype TKeyMap = keyof typeof keyMap;\r\n\r\n\r\nconst keyMap_: {[index: string]: string} = {};\r\n\r\nObject.keys(keyMap).forEach((key: string) => {\r\n  keyMap_[keyMap[key]] = key\r\n});\r\nclass ShortCutAbstract {\r\n  common(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  alt(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl_alt(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  alt_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n  ctrl_alt_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n}\r\n\r\nfunction makeShortCutInitFn(key: string) {\r\n  // @ts-ignore;\r\n  ShortCut.prototype[key] = function (keyNum: TKeyMap|number, cb: Function) {\r\n    GetType.isNumber(keyNum) || (keyNum = keyMap[keyNum] || keyNum);\r\n    // @ts-ignore;\r\n    this.maps[key] || (this.maps[key] = {});\r\n    // @ts-ignore;\r\n    this.maps[key][keyNum] = (ev: Event) => {\r\n      Sound.play('confirm');\r\n      const result = cb();\r\n      if (!result) {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  // @ts-ignore;\r\n  ShortCut.prototype[`${key}Desc`] = function (keyNum: TKeyMap|number, desc: any) {\r\n    GetType.isNumber(keyNum) || (keyNum = keyMap[keyNum] || keyNum);\r\n    // @ts-ignore;\r\n    this.describeMaps[key] || (this.describeMaps[key] = {});\r\n    // @ts-ignore;\r\n    this.describeMaps[key][keyNum] = desc;\r\n  }\r\n}\r\nconst requestAnimationFrame = window.requestAnimationFrame ||\r\n  // @ts-ignore;\r\n  window.webkitrequestAnimationFrame ||\r\n  // @ts-ignore;\r\n  window.mozrequestAnimationFrame;//兼容\r\nconst wrap = DomUtil.node('div');\r\nwrap.className = 'short-cut-view';\r\nDomUtil.append(document.body, wrap);\r\n\r\nconst triggered: string[][] = [];\r\nexport class ShortCut extends ShortCutAbstract{\r\n  static toast(message: string[]){\r\n\r\n    const node = DomUtil.node('div');\r\n    message.forEach(key => {\r\n      DomUtil.append(node, DomUtil.node('span', key.toUpperCase()))\r\n    });\r\n\r\n    DomUtil.prepend(wrap, node);\r\n    requestAnimationFrame(() => {\r\n      requestAnimationFrame(() => {\r\n        DomUtil.class(node, 'active');\r\n        setTimeout(() => {\r\n          DomUtil.class(node, 'hide');\r\n          setTimeout(() => {\r\n            requestAnimationFrame(() => DomUtil.remove(node));\r\n          }, 2000);\r\n        }, 1000);\r\n      })\r\n    });\r\n  }\r\n  hasInited: boolean = false;\r\n  maps = {};\r\n\r\n  describeMaps = {};\r\n\r\n  static triggeredCacheLength = 20;\r\n  static triggered : string[][] = triggered;\r\n  static cacheTriggered(keys: string[]){\r\n    const {triggered, triggeredCacheLength} = ShortCut;\r\n    const prev = triggered[0];\r\n    if (prev && keys.every(((val, index) => prev[index] === val))) return;\r\n    triggered.unshift(keys);\r\n\r\n    ShortCut.toast(keys)\r\n    if (triggered.length > triggeredCacheLength) {\r\n      triggered.pop();\r\n    }\r\n  }\r\n\r\n\r\n  init(dom?: Node, fns: any = {}, describeMaps: any = {}) {\r\n    const slef = this;\r\n    const $body = dom || document.querySelector(\"body\");\r\n    // @ts-ignore;\r\n    this.hasInited || $body.addEventListener('keydown', (ev: Event) => {\r\n      let keys = [];\r\n\r\n      let key = '';\r\n      // @ts-ignore;\r\n      if (ev.ctrlKey) {\r\n        keys.push('ctrl');\r\n      }\r\n      // @ts-ignore;\r\n      if (ev.altKey) {\r\n        keys.push('alt');\r\n      }\r\n      // @ts-ignore;\r\n      if (ev.shiftKey) {\r\n        keys.push('shift');\r\n      }\r\n      key = keys.join('') || '';\r\n      // @ts-ignore;\r\n      keys.push(keyMap_[ev.which]);\r\n\r\n      // @ts-ignore;\r\n      const describeMaps_ = this.describeMaps[key || 'common'] || {};\r\n      // @ts-ignore;\r\n      keys.push(describeMaps_[ev.which] || '暂无描述，待补充');\r\n\r\n      // @ts-ignore;\r\n      const cmd = `slef.maps.${key || 'common'}[${ev.which}](ev)`;\r\n      try {\r\n        eval(cmd);\r\n        ShortCut.cacheTriggered(keys);\r\n      } catch (e) {\r\n        // console.log(e)\r\n      }\r\n\r\n    });\r\n    if (fns) {\r\n      GetType.isObject(fns) && Object.keys(fns).forEach((key: string) => {\r\n        // @ts-ignore;\r\n        fns[key] && Object.keys(fns[key]).forEach(item => this[key](item, fns[key][item]));\r\n      });\r\n    }\r\n    if (describeMaps) {\r\n      GetType.isObject(describeMaps) && Object.keys(describeMaps).forEach((key: string) => {\r\n        // @ts-ignore;\r\n        describeMaps[key] && Object.keys(describeMaps[key]).forEach(item => this[`${key}Desc`](item, describeMaps[key][item]));\r\n      });\r\n    }\r\n    this.hasInited = true;\r\n  };\r\n}\r\n\r\n['common', 'ctrl', 'alt', 'shift', 'ctrl_alt', 'ctrl_shift', 'alt_shift', 'ctrl_alt_shift',].forEach(makeShortCutInitFn);\r\n\r\n\r\n\r\n\r\nexport const shortCut = new ShortCut();\r\nshortCut.init();\r\n","const soundMap = {\r\n  change: \"./sound/change.mp3\",\r\n  confirm: \"./sound/confirm.mp3\",\r\n  done: \"./sound/done.mp3\",\r\n  warning: \"./sound/warning.mp3\",\r\n};\r\nclass CacheList {\r\n  list: Element[];\r\n  constructor(){\r\n    this.list = [];\r\n  }\r\n  getAudio(){\r\n    let dom = this.list.shift();\r\n    const playEnd = () => {\r\n      dom && this.list.push(dom);\r\n    };\r\n    if (!dom) {\r\n      dom = document.createElement('audio');\r\n      // @ts-ignore;\r\n      dom.volume = .2;\r\n      // @ts-ignore;\r\n      dom.autoplay = 'autoplay';\r\n      const body = document.querySelector(\"body\");\r\n      body && body.appendChild(dom);\r\n\r\n      dom.addEventListener('ended', playEnd);\r\n      dom.addEventListener('error', playEnd);\r\n    }\r\n\r\n    return dom;\r\n  }\r\n}\r\n\r\nconst cacheList = new CacheList();\r\ntype TSoundType = keyof typeof soundMap;\r\nexport class Sound {\r\n  static play(url: TSoundType){\r\n    const dom = cacheList.getAudio();\r\n    const volumeMap = {\r\n      change: 0.01,\r\n      confirm: 0.01,\r\n      done: 0.2,\r\n      warning: 0.01,\r\n    }\r\n    // @ts-ignore;\r\n    dom.volume = volumeMap[url] || 0.1;\r\n    // @ts-ignore;\r\n    dom.src = soundMap[url] || url;\r\n  }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\t__webpack_require__.O();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdy_player\"] = self[\"webpackChunkdy_player\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(324); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}