{"version":3,"sources":["webpack://dy-player/./src/App.vue","webpack://dy-player/./src/App.vue?d5d2","webpack://dy-player/./src/registerServiceWorker.ts","webpack://dy-player/./src/views/Index.vue","webpack://dy-player/./src/music/Music.ts","webpack://dy-player/./src/utils.ts","webpack://dy-player/./src/units/appendStyle.ts","webpack://dy-player/./src/picture/Picture.ts","webpack://dy-player/./src/music/MusicConfig.ts","webpack://dy-player/./src/components/canvasConfig.js","webpack://dy-player/./src/music/MusicVisualizer.ts","webpack://dy-player/./src/components/NavBar.vue","webpack://dy-player/./src/components/NavBar.vue?98f1","webpack://dy-player/./src/components/MusicSearchBox.vue","webpack://dy-player/./proxy/httpConf.js","webpack://dy-player/./proxy/http.js","webpack://dy-player/./src/units/ListBox.ts","webpack://dy-player/./src/components/ListBoxView.vue","webpack://dy-player/./src/components/ListBoxView.vue?17a2","webpack://dy-player/./src/components/MusicSearchBox.vue?2de1","webpack://dy-player/./src/components/MusicLocalBox.vue","webpack://dy-player/./src/components/MusicLocalBox.vue?dc41","webpack://dy-player/./src/components/ModifyBox.vue","webpack://dy-player/./src/components/ModifyBox.vue?0929","webpack://dy-player/./src/components/CanvasView.vue","webpack://dy-player/./src/components/CanvasView.vue?869e","webpack://dy-player/./src/components/CanvasPic.vue","webpack://dy-player/./src/tools/random.js","webpack://dy-player/./src/tools/PS.ts","webpack://dy-player/./src/components/CanvasPic.vue?db94","webpack://dy-player/./src/components/CanvasTitle.vue","webpack://dy-player/./src/components/CanvasTitle.vue?521e","webpack://dy-player/./src/components/CanvasText.vue","webpack://dy-player/./src/components/CanvasText.vue?35e3","webpack://dy-player/./src/components/VideoView.vue","webpack://dy-player/./src/components/VideoView.vue?534f","webpack://dy-player/./src/components/DomClock.vue","webpack://dy-player/./src/tools/Time.ts","webpack://dy-player/./src/components/DomClockItem.vue","webpack://dy-player/./src/components/DomClockItem.vue?0560","webpack://dy-player/./src/components/DomClock.vue?cd3d","webpack://dy-player/./src/components/GameUI.vue","webpack://dy-player/./src/components/GameUI.vue?4106","webpack://dy-player/./src/views/Index.vue?2afe","webpack://dy-player/./src/router/index.ts","webpack://dy-player/./src/main.ts","webpack://dy-player/./src/tools/DomUtil.ts","webpack://dy-player/./src/tools/GetType.ts","webpack://dy-player/./src/tools/ShortCut.ts","webpack://dy-player/./src/tools/Sound.ts","webpack://dy-player/webpack/bootstrap","webpack://dy-player/webpack/runtime/chunk loaded","webpack://dy-player/webpack/runtime/compat get default export","webpack://dy-player/webpack/runtime/define property getters","webpack://dy-player/webpack/runtime/global","webpack://dy-player/webpack/runtime/hasOwnProperty shorthand","webpack://dy-player/webpack/runtime/make namespace object","webpack://dy-player/webpack/runtime/jsonp chunk loading","webpack://dy-player/webpack/startup"],"names":["id","script","render","ready","console","log","registered","cached","updatefound","updated","offline","error","class","commonOptions","CanvasPic","CanvasText","CanvasView","item","constructor","name_","modifyManager","list","index","config","VideoView","VideoView1","DomClock","EventTarget_","type","callback","this","listeners","push","stack","i","l","length","splice","removeEventListener","event","target","call","MusicDataFlags","RhythmPoint","vol","isRhythmPoint","EventTar","fnMap","ev","fns","forEach","MVData","data","soundTrackArr","prevAvrLevel","prevAddSpeed","total","reduce","a","b","avrLevel","addSpeed","gameTrack","RhythmPointVolumeFloatRange","rhythmPoint","shockNum","Event","dispatchEvent","soundTrackArrMaxLen","shift","MusicData","realTimeData","originData","GameScore","score","gameScore","DomUtil","classList","add","innerHTML","toString","document","body","prevNode","GameCombo","combo","undefined","GameNode","gameList","isDebug","gameInner","calculateScore","Date","now","remove","time","dom","className","style","hueRange","deg","RhythmPointCenterPointOffset","innerDom","addEventListener","endFunction","currentTime","Math","abs","delay","setCurrentScore","Sound","RhythmPointMissTipSound","GameList","mv","delayTime","value","ended","currentScore","totalScore","maxCombo","missCount","uselessCount","isStop","isMiss","setCombo","buffer","find","gameNode","indexOf","eventTarget","GameScene","gameData","musicData","filter","x","per","map","join","destroy","Color","round","rate","r","g","min","dCompose","MakeThrottle","prevTime","propertyKey","descriptor","fn","apply","arguments","appendStyle","compName","styleStr","forceUpdate","cacheMap","createElement","replace","head","appendChild","canvas","pciCanvas","Picture","musicConfig","compressRate","ctx","getContext","cacheList","cacheImg","img","onload","setImage","src","width","height","drawImage","imageData","getImageData","result","color","aviOfArr","noNeedChangeCurrentImgAviColor","currentImgAviColor","url","makeEl","test","offsetWidth","offsetHeight","pciCtx","y","w","h","sumOfArr","arr","sum","num","MusicConfig","options","_x","_y","_main","main","images","imageGroup","pictureCanvasCtx","setPictureCanvasCtx","currentImgSrc","changePic","mouseMoveConf","enent","touches","clientX","clientY","conf","Object","keys","key","lrc","reverse","unshift","pop","shockAtOnce","picDom","load","shock","volume","Track","defaultValue","current","playing","commonConfigs","name","valueType","max","desc","defaultVal","defineProperty","get","len","play","setIndex","thisItem","val","CanvasTrack","rest","VideoTrack","setConfig","CommonOptionsTrack","GameTrack","BalanceTrack","biquadFilterFrequency","ModifyManager","updateCommonOptions","setList","TrackList","init","trackList","balanceTrack","savePresets","replacer","enc","dec","prev","next","delete","copy","constructorList","parent","loadPresets","constructorName","hasDto","some","localStorage","setItem","JSON","stringify","presets","parse","getItem","hasDot","e","includes","createPanner","MusicVisualizer","ac","panner","panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","positionX","positionY","positionZ","setOrientation","setPosition","initListener","listener","forwardX","forwardY","forwardZ","upX","upY","upZ","createBiquadFilters","input","output","biquadFilters","frequency","createBiquadFilter","biquadFilter","connect","createAudioSource","context","$audio","source","createMediaElementSource","crossOrigin","autoplay","onended","obj","analyser","createAnalyser","analyserBefore","gain","createGain","size","fftSize","createDelay","destination","xhr","XMLHttpRequest","draw","changeVolume","visualize","fun","stopType","abort","open","responseType","response","send","arrayBuffer","decodeAudioData","err","path","n","count","stop","resetLatestPlayTime","ArrayBuffer","decode","bufferSource","createBufferSource","start","latestPlayTime","window","isPhone","percent","Uint8Array","frequencyBinCount","requestAnimationFrame","webkitrequestAnimationFrame","mozrequestAnimationFrame","hidden","getByteFrequencyData","setVolume","AudioContext","webkitAudioContext","resumeAudio","state","resume","active","navList","provide","components","mixins","props","inject","searchText","computed","watch","methods","mounted","makeAjax","cb","then","fullUrl","location","protocol","hostname","fetch","encodeURI","xhrFields","withCredentials","credentials","res","json","catch","special","ajax","camel","str","split","toUpperCase","slice","httpConf","file","route","ListBox","shallPlay","for","isFocus","ref","placeholder","focus","blur","tabs","tabItem","getImgUrl","song","_index","focusKey","$refs","isFocus_","setTimeout","coverImgUrl","al","picUrl","album","beforeDestory","$shortCut","ShortCut","common","up","s","down","q","107","c","4","6","left","right","d","8","prevItem","2","nextItem","esc","alt","ctrl","enter","search","backspace","ListBoxView","lrcs","sheet","message","sheetList","playlist","tracks","timer","account","changeBG_When_LRC_Changed","setLrc","immediate","handler","parseInt","curIndex","getUserSongList","getLrc","songId","lrcList","lyric","info","match","login","user","phone","password","getMySheets","getSongUrl","durationTime","duration","dt","startSong","paused","pause","uid","recommend","like","playlistTracks","op","pid","keywords","songs","clearInterval","endSong","setInterval","nextTime","p","songList","deep","renderCanvas","canvasConfig","$canvasHidded","$el","dataSize","viewCtx","calculateColors","dataBefore","data1","copyData","dataBefore_","showDataBefore","data2","renderData","noZero","baseSize","baseSizeType","midPosition","midPositionX","midPositionY","mainRadius","avrLevelMainRadiusModify","floatRange","avrLevelFloatRangeModify","fillStyle","disable","clearPrevView","fillRect","clearRect","strokeStyle","mainRadiusOpacity","lineWidth","mainRadiusLineWidth","beginPath","direction","arc","PI","closePath","stroke","perDeg","stepModify","halfPerDeg","rotate","lineLineWidth","dataModify","offset","dataOffsetModify","minHeight","minHeightModify","nextVal","lin1","point1","sin","cos","point2","lr","createLinearGradient","addColorStop","moveTo","lineTo","edge","line","nextEdge","bezierCurveTo","dot","position","fill","rect","renderVal","threshold","dots","renderType","$canvas","OffscreenCanvas","Random","max_","min_","sign_","exec","GetType","unique","int","boolean","random","sign","aisleMap","PS","aisleType","cutType","ret","cur","cutFnMap","xOffset","yOffset","zoom","aisleData","getAisle","1","3","thisCount","imgCtx","shallMalfunction","commonOptions_","CanvasPicMalfunction","putImageData","querySelector","des","index_","ps","dirR","off","aisleOffset","$canvasImage","textStyle","musicDataFlags","opa","scale","CanvasTextMalfunction","font","measureText","floor","textAlign","textBaseline","strokeText","pattern","createPattern","fillText","W","_w","_h","__y","muted","handelEnded","shallChange","srcs","changeVideo","isChangeDot","beforeDestroy","d3wrapStyle","list_","Time","stamp","getFullYear","to00","getMonth","getDate","getHours","getMinutes","getSeconds","to000","getMilliseconds","DomClockItem","maxDeg","transform","dataFlag","format","progressStyle","formConfigs","formConfig","label","globalData","gameWrap","pow","createGameNode","trick","NavBar","MusicSearchBox","MusicLocalBox","ModifyBox","GameUI","CanvasTitle","shockFlag","spacebar","shootGameNode","handelMouseMove","setBuffer","RhythmPointRemoveFloatRange","update","getPure","r2","g2","b2","routes","component","router","history","IsPhone","navigator","userAgent","App","use","mount","sDom","eDom","sDom_","eDom_","hasChild","parentNode","node","nodeType","childNodes","every","isEmptyTag","textContent","isTag","tagName","child","targetTagNames","endAt","toLowerCase","tag","newNode","removeChild","nodeName","targetType","contains","createTextNode","template","oldDom","newDom","insertBefore","nextSibling","isTagNode","text","textNode","end","start_","mid_","end_","nodeValue","insertAfter","prototype","getType","keyMap","keyMap_","ShortCutAbstract","keyNum","makeShortCutInitFn","maps","stopPropagation","preventDefault","describeMaps","wrap","triggered","slef","$body","hasInited","ctrlKey","altKey","shiftKey","which","describeMaps_","cmd","eval","cacheTriggered","triggeredCacheLength","toast","shortCut","soundMap","change","confirm","done","warning","CacheList","playEnd","getAudio","volumeMap","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","definition","o","enumerable","globalThis","Function","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","143","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"js/app.e4d64e2c.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<style lang=\"less\">\n\n  * {\n    border: 0;\n    padding: 0;\n    margin: 0;\n    outline: 0;\n    box-sizing: border-box;\n  }\n\n  *::-webkit-scrollbar {\n    width: 0;\n  }\n\n  ul, li {\n    list-style: none;\n  }\n\n  html, body {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    position: relative;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n  }\n\n  b {\n    display: block;\n    position: absolute;\n    background-size: 1920px 1080px;\n    border-radius: 2px;\n    z-index: 2;\n    color: pink;\n    text-align: center;\n  }\n\n  img {\n    width: 100%;\n    top: 0;\n    left: 0;\n    position: absolute;\n    opacity: 0;\n  }\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=04d92844\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=04d92844&lang=less\"\nscript.render = render\n\nexport default script","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","<style lang=\"less\" scoped>\r\n</style>\r\n<template>\r\n  <div class=\"container\">\r\n    <NavBar></NavBar>\r\n    <div class=\"box-wrap\">\r\n      <MusicSearchBox></MusicSearchBox>\r\n      <MusicLocalBox></MusicLocalBox>\r\n      <ModifyBox></ModifyBox>\r\n    </div>\r\n    <div class=\"canvas-view-wrap\">\r\n      <GameUI></GameUI>\r\n      <CanvasPic v-if=\"commonOptions.CanvasPic\"></CanvasPic>\r\n      <CanvasText v-if=\"commonOptions.CanvasText\"></CanvasText>\r\n      <CanvasView\r\n        v-for=\"(item, index) in modifyManager.list[0].list\"\r\n        :config=\"item\"\r\n        v-if=\"commonOptions.CanvasView && item && item.constructor.name_ === 'CanvasTrack'\"\r\n      ></CanvasView>\r\n    </div>\r\n    <VideoView :index=\"0\" v-if=\"commonOptions.VideoView\"></VideoView>\r\n    <VideoView :index=\"1\" v-if=\"commonOptions.VideoView1\"></VideoView>\r\n    <DomClock v-if=\"commonOptions.DomClock\"></DomClock>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {onMounted} from 'vue';\r\n  import {shortCut} from \"../tools/ShortCut\";\r\n  import {Color, GameList, GameScene, MusicData, MusicDataFlags} from \"../music/Music\";\r\n  import {MusicConfig} from \"../music/MusicConfig\";\r\n  import {MusicVisualizer} from \"../music/MusicVisualizer\";\r\n  import {DomUtil} from \"../tools/DomUtil\";\r\n  import {ModifyManager} from \"../components/canvasConfig\";\r\n\r\n  import NavBar from '../components/NavBar';\r\n  import MusicSearchBox from '../components/MusicSearchBox';\r\n  import MusicLocalBox from '../components/MusicLocalBox';\r\n  import ModifyBox from '../components/ModifyBox';\r\n  import CanvasView from '../components/CanvasView';\r\n  import CanvasPic from '../components/CanvasPic';\r\n  import CanvasTitle from '../components/CanvasTitle';\r\n  import CanvasText from '../components/CanvasText';\r\n  import VideoView from '../components/VideoView';\r\n  import DomClock from '../components/DomClock';\r\n  import GameUI from '../components/GameUI';\r\n\r\n\r\n  const globalData = (function () {\r\n\r\n    const modifyManager = new ModifyManager();\r\n\r\n    const commonOptions_ = modifyManager.list.find(i => i.constructor.name_ === 'TrackList')\r\n      .list.find(i => i.constructor.name_ === 'CommonOptionsTrack').list;\r\n\r\n    const gameWrap = DomUtil.node('div');\r\n    DomUtil.class(gameWrap, 'game-wrap');\r\n    DomUtil.append(document.body, gameWrap);\r\n\r\n    const gameInner = DomUtil.node('div');\r\n    DomUtil.class(gameInner, 'game-inner');\r\n    DomUtil.append(gameWrap, gameInner);\r\n\r\n    const musicDataFlags = new MusicDataFlags;\r\n\r\n    const musicData = new MusicData(modifyManager);\r\n\r\n    // @ts-ignore;\r\n    const images = ['22824.jpg', '22891.jpg'];\r\n    const musicConfig = new MusicConfig({\r\n      images,\r\n    });\r\n\r\n\r\n    const mv = new MusicVisualizer({\r\n      //\r\n      size: Math.pow(2, 6),\r\n      // draw: draw,\r\n      musicConfig,\r\n      volume: 0.3\r\n    });\r\n\r\n    const gameList = new GameList(mv, gameInner, modifyManager);\r\n\r\n\r\n    const createGameNode = function (ev) {\r\n      // @ts-ignore;\r\n      gameList.createGameNode(ev.rhythmPoint, modifyManager.gameTrack.trick);\r\n    };\r\n\r\n    musicData.originData.event.addEventListener('shock', createGameNode);\r\n    musicData.originData.event.addEventListener('update', () => {\r\n      window.isPhone || new GameScene(musicData.originData, musicData, gameInner, modifyManager);\r\n      const {_x, _y} = musicConfig.mouseMoveConf;\r\n      const maxDeg = 180;\r\n      //@ts-ignore;d\r\n      gameInner.style = `transform: rotateY(${-_x * maxDeg}deg) rotateX(${_y * maxDeg}deg) translateZ(100px);`;\r\n    });\r\n\r\n    return {\r\n      navList: [],\r\n      commonOptions_,\r\n      modifyManager,\r\n      musicDataFlags,\r\n      musicData,\r\n      musicConfig,\r\n      gameList,\r\n      mv\r\n    }\r\n  })();\r\n\r\n\r\n  export default {\r\n    name: \"DashBoard\",\r\n    components: {\r\n      NavBar,\r\n      MusicSearchBox,\r\n      MusicLocalBox,\r\n      ModifyBox,\r\n      GameUI,\r\n      CanvasView,\r\n      VideoView,\r\n      CanvasPic,\r\n      CanvasText,\r\n      CanvasTitle,\r\n      DomClock,\r\n    },\r\n    provide() {\r\n      const {\r\n        navList,\r\n        commonOptions_,\r\n        modifyManager,\r\n        musicDataFlags,\r\n        musicData,\r\n        musicConfig,\r\n        gameList,\r\n        mv\r\n      } = this;\r\n      return {\r\n        navList,\r\n        commonOptions_,\r\n        modifyManager,\r\n        musicDataFlags,\r\n        musicData,\r\n        musicConfig,\r\n        gameList,\r\n        mv\r\n      }\r\n    },\r\n    computed: {\r\n      commonOptions() {\r\n        const commonOptions = {};\r\n        const list = this.commonOptions_;\r\n        list.forEach(item => {\r\n          commonOptions[item.key] = item.value;\r\n        });\r\n        return commonOptions;\r\n      }\r\n    },\r\n    mounted() {\r\n      const {musicData, musicDataFlags, musicConfig, mv} = this;\r\n\r\n      musicData.realTimeData.event.addEventListener('shock', () => {\r\n        musicDataFlags && musicDataFlags.shockFlag++;\r\n        musicConfig && musicConfig.shock();\r\n      });\r\n\r\n      shortCut.init(undefined, {\r\n        common: {\r\n          spacebar: () => this.gameList.shootGameNode(),\r\n          enter: () => this.gameList.shootGameNode(),\r\n        }\r\n      }, {common: {spacebar: '', enter: ''}});\r\n      mv.draw = (data) => {this.draw(data)};\r\n\r\n      // @ts-ignore;\r\n      window.isPhone ? document.addEventListener(\"touchmove\", function (ev) {\r\n        musicConfig.handelMouseMove(ev)\r\n      }) : document.addEventListener(\"mousemove\", function (ev) {\r\n        musicConfig.handelMouseMove(ev)\r\n      });\r\n    },\r\n    data() {\r\n      return globalData;\r\n    },\r\n    methods: {\r\n\r\n      draw({realTimeData, originData}) {\r\n        const {modifyManager, musicDataFlags, musicData, musicConfig, gameList,} = this;\r\n        gameList.setBuffer(modifyManager.gameTrack.RhythmPointRemoveFloatRange * 10);\r\n        musicData.realTimeData.update(realTimeData);\r\n        musicData.originData.update(originData);\r\n\r\n        const [r, g, b, a] = musicConfig.currentImgAviColor;\r\n        const [[r1, g1, b1], [r2, g2, b2]] = musicData.calculateColors = Color.getPure(r, g, b);\r\n\r\n        const {soundTrackArr} = musicData.realTimeData;\r\n\r\n        // @ts-ignore;\r\n        document.querySelector('.sound-track').innerHTML = soundTrackArr.map(\r\n          // @ts-ignore;\r\n          (item) => `<li style=\"${[\r\n            `transform: translateY(-${item.vol}px);`,\r\n            `opacity: ${item.isRhythmPoint ? 1 : item.vol / 256 / 2 + .25};`,\r\n            `background-color: ${item.isRhythmPoint ? `rgba(${255 - r2},${255 - g2},${255 - b2}, 1)` : '#fff'};`\r\n          ].join('')}\"></li>`\r\n        ).join('');\r\n\r\n        musicDataFlags.dataFlag++;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .container {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .canvas-view-wrap {\r\n    display: flex;\r\n    position: absolute;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n</style>\r\n","import {MusicConfig} from \"./MusicConfig\";\r\nimport {MusicVisualizer} from \"./MusicVisualizer\";\r\n\r\n// @ts-ignore;\r\nimport {ModifyManager} from \"./canvasConfig.js\";\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\nimport {Sound} from \"@/tools/Sound\"\r\n// @ts-ignore;\r\n\r\n\r\nclass EventTarget_ {\r\n  listeners: {[index: string]: any} = {};\r\n  public addEventListener(type: string, callback: Function) {\r\n    if(!(type in this.listeners)) {\r\n      this.listeners[type] = [];\r\n    }\r\n    this.listeners[type].push(callback);\r\n  }\r\n  public removeEventListener(type: string, callback: Function): any {\r\n    if(!(type in this.listeners)) {\r\n      return;\r\n    }\r\n    const stack = this.listeners[type];\r\n    for(let i = 0, l = stack.length; i < l; i++) {\r\n      if(stack[i] === callback){\r\n        stack.splice(i, 1);\r\n        return this.removeEventListener(type, callback);\r\n      }\r\n    }\r\n  }\r\n  public dispatchEvent(event: Event) {\r\n    if(!(event.type in this.listeners)) {\r\n      return;\r\n    }\r\n    const stack = this.listeners[event.type];\r\n    // @ts-ignore;\r\n    event.target = this;\r\n    for(let i = 0, l = stack.length; i < l; i++) {\r\n      stack[i].call(this, event);\r\n    }\r\n  }\r\n}\r\n\r\nexport class MusicDataFlags {\r\n  dataFlag: number = 0;\r\n  shockFlag: number = 0;\r\n}\r\n\r\nclass RhythmPoint{\r\n  isRhythmPoint: boolean;\r\n  vol: number;\r\n  constructor(vol: number, isRhythmPoint: boolean){\r\n    this.vol = vol;\r\n    this.isRhythmPoint = isRhythmPoint;\r\n  }\r\n}\r\n\r\ntype IColor = [number, number, number, number] | [number, number, number];\r\n\r\nclass EventTar {\r\n  fnMap:{[index: string]: Function[]} = {};\r\n  addEventListener(type: string, callback: Function){\r\n    this.fnMap[type] || (this.fnMap[type] = []);\r\n    this.fnMap[type].push(callback)\r\n  }\r\n  dispatchEvent(ev: Event){\r\n    const fns = this.fnMap[ev.type];\r\n    fns && fns.forEach(i => i(ev));\r\n  }\r\n}\r\nclass MVData{\r\n  event: EventTar = new EventTar();\r\n  prevAddSpeed: number = 0;\r\n  prevAvrLevel: number = 0;\r\n  data?: Uint8Array;\r\n  avrLevel: number = 0;\r\n  total: number = 0;\r\n  addSpeed: number = 0;\r\n  soundTrackArr: RhythmPoint[] = [];\r\n  soundTrackArrMaxLen: number = 100;\r\n  shockNum: number = 0;\r\n  modifyManager: ModifyManager;\r\n  constructor(modifyManager: ModifyManager){\r\n    this.modifyManager = modifyManager;\r\n  }\r\n  update(data: Uint8Array){\r\n    const {soundTrackArr, prevAvrLevel, prevAddSpeed} = this;\r\n    this.data = data;\r\n    this.total = data.reduce((a = 0, b = 0) => (a + b));\r\n    const avrLevel = this.avrLevel = this.total / data.length;\r\n    const addSpeed = this.addSpeed = avrLevel - prevAvrLevel;\r\n\r\n    const {RhythmPointVolumeFloatRange = 0} = this.modifyManager.gameTrack;\r\n    /**\r\n     *    \r\n     *   \r\n     */\r\n    const isRhythmPoint = prevAddSpeed <= 0 && addSpeed > RhythmPointVolumeFloatRange / 10;\r\n\r\n    const rhythmPoint = new RhythmPoint(avrLevel, isRhythmPoint);\r\n    soundTrackArr.push(rhythmPoint);\r\n    if (isRhythmPoint) {\r\n      this.shockNum ++;\r\n      const ev = new Event('shock');\r\n      // @ts-ignore;\r\n      ev.rhythmPoint = rhythmPoint;\r\n      this.event.dispatchEvent(ev);\r\n    }\r\n\r\n    if (soundTrackArr.length > this.soundTrackArrMaxLen) {\r\n      soundTrackArr.shift();\r\n    }\r\n\r\n    this.prevAddSpeed = addSpeed;\r\n    this.prevAvrLevel = avrLevel;\r\n\r\n    this.event.dispatchEvent(new Event('update'));\r\n  }\r\n}\r\n\r\nexport class MusicData {\r\n  realTimeData: MVData;\r\n  originData: MVData;\r\n  currentImgAviColor: IColor = [0,0,0,0];\r\n  calculateColors: [IColor, IColor] = [[255, 255, 255], [255, 255, 255]];\r\n  modifyManager: ModifyManager;\r\n  constructor(\r\n    modifyManager: ModifyManager\r\n  ){\r\n    this.modifyManager = modifyManager;\r\n    this.realTimeData = new MVData(modifyManager);\r\n    this.originData = new MVData(modifyManager);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nclass GameScore{\r\n  static prevNode?: Node;\r\n  constructor(score: number | string){\r\n    const gameScore = DomUtil.node('div');\r\n    gameScore.classList.add('game-score');\r\n    gameScore.innerHTML = score.toString();\r\n    DomUtil.append(document.body, gameScore);\r\n    GameScore.prevNode && DomUtil.remove(GameScore.prevNode);\r\n    GameScore.prevNode = gameScore;\r\n  }\r\n}\r\n\r\n\r\nclass GameCombo{\r\n  static prevNode?: Node;\r\n  constructor(combo: number){\r\n    GameCombo.prevNode && DomUtil.remove(GameCombo.prevNode);\r\n    GameCombo.prevNode = undefined;\r\n    if (combo > 5) {\r\n      const gameScore = DomUtil.node('div');\r\n      gameScore.classList.add('game-combo');\r\n      gameScore.innerHTML = `${combo || 0} x combo`;\r\n      DomUtil.append(document.body, gameScore);\r\n      GameCombo.prevNode = gameScore;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nclass GameNode {\r\n  gameList: GameList;\r\n  dom: Node;\r\n  score?: number;\r\n  time: number;\r\n  isDebug?: boolean = false;\r\n  modifyManager: ModifyManager;\r\n  constructor(\r\n    gameList: GameList,\r\n    rhythmPoint: RhythmPoint,\r\n    isDebug: boolean = false,\r\n    gameInner: Element,\r\n    modifyManager: ModifyManager,\r\n  ){\r\n    this.gameList = gameList;\r\n    this.time = Date.now();\r\n    this.modifyManager = modifyManager;\r\n    const dom = this.dom = DomUtil.node('div');\r\n    dom.className = 'game-item';\r\n\r\n\r\n    if (isDebug) {\r\n      this.isDebug = isDebug;\r\n      // @ts-ignore;\r\n      dom.style = `animation: gamingDebug linear 0.945s;`;\r\n    }\r\n\r\n    const hueRange = 120;\r\n    const deg = rhythmPoint.vol * this.modifyManager.gameTrack.RhythmPointCenterPointOffset;\r\n\r\n    const innerDom = DomUtil.node('div');\r\n    DomUtil.append(dom, innerDom);\r\n    // @ts-ignore;\r\n      innerDom.style = `\r\n      transform: rotate(${deg}deg) translate(0, calc(${150 + rhythmPoint.vol/3}px));\r\n      background-color: hsl(${90 - hueRange * rhythmPoint.vol / 255}, 50%, 50%);\r\n    `;\r\n    DomUtil.append(gameInner, dom);\r\n\r\n    dom.addEventListener(\"webkitAnimationEnd\", this.endFunction);\r\n    dom.addEventListener(\"animationend\", this.endFunction);\r\n  }\r\n  calculateScore(currentTime: number){\r\n    const {gameList, time} = this;\r\n    this.score = Math.abs(currentTime - time - gameList.delay);\r\n  }\r\n  remove(){\r\n    const {dom} = this;\r\n    this.gameList.setCurrentScore(this.score);\r\n\r\n    if (this.score !== undefined) {\r\n      Sound.play(\"done\");\r\n    }else {\r\n      this.modifyManager.gameTrack.RhythmPointMissTipSound && Sound.play('warning');\r\n    }\r\n\r\n    dom.removeEventListener('webkitAnimationEnd', this.endFunction);\r\n    dom.removeEventListener('animationend', this.endFunction);\r\n    dom && DomUtil.remove(dom);\r\n  }\r\n  endFunction = (ev?: Event) => {\r\n    if (this.isDebug) {\r\n      this.calculateScore(Date.now())\r\n    }\r\n    this.remove();\r\n    this.gameList.remove(this);\r\n  }\r\n}\r\n\r\n\r\nexport class GameList {\r\n  currentTime: number = 0;\r\n  durationTime: number = 0;\r\n  ended: boolean = false;\r\n  combo: number = 0;\r\n  maxCombo: number = 0;\r\n  currentScore: number = 0;\r\n  totalScore: number = 0;\r\n  total: number = 0;\r\n  missCount: number = 0;\r\n  uselessCount: number = 0;\r\n  mv: MusicVisualizer;\r\n  gameInner: Element;\r\n  modifyManager: ModifyManager;\r\n  public endSong(){\r\n    this.ended = true;\r\n  }\r\n  public startSong(){\r\n    this.ended = false;\r\n    this.currentScore = 0;\r\n    this.totalScore = 0;\r\n    this.total = 0;\r\n    this.combo = 0;\r\n    this.maxCombo = 0;\r\n    this.missCount = 0;\r\n    this.uselessCount = 0;\r\n  }\r\n\r\n  constructor(\r\n    mv: MusicVisualizer,\r\n    gameInner: Element,\r\n    modifyManager: ModifyManager\r\n  ){\r\n\r\n    this.modifyManager = modifyManager;\r\n    this.mv = mv;\r\n    this.delay = this.mv.delay.delayTime.value * 1000\r\n    this.gameInner = gameInner;\r\n  }\r\n  setCombo(isStop: boolean){\r\n    isStop ? (this.combo = 0) : (this.combo ++);\r\n    this.combo > this.maxCombo && (this.maxCombo = this.combo);\r\n    new GameCombo(this.combo);\r\n  }\r\n\r\n  setCurrentScore(score: number | undefined){\r\n    this.currentScore = score || 0;\r\n    this.totalScore += (score || 0);\r\n    const isMiss = score === undefined;\r\n\r\n    isMiss && (this.missCount ++);\r\n    this.setCombo(isMiss);\r\n    new GameScore(isMiss ? 'miss' : `score - ${score}`);\r\n  }\r\n  eventTarget: EventTarget_ = new EventTarget_();\r\n  delay: number;\r\n  buffer: number = 150;\r\n  duration: number = 2000;\r\n  list: GameNode[] = [];\r\n\r\n  find(time: number): GameNode | undefined {\r\n    const {buffer, delay} = this;\r\n    // return this.list[0];\r\n    return this.list.find((item) => Math.abs(time - item.time - delay) < buffer);\r\n  }\r\n  indexOf(gameNode: GameNode){\r\n    return this.list.indexOf(gameNode);\r\n  }\r\n  remove(gameNode: GameNode){\r\n    const index = this.indexOf(gameNode);\r\n    index !== -1 && this.list.splice(index,1);\r\n  }\r\n  createGameNode(rhythmPoint: RhythmPoint, isDebug: boolean = false){\r\n    const gameNode = new GameNode(this, rhythmPoint, isDebug, this.gameInner, this.modifyManager);\r\n    this.list.push(gameNode);\r\n    this.total ++;\r\n    return gameNode;\r\n  }\r\n  setBuffer(buffer: number){\r\n    this.buffer = buffer;\r\n    this.eventTarget.dispatchEvent(new Event('bufferChange'));\r\n  }\r\n  shootGameNode(){\r\n    //   -  - delay\r\n    const time = Date.now();\r\n    const gameNode = this.find(time);\r\n    if (gameNode) {\r\n      gameNode.calculateScore(time);\r\n\r\n      gameNode.endFunction();\r\n    } else {\r\n      this.uselessCount ++;\r\n      new GameScore('userLess press');\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport class GameScene {\r\n  dom: Node;\r\n  time: number;\r\n  modifyManager: ModifyManager;\r\n  constructor(gameData: MVData, musicData: MusicData, gameInner: Element, modifyManager: ModifyManager){\r\n    this.modifyManager = modifyManager;\r\n    this.time = Date.now();\r\n    const dom = this.dom = DomUtil.node('div');\r\n    dom.className = 'game-scene';\r\n\r\n    // @ts-ignore;\r\n    let list = [...gameData.data].filter(i => i).filter((x, i) => !(i % 16));\r\n    // list.length || (list = [0]);\r\n    const per = 360 / list.length;\r\n    const deg = musicData.originData.avrLevel * modifyManager.gameTrack.RhythmPointCenterPointOffset;\r\n    // @ts-ignore;\r\n    dom.innerHTML = list.map((item: number, index: number) => {\r\n      return `<div style=\"transform: rotateZ(${-(index) * per + 180 +deg}deg) translate(0, calc(400px + ${item * 10}px));\"></div>`;\r\n    }).join('');\r\n\r\n    DomUtil.append(gameInner, dom);\r\n\r\n    dom.addEventListener(\"webkitAnimationEnd\", this.destroy);\r\n    dom.addEventListener(\"animationend\", this.destroy);\r\n  }\r\n  remove(){\r\n    const {dom} = this;\r\n    dom.removeEventListener('webkitAnimationEnd', this.destroy);\r\n    dom.removeEventListener('animationend', this.destroy);\r\n    dom && DomUtil.remove(dom);\r\n  }\r\n  destroy = () => {\r\n    this.remove();\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport class Color {\r\n  static compose(i: number) {\r\n    i = i / 255;\r\n    return Math.round((i + (i - .5) * (1 - i)) * 255);\r\n  }\r\n  static dCompose(i: number, time = 0) {\r\n    i = i / 255;\r\n    let rate = (1 - i);\r\n    while (time + 3) {\r\n      rate *= (1 - i);\r\n      time --;\r\n    }\r\n    return Math.round((1- rate) * 255);\r\n  }\r\n  static getPure(r: number, g: number, b: number, time = 2): [IColor, IColor]{\r\n    // \r\n    const min = Math.min(r, g, b);\r\n    const per = min / 256;\r\n    const {dCompose, reduce} = Color\r\n    return [\r\n      [\r\n        dCompose(r, time),\r\n        dCompose(r, time),\r\n        dCompose(r, time)\r\n      ], [\r\n        dCompose(reduce(r, per), time + 2),\r\n        dCompose(reduce(g, per), time + 2),\r\n        dCompose(reduce(b, per), time + 2)\r\n      ]\r\n    ];\r\n  }\r\n  static reduce(r: number, per: number){\r\n    return Math.round((r - 255 * per) / (1  -  per));\r\n  }\r\n}\r\n\r\n\r\n","export function MakeThrottle_(fn: Function, time = 300) {\r\n  let prevTime = 0;\r\n  const ret = function () {\r\n    if (Date.now() - prevTime - ret.time > 0) {\r\n      fn.apply(null, [...arguments]);\r\n      prevTime = Date.now();\r\n    }\r\n  }\r\n  ret.time = time;\r\n  return ret;\r\n}\r\n\r\nexport function MakeThrottle(time = 300) {\r\n  let prevTime = 0;\r\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const fn = target[propertyKey];\r\n    target[propertyKey] = function () {\r\n      if (Date.now() - prevTime - time > 0) {\r\n        fn.apply(target, [...arguments]);\r\n        prevTime = Date.now();\r\n      }\r\n    }\r\n  }\r\n}\r\n","export function appendStyle(compName: string, styleStr: string, forceUpdate: boolean = false) {\r\n  // @ts-ignore;\r\n  appendStyle.cacheMap || (appendStyle.cacheMap = {});\r\n  // @ts-ignore;\r\n  if (forceUpdate || !appendStyle.cacheMap[compName]) {\r\n    const style = document.createElement('style');\r\n    style.innerHTML = styleStr.replace(/<\\/?style.*?>/g, '');\r\n    document.head.appendChild(style);\r\n    // @ts-ignore;\r\n    appendStyle.cacheMap[compName] = styleStr;\r\n  } else {\r\n    console.log(`[style][${compName}] is already exist!`);\r\n  }\r\n}\r\n","import {appendStyle} from \"@/units/appendStyle\";\r\n\r\nappendStyle(``, ``);\r\n\r\nlet canvas = document.createElement('canvas');\r\n\r\nconst pciCanvas = document.createElement('canvas');\r\n\r\n\r\nexport class Picture {\r\n  static pciCanvas = pciCanvas;\r\n  static pciCtx = pciCanvas.getContext(\"2d\");\r\n  compressRate: number;\r\n  canvas: Element;\r\n  ctx: any;\r\n  musicConfig: any;\r\n  cacheList: Element[];\r\n  cacheImg: {[index: string]: number[]};\r\n  constructor(musicConfig: any) {\r\n    this.compressRate = 0.1;\r\n    this.musicConfig = musicConfig;\r\n    this.canvas = canvas = canvas || document.createElement(\"canvas\");\r\n    this.ctx = canvas.getContext('2d');\r\n    this.cacheList = [];\r\n    this.cacheImg = {};\r\n  }\r\n\r\n  static setImage(img: any) {\r\n    const {offsetWidth, offsetHeight} = document.body;\r\n    Picture.pciCanvas.width = offsetWidth;\r\n    Picture.pciCanvas.height = offsetHeight;\r\n    Picture && Picture.pciCtx && Picture.pciCtx.drawImage(img, (offsetWidth - img.width) / 2, (offsetHeight - img.height) / 2, img.width, img.height);\r\n  }\r\n\r\n  static getImageData(x: number, y: number, w: number, h: number):ImageData {\r\n    // @ts-ignore;\r\n    return Picture.pciCtx && Picture.pciCtx.getImageData(x, y, w, h);\r\n  }\r\n\r\n  makeEl() {\r\n    const img = document.createElement(\"img\");\r\n    const {cacheList, cacheImg, ctx, compressRate} = this;\r\n    img.onload = () => {\r\n      Picture.setImage(img);\r\n      if (!cacheImg[img.src]) {\r\n        const {width, height} = img;\r\n        canvas.width = width * compressRate;\r\n        canvas.height = height * compressRate;\r\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        const result:number[][] = [[], [], [], []];\r\n        imageData.data.forEach((color: number, index: number) => {\r\n          result[index % 4].push(color);\r\n        });\r\n        cacheImg[img.src] = [\r\n          aviOfArr(result[0]), aviOfArr(result[1]), aviOfArr(result[2]), aviOfArr(result[3])\r\n        ];\r\n      }\r\n      // @ts-ignore;\r\n      img.noNeedChangeCurrentImgAviColor || (this.musicConfig.currentImgAviColor = cacheImg[img.src]);\r\n      cacheList.push(img);\r\n    };\r\n    return img;\r\n  }\r\n\r\n  load(url: string, noNeedChangeCurrentImgAviColor?: boolean) {\r\n    if (!url) return;\r\n    const img = this.cacheList.shift() || this.makeEl();\r\n    // @ts-ignore;\r\n    img.noNeedChangeCurrentImgAviColor = noNeedChangeCurrentImgAviColor;\r\n    // @ts-ignore;\r\n    img.src = /:\\/\\//.test(url) ? url : `./img/${url}`;\r\n    return img;\r\n  }\r\n}\r\n\r\n\r\nfunction sumOfArr(arr: number[]) {\r\n  return arr.reduce((sum, num) => sum += num, 0);\r\n}\r\n\r\nfunction aviOfArr(arr: number[]) {\r\n  return Math.round(sumOfArr(arr) / arr.length);\r\n}\r\n\r\n","// @ts-ignore;\r\nimport {MakeThrottle} from \"@/utils\";\r\nimport {Picture} from \"@/picture/Picture\";\r\n\r\n\r\n// \r\ninterface IMusicConfigOptions {\r\n  images: string[];\r\n}\r\n\r\nexport class MusicConfig {\r\n  lrc: string = '';\r\n  ended?:Function;\r\n  pictureCanvasCtx?: Picture;\r\n  picDom?: Node = undefined;\r\n  imageGroup: string[][] = [];\r\n\r\n  mouseMoveConf = {x: 0, y: 0, w: 1, h: 1, _x: .5, _y: .5}; // \r\n  // \r\n  currentImgAviColor: [number, number, number, number] =  [255, 255, 255, 1];\r\n  // \r\n  volume: { _main: number; main: number; } = {\r\n    _main: 1,\r\n    main: .01,\r\n  };\r\n  // \r\n  currentImgSrc:string = '';\r\n\r\n  constructor(options: IMusicConfigOptions){\r\n    const {images} = options;\r\n    this.imageGroup = [options.images];\r\n\r\n\r\n    const pictureCanvasCtx = new Picture(this);\r\n    this.setPictureCanvasCtx(pictureCanvasCtx);\r\n\r\n    this.currentImgSrc = images[0];\r\n\r\n    if (this.currentImgSrc) {\r\n      this.changePic(undefined, true);\r\n    }\r\n  }\r\n  handelMouseMove(ev: Event){\r\n    if (ev.target !== document.body) return;\r\n    const {mouseMoveConf} = this;\r\n    // @ts-ignore;\r\n    const enent = ev.touches ? ev.touches[0] : ev;\r\n    // @ts-ignore;\r\n    const [x, y, w, h] = [enent.clientX, enent.clientY, enent.target.offsetWidth, enent.target.offsetHeight];\r\n    const conf = {\r\n      x, y, w, h,\r\n      _x: (x - w / 2) / w,\r\n      _y: (y - h / 2) / h\r\n    };\r\n    Object.keys(mouseMoveConf).forEach(key => {\r\n      // @ts-ignore;\r\n      mouseMoveConf[key] = conf[key]\r\n    })\r\n  }\r\n  @MakeThrottle(1)\r\n  shock() {\r\n    // DesktopImage.play(musicConfig.currentImgSrc);\r\n  };\r\n  setLrc(lrc: string){\r\n    this.lrc = lrc;\r\n  }\r\n  getImageData(x: number, y: number, w: number, h: number): ImageData{\r\n    return Picture.getImageData(x, y, w, h);\r\n  };\r\n\r\n\r\n  changePicGroup(reverse: boolean) {\r\n    const {imageGroup} = this;\r\n    if (imageGroup.length) {\r\n      // @ts-ignore;\r\n      reverse ? imageGroup.unshift(imageGroup.pop()) : imageGroup.push(imageGroup.shift());\r\n    }\r\n    this.changePic();\r\n  }\r\n  //  //  isReverse // false   true  \r\n  changePic(reverse?: boolean, shockAtOnce?: boolean) {\r\n    const images = this.imageGroup[0];\r\n    if (images.length) {\r\n      // @ts-ignore;\r\n      reverse ? images.unshift(images.pop()) : images.push(images.shift());\r\n      this.currentImgSrc = images[0];\r\n      if (this.pictureCanvasCtx) {\r\n        this.picDom =  this.pictureCanvasCtx.load(this.currentImgSrc);\r\n      }\r\n\r\n      shockAtOnce && this.shock();\r\n    }\r\n\r\n  }\r\n  // \r\n  encVolume() {\r\n    let {main} = this.volume;\r\n    main = main + 0.05;\r\n    if (main < 0) main = 0;\r\n    if (main > 1) main = 1;\r\n    this.volume.main = main;\r\n  }\r\n  // \r\n  decVolumn() {\r\n    let {main} = this.volume;\r\n    main = main - 0.05;\r\n    if (main < 0) main = 0;\r\n    if (main > 1) main = 1;\r\n    this.volume.main = main;\r\n  }\r\n  setPictureCanvasCtx (pictureCanvasCtx: Picture){\r\n    this.pictureCanvasCtx = pictureCanvasCtx;\r\n  }\r\n}\r\n\r\n\r\n\r\n","import defaultJson from '../../userConfig/trackPresets/default';\r\nexport class Track {\r\n  static commonConfigs = {};\r\n  static name_ = 'Track';\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    CanvasTrack.commonConfigs.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n\r\n  constructor(defaultValue = {}) {\r\n    this.current = 0;\r\n    this.playing = 0;\r\n    this.list = [];\r\n    Track.commonConfigs[this.constructor.name_].forEach(item => {\r\n      const [key, name, value, valueType, min, max, desc] = item;\r\n      const defaultVal = defaultValue[key];\r\n      this.list.push({key, name, value: defaultVal !== undefined ? defaultVal : value, valueType, min, max, desc});\r\n    });\r\n\r\n    this.list.forEach(item => {\r\n      Object.defineProperty(this, item.key, {\r\n        get() {\r\n          return item.value;\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length\r\n  }\r\n\r\n  // \r\n  setIndex(index) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n    return this;\r\n  }\r\n\r\n  //  \r\n  play() {\r\n    this.playing = this.current;\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n    return this;\r\n  }\r\n\r\n  enc() {\r\n    const thisItem = this.list[this.current];\r\n    let val = thisItem.value + 1;\r\n\r\n    if (val > thisItem.max) {\r\n      val = thisItem.max\r\n    }\r\n    if (val < thisItem.min) {\r\n      val = thisItem.min;\r\n    }\r\n    thisItem.value = val;\r\n    return this;\r\n  }\r\n\r\n  dec() {\r\n    const thisItem = this.list[this.current];\r\n    let val = thisItem.value - 1;\r\n\r\n    if (val > thisItem.max) {\r\n      val = thisItem.max\r\n    }\r\n    if (val < thisItem.min) {\r\n      val = thisItem.min;\r\n    }\r\n    thisItem.value = val;\r\n    return this;\r\n  }\r\n}\r\n\r\nexport class CanvasTrack extends Track {\r\n  static name_ = 'CanvasTrack';\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name_;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.CanvasTrack || (Track.commonConfigs.CanvasTrack = []);\r\n    Track.commonConfigs.CanvasTrack.push([key, name, value, valueType, min, max, desc]);\r\n    return CanvasTrack;\r\n  }\r\n}\r\n\r\n\r\nexport class VideoTrack extends Track {\r\n  static name_ = 'VideoTrack';\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name_;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.VideoTrack || (Track.commonConfigs.VideoTrack = []);\r\n    Track.commonConfigs.VideoTrack.push([key, name, value, valueType, min, max, desc]);\r\n    return VideoTrack;\r\n  }\r\n}\r\n\r\n\r\nCanvasTrack.setConfig('disable', '', 0, 'int', 0, 1, '');\r\nCanvasTrack.setConfig('renderType', '', 2, 'int', 0, 3, '');\r\nCanvasTrack.setConfig('direction', '', 0, 'int', 0, 1, '');\r\nCanvasTrack.setConfig('baseSizeType', '', 0, 'int', 0, 1, '0:  1 ');\r\nCanvasTrack.setConfig('noZero', '', 1, 'int', 0, 1, ' ');\r\nCanvasTrack.setConfig('copyData', '', 1, 'int', 0, 1, ' ');\r\nCanvasTrack.setConfig('showDataBefore', '', 0, 'int', 0, 1, '');\r\n\r\nCanvasTrack.setConfig('midPositionX', 'X', 50, 'int', 0, 100, ' 0 100');\r\nCanvasTrack.setConfig('midPositionY', 'Y', 50, 'int', 0, 100, ' 0 100');\r\nCanvasTrack.setConfig('clearPrevView', '', 70, 'int', 0, 100, '');\r\nCanvasTrack.setConfig('mainRadius', 'Y', 25, 'int', -100, 100, ', ');\r\nCanvasTrack.setConfig('avrLevelMainRadiusModify', '', 25, 'int', 0, 100, '');\r\n\r\nCanvasTrack.setConfig('mainRadiusOpacity', '', 75, 'int', 0, 100, '');\r\nCanvasTrack.setConfig('mainRadiusLineWidth', '', 3, 'int', 0, 100, ' ');\r\n\r\nCanvasTrack.setConfig('floatRange', '', 2, 'int', -10, 10, '  ');\r\nCanvasTrack.setConfig('avrLevelFloatRangeModify', '', 25, 'int', 0, 100, '');\r\n\r\nCanvasTrack.setConfig('stepModify', '', 10, 'int', 0, 100, ' ');\r\nCanvasTrack.setConfig('lineLineWidth', '', 3, 'int', 0, 100, ' ');\r\nCanvasTrack.setConfig('dataModify', '', 15, 'int', 0, 100, '');\r\nCanvasTrack.setConfig('dataOffsetModify', '', 6, 'int', -100, 100, '');\r\nCanvasTrack.setConfig('minHeightModify', '', -0, 'int', -300, 100, '');\r\nCanvasTrack.setConfig('threshold', '', 7, 'int', 0, 100, '');\r\n\r\n\r\nexport class CommonOptionsTrack extends Track {\r\n  static name_ = 'CommonOptionsTrack';\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name_;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.CommonOptionsTrack || (Track.commonConfigs.CommonOptionsTrack = []);\r\n    Track.commonConfigs.CommonOptionsTrack.push([key, name, value, valueType, min, max, desc]);\r\n    return CommonOptionsTrack;\r\n  }\r\n}\r\n\r\nCommonOptionsTrack.setConfig('CanvasView', '', 1, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('CanvasPic', '', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('CanvasPicMalfunction', '', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('CanvasText', '', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('CanvasTextMalfunction', '', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('changeBG_When_LRC_Changed', '', 1, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('VideoView', '1', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('VideoView1', '2', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('DomClock', '', 0, 'int', 0, 1, '');\r\nCommonOptionsTrack.setConfig('BalanceTrack', '', 0, 'int', 0, 1, '');\r\n\r\n\r\n\r\nexport class GameTrack extends Track {\r\n  static name_ = 'GameTrack';\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name_;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.GameTrack || (Track.commonConfigs.GameTrack = []);\r\n    Track.commonConfigs.GameTrack.push([key, name, value, valueType, min, max, desc]);\r\n    return GameTrack;\r\n  }\r\n}\r\n\r\n\r\nGameTrack.setConfig('RhythmPointVolumeFloatRange', '', 1, 'int', 0, 30, ' ');\r\nGameTrack.setConfig('RhythmPointTimeout', '', 15, 'int', 0, 30, 'timeout = (num * 10) ms');\r\nGameTrack.setConfig('RhythmPointRemoveFloatRange', '', 20, 'int', 5, 60, 'range = (num * 10)');\r\nGameTrack.setConfig('RhythmPointMissTipSound', 'miss', 0, 'int', 0, 1, '');\r\nGameTrack.setConfig('RhythmPointCenterPointOffset', '', -30, 'int', -60, 60, '');\r\nGameTrack.setConfig('trick', '', 0, 'int', 0, 1, '');\r\n\r\n\r\nexport class BalanceTrack extends Track {\r\n  static name_ = 'BalanceTrack';\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name_;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.BalanceTrack || (Track.commonConfigs.BalanceTrack = []);\r\n    Track.commonConfigs.BalanceTrack.push([key, name, value, valueType, min, max, desc]);\r\n    return BalanceTrack;\r\n  }\r\n}\r\n\r\nexport const biquadFilterFrequency = [31, 63, 125, 250, 500, 1000, 2000, 4000, 8000, 16000, 20000, 24000];\r\nbiquadFilterFrequency.forEach((item, index) => {\r\n  BalanceTrack.setConfig(`balance${index}`, `${item}`, 0, 'int', -12, 12, 'db');\r\n});\r\n\r\nexport class ModifyManager {\r\n  constructor(updateCommonOptions) {\r\n    this.list = [];\r\n    this.playing = 0;\r\n    this.current = 0;\r\n    this.setList([new TrackList(this)]);\r\n    this.setIndex(0);\r\n    this.updateCommonOptions = updateCommonOptions;\r\n    this.init();\r\n  }\r\n\r\n\r\n\r\n\r\n  init(){\r\n    this.trackList = this.list.find(i => i.constructor.name_ === 'TrackList');\r\n    this.commonOptions = this.list.find(i => i.constructor.name_ === 'TrackList').list.find(i => i.constructor.name_ === 'CommonOptionsTrack');\r\n    this.gameTrack = this.list.find(i => i.constructor.name_ === 'TrackList').list.find(i => i.constructor.name_ === 'GameTrack');\r\n    this.balanceTrack = this.list.find(i => i.constructor.name_ === 'TrackList').list.find(i => i.constructor.name_ === 'BalanceTrack');\r\n    this.updateCommonOptions && this.updateCommonOptions();\r\n    return this;\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n  savePresets(){\r\n    this.trackList.savePresets();\r\n    return this;\r\n  }\r\n\r\n  setList(list) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    return this;\r\n  }\r\n\r\n  replace(index, replacer) {\r\n    this.list.splice(index, 1, replacer);\r\n    return this;\r\n  }\r\n\r\n  // \r\n  setIndex(index) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n    return this;\r\n  }\r\n\r\n  //  \r\n  play() {\r\n    this.playing = this.current;\r\n    if (this.current === 0) {\r\n      this.replace(1, this.list[this.current])\r\n    }\r\n    this.list[this.current].play();\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n    return this;\r\n  }\r\n\r\n  enc() {\r\n    this.list[this.current] && this.list[this.current].enc();\r\n    this.trackList.savePresets();\r\n    return this;\r\n  }\r\n\r\n  dec() {\r\n    this.list[this.current] && this.list[this.current].dec();\r\n    this.trackList.savePresets();\r\n    return this;\r\n  }\r\n\r\n  prevItem() {\r\n    this.list[this.current] && this.list[this.current].prev();\r\n    return this;\r\n  }\r\n\r\n  nextItem() {\r\n    this.list[this.current] && this.list[this.current].next();\r\n    return this;\r\n  }\r\n\r\n  up() {\r\n    this.list[0].prev();\r\n    return this;\r\n  }\r\n\r\n  down() {\r\n    this.list[0].next();\r\n    return this;\r\n  }\r\n\r\n  add() {\r\n    this.list[0].add.call(this.list[0], ...arguments);\r\n    this.list[0].savePresets();\r\n    return this;\r\n  }\r\n\r\n  delete() {\r\n    this.list[0].delete.call(this.list[0], ...arguments);\r\n    this.list[0].savePresets();\r\n    return this;\r\n  }\r\n\r\n  copy() {\r\n    this.list[0].copy.call(this.list[0], ...arguments);\r\n    this.list[0].savePresets();\r\n    return this;\r\n  }\r\n}\r\n\r\nconst constructorList = [GameTrack, BalanceTrack, CommonOptionsTrack];\r\n\r\n// \r\n//  canvas   // \r\nclass TrackList {\r\n  static name_ = 'TrackList';\r\n  static CanvasTrack = CanvasTrack;\r\n  static VideoTrack = VideoTrack;\r\n  static CommonOptionsTrack = CommonOptionsTrack;\r\n  static BalanceTrack = BalanceTrack;\r\n  static GameTrack = GameTrack;\r\n\r\n\r\n\r\n  savePresets(name) {\r\n    const result = this.list.map(item => {\r\n      const data = {};\r\n      item.list.forEach(key => {\r\n        data[key.key] = item[key.key];\r\n      });\r\n      return {name: item.name, data, type: item.constructor.name_}\r\n    });\r\n    this.parent.updateCommonOptions();\r\n    localStorage.setItem('configPresets', JSON.stringify(result));\r\n    return this;\r\n\r\n    // const {fs, path, process} = window.node;\r\n    // const outputPath = path.join(process.cwd(), './userConfig/trackPresets/default.json');\r\n    // fs.writeFileSync(outputPath, JSON.stringify(result, null, 2));\r\n  }\r\n\r\n  loadPresets() {\r\n    try {\r\n      const presets = JSON.parse(localStorage.getItem('configPresets') || '[]');\r\n\r\n      // eval(`(${fs.readFileSync(outputPath, {encoding: 'utf-8'})})`);\r\n      presets.length || presets.push({});\r\n\r\n      constructorList.forEach(constructor => {\r\n        const constructorName = constructor.name_;\r\n        const hasDot = presets.some(i => i.type === constructorName);\r\n        if (!hasDot) {\r\n          this.add({type: constructorName, name: constructorName})\r\n        }\r\n      });\r\n\r\n      presets.forEach(item => {\r\n        this.add(item);\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      console.log('load presets fail.');\r\n    }\r\n    return this;\r\n  }\r\n\r\n  constructor(parent) {\r\n    this.list = [];\r\n    this.parent = parent;\r\n    this.playing = 0;\r\n    this.current = 0;\r\n    this.loadPresets();\r\n\r\n    constructorList.forEach(constructor => {\r\n      const constructorName = constructor.name_;\r\n      const hasDto = this.list.some(i => i.constructor.name_ === constructorName);\r\n      if (!hasDto) {\r\n        this.add({type: constructorName, name: constructorName})\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n\r\n  add(options = {}, len = 1) {\r\n    const {type = 'CanvasTrack', name, data} = options;\r\n    for (let i = 0; i < len; i++) {\r\n      console.log(TrackList[type], type);\r\n      TrackList[type] && this.list.push(new TrackList[type](name, data));\r\n    }\r\n    this.setIndex(this.len - 1);\r\n    return this;\r\n  }\r\n\r\n  delete() {\r\n    const item = this.list[this.current];\r\n    if (item) {\r\n      this.list.splice(this.current, 1);\r\n      this.setIndex(0);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  copy() {\r\n    const item = this.list[this.current];\r\n    if (item && !['CommonOptionsTrack', 'BalanceTrack'].includes(item.constructor.name_)) {\r\n      this.list.splice(this.current, 0, new item.constructor(item.name + 'Copy', item));\r\n      this.setIndex(this.current + 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  setList(list) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    return this;\r\n  }\r\n\r\n  // \r\n  setIndex(index) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n    return this;\r\n  }\r\n\r\n  //  \r\n  play() {\r\n    this.playing = this.current;\r\n    this.parent.replace(1, this.list[this.current]);\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n    return this;\r\n  }\r\n}\r\n\r\n\r\n","//  AudioContext API  https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext\r\n// @ts-ignore;\r\nimport {MusicConfig} from \"src/music/MusicConfig\";\r\n// @ts-ignore;\r\nimport {biquadFilterFrequency} from \"@/components/canvasConfig\";\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\n\r\n\r\n\r\n\r\ninterface IMusicVisualizerConifg {\r\n  musicConfig: MusicConfig;\r\n  size: number;\r\n  draw?: Function;\r\n  volume?: number;\r\n}\r\n\r\nfunction createPanner(){\r\n  console.log(MusicVisualizer.ac.createPanner)\r\n  const panner = MusicVisualizer.ac.createPanner();\r\n  panner.panningModel = 'HRTF';\r\n  panner.distanceModel = 'inverse';\r\n  panner.refDistance = 1;\r\n  panner.maxDistance = 10;\r\n  panner.rolloffFactor = 10;\r\n  panner.coneInnerAngle = 360;\r\n  panner.coneOuterAngle = 0;\r\n  panner.coneOuterGain = 0;\r\n\r\n\r\n  if (panner.orientationX) {\r\n    panner.orientationX.value = 0;\r\n    panner.orientationY.value = 0;\r\n    panner.orientationZ.value = 0;\r\n\r\n    panner.positionX.value = 0;\r\n    panner.positionY.value = 0;\r\n    panner.positionZ.value = 0;\r\n  } else {\r\n    panner.setOrientation && panner.setOrientation(0,0,0);\r\n    panner.setPosition && panner.setPosition(0,0,0)\r\n  }\r\n\r\n  return panner;\r\n}\r\n\r\nfunction initListener (){\r\n  const listener = MusicVisualizer.ac.listener;\r\n\r\n  if (listener.forwardX) {\r\n\r\n    listener.forwardX.value = 0;\r\n    listener.forwardY.value = 1;\r\n    listener.forwardZ.value = 0;\r\n\r\n    listener.upX.value = 0;\r\n    listener.upY.value = 0;\r\n    listener.upZ.value = 1;\r\n\r\n\r\n    listener.positionX.value = 0;\r\n    listener.positionY.value = 0;\r\n    listener.positionZ.value = 0;\r\n  } else {\r\n\r\n    listener.setOrientation && listener.setOrientation(0, 1, 0, 0, 0, 1);\r\n    listener.setPosition && listener.setPosition(0, 0, 0)\r\n  }\r\n  return listener;\r\n}\r\n\r\n\r\nfunction createBiquadFilters(input: AudioNode, output: AudioNode) {\r\n  // @ts-ignore;\r\n  const biquadFilters =  biquadFilterFrequency.map(frequency => createBiquadFilter(frequency));\r\n  // @ts-ignore;\r\n  biquadFilters.forEach(biquadFilter => {\r\n    input.connect(biquadFilter);\r\n    input = biquadFilter;\r\n  });\r\n  input.connect(output);\r\n  return biquadFilters;\r\n}\r\n\r\nfunction createBiquadFilter(frequency: number) {\r\n  const biquadFilter = MusicVisualizer.ac.createBiquadFilter();\r\n  biquadFilter.type = 'peaking';\r\n  biquadFilter.frequency.value = frequency;\r\n  return biquadFilter;\r\n}\r\n\r\nfunction createAudioSource(context: MusicVisualizer) {\r\n  const $audio = context.$audio = document.createElement('audio');\r\n  const source = MusicVisualizer.ac.createMediaElementSource($audio);\r\n  $audio.crossOrigin = \"anonymous\";\r\n  $audio.autoplay = true;\r\n  $audio.volume = context.musicConfig.volume.main;\r\n\r\n  $audio.onended = () => context.musicConfig.ended && context.musicConfig.ended();\r\n  return {$audio, source}\r\n}\r\n\r\n\r\nexport class MusicVisualizer {\r\n  duration: number = 1;\r\n  playing: boolean = false;\r\n  stopType: string = '';\r\n  source?: any = null;\r\n  latestPlayTime: number = 0;\r\n  count: number = 0;\r\n  delay: DelayNode;\r\n  musicConfig: MusicConfig;\r\n  gain: GainNode;\r\n  // merger: ChannelMergerNode;\r\n  // splitter: ChannelSplitterNode;\r\n  // gainNodes: { main: GainNode, left: GainNode, right: GainNode };\r\n  size: number;\r\n  analyser: AnalyserNode;\r\n  analyserBefore: AnalyserNode;\r\n\r\n  biquadFilters: BiquadFilterNode[];\r\n  draw?: Function;\r\n  resetLatestPlayTime: boolean = false;\r\n  xhr: XMLHttpRequest;\r\n  panner: PannerNode;\r\n  $audio: HTMLMediaElement;\r\n  // \r\n  ac: AudioContext;\r\n  // @ts-ignore;\r\n  static ac: AudioContext = new (window.AudioContext || window.webkitAudioContext)();//\r\n  constructor(obj: IMusicVisualizerConifg) {\r\n\r\n    this.ac = MusicVisualizer.ac;\r\n    this.musicConfig = obj.musicConfig;\r\n\r\n    const {$audio, source} = createAudioSource(this);\r\n    this.$audio = $audio;\r\n    $audio.volume = 0.01;\r\n    const panner = this.panner = createPanner();\r\n    initListener();\r\n\r\n    const analyser = this.analyser = MusicVisualizer.ac.createAnalyser();\r\n    const analyserBefore = this.analyserBefore = MusicVisualizer.ac.createAnalyser();\r\n    const gain = this.gain = MusicVisualizer.ac.createGain();\r\n    gain.gain.value = 0.5;\r\n\r\n\r\n    this.size = obj.size || 8;\r\n    analyserBefore.fftSize = analyser.fftSize = this.size * 2;\r\n\r\n\r\n    const delay = this.delay = MusicVisualizer.ac.createDelay();\r\n    delay.delayTime.value = 1.8;\r\n    // navigator.mediaDevices.getUserMedia({audio: true, video: false}).then(res=> {\r\n    //   const node = MusicVisualizer.ac.createMediaStreamSource(res);\r\n    //   $audio.autoplay = false;\r\n    //   node.connect(analyserBefore);\r\n    // });\r\n\r\n\r\n    source.connect(analyserBefore);\r\n    //  -> \r\n    // @ts-ignore;\r\n    this.biquadFilters = createBiquadFilters(analyserBefore, delay);\r\n\r\n    delay.connect(analyser);\r\n    analyser.connect(panner); // \r\n    panner.connect(gain);\r\n    gain.connect(MusicVisualizer.ac.destination);\r\n\r\n\r\n    // ajax\r\n    this.xhr = new XMLHttpRequest();\r\n    this.draw = obj.draw;\r\n\r\n    obj.volume && this.changeVolume(obj.volume);\r\n    this.visualize();\r\n  }\r\n\r\n  load(url: string, fun: Function) {\r\n    this.stopType = '';\r\n    this.playing = false;\r\n    this.xhr.abort();\r\n    this.xhr.open(\"GET\", url);\r\n    this.xhr.responseType = \"arraybuffer\";\r\n    this.xhr.onload = () => {\r\n      fun(this.xhr.response);\r\n    };\r\n    this.xhr.send();\r\n  };\r\n\r\n\r\n// BaseAudioContext.decodeAudioData()AudioBuffer\r\n// AudioBufferAudioBufferSourceNodeAudioBufferSourceNode\r\n  decode(arrayBuffer: ArrayBuffer, fun: Function) {\r\n    MusicVisualizer.ac.decodeAudioData(arrayBuffer, function (buffer: any) {\r\n      fun(buffer);\r\n    }, function (err: Error) {\r\n      console.log(err);\r\n    });\r\n  };\r\n\r\n  play(path: ArrayBuffer | string) {\r\n    const n = ++this.count;\r\n    this.source && this.source[this.source.stop ? \"stop\" : \"noteOff\"](); // \r\n    this.resetLatestPlayTime = true;\r\n\r\n    if (path instanceof ArrayBuffer) {\r\n      this.decode(path, (buffer: ArrayBuffer) => {\r\n        if (n !== this.count) return;\r\n        const bufferSource: AudioBufferSourceNode = MusicVisualizer.ac.createBufferSource();\r\n        // bufferbufferSourcebuffer\r\n        // @ts-ignore;\r\n        bufferSource.buffer = buffer;\r\n        // bufferSource.loop = true;\r\n        bufferSource.connect(this.analyserBefore);\r\n        // @ts-ignore;\r\n        bufferSource[bufferSource.start ? \"start\" : \"noteOn\"](0);\r\n        this.source = bufferSource;\r\n        this.resetLatestPlayTime && (this.latestPlayTime = MusicVisualizer.ac.currentTime);\r\n      });\r\n    } else {\r\n\r\n      console.log('play')\r\n      // @ts-ignore;\r\n      if (window.isPhone) {\r\n        console.log('play')\r\n        this.load(path, (arrayBuffer: ArrayBuffer) => {\r\n          if (n !== this.count) return;\r\n          this.decode(arrayBuffer, (buffer: ArrayBuffer) => {\r\n            this.playing = true;\r\n            if (n !== this.count) return;\r\n            const bufferSource: AudioBufferSourceNode = MusicVisualizer.ac.createBufferSource();\r\n            // @ts-ignore;\r\n            bufferSource.buffer = buffer;\r\n            bufferSource.connect(this.analyserBefore);\r\n            // @ts-ignore;\r\n            bufferSource[bufferSource.start ? \"start\" : \"noteOn\"](0);\r\n            this.source = bufferSource;\r\n            bufferSource.onended = () => {\r\n              if (this.stopType) {\r\n              } else {\r\n                this.musicConfig.ended && this.musicConfig.ended();\r\n              }\r\n            };\r\n            this.resetLatestPlayTime && (this.latestPlayTime = MusicVisualizer.ac.currentTime);\r\n          });\r\n        });\r\n      } else {\r\n        this.$audio.src = path;\r\n      }\r\n\r\n\r\n    }\r\n  };\r\n\r\n  // \r\n  changeVolume(percent: number) {\r\n    // @ts-ignore;\r\n    this.musicConfig.volume.main = percent;\r\n  };\r\n\r\n  // \r\n  setVolume() {\r\n    const {musicConfig} = this;\r\n    const {main,} = musicConfig.volume;\r\n\r\n    this.$audio.volume = main;\r\n    const {panner} = this;\r\n\r\n    const {x, y, w, h} = musicConfig.mouseMoveConf;\r\n\r\n    const _x = (x-w/2)/w;\r\n    const _y = -(y-h/2)/h;\r\n\r\n    if (panner.positionX) {\r\n      panner.positionX.value = _x;\r\n      panner.positionY.value = _y;\r\n    } else {\r\n      panner.setPosition && panner.setPosition(_x,_y,0)\r\n    }\r\n  };\r\n\r\n  visualize() {\r\n    const realTimeData = new Uint8Array(this.analyser.frequencyBinCount);//fftsize\r\n    const originData = new Uint8Array(this.analyserBefore.frequencyBinCount);//fftsize\r\n\r\n    const requestAnimationFrame = window.requestAnimationFrame ||\r\n      // @ts-ignore;\r\n      window.webkitrequestAnimationFrame ||\r\n      // @ts-ignore;\r\n      window.mozrequestAnimationFrame;//\r\n    const fn = () => {\r\n      // @ts-ignore;\r\n      if (!window.hidden) {\r\n        if (this.draw) {\r\n          this.analyser.getByteFrequencyData(realTimeData);// Uint8Array\r\n          this.analyserBefore.getByteFrequencyData(originData);// Uint8Array\r\n          this.draw({realTimeData, originData});\r\n        }\r\n        this.setVolume();\r\n      }\r\n      requestAnimationFrame(fn);\r\n    }\r\n    requestAnimationFrame(fn);\r\n  }\r\n}\r\n\r\n\r\n//  Chrome 66AudioContextsuspend\r\n// @ts-ignore;\r\nif (typeof AudioContext !== \"undefined\" || typeof webkitAudioContext !== \"undefined\") {\r\n  const resumeAudio = function () {\r\n    if (!MusicVisualizer.ac) return;\r\n    MusicVisualizer.ac.state === \"suspended\" && MusicVisualizer.ac.resume();\r\n    document.removeEventListener(\"click\", resumeAudio);\r\n  };\r\n  document.addEventListener(\"click\", resumeAudio);\r\n}\r\n\r\n","<template>\r\n  <div class=\"nav-bar\" :class=\"{active: active}\" @click=\"active =! active\">\r\n    <ul>\r\n      <li v-for=\"(item, index) in navList\" @click.stop=\"item.callback && item.callback()\">{{item.name}}</li>\r\n      <slot></slot>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n\r\n  export default {\r\n    name: 'BalanceView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList',\r\n    ],\r\n    data() {\r\n      return {\r\n        balanceTrack: this.modifyManager.balanceTrack,\r\n        searchText: '',\r\n        active: false,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n    },\r\n    methods: {\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .nav-bar {\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    width: 60px;\r\n    height: 60px;\r\n    padding-right: 60px;\r\n    overflow: hidden;\r\n    z-index: 3010;\r\n    transition: all .3s;\r\n    background-color: rgba(255,255,255,.3);\r\n    &.active{\r\n      width: 100%;\r\n    }\r\n    ul{\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      /deep/li{\r\n        display: flex;\r\n        height: 60px;\r\n        padding: 0 10px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        white-space: nowrap;\r\n        background-color: rgba(255,255,255,.3);\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./NavBar.vue?vue&type=template&id=6662a141&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=6662a141&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6662a141\"\n\nexport default script","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n\r\n  import {ajax} from \"../../proxy/http\";\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import {ListBox} from \"../units/ListBox\";\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'MusicSearchBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      const tabs = new ListBox();\r\n      const lrcs = new ListBox();\r\n      const sheet = new ListBox({\r\n        play: (message) => this.play(message),\r\n      });\r\n      const sheetList = new ListBox({\r\n        play: () => {\r\n          ajax.playlistDetail({id: this.sheetList.list[this.sheetList.current].id})(res => {\r\n            this.sheet.setList(res.playlist.tracks, true);\r\n          });\r\n        },\r\n      });\r\n      tabs.setList([sheetList, sheet, lrcs]);\r\n\r\n      return {\r\n        config: {\r\n          type: 'listBox',\r\n          name: '',\r\n          tabs,\r\n          searchText: '',\r\n          focusKey: 'q',\r\n          search: () => this.search()\r\n        },\r\n        currentTime: 0,\r\n        timer: null,\r\n        tabs,\r\n        lrcs,\r\n        sheet,\r\n        sheetList,\r\n        account: null,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n      \"lrcs.current\"() {\r\n        const {list, current} = this.lrcs;\r\n        this.modifyManager.commonOptions.changeBG_When_LRC_Changed && this.musicConfig.changePic();\r\n        this.musicConfig.setLrc(list[current] && list[current].name || '');\r\n      },\r\n      currentTime: {\r\n        immediate: true,\r\n        handler() {\r\n          const currentTime = this.mv.$audio.currentTime;\r\n          this.gameList.currentTime = currentTime * 1000;\r\n          const index = parseInt(currentTime * 10);\r\n          let curIndex = 0;\r\n          this.lrcs.list.some((item, _index) => {\r\n            if (item.time <= index) {\r\n              curIndex = _index\r\n            }\r\n            return item.time > index;\r\n          });\r\n          this.lrcs.setIndex(curIndex);\r\n        }\r\n      },\r\n      account: {\r\n        immediate: true,\r\n        handler() {\r\n          if (this.account) {\r\n            this.getUserSongList();\r\n          }\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      getLrc() {\r\n        const song = this.sheet.list[this.sheet.current];\r\n        if (song) {\r\n          ajax.lyric({id: song.id || song.songId})(res => {\r\n            const lrcList = res.lrc.lyric.split(/\\n/).map(item => {\r\n              const info = item.match(/(?:\\[)(\\d+)(?::)([^\\]]+)(?:\\])([^\\[\\]]*)/);\r\n              // \r\n              return {name: info ? info[3] : \"\", time: info ? parseInt((+info[1] * 60 + +info[2]) * 10) : 0,}\r\n            });\r\n            this.lrcs.setList(lrcList);\r\n          });\r\n          this.lrcs.setList([]);\r\n        }\r\n\r\n      },\r\n      login() {\r\n        const user = {phone: localStorage.getItem('userPhone'), password: localStorage.getItem('password'),};\r\n        if (!user.password || !user.password) {\r\n          ShortCut.toast(['']);\r\n          setTimeout(() => {\r\n            ShortCut.toast(['']);\r\n          }, 600);\r\n          return;\r\n        }\r\n        ajax.loginCellphone(user)(res => {\r\n          this.account = res.account;\r\n          this.getMySheets();\r\n        });\r\n      },\r\n      getImgUrl(song) {\r\n        return song && (song.coverImgUrl || song.al && song.al.picUrl || song.album && song.album.picUrl);\r\n      },\r\n      getSongUrl() {\r\n        const {mv} = this;\r\n        const song = this.sheet.list[this.sheet.current];\r\n        if (song) {\r\n          this.gameList.durationTime = mv.duration = mv.duration = song.duration || song.dt;\r\n          ajax.songUrl({id: song.id})(res => {\r\n            mv.play(res.data[0].url);\r\n          });\r\n        }\r\n\r\n      },\r\n      play(message) {\r\n        const {gameList, mv} = this;\r\n        const play = () => {\r\n          gameList.startSong();\r\n          mv.stopType = message;\r\n          this.getSongUrl();\r\n          this.getLrc();\r\n          this.tabs.setIndex(1);\r\n          // \r\n          this.config.searchText = \"\";\r\n        };\r\n        if (mv.$audio.paused){\r\n          play()\r\n        } else {\r\n          mv.$audio.pause();\r\n          setTimeout(() => {\r\n            play()\r\n          }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n        }\r\n\r\n      },\r\n      getUserSongList() {\r\n        ajax.userPlaylist({uid: this.account.id})(res => {\r\n          this.sheetList.setList(res.playlist, true);\r\n        });\r\n      },\r\n      getMySheets() {\r\n        ajax.recommendSongs()(res => {\r\n          this.sheet.setList(res.recommend || []);\r\n        });\r\n      },\r\n      like(){\r\n        const song = this.sheet.list[this.sheet.current];\r\n        const sheet = this.sheetList.list[0];\r\n\r\n        sheet && song && ajax.playlistTracks({\r\n          op: 'add',\r\n          pid: sheet.id,\r\n          tracks: song.id\r\n        })(res => {\r\n          console.log('like');\r\n        });\r\n      },\r\n      // \r\n      search() {\r\n        this.config.searchText && ajax.search({keywords: this.config.searchText})(res => {\r\n          this.sheet.setList(res.result.songs, true);\r\n          this.config.searchText = '';\r\n        })\r\n      },\r\n    },\r\n    beforeDestory() {\r\n      clearInterval(this.timer);\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv} = this;\r\n      musicConfig.ended = () => {\r\n        setTimeout(() => {\r\n          gameList.endSong();\r\n          setTimeout(() => {\r\n            this.sheet.next();\r\n            this.sheet.play();\r\n          }, 5000);\r\n        }, mv.delay.delayTime.value * 1000 + gameList.buffer + 1000)\r\n      };\r\n      this.timer = setInterval(() => (this.currentTime = Date.now()), 50);\r\n      this.login();\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          left: () => {\r\n            const nextTime = mv.$audio.currentTime - 5;\r\n            mv.$audio.currentTime = nextTime>=0 ? nextTime : 0;\r\n          },\r\n          right: () => {\r\n            const nextTime = mv.$audio.currentTime + 5;\r\n            mv.$audio.currentTime = nextTime <= mv.$audio.duration ? nextTime : mv.$audio.duration;\r\n          },\r\n          p: () => mv.$audio.paused ? mv.$audio.play() : mv.$audio.pause(),\r\n        },\r\n        ctrl: {\r\n          left: () => musicConfig.changePic(true),\r\n          right: () => musicConfig.changePic(),\r\n        }\r\n      }, {\r\n        alt: {\r\n          left: `5s`,\r\n          right: `5s`,\r\n          p: `/`,\r\n        },\r\n        ctrl: {\r\n          left: ``,\r\n          right: ``,\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n\r\n\r\n</style>\r\n","export default [\"album.js\",\"artists.js\",\"artist_album.js\",\"artist_desc.js\",\"artist_list.js\",\"artist_mv.js\",\"artist_sub.js\",\"artist_sublist.js\",\"banner.js\",\"check_music.js\",\"comment.js\",\"comment_album.js\",\"comment_dj.js\",\"comment_hot.js\",\"comment_like.js\",\"comment_music.js\",\"comment_mv.js\",\"comment_playlist.js\",\"comment_video.js\",\"daily_signin.js\",\"dj_catelist.js\",\"dj_detail.js\",\"dj_hot.js\",\"dj_paygift.js\",\"dj_program.js\",\"dj_program_detail.js\",\"dj_recommend.js\",\"dj_recommend_type.js\",\"dj_sub.js\",\"dj_sublist.js\",\"event.js\",\"fm_trash.js\",\"follow.js\",\"like.js\",\"likelist.js\",\"login.js\",\"login_cellphone.js\",\"login_refresh.js\",\"login_status.js\",\"logout.js\",\"lyric.js\",\"mv_detail.js\",\"mv_first.js\",\"mv_sub.js\",\"mv_url.js\",\"personalized.js\",\"personalized_djprogram.js\",\"personalized_mv.js\",\"personalized_newsong.js\",\"personalized_privatecontent.js\",\"personal_fm.js\",\"playlist_catlist.js\",\"playlist_create.js\",\"playlist_detail.js\",\"playlist_hot.js\",\"playlist_subscribe.js\",\"playlist_tracks.js\",\"playlist_update.js\",\"program_recommend.js\",\"recommend_resource.js\",\"recommend_songs.js\",\"related_allvideo.js\",\"related_playlist.js\",\"resource_like.js\",\"search.js\",\"search_hot.js\",\"search_multimatch.js\",\"search_suggest.js\",\"send_playlist.js\",\"send_text.js\",\"simi_artist.js\",\"simi_mv.js\",\"simi_playlist.js\",\"simi_song.js\",\"simi_user.js\",\"song_detail.js\",\"song_url.js\",\"toplist.js\",\"toplist_artist.js\",\"toplist_detail.js\",\"top_album.js\",\"top_artists.js\",\"top_list.js\",\"top_mv.js\",\"top_playlist.js\",\"top_playlist_highquality.js\",\"top_song.js\",\"user_audio.js\",\"user_cloud.js\",\"user_cloud_search.js\",\"user_detail.js\",\"user_dj.js\",\"user_event.js\",\"user_followeds.js\",\"user_follows.js\",\"user_playlist.js\",\"user_record.js\",\"user_subcount.js\",\"user_update.js\",\"video_detail.js\",\"video_sub.js\",\"video_url.js\",\"weblog.js\"]","// const fs = require(\"fs\");\r\n// const path = require(\"path\");\r\n\r\nfunction makeAjax(url) {\r\n  return function (data) {\r\n    const cb = {fn: null, then: fn => (cb.fn = fn)}\r\n    const fullUrl = `${location.protocol}//${location.hostname}:3000` + url + (data ? (\"?\" + Object.keys(data).map(item => item + \"=\" + data[item]).join(\"&\")) : \"\");\r\n    fetch(encodeURI(fullUrl), {\r\n      xhrFields: {withCredentials: true},\r\n      credentials: 'include'\r\n    }).then(res => {\r\n      res.json().then(res => cb.fn && cb.fn(res)).catch(e => console.log(e));\r\n    });\r\n    return fn => cb.fn = fn;\r\n  }\r\n}\r\n\r\nconst special = {\r\n  'daily_signin.js': '/daily_signin',\r\n  'fm_trash.js': '/fm_trash',\r\n  'personal_fm.js': '/personal_fm'\r\n}\r\nexport const ajax = {};\r\n\r\nfunction camel(str) {\r\n  return str.replace(/\\//, \"\")\r\n    .split(/\\//)\r\n    .map((item, index) =>\r\n      index ?\r\n        (item[0].toUpperCase() + item.slice(1)) :\r\n        item\r\n    ).join(\"\");\r\n}\r\nimport httpConf from './httpConf.js';\r\nhttpConf.forEach(file => {\r\n  if (!(/\\.js$/i.test(file))) return;\r\n  let route = (file in special) ? special[file] : '/' + file.replace(/\\.js$/i, '').replace(/_/g, '/');\r\n  ajax[camel(route)] = makeAjax(route)\r\n});\r\n\r\n","interface IListBoxOption {\r\n\r\n  play?: Function;\r\n  playing?: number;\r\n  current?: number;\r\n}\r\n\r\nexport class ListBox {\r\n  play?: Function;\r\n  playing: number = 0;\r\n  current: number = 0;\r\n  list: (ListBox|Object)[];\r\n  constructor(options: IListBoxOption = {}) {\r\n    // @ts-ignore;\r\n    Object.keys(options).forEach(key => this[key] = options[key]);\r\n    this.play = () => this;\r\n    if (options.play) {\r\n      this.play = () => {\r\n        options.play && options.play(...arguments);\r\n        this.playing = this.current;\r\n      }\r\n    }\r\n    this.list = [];\r\n    this.playing = 0;\r\n    this.current = 0;\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n\r\n  setList(list: (ListBox|Object)[], shallPlay?: boolean) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    if (shallPlay) this.play && this.play();\r\n    return this;\r\n  }\r\n\r\n  setIndex(index: number) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.current = (this.current - 1 + this.len) % this.len;\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.current = (this.current + 1) % this.len;\r\n    return this;\r\n  }\r\n}\r\n","<template>\r\n  <label :for=\"id\" class=\"music-wrap\" :class=\"{focus: isFocus}\">\r\n    <div class=\"search-box\" :class=\"{focus: isFocus}\">\r\n      <input :id=\"id\" ref=\"input\" type=\"text\" v-model=\"config.searchText\" placeholder=\"\" @focus=\"focus\" @blur=\"blur\">\r\n    </div>\r\n    <div class=\"music-lists\">\r\n      <div\r\n        class=\"song-list\"\r\n        v-for=\"(tabItem, index) in config.tabs.list\"\r\n        :class=\"{\r\n          prev: index === (tabs.current - 1 + tabs.list.length) % tabs.list.length,\r\n          active: index === tabs.current,\r\n          next: index === (tabs.current + 1) % tabs.list.length,\r\n        }\"\r\n      >\r\n        <span\r\n          v-if=\"getImgUrl(tabItem.list[tabItem.current])\"\r\n          :style=\"{backgroundImage: `url('${getImgUrl(tabItem.list[tabItem.current])}')`}\"\r\n        ></span>\r\n        <div>\r\n          <ul\r\n            :style=\"{transform: `translateY(-${30 * tabItem.current}px)`}\">\r\n            <li\r\n              v-for=\"(song, _index) in tabItem.list\"\r\n              :class=\"{active: tabItem.current === _index, playing: tabItem.playing === _index}\"\r\n            >\r\n              <span @click.stop=\"tabItem.setIndex(_index).play()\">\r\n                <img :src=\"getImgUrl(song)\" v-if=\"getImgUrl(song)\"/>\r\n                {{ song.name }}\r\n                <template v-if=\"config.type === 'modify' && index === 1\">\r\n                  &nbsp;&nbsp;\r\n                  {{ tabItem.list[_index].value }} /\r\n                  {{ tabItem.list[_index].min }} /\r\n                  {{ tabItem.list[_index].max }}\r\n                  &nbsp;&nbsp;//\r\n                </template>\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"music-lists-prev\" @click.stop=\"tabs.prev()\"> prev </div>\r\n      <div class=\"music-lists-next\" @click.stop=\"tabs.next()\"> next </div>\r\n    </div>\r\n  </label>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n\r\n  export default {\r\n    name: 'ListBoxView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    props: ['config'],\r\n    computed: {\r\n      tabs(){\r\n        return this.config.tabs;\r\n      },\r\n      id(){\r\n        return `ListBoxView_${this.config.focusKey}`;\r\n      }\r\n    },\r\n    watch: {\r\n    },\r\n    data(){\r\n      this.navList.push({\r\n        name: this.config.name,\r\n        id: this.id,\r\n        callback: () => {\r\n          this.$refs.input.focus()\r\n        }\r\n      });\r\n      return {\r\n        isFocus: false\r\n      }\r\n    },\r\n    methods: {\r\n      focus(){\r\n        const time = this.isFocus_ = Date.now();\r\n        setTimeout(() => {\r\n          time === this.isFocus_ && (this.isFocus = true);\r\n        }, 300)\r\n      },\r\n      blur(){\r\n        const time = this.isFocus_ = Date.now();\r\n        setTimeout(() => {\r\n          time === this.isFocus_ && (this.isFocus = false);\r\n        }, 300)\r\n      },\r\n      getImgUrl(song) {\r\n        return song && (song.coverImgUrl || song.al && song.al.picUrl || song.album && song.album.picUrl);\r\n      },\r\n    },\r\n    beforeDestory() {\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv, config} = this;\r\n      this.$shortCut = new ShortCut();\r\n\r\n      config.type === 'modify' && this.$shortCut.init(this.$refs.input, {\r\n        common: {\r\n          w: () => config.tabs.up(),\r\n          s: () => config.tabs.down(),\r\n          q: () => config.tabs.prev(),\r\n          e: () => config.tabs.next(),\r\n          // enter: () => this.search(),\r\n          107: () => config.tabs.add(),\r\n          delete: () => config.tabs.delete(),\r\n          c: () => config.tabs.copy(),\r\n          4: () => config.tabs.dec(),\r\n          6: () => config.tabs.enc(),\r\n          left: () => config.tabs.dec(),\r\n          right: () => config.tabs.enc(),\r\n          a: () => config.tabs.dec(),\r\n          d: () => config.tabs.enc(),\r\n          8: () => config.tabs.prevItem(),\r\n          2: () => config.tabs.nextItem(),\r\n          up: () => config.tabs.prevItem(),\r\n          down: () => config.tabs.nextItem(),\r\n          esc: () => this.$refs.input.blur(),\r\n        },\r\n        alt: {},\r\n        shift: {},\r\n        ctrl: {}\r\n      }, {\r\n        common: {\r\n          w: ``,\r\n          s: ``,\r\n          q: ``,\r\n          e: ``,\r\n          107: ``,\r\n          delete: ``,\r\n          c: ``,\r\n          4: ``,\r\n          6: ``,\r\n          left: ``,\r\n          right: ``,\r\n          a: ``,\r\n          d: ``,\r\n          8: ``,\r\n          2: ``,\r\n          up: ``,\r\n          down: ``,\r\n          esc: ``,\r\n        },\r\n        alt: {},\r\n        shift: {},\r\n        ctrl: {}\r\n      });\r\n\r\n\r\n      config.type === 'listBox' && this.$shortCut.init(this.$refs.input, {\r\n        common: {\r\n          up: () => config.tabs.list[config.tabs.current].prev(),\r\n          down: () => config.tabs.list[config.tabs.current].next(),\r\n          left: () => config.searchText || config.tabs.prev(),\r\n          right: () => config.searchText || config.tabs.next(),\r\n          enter: () => config.search && config.searchText ? config.search() : config.tabs.list[config.tabs.current].play('manual'),\r\n          backspace: () => config.searchText || config.tabs.current && config.tabs.prev(),\r\n          esc: () => this.$refs.input.blur(),\r\n        },\r\n      }, {\r\n        common: {\r\n          up: ``,\r\n          down: ``,\r\n          left: ``,\r\n          right: ``,\r\n          enter: `||`,\r\n          backspace: `|`,\r\n          esc: ``,\r\n        },\r\n      });\r\n\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          [this.config.focusKey]: () => {\r\n            this.$refs.input.focus()\r\n          },\r\n        },\r\n      }, {\r\n        alt: {\r\n          [this.config.focusKey]: ``,\r\n        },\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n  .music-wrap {\r\n    user-select: none;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    transform-origin: center center;\r\n    transform: translate(-50%, -50%) scale(0.7, 0.7);\r\n    opacity: 0;\r\n    transition: all 1s;\r\n    will-change: opacity, transform, background-color;\r\n\r\n    &::before {\r\n      content: '';\r\n      display: block;\r\n      width: 400%;\r\n      height: 400%;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      background-color: rgba(0, 0, 0, 0.9);\r\n    }\r\n\r\n    .music-lists {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      height: 50%;\r\n      width: 40%;\r\n      .music-lists-prev,\r\n      .music-lists-next{\r\n        position: absolute;\r\n        top: 0;\r\n        height: 40px;\r\n        background-color: rgba(255,255,255,0.3);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 0 10px;\r\n        z-index: 4;\r\n      }\r\n      .music-lists-prev{\r\n        right: 100%;\r\n      }\r\n      .music-lists-next{\r\n        left: 100%;\r\n      }\r\n      .song-list {\r\n        background-color: #222;\r\n        position: absolute;\r\n        left: 50%;\r\n        top: 50%;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        padding: 20px;\r\n        justify-content: center;\r\n        transition: all .3s;\r\n        border: 0;\r\n\r\n        > span {\r\n          display: block;\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          background-size: cover;\r\n          background-repeat: no-repeat;\r\n          background-position: center center;\r\n          opacity: 0.5;\r\n          filter: blur(0px);\r\n          transition: all 0.4s;\r\n          will-change: opacity;\r\n        }\r\n\r\n        img {\r\n          position: relative;\r\n          opacity: 1;\r\n          width: 14px;\r\n          height: 14px;\r\n          margin-right: 6px;\r\n          border-radius: 4px;\r\n          border: 0;\r\n        }\r\n\r\n        ul {\r\n          position: relative;\r\n          transform: translateX(-100%);\r\n          top: 50%;\r\n          transition: all 1s;\r\n          opacity: 0;\r\n          transform-origin: top;\r\n\r\n          li {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            white-space: nowrap;\r\n            color: #fff;\r\n            font-size: 16px;\r\n            line-height: 30px;\r\n            height: 30px;\r\n            width: 100%;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            transform: translate(0, 0, 0);\r\n            text-shadow: 0 4px 4px #000;\r\n            will-change: transform;\r\n\r\n            span {\r\n              transform: translateY(0) scale(0.6, 0.6);\r\n              transition: all 1s;\r\n              will-change: transform;\r\n            }\r\n\r\n            &.active {\r\n              opacity: 1;\r\n\r\n              span {\r\n                transform: translateY(0) scale(1, 1);\r\n              }\r\n            }\r\n\r\n            &.playing {\r\n              span {\r\n                transform: translateY(0) scale(0.9, 0.9);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        &.prev {\r\n          z-index: 1;\r\n          border-radius: 50% 0 0 50%;\r\n          transform: translate(-100%, -50%) scale(.8, .8);\r\n        }\r\n\r\n\r\n\r\n        &.next {\r\n          z-index: 2;\r\n          border-radius: 0 50% 50% 0;\r\n          transform: translate(0, -50%) scale(.8, .8);\r\n        }\r\n        &:only-child,\r\n        &.active {\r\n          z-index: 3;\r\n          border-radius: 10%;\r\n          transform: translate(-50%, -50%);\r\n          > span {\r\n            opacity: .8;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.focus {\r\n      z-index: 3009 !important;\r\n      opacity: 1;\r\n      transform: translate(-50%, -50%) scale(1, 1);\r\n\r\n      .song-list {\r\n\r\n        ul {\r\n          opacity: 0.5;\r\n        }\r\n\r\n        &.active {\r\n          opacity: 1;\r\n\r\n          ul {\r\n            opacity: 1;\r\n            transform: translateX(0);\r\n          }\r\n        }\r\n\r\n        > div {\r\n          height: 100%;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .search-box {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    justify-content: center;\r\n    height: 10%;\r\n    overflow: hidden;\r\n\r\n    input {\r\n      text-align: right;\r\n      border: 0;\r\n      padding: 0 20px;\r\n      outline: 0;\r\n      color: #fff;\r\n      font-size: 52px;\r\n      text-shadow: 0 0 8px #ffa800;\r\n      background-color: transparent;\r\n\r\n      &::-webkit-input-placeholder {\r\n        color: rgba(255, 255, 255, 0.8);\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./ListBoxView.vue?vue&type=template&id=1edde2f6\"\nimport script from \"./ListBoxView.vue?vue&type=script&lang=js\"\nexport * from \"./ListBoxView.vue?vue&type=script&lang=js\"\n\nimport \"./ListBoxView.vue?vue&type=style&index=0&id=1edde2f6&lang=less\"\nscript.render = render\n\nexport default script","import { render } from \"./MusicSearchBox.vue?vue&type=template&id=a0e80c36\"\nimport script from \"./MusicSearchBox.vue?vue&type=script&lang=js\"\nexport * from \"./MusicSearchBox.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import {ListBox} from \"../units/ListBox\";\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'MusicLocalBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    data() {\r\n      const tabs = new ListBox();\r\n      const songList = new ListBox({\r\n        play: () => {\r\n          this.play()\r\n        },\r\n      });\r\n      tabs.setList([songList]);\r\n      songList.setList([{name: 'testSong', url: './sound/testSound.mp3'}]);\r\n\r\n      return {\r\n        config: {\r\n          type: 'listBox',\r\n          name: '',\r\n          tabs,\r\n          searchText: '',\r\n          focusKey: 'e',\r\n        },\r\n        tabs,\r\n        songList,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n    },\r\n    methods: {\r\n      play(message) {\r\n        const {gameList, mv} = this;\r\n        const play = () => {\r\n          gameList.startSong();\r\n          mv.stopType = message;\r\n          mv.play(this.songList.list[this.songList.current].url);\r\n          // \r\n          this.searchText = \"\";\r\n        };\r\n        if (mv.$audio.paused){\r\n          play()\r\n        } else {\r\n          mv.$audio.pause();\r\n          setTimeout(() => {\r\n            play()\r\n          }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n        }\r\n\r\n      },\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv} = this;\r\n      musicConfig.ended = () => {\r\n        setTimeout(() => {\r\n          gameList.endSong();\r\n          setTimeout(() => {\r\n            this.songList.next();\r\n            this.songList.play();\r\n          }, 5000);\r\n        }, mv.delay.delayTime.value * 1000 + gameList.buffer + 1000)\r\n      };\r\n\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          left: () => {\r\n            const nextTime = mv.$audio.currentTime - 5;\r\n            mv.$audio.currentTime = nextTime>=0 ? nextTime : 0;\r\n          },\r\n          right: () => {\r\n            const nextTime = mv.$audio.currentTime + 5;\r\n            mv.$audio.currentTime = nextTime <= mv.$audio.duration ? nextTime : mv.$audio.duration;\r\n          },\r\n          p: () => mv.$audio.paused ? mv.$audio.play() : mv.$audio.pause(),\r\n        },\r\n        ctrl: {\r\n        }\r\n      }, {\r\n        alt: {\r\n          left: `5s`,\r\n          right: `5s`,\r\n          p: `/`,\r\n        },\r\n        ctrl: {\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n</style>\r\n","import { render } from \"./MusicLocalBox.vue?vue&type=template&id=e5e03e44\"\nimport script from \"./MusicLocalBox.vue?vue&type=script&lang=js\"\nexport * from \"./MusicLocalBox.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'ModifyBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: ['modifyManager', 'navList'],\r\n    data() {\r\n      return {\r\n        config: {\r\n          type: 'modify',\r\n          name: '',\r\n          tabs: this.modifyManager,\r\n          searchText: '',\r\n          focusKey: 'w',\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    watch: {},\r\n    methods: {\r\n      search() {\r\n      },\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .music-wrap {\r\n    .song-list {\r\n      background-color: rgba(34, 34, 34, 0.8);\r\n    }\r\n\r\n    &::before {\r\n      background-color: rgba(0, 0, 0, 0);\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./ModifyBox.vue?vue&type=template&id=59e8abba&scoped=true\"\nimport script from \"./ModifyBox.vue?vue&type=script&lang=js\"\nexport * from \"./ModifyBox.vue?vue&type=script&lang=js\"\n\nimport \"./ModifyBox.vue?vue&type=style&index=0&id=59e8abba&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-59e8abba\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'CanvasView',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0, height: 0,\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    props: ['config'],\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        deep: true,\r\n        handler() {\r\n          //  ? // \r\n          // this.$canvas && this.ctx && this.renderCanvas()\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n        const canvasConfig = this.config;\r\n        this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n        this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n        mv.size = canvasConfig.dataSize * 8;\r\n\r\n        const {height, width, ctx, viewCtx} = this;\r\n\r\n        const {originData, realTimeData, calculateColors} = musicData;\r\n\r\n        const {avrLevel, data} = realTimeData;\r\n        const dataBefore = originData.data;\r\n\r\n        // \r\n        const data1 = [...(canvasConfig.copyData ? data : [])];\r\n        data1.reverse();\r\n\r\n        let dataBefore_= [];\r\n        if (canvasConfig.showDataBefore) {\r\n          const data2 = [...(canvasConfig.copyData ? dataBefore : [])];\r\n          data2.reverse();\r\n          dataBefore_ = [...dataBefore, ...data2];\r\n          dataBefore_.reverse();\r\n        }\r\n\r\n        const renderData = [...data, ...data1, ...dataBefore_].filter(i=> canvasConfig.noZero ? i : true);\r\n        const {currentImgAviColor,  mouseMoveConf} = musicConfig;\r\n\r\n        const baseSize = [Math.min(height, width), Math.max(height, width)][canvasConfig.baseSizeType];\r\n\r\n        const midPosition = {\r\n          x: width * canvasConfig.midPositionX / 100,\r\n          y: height * canvasConfig.midPositionY / 100,\r\n        };\r\n\r\n        const mainRadius = baseSize * canvasConfig.mainRadius / 100 * (\r\n          100 - canvasConfig.avrLevelMainRadiusModify +\r\n          canvasConfig.avrLevelMainRadiusModify * avrLevel / 256\r\n        ) / 100;\r\n\r\n        const floatRange = baseSize * canvasConfig.floatRange / 100 * (\r\n          100 - canvasConfig.avrLevelFloatRangeModify +\r\n          canvasConfig.avrLevelFloatRangeModify * avrLevel / 256\r\n        ) / 100;\r\n\r\n        //  //  \r\n        ctx.fillStyle = `rgba(0, 0, 0, ${canvasConfig.disable ? 1 : (1 - canvasConfig.clearPrevView / 100)})`;\r\n        ctx.fillRect(0, 0, this.width, this.height);\r\n\r\n        ctx.clearRect(0, 0, width, height);\r\n        viewCtx.clearRect(0, 0, width, height);\r\n\r\n        if (canvasConfig.disable) {\r\n          viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n          return;\r\n        }\r\n\r\n\r\n        // \r\n        ctx.fillStyle = ctx.strokeStyle = `rgba(${calculateColors[0].join(', ')}, ${canvasConfig.mainRadiusOpacity / 100})`;\r\n        ctx.lineWidth = baseSize * canvasConfig.mainRadiusLineWidth / 1000;\r\n        ctx.beginPath();\r\n        if (canvasConfig.direction === 0) {\r\n          ctx.arc(midPosition.x, midPosition.y, mainRadius, 0, 2 * Math.PI);\r\n        } else {\r\n\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n\r\n\r\n        const len = renderData.length || 1; //  0 \r\n        const perDeg = Math.PI * 2 / (len || 1) * canvasConfig.stepModify / 10;\r\n\r\n        const halfPerDeg = perDeg / 2;\r\n        const rotate = Math.PI * 0;\r\n\r\n        ctx.lineWidth = baseSize * canvasConfig.lineLineWidth / 1000;\r\n        const rate = canvasConfig.dataModify / 10;\r\n        const offset = 1 + canvasConfig.dataOffsetModify / 100;\r\n        ctx.closePath();\r\n        const length  = renderData.length;\r\n        const minHeight =  canvasConfig.minHeightModify / 100;\r\n        renderData.forEach((val, index) => {\r\n\r\n          val = val / 256 + minHeight;\r\n          const  nextVal = renderData[(index + 1) % length] / 256 + minHeight;\r\n          const deg = perDeg * index + rotate;\r\n\r\n          function lin1() {\r\n            const _x = (index - len/2) * canvasConfig.stepModify;\r\n            // x, y;\r\n            const point1 = [\r\n              [\r\n                Math.sin(deg) * (val * rate  + offset * mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (val * rate  + offset * mainRadius)+ midPosition.y\r\n              ], [\r\n                midPosition.x + _x,\r\n                -(val * rate  + offset * mainRadius)+ midPosition.y,\r\n              ]\r\n            ][canvasConfig.direction];\r\n            const point2 = [\r\n              [\r\n                Math.sin(deg) * (val * rate * floatRange * 3 + offset*mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y\r\n              ],[\r\n                midPosition.x + _x,\r\n                -(val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y,\r\n              ]\r\n            ][canvasConfig.direction];\r\n            const lr = ctx.createLinearGradient(\r\n              point1[0],\r\n              point1[1],\r\n              point2[0],\r\n              point2[1],\r\n            );\r\n            lr.addColorStop(1, `rgba(${calculateColors[0].join(', ')}, 1)`);\r\n            lr.addColorStop(.75, `rgba(${calculateColors[1].join(', ')}, 1)`);\r\n            lr.addColorStop(0, `rgba(${calculateColors[1].join(', ')}, 1)`);\r\n            ctx.strokeStyle = lr;\r\n            ctx.beginPath();\r\n            ctx.moveTo(point1[0], point1[1]);\r\n            ctx.lineTo(point2[0], point2[1]);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n\r\n          const edge = val * rate * floatRange * 3+ mainRadius;\r\n          function line(){\r\n            ctx.strokeStyle = `rgba(${calculateColors[1].join(', ')}, ${avrLevel * 2/255 + 0.25})`;\r\n            const nextEdge = nextVal * rate * floatRange * 3 + mainRadius;\r\n            ctx.beginPath();\r\n            ctx.moveTo(\r\n              Math.sin(deg) *edge + midPosition.x,\r\n              Math.cos(deg) * edge+ midPosition.y\r\n            );\r\n            ctx.bezierCurveTo(\r\n              Math.sin(deg+perDeg/3) * edge + midPosition.x,\r\n              Math.cos(deg+perDeg/3) * edge+ midPosition.y,\r\n              Math.sin(deg+perDeg/3*2) * nextEdge + midPosition.x,\r\n              Math.cos(deg+perDeg/3*2) * nextEdge+ midPosition.y,\r\n              Math.sin(deg+perDeg) * nextEdge + midPosition.x,\r\n              Math.cos(deg+perDeg) * nextEdge+ midPosition.y,\r\n            );\r\n\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n          // lin1();\r\n          // line();\r\n          // dot();\r\n\r\n          ;[\r\n            lin1,\r\n            line,\r\n            rect,\r\n            dot\r\n          ][canvasConfig.renderType]()\r\n\r\n          function dot() {\r\n            ctx.fillStyle = `rgba(${calculateColors[1].join(', ')}, 1)`;\r\n            ctx.beginPath();\r\n\r\n            const _x = (index - len/2) * canvasConfig.stepModify + midPosition.x;\r\n            const position =[\r\n              [\r\n                Math.sin(deg) * edge + midPosition.x,\r\n                Math.cos(deg) * edge+ midPosition.y,\r\n              ],[\r\n                _x,\r\n                -(val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y\r\n              ]\r\n            ][canvasConfig.direction] || [];\r\n            const x = position[0];\r\n            const y = position[1];\r\n            ctx.arc(\r\n              x, y,\r\n              baseSize * canvasConfig.lineLineWidth / 1000,\r\n              0, 2 * Math.PI\r\n            );\r\n            ctx.closePath();\r\n            ctx.fill();\r\n          }\r\n          function rect() {\r\n            ctx.strokeStyle = `rgba(${calculateColors[1].join(', ')}, 1)`;\r\n            ctx.beginPath();\r\n            let renderVal = (val * rate  - canvasConfig.threshold / 10) * floatRange;\r\n            renderVal < 0 &&(renderVal = 0);\r\n            const dots = [\r\n              [ // \r\n                Math.sin(deg-halfPerDeg) * (mainRadius) + midPosition.x,\r\n                Math.cos(deg-halfPerDeg) * (mainRadius)+ midPosition.y\r\n              ],\r\n              [ // \r\n                Math.sin(deg+halfPerDeg) * (mainRadius) + midPosition.x,\r\n                Math.cos(deg+halfPerDeg) * (mainRadius)+ midPosition.y\r\n              ],\r\n              [ // \r\n                Math.sin(deg) * (-renderVal+ mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (-renderVal+ mainRadius)+ midPosition.y\r\n              ],\r\n              [ // \r\n                Math.sin(deg) * (renderVal+ mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (renderVal+ mainRadius)+ midPosition.y\r\n              ],\r\n            ];\r\n            ;[0,2,1,3,0,2].forEach(item => {\r\n              ctx.lineTo.apply(ctx, dots[item]);\r\n            })\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n        });\r\n        ctx.closePath();\r\n        viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import { render } from \"./CanvasView.vue?vue&type=template&id=4339fdd8&scoped=true\"\nimport script from \"./CanvasView.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasView.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasView.vue?vue&type=style&index=0&id=4339fdd8&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4339fdd8\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random, random} from \"../tools/random\";\r\n  import {PS} from \"../tools/PS\";\r\n\r\n\r\n  export default {\r\n    name: 'CanvasPic',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'commonOptions_'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        shallMalfunction: 0,\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          //  ? // \r\n          this.commonOptions_.CanvasPicMalfunction && (this.shallMalfunction = 2);\r\n        }\r\n      },\r\n\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          //  ? // \r\n          this.$canvas && this.ctx && this.renderCanvas();\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n\r\n        const {height, width, ctx, imgCtx, musicConfig, musicData} = this;\r\n        const {realTimeData} = musicData;\r\n        const {avrLevel} = realTimeData;\r\n        ctx.putImageData(musicConfig.getImageData(0, 0, width, height), 0, 0);\r\n\r\n        if (this.shallMalfunction) {\r\n          const list = [0, 1, 2, 3, 4, 5];\r\n\r\n          function blur(id, x, y) {\r\n            return `<filter id=\"${id}\"><feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"${x},${y}\"></feGaussianBlur></filter>`;\r\n          }\r\n          document.querySelector('#svg-all').innerHTML = `<defs>${\r\n            list.map(item => blur(`blur${item * 2}`, 0, item ? avrLevel / 255 / item * 20 : 0)).join('')\r\n          }${\r\n            list.map(item => blur(`blur${item * 2}-v`, item ? avrLevel / 255 / item * 20 : 0, 0)).join('')\r\n          }${\r\n            list.map(item => blur(`blur${item * 2}--45`, item ? avrLevel / 255 / item * 20 : 0, 0)).join('')\r\n          }</defs>`;\r\n        }\r\n        const des = (index_ = 0) => {\r\n\r\n          const w = index_ ? Random.int(width, width / (index_ + index_ * .2)) : width;\r\n          const h = index_ ? Random.int(height, height / (index_ * 5)) : height / 10;\r\n          const x = (width - w) / 2;\r\n          const y = (height - h) / 2 + Random.int(h / 2, 0, true);\r\n\r\n          const imageData = musicConfig.getImageData(x, y, w, h);\r\n          if (!imageData) return;\r\n\r\n          const ps = new PS(imageData);\r\n          const dirR = Random.boolean();\r\n          const max = avrLevel / 4;\r\n\r\n          if (this.shallMalfunction) {\r\n            const fnMap = [\r\n              (off) => ps.aisleOffset('r', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n              (off) => ps.aisleOffset('g', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n              (off) => ps.aisleOffset('b', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n            ];\r\n\r\n            const index = Random.int(2, 0);\r\n            fnMap[index](Random.int(max, max / 2, true));\r\n            Random.boolean() && fnMap[(index + 1) % fnMap.length](Random.int(max, max / 3, true));\r\n            Random.boolean() && fnMap[(index + 2) % fnMap.length](Random.int(max, max / 4, true));\r\n            ctx.putImageData(ps.imageData, x + Random.int(20 * index_, 0, true), y + Random.int(10 * index_, 0, true));\r\n          }\r\n          ctx.putImageData(imageData, x, y);\r\n\r\n\r\n        }\r\n        if (musicConfig.picDom && this.shallMalfunction === 2) {\r\n          des(0);\r\n          // des(1);\r\n          // des(2);\r\n        }\r\n\r\n        this.viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n        this.shallMalfunction && (this.shallMalfunction --);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage.width = this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n      this.$canvasImage.height = this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n      this.imgCtx = this.$canvasImage.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 0.4;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","\r\nimport {GetType} from \"@/tools/GetType\";\r\nexport class Random {\r\n  exec() {\r\n    const {max_, min_, sign_} = this;\r\n    return Random.exec(max_, min_, sign_);\r\n  }\r\n  sign() {\r\n    this.sign_ = -1;\r\n    return this;\r\n  }\r\n  min(min) {\r\n    GetType.isNumber(min) && (this.min_ = min);\r\n    return this;\r\n  }\r\n\r\n  max(max) {\r\n    GetType.isNumber(max) && (this.max_ = max);\r\n    return this;\r\n  }\r\n\r\n  int(size, unique) {\r\n    const {max_, min_, sign_,} = this;\r\n    return Random.int(max_, min_, sign_, size, unique)\r\n  }\r\n\r\n  static exec(max_, min_, sign_) {\r\n    let val = Math.random();\r\n    GetType.isNumber(max_) && (val = val * max_);\r\n    GetType.isNumber(min_) && (val = val + min_);\r\n    sign_ && (val = val * -1);\r\n    return val;\r\n  }\r\n\r\n  static int(max = 1, min = 0, sign){\r\n    return (sign && Random.boolean() ? -1 : 1) * Math.round(Math.random() * max + min)\r\n  }\r\n  static boolean() {\r\n    return Math.round(Math.random());\r\n  }\r\n  static time(){\r\n    return Date.now().toString();\r\n  }\r\n  boolean(){\r\n    return  Random.boolean(size, rate)\r\n  }\r\n}\r\n\r\nexport function random() {\r\n  return new Random()\r\n}\r\n\r\n","const aisleMap = {\r\n  r: 0, g: 1, b: 2, a: 3\r\n};\r\ntype TAisleType = keyof typeof aisleMap;\r\n// @ts-ignore;\r\nimport {Random, random} from \"@/tools/random\";\r\nexport class PS {\r\n  aisleMap = aisleMap;\r\n  imageData: ImageData;\r\n\r\n  static cutFnMap: {[index: number]: () => number} = {\r\n    1: () => 255,\r\n    2: () => 0,\r\n    3: () => Random.int(255,0)\r\n  };\r\n  constructor(imageData: ImageData) {\r\n    this.imageData = imageData;\r\n  }\r\n\r\n  getAisle(aisleType: TAisleType, cutType: number = 0) {\r\n    const offset = this.aisleMap[aisleType];\r\n    if (offset === undefined) return [];\r\n    const {data, width, height} = this.imageData;\r\n\r\n    const ret: number[][] = [];\r\n    for (let y = 0; y < height; y++) {\r\n      const line: number[] = [];\r\n      ret.push(line);\r\n      const cur = width * y;\r\n      for (let x = 0; x < width; x++) {\r\n        line.push(data[(cur + x) * 4 + offset]);\r\n        cutType && (data[(cur + x) * 4 + offset] = PS.cutFnMap[cutType] &&  PS.cutFnMap[cutType]() || 255);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  aisleOffset(aisleType: TAisleType, xOffset = 0, yOffset = 0, zoom: number = 1, cutType: number = 0) {\r\n    const offset = this.aisleMap[aisleType];\r\n    if (offset === undefined) return;\r\n    const aisleData = this.getAisle(aisleType, cutType);\r\n    const {data, width, height} = this.imageData;\r\n    for (let y = 0; y < height; y++) {\r\n      const line = aisleData[y + yOffset] || {};\r\n      const cur = width * (y + yOffset) + xOffset;\r\n      for (let x = 0; x < width; x++) {\r\n        data[(cur + x) * 4 + offset] = (line[x] || 0) * zoom;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./CanvasPic.vue?vue&type=template&id=0226e92a&scoped=true\"\nimport script from \"./CanvasPic.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasPic.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasPic.vue?vue&type=style&index=0&id=0226e92a&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0226e92a\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <div :style=\"textStyle\">Happy new Year!</div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random, random} from \"../tools/random\";\r\n  import {musicConfig} from \"../music/MusicConfig\";\r\n  import {musicData, musicDataFlags} from \"../music/Music\";\r\n  import {PS} from \"../tools/PS\";\r\n\r\n  export default {\r\n    name: 'CanvasText',\r\n    data() {\r\n      return {\r\n        musicDataFlags,\r\n        musicConfig,\r\n        musicData,\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        textStyle: ''\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          const {realTimeData, calculateColors} = musicData;\r\n          const {avrLevel} = realTimeData;\r\n          const per = avrLevel / 255;\r\n          const rate = Math.round(avrLevel / 255 * 100) + 10;\r\n          const opa = avrLevel / 255 + .75;\r\n          const scale = avrLevel / 255 / 2 + .75;\r\n          this.textStyle = `text-shadow: ${[\r\n            `0 0 ${rate}px #fff`,\r\n            `0 0 ${rate * 2}px #fff`,\r\n            `0 0 ${rate * 3}px #fff`,\r\n            `0 0 ${rate * 4}px #fff`,\r\n            `0 0 ${rate * 5}px #ff5722`,\r\n            `0 0 ${rate * 6}px #ff5722`,\r\n            `0 0 ${rate * 7}px #ff5722`,\r\n            `0 0 ${rate * 8}px #ff5722`,\r\n          ].join(',')}; opacity: ${opa > 1 ? 1 : opa}; transform: translate3d(0,0,0) scale(${scale}, ${scale}) rotate(${Random.exec(per*3, per*-3,)}deg)`;\r\n        }\r\n      }\r\n    },\r\n    methods: {}\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding-bottom: 40vh;\r\n    font-size: 120px;\r\n    font-family: \"\";\r\n    filter: brightness(110%);\r\n\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    will-change: opacity, box-shadow, transform;\r\n  }\r\n</style>\r\n","import { render } from \"./CanvasTitle.vue?vue&type=template&id=a931abd0&scoped=true\"\nimport script from \"./CanvasTitle.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasTitle.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasTitle.vue?vue&type=style&index=0&id=a931abd0&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a931abd0\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random} from \"../tools/random\";\r\n  import {PS} from \"../tools/PS\";\r\n  import {Picture} from \"../picture/Picture\";\r\n\r\n  export default {\r\n    name: 'CanvasText',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        shallMalfunction: false,\r\n        size: 0,\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          this.$canvas && this.ctx && this.renderCanvas();\r\n        }\r\n      },\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          this.modifyManager.commonOptions.CanvasTextMalfunction && (this.shallMalfunction = true);\r\n          this.size = 0;\r\n          console.log(789)\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n        const {height, width, ctx, imgCtx, musicConfig, viewCtx, musicData} = this;\r\n        const {realTimeData, calculateColors} = musicData;\r\n        const {avrLevel} = realTimeData;\r\n\r\n        const w = width;\r\n        const h = 100;\r\n        const x = width / 2;\r\n        const y = height * .66;\r\n        let size =\r\n          this.size =\r\n            this.size ||\r\n            160 + Random.int(10 * avrLevel / 255, 0, true) - (musicConfig.lrc || '').length * 1.5;\r\n\r\n        // \r\n        ctx.clearRect(0, 0, width, height);\r\n        viewCtx.clearRect(0, 0, width, height);\r\n\r\n        if (musicConfig.lrc) {\r\n          ctx.fillStyle = `rgba(0,0,0,.5)`;\r\n          ctx.fillRect(0, height / 7 * 3.9, width, height / 7 * 1.3);\r\n        }\r\n\r\n        // \r\n        ctx.font = `${size}px pmzdbtt`;\r\n\r\n\r\n        const measureText = ctx.measureText(musicConfig.lrc);\r\n        if (measureText.width > (width - 100)) {\r\n          size =\r\n            this.size =\r\n              Math.floor(this.size /measureText.width * (width - 100));\r\n          ctx.font = `${size}px pmzdbtt`;\r\n        }\r\n        // \r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.lineWidth = 1;\r\n\r\n        const percent = avrLevel / 255;\r\n        const offset = percent * size / 4 + 4;\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255).join(', ')}, ${percent})`;\r\n        ctx.strokeText(musicConfig.lrc, x + offset, y - offset);\r\n\r\n\r\n        const pattern = ctx.createPattern(Picture.pciCanvas,\"repeat\");\r\n        ctx.fillStyle = pattern;\r\n        ctx.fillText(musicConfig.lrc, x + offset, y - offset);\r\n\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255).join(', ')}, ${percent * 0.8})`;\r\n        ctx.strokeText(musicConfig.lrc, x + offset / 2, y - offset / 2);\r\n\r\n\r\n        ctx.fillStyle = `rgba(255,255,255,.3)`;\r\n        ctx.fillText(musicConfig.lrc, x + offset / 2, y - offset / 2);\r\n\r\n\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255 - i).join(', ')}, 1)`;\r\n        ctx.strokeText(musicConfig.lrc, x, y);\r\n\r\n\r\n        ctx.fillStyle = `rgba(${calculateColors[1].join(', ')}, 0.3)`;\r\n        ctx.fillText(musicConfig.lrc, x, y);\r\n\r\n\r\n\r\n\r\n        const des = (index_ = 0) => {\r\n          const W = ctx.measureText(musicConfig.lrc).width || 1;\r\n          if (!W) return;\r\n\r\n          const _w = W;\r\n          const _h = size * index_ / 4;\r\n          const __x = 0;\r\n          const __y = size;\r\n\r\n          const _x = (width - _w) / 2;\r\n          const _y = y - __y / 2 + Random.int(size - _h, 0);\r\n\r\n          if (_h < 0) return;\r\n          const imageData = ctx.getImageData(_x, _y, _w, _h);\r\n\r\n          const ps = new PS(imageData);\r\n          const max = (h - size) / 4;\r\n\r\n          if (this.shallMalfunction) {\r\n            const fnMap = [\r\n              () => ps.aisleOffset('r', Random.int(max, max / 2, true), Random.int(max, max / 2, true)),\r\n              () => ps.aisleOffset('g', Random.int(max, max / 3, true), Random.int(max, max / 3, true)),\r\n              () => ps.aisleOffset('b', Random.int(max, max / 4, true), Random.int(max, max / 4, true)),\r\n            ];\r\n            const len = fnMap.length;\r\n            let index = Random.int(2, 0);\r\n            fnMap[index]();\r\n            Random.boolean() && fnMap[++index % len]();\r\n            Random.boolean() && fnMap[++index % len]();\r\n          }\r\n\r\n          ctx.putImageData(ps.imageData, _x, _y);\r\n\r\n          viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n        };\r\n        if (musicConfig.picDom) {\r\n          des(1);\r\n          des(2);\r\n          des(3);\r\n        }\r\n        this.shallMalfunction = false;\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage.width = this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n      this.$canvasImage.height = this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n      this.imgCtx = this.$canvasImage.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    opacity: 0.8;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import { render } from \"./CanvasText.vue?vue&type=template&id=0ebf586b&scoped=true\"\nimport script from \"./CanvasText.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasText.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasText.vue?vue&type=style&index=0&id=0ebf586b&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0ebf586b\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <video :src=\"src\" autoplay=\"autoplay\" muted @ended=\"handelEnded\"></video>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'VideoView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: ['index'],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      return {\r\n        ended: true,\r\n        shallChange: false,\r\n        current: this.index,\r\n        src: '',\r\n        srcs: [\r\n          './videos/1.mp4',\r\n          './videos/2.mp4',\r\n          './videos/3.mp4',\r\n          './videos/4.mp4',\r\n        ],\r\n        width: 0, height: 0,\r\n        play: () => {\r\n          // this.$refs.video && this.$refs.video.play();\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      changeVideo(){\r\n        return this.musicData.soundTrackArr.find(item => item.isChangeDot)\r\n      },\r\n    },\r\n    methods: {\r\n      handelEnded(){\r\n        this.ended = true;\r\n      },\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag'(){\r\n        if (this.ended) {\r\n          this.current ++;\r\n          this.src = this.srcs[this.current%this.srcs.length];\r\n          this.ended = false;\r\n        }\r\n      },\r\n    },\r\n    beforeDestroy(){\r\n      document.removeEventListener('click', this.play);\r\n    },\r\n    mounted() {\r\n      document.addEventListener('click', this.play);\r\n      this.play();\r\n      this.width = this.$el.offsetWidth;\r\n      this.height = this.$el.offsetHeight;\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    top: 0;\r\n    left: 0;\r\n    overflow: hidden;\r\n    z-index: 2950;\r\n    background-blend-mode: lighten;\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .canvas-view video {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n</style>\r\n","import { render } from \"./VideoView.vue?vue&type=template&id=3830f794&scoped=true\"\nimport script from \"./VideoView.vue?vue&type=script&lang=js\"\nexport * from \"./VideoView.vue?vue&type=script&lang=js\"\n\nimport \"./VideoView.vue?vue&type=style&index=0&id=3830f794&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3830f794\"\n\nexport default script","<template>\r\n  <div class=\"dom-clock\">\r\n    <div v-for=\"(list, index) in time\" :style=\"d3wrapStyle\">\r\n      <div v-for=\"(list_, index_) in list\">\r\n        <template v-if=\"index_\"><span>{{index ? ':' : '-'}}</span></template>\r\n        <template v-for=\"(num) in list_\">\r\n          <DomClockItem :num=\"num\"/>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Time} from \"../tools/Time\";\r\n  import DomClockItem from './DomClockItem.vue'\r\n\r\n  export default {\r\n    name: 'DomClock',\r\n    components: {DomClockItem},\r\n    data() {\r\n      return {\r\n        time: '',\r\n      }\r\n    },\r\n\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    computed: {\r\n      d3wrapStyle(){\r\n        const {musicConfig} = this;\r\n        const {_x, _y} = musicConfig.mouseMoveConf;\r\n        const maxDeg = 150;\r\n        return {\r\n          transform: `translateZ(-400px) rotateX(${-_y*maxDeg - 20}deg) rotateY(${_x*maxDeg}deg)`,\r\n        }\r\n      },\r\n      dataFlag(){\r\n        return this.musicDataFlags.dataFlag\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          //  ? // \r\n          // modifyManager.commonOptions.CanvasPicMalfunction && (this.shallMalfunction = 2);\r\n        }\r\n      },\r\n      'dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          const stamp = new Date();\r\n          this.time = [\r\n            Time.format(stamp, `yea mon dat`).split(' ').map(i => i.split('')),\r\n            Time.format(stamp, `hou min sec`).split(' ').map(i => i.split(''))\r\n          ];\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n      }\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .dom-clock {\r\n    position: absolute;\r\n    top: 20vh;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    flex: 1 1 0;\r\n    z-index: 2900;\r\n    perspective:1000px;\r\n\r\n    >div{\r\n      display: flex;\r\n      justify-content: center;\r\n      margin: 20px 0;\r\n      transform-style:preserve-3d;\r\n      >div{\r\n        display: flex;\r\n        align-items: flex-end;\r\n        >span{\r\n          opacity: 1;\r\n          margin: 20px;\r\n          font-size: 80px;\r\n          transform: translateZ(20px);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","export class Time {\r\n  static format(stamp?: Date, format = `yea-mon-dat`){\r\n    const time  = stamp || new Date();\r\n    return  format.replace(/yea/g, time.getFullYear().toString())\r\n      .replace(/mon/g, Time.to00(time.getMonth() + 1))\r\n      .replace(/dat/g, Time.to00(time.getDate()))\r\n      .replace(/hou/g, Time.to00(time.getHours()))\r\n      .replace(/min/g, Time.to00(time.getMinutes()))\r\n      .replace(/sec/g, Time.to00(time.getSeconds()))\r\n      .replace(/mis/g, Time.to000(time.getMilliseconds()))\r\n  }\r\n  static to00(num: number){ return num>9 ? `${num}` : `0${num}`}\r\n  static to000(num: number){ return num>99 ? `${num}` : `0${Time.to00(num)}`}\r\n}\r\n","<template>\r\n  <div class=\"dom-clock-item-wrap\">\r\n    <div class=\"dom-clock-item\">\r\n      <div v-for=\"(num, index) in list\" :class=\"{track: true}\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"dom-clock-item\">\r\n      <div v-for=\"(num, index) in list\" :class=\"{active: num}\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\n  import {musicData, musicDataFlags} from \"../music/Music\";\r\n  const list = [\r\n    [1, 1, 1, 1, 1, 1, 0],\r\n    [0, 1, 1, 0, 0, 0, 0],\r\n    [1, 1, 0, 1, 1, 0, 1],\r\n    [1, 1, 1, 1, 0, 0, 1],\r\n    [0, 1, 1, 0, 0, 1, 1],\r\n    [1, 0, 1, 1, 0, 1, 1],\r\n    [1, 0, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 1, 0, 1, 1],\r\n  ];\r\n  export default {\r\n    name: 'DomClockItem',\r\n    props: ['num'],\r\n    data(){\r\n      return {\r\n        musicData,\r\n        musicDataFlags\r\n      }\r\n    },\r\n    computed: {\r\n      list() {\r\n        return list[this.num]\r\n      },\r\n      // wrapStyle(){\r\n      //   const {data, avrLevel, total, cacheList, calculateColors} = this.musicData;\r\n      //   this.musicDataFlags.dataFlag;\r\n      //   return {\r\n      //     '--animateTime': `${.3 - avrLevel / 255 * 0.3}s`,\r\n      //     '--radius': `${avrLevel / 255 * 40}px`\r\n      //   }\r\n      // }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n      }\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n\r\n  .dom-clock-item-wrap {\r\n    --animateTime: 0.7s;\r\n    --radius: 40px;\r\n    --textRadius: 2px;\r\n    --radius_: 0;\r\n    --time: 0.05s;\r\n    --a: 80px;\r\n    --b: calc(var(--a) / 10);\r\n    --a2: calc(var(--a) * 2);\r\n    --ha: calc(var(--a) / 2);\r\n    --hb: calc(var(--b) / 2);\r\n    --h: calc(var(--b) / 2);\r\n    --offsetx: calc((var(--hb) + var(--h)) * -1);\r\n    --offsety: calc(var(--h) * -1);\r\n    --offset2: calc((var(--hb) + var(--h) * 2) * -1);\r\n\r\n    margin: calc(var(--b) * 2);\r\n    position: relative;\r\n    height: var(--a2);\r\n    line-height: var(--a2);\r\n    font-size: 40px;\r\n    width: var(--a);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-shadow:\r\n      0 0 calc(var(--textRadius) * 1) #fff,\r\n      0 0 calc(var(--textRadius) * 2) #fff,\r\n      0 0 calc(var(--textRadius) * 3) #fff,\r\n      0 0 calc(var(--textRadius) * 4) #fff,\r\n      0 0 calc(var(--textRadius) * 5) #ff5722,\r\n      0 0 calc(var(--textRadius) * 6) #ff5722,\r\n      0 0 calc(var(--textRadius) * 7) #ff5722,\r\n      0 0 calc(var(--textRadius) * 8) #ff5722;\r\n\r\n    .dom-clock-item {\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 100%;\r\n\r\n      > div {\r\n        position: absolute;\r\n        display: block;\r\n        transform: translateZ(0);\r\n        box-shadow:\r\n          0 0 calc(var(--radius_) * 1) #fff,\r\n          0 0 calc(var(--radius_) * 2) #fff,\r\n          0 0 calc(var(--radius_) * 3) #fff,\r\n          0 0 calc(var(--radius_) * 4) #fff,\r\n          0 0 calc(var(--radius_) * 5) #ff5722,\r\n          0 0 calc(var(--radius_) * 6) #ff5722,\r\n          0 0 calc(var(--radius_) * 7) #ff5722,\r\n          0 0 calc(var(--radius_) * 8) #ff5722;\r\n\r\n        > div {\r\n          width: 100%;\r\n          height: 100%;\r\n          background-color: rgba(0, 0, 0, 1);\r\n          clip-path: polygon(var(--hb) 0, calc(100% - var(--hb)) 0, 100% var(--hb), 100% calc(100% - var(--hb)), calc(100% - var(--hb)) 100%, var(--hb) 100%, 0 calc(100% - var(--hb)), 0 var(--hb));\r\n        }\r\n\r\n        &.track {\r\n          > div {\r\n            background-color: rgba(0, 0, 0, 1);\r\n          }\r\n        }\r\n\r\n        &.active {\r\n          box-shadow:\r\n            0 0 calc(var(--radius) * 1) #fff,\r\n            0 0 calc(var(--radius) * 2) #fff,\r\n            0 0 calc(var(--radius) * 3) #fff,\r\n            0 0 calc(var(--radius) * 4) #fff,\r\n            0 0 calc(var(--radius) * 5) #ff5722,\r\n            0 0 calc(var(--radius) * 6) #ff5722,\r\n            0 0 calc(var(--radius) * 7) #ff5722,\r\n            0 0 calc(var(--radius) * 8) #ff5722;\r\n          transform: translateZ(40px);\r\n\r\n          > div {\r\n            background-color: rgba(255, 255, 255, 1);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(1) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          top: var(--offset2);\r\n          left: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 1) cubic-bezier(.6,.42,.34,1.48);\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 1) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(2) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          top: var(--offsety);\r\n          right: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 2) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 2) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(3) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          bottom: var(--offsety);\r\n          right: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 3) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 3) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(4) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          bottom: var(--offset2);\r\n          right: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 4) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 4) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(5) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          left: var(--offsetx);\r\n          bottom: var(--offsety);\r\n          transition: all var(--animateTime) calc(var(--time) * 5) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 5) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(6) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          top: var(--offsety);\r\n          left: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 6) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 6) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(7) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          top: calc(50% - var(--hb));\r\n          left: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 7) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 7) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","import { render } from \"./DomClockItem.vue?vue&type=template&id=f8f17254&scoped=true\"\nimport script from \"./DomClockItem.vue?vue&type=script&lang=js\"\nexport * from \"./DomClockItem.vue?vue&type=script&lang=js\"\n\nimport \"./DomClockItem.vue?vue&type=style&index=0&id=f8f17254&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f8f17254\"\n\nexport default script","import { render } from \"./DomClock.vue?vue&type=template&id=591f40bb&scoped=true\"\nimport script from \"./DomClock.vue?vue&type=script&lang=js\"\nexport * from \"./DomClock.vue?vue&type=script&lang=js\"\n\nimport \"./DomClock.vue?vue&type=style&index=0&id=591f40bb&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-591f40bb\"\n\nexport default script","<template>\r\n  <div class=\"game-ui\" :class=\"{active: gameList.ended}\">\r\n    <div class=\"progress\">\r\n      <span :style=\"progressStyle\"></span>\r\n    </div>\r\n    <ul>\r\n      <li v-for=\"(formConfig, index) in formConfigs\">\r\n        <div>{{formConfig.label}}</div>\r\n        <div>{{gameList[formConfig.key]}}</div>\r\n      </li>\r\n\r\n      <!--<li>-->\r\n        <!--<div></div>-->\r\n        <!--<div v-if=\"gameList.total\">{{gameList.totalScore / (gameList.total - gameList.missCount)}}</div>-->\r\n        <!--<div v-if=\"!gameList.total\">&#45;&#45;</div>-->\r\n      <!--</li>-->\r\n      <li>\r\n        <div>realTimeData</div>\r\n        <div>{{musicData.realTimeData.shockNum}}</div>\r\n      </li>\r\n      <li>\r\n        <div>originData</div>\r\n        <div>{{musicData.originData.shockNum}}</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'GameUI',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv'\r\n    ],\r\n    data() {\r\n      return {\r\n        formConfigs: [\r\n          {\r\n            key: 'total',\r\n            label: '',\r\n          },\r\n          {\r\n            key: 'totalScore',\r\n            label: '',\r\n          },\r\n          {\r\n            key: 'maxCombo',\r\n            label: '',\r\n          },\r\n          {\r\n            key: 'missCount',\r\n            label: 'miss',\r\n          },\r\n          {\r\n            key: 'uselessCount',\r\n            label: '',\r\n          },\r\n\r\n        ]\r\n      }\r\n    },\r\n    computed: {\r\n      progressStyle() {\r\n        const {currentTime, durationTime} = this.gameList;\r\n        return {\r\n          transform: `scale(${durationTime ? currentTime / durationTime : 0}, 1)`\r\n        }\r\n      }\r\n    },\r\n    watch: {},\r\n    methods: {},\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .game-ui {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2999;\r\n\r\n    .progress {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      height: 6px;\r\n      width: 100%;\r\n      text-align: left;\r\n\r\n      span {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: linear-gradient(90deg, hsla(0, 50%, 50%, 1), hsla(-30, 50%, 50%, 1), hsla(0, 50%, 50%, 1));\r\n      }\r\n    }\r\n\r\n    ul {\r\n      overflow: hidden;\r\n      border-radius: 10%;\r\n      opacity: 0.4;\r\n      position: absolute;\r\n      width: 90%;\r\n      top: 50%;\r\n      left: 50%;\r\n      padding: 5vh 0 10vh 0;\r\n      transform: translate(-50%, -50%);\r\n      transition: all 0.6s ease-in-out;\r\n      border: 2px solid hsla(15, 50%, 50%, 0);\r\n      white-space: nowrap;\r\n\r\n      &::before {\r\n        content: '';\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        background: linear-gradient(hsla(0, 50%, 50%, 0.6), hsla(10, 50%, 50%, 0.2) 10%, hsla(20, 50%, 50%, 0.2) 90%, hsla(30, 50%, 50%, 0.6));\r\n        opacity: 0;\r\n        transition: all 0.6s ease-in-out;\r\n      }\r\n\r\n      li {\r\n        position: relative;\r\n        padding: 1vh 0;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        div {\r\n          padding: 0 1vw;\r\n\r\n          &:first-of-type {\r\n            flex: 1 1 0;\r\n            text-align: right;\r\n          }\r\n\r\n          &:last-of-type {\r\n            font-size: 32px;\r\n            color: #fff;\r\n            font-weight: bold;\r\n            flex: 5 5 0;\r\n            text-align: left;\r\n            transition: all 0.6s ease-in-out;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.active {\r\n      ul {\r\n        padding: 5vh 5vw 10vh 5vw;\r\n        opacity: 1;\r\n        width: 60%;\r\n        border: 2px solid hsla(15, 50%, 50%, 1);\r\n\r\n        &::before {\r\n          opacity: 1;\r\n        }\r\n\r\n        li {\r\n          div {\r\n            &:last-of-type {\r\n              flex: 1 1 0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./GameUI.vue?vue&type=template&id=17b5a148&scoped=true\"\nimport script from \"./GameUI.vue?vue&type=script&lang=js\"\nexport * from \"./GameUI.vue?vue&type=script&lang=js\"\n\nimport \"./GameUI.vue?vue&type=style&index=0&id=17b5a148&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-17b5a148\"\n\nexport default script","import { render } from \"./Index.vue?vue&type=template&id=730315b5&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=730315b5&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-730315b5\"\n\nexport default script","import { createRouter, createWebHashHistory, RouteRecordRaw } from 'vue-router'\nimport Home from '../views/Index.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'Index',\n    component: Home\n  }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\n\nexport default router\n","function IsPhone() {\r\n  return /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)\r\n}\r\n// @ts-ignore;\r\nwindow.isPhone = IsPhone();\r\nimport './assets/style/index.less'\r\nimport { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport './registerServiceWorker'\r\nimport router from './router'\r\n\r\ncreateApp(App).use(router).mount('#app')\r\n","import {GetType} from \"@/tools/GetType\";\r\n\r\nexport class DomUtil {\r\n  static getBothAncestor(sDom: Node, eDom: Node) {\r\n    let sDom_: undefined | Node = sDom;\r\n    let eDom_: undefined | Node = eDom;\r\n    while (sDom_) {\r\n      if (DomUtil.hasChild(sDom_, eDom)) {\r\n        return sDom_;\r\n      }\r\n      // @ts-ignore;\r\n      sDom_ = sDom_.parentNode;\r\n    }\r\n    while (eDom_) {\r\n      if (DomUtil.hasChild(eDom_, sDom)) {\r\n        return eDom_;\r\n      }\r\n      // @ts-ignore;\r\n      eDom_ = eDom_.parentNode;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param node\r\n   */\r\n  static isEmptyTag(node: Node): boolean {\r\n    if (node.nodeType === 1) {\r\n      if (node.childNodes.length === 0) return true;\r\n      return [...node.childNodes].every(i => DomUtil.isEmptyTag(i))\r\n    } else if (node.nodeType === 3) {\r\n      return !node.textContent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isSameTag(a: Node, b: Node): boolean {\r\n    if (!(a && b)) return false;\r\n    if (a.nodeType === 3 && b.nodeType === 3) {\r\n      return true;\r\n    }\r\n    if (a.nodeType === 1 && b.nodeType === 1) {\r\n      // @ts-ignore;\r\n      return DomUtil.isTag(a, b.tagName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * parentNode  child\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static hasChild(parentNode: Node, child: Node): boolean {\r\n    const list = [...parentNode.childNodes];\r\n    // @ts-ignore;\r\n    return list.includes(child) || list.some(item => DomUtil.hasChild(item, child))\r\n  }\r\n\r\n  /**\r\n   * child  parentNode\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static isChildOf(parentNode: ParentNode, child: Node | null) {\r\n    while (child) {\r\n      if (child.parentNode === parentNode) return true;\r\n      child = child.parentNode\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isAncestor(target: Node, dom: Node | null) {\r\n    while (dom && dom.parentNode) {\r\n      if (dom.parentNode === target) return true;\r\n      // @ts-ignore;\r\n      dom = dom.parentNode;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *   \r\n   * @param node\r\n   * @param targetTagNames\r\n   * @param endAt  \r\n   */\r\n  static findNearestTargetParentNodeByTag(node: Node | undefined | null, targetTagNames: string[] = [], endAt?: Node) {\r\n    targetTagNames = targetTagNames.map(i => i.toLowerCase())\r\n    while (node && !(endAt && node !== endAt)) {\r\n      // @ts-ignore;\r\n      const tagName = (node.tagName || '').toLowerCase();\r\n      if (targetTagNames.includes(tagName)) {\r\n        return node;\r\n      }\r\n      node = node.parentNode\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   *  nodeName  \r\n   * @param node\r\n   * @param tag\r\n   */\r\n  static changeTag(node: Node, tag: string) {\r\n    const newNode = DomUtil.node(tag);\r\n    [...node.childNodes].forEach(item => {\r\n      newNode.appendChild(item)\r\n    });\r\n    DomUtil.replace(node, newNode);\r\n    return newNode;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param dom\r\n   */\r\n  static remove(dom: Node) {\r\n    dom.parentNode && dom.parentNode.removeChild(dom);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param dom\r\n   * @param tag\r\n   */\r\n  static isTag(dom: Node, tag: string = ''): boolean {\r\n    return dom.nodeName.toLowerCase() === tag.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param dom\r\n   * @param targetType\r\n   */\r\n  static isParentNodeTheTargetType(dom: Node, targetType: string = '') {\r\n    const parentNode = dom.parentNode;\r\n    // @ts-ignore;\r\n    return parentNode && parentNode.tagName.toLowerCase() === targetType.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   *  tagName \r\n   * @param tagName\r\n   * @param innerHTML\r\n   */\r\n  static node(tagName: string, innerHTML?: string) {\r\n    const node = document.createElement(tagName);\r\n    innerHTML && (node.innerHTML = innerHTML);\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param node\r\n   * @param className\r\n   */\r\n  static class(node: Node, className: string) {\r\n    if (node) {\r\n      // @ts-ignore;\r\n      node.classList.contains(className) || node.classList.add(className);\r\n    }\r\n  }\r\n\r\n  static removeClass(node: Node, className: string) {\r\n    if (node) {\r\n      // @ts-ignore;\r\n      node.classList.contains(className) || node.classList.remove(className)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param text\r\n   */\r\n  static text(text: string) {\r\n    return document.createTextNode(text);\r\n  }\r\n\r\n  static list(list: { [index: string]: any }[], template: string) {\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static insertBefore(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    if (parentNode) {\r\n      parentNode.insertBefore(newDom, oldDom)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static append(parentNode: Node, child: Node): void;\r\n  static append(parentNode: Node, childList: Node[]): void;\r\n  static append(parentNode: Node, child: Node | Node[]) {\r\n    if (GetType.isArray(child)) {\r\n      // @ts-ignore;\r\n      child.forEach((i: Node) => {\r\n        parentNode.appendChild(i);\r\n      })\r\n    } else {\r\n      // @ts-ignore;\r\n      parentNode.appendChild(child);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static prepend(parentNode: Node, child: Node) {\r\n    const prev = parentNode.childNodes[0];\r\n    if (prev) {\r\n      DomUtil.insertBefore(prev, child)\r\n    } else {\r\n      parentNode.appendChild(child);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static insertAfter(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    const nextSibling = oldDom.nextSibling;\r\n\r\n    if (!parentNode) return;\r\n    if (nextSibling) {\r\n      parentNode.insertBefore(newDom, nextSibling)\r\n    } else {\r\n      parentNode.appendChild(newDom);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static replace(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    if (parentNode) {\r\n      parentNode.insertBefore(newDom, oldDom);\r\n      parentNode.removeChild(oldDom);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   * @param node\r\n   */\r\n  static isTagNode(node: Node) {\r\n    return node.nodeType === 1\r\n  }\r\n\r\n  /**\r\n   *  tagName ,   <p id=\"1\"></p> => <p></p>\r\n   * @param node\r\n   */\r\n  static copyEmptyTagNode(node: Node): Node {\r\n    if (!DomUtil.isTagNode(node)) return DomUtil.text('');\r\n    // @ts-ignore;\r\n    return DomUtil.node(node.tagName);\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param dom\r\n   */\r\n  static findFirstTextNode(dom: Node | undefined) {\r\n    while (dom && dom.nodeType === 1) {\r\n      if (dom.nodeType === 1) {\r\n        return dom\r\n      }\r\n      dom = dom.childNodes[0]\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   *  \r\n   * @param dom\r\n   */\r\n  static findLastTextNode(dom: Node | undefined) {\r\n    while (dom && dom.nodeType === 1) {\r\n      if (dom.nodeType === 1) {\r\n        return dom\r\n      }\r\n      dom = dom.childNodes[dom.childNodes.length - 1]\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n\r\n  /**\r\n   *  \r\n   * @param textNode\r\n   * @param start\r\n   * @param end\r\n   */\r\n  static splitTextNode(textNode: Node, start: number | undefined, end: number | undefined) {\r\n    const textContent = textNode.textContent || '';\r\n    const start_ = textContent.slice(0, start || 0);\r\n    const mid_ = textContent.slice(start || 0, end || undefined);\r\n    const end_ = textContent.slice(end || textContent.length);\r\n    const sDom = start_ && DomUtil.text(start_);\r\n    const eDom = end_ && DomUtil.text(end_);\r\n\r\n    sDom && DomUtil.insertBefore(textNode, sDom);\r\n    textNode.nodeValue = mid_;\r\n    eDom && DomUtil.insertAfter(textNode, eDom);\r\n    return [sDom, textNode, eDom];\r\n  }\r\n}\r\n\r\n","export class GetType {\r\n  static getType(item: any) {\r\n    return Object.prototype.toString.call(item).slice(8, -1);\r\n  }\r\n\r\n  static isNumber(item: any) {\r\n    return GetType.getType(item) === \"Number\"\r\n  };\r\n\r\n  static isString(item: any) {\r\n    return GetType.getType(item) === \"String\"\r\n  };\r\n\r\n  static isArray(item: any) {\r\n    return GetType.getType(item) === \"Array\"\r\n  };\r\n\r\n  static isObject(item: any) {\r\n    return GetType.getType(item) === \"Object\"\r\n  };\r\n\r\n  static isBoolean(item: any) {\r\n    return GetType.getType(item) === \"Boolean\"\r\n  };\r\n\r\n  static isNull(item: any) {\r\n    return GetType.getType(item) === \"Null\"\r\n  };\r\n\r\n  static isUndefined(item: any) {\r\n    return GetType.getType(item) === \"Undefined\"\r\n  };\r\n\r\n  static isFunction(item: any) {\r\n    return GetType.getType(item) === \"Function\"\r\n  };\r\n\r\n  static isDate(item: any) {\r\n    return GetType.getType(item) === \"Date\"\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {GetType} from \"./GetType\";\r\nimport {Sound} from \"./Sound\";\r\n// @ts-ignore;\r\nimport {Random} from './random';\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\n\r\nconst keyMap: {[index: string]: string} = {\r\n  \"0\": \"96\", \"1\": \"97\", \"2\": \"98\", \"3\": \"99\", \"4\": \"100\", \"5\": \"101\", \"6\": \"102\", \"7\": \"103\", \"8\": \"104\", \"9\": \"105\",\r\n\r\n  \"a\": \"65\", \"b\": \"66\", \"c\": \"67\", \"d\": \"68\", \"e\": \"69\", \"f\": \"70\", \"g\": \"71\",\r\n  \"h\": \"72\", \"i\": \"73\", \"j\": \"74\", \"k\": \"75\", \"l\": \"76\", \"m\": \"77\", \"n\": \"78\",\r\n  \"o\": \"79\", \"p\": \"80\", \"q\": \"81\",\r\n  \"r\": \"82\", \"s\": \"83\", \"t\": \"84\",\r\n  \"u\": \"85\", \"v\": \"86\", \"w\": \"87\",\r\n  \"x\": \"88\", \"y\": \"89\", \"z\": \"90\",\r\n\r\n  \"f1\": \"112\", \"f2\": \"113\", \"f3\": \"114\", \"f4\": \"115\",\r\n  \"f5\": \"116\", \"f6\": \"117\", \"f7\": \"118\", \"f8\": \"119\",\r\n  \"f9\": \"120\", \"f10\": \"121\", \"f11\": \"122\", \"f12\": \"123\",\r\n\r\n  \"+\": \"107\", \"-\": \"109\", \"*\": \"106\", \"/\": \"111\", \".\": \"110\",\r\n\r\n  \"backspace\": \"8\", \"tab\": \"9\",\r\n  \"clear\": \"12\", \"enter\": \"13\",\r\n  \"esc\": \"27\", \"spacebar\": \"32\",\r\n  \"left arrow\": \"37\", \"up arrow\": \"38\", \"right arrow\": \"39\", \"down arrow\": \"40\",\r\n  \"left\": \"37\", \"up\": \"38\", \"right\": \"39\", \"down\": \"40\",\r\n\r\n  \";:\": \"186\", \"<\": \"188\", \"=+\": \"187\", \"-_\": \"189\", \">\": \"190\", \"/?\": \"191\", \"`~\": \"192\",\r\n\r\n  \"page up\": \"33\", \"page down\": \"34\",\r\n  \"end\": \"35\", \"home\": \"36\",\r\n  \"insert\": \"45\", \"delete\": \"46\",\r\n\r\n  \"cape lock\": \"20\",\r\n  \"num lock\": \"144\",\r\n\r\n  \"[{\": \"219\", \"\\\\|\": \"220\",\r\n  \"]}\": \"221\", \"'\\\"\": \"222\",\r\n\r\n  \"shift\": \"16\", \"control\": \"17\", \"alt\": \"18\",\r\n\r\n  \"\": \"170\", \"\": \"171\", \"\": \"172\",\r\n  \"\": \"174\", \"\": \"175\", \"\": \"173\", \"\": \"179\",\r\n  \"\": \"180\",\r\n};\r\ntype TKeyMap = keyof typeof keyMap;\r\n\r\n\r\nconst keyMap_: {[index: string]: string} = {};\r\n\r\nObject.keys(keyMap).forEach((key: string) => {\r\n  keyMap_[keyMap[key]] = key\r\n});\r\nclass ShortCutAbstract {\r\n  common(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  alt(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl_alt(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  alt_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n  ctrl_alt_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n}\r\n\r\nfunction makeShortCutInitFn(key: string) {\r\n  // @ts-ignore;\r\n  ShortCut.prototype[key] = function (keyNum: TKeyMap|number, cb: Function) {\r\n    GetType.isNumber(keyNum) || (keyNum = keyMap[keyNum] || keyNum);\r\n    // @ts-ignore;\r\n    this.maps[key] || (this.maps[key] = {});\r\n    // @ts-ignore;\r\n    this.maps[key][keyNum] = (ev: Event) => {\r\n      Sound.play('confirm');\r\n      const result = cb();\r\n      if (!result) {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  // @ts-ignore;\r\n  ShortCut.prototype[`${key}Desc`] = function (keyNum: TKeyMap|number, desc: any) {\r\n    GetType.isNumber(keyNum) || (keyNum = keyMap[keyNum] || keyNum);\r\n    // @ts-ignore;\r\n    this.describeMaps[key] || (this.describeMaps[key] = {});\r\n    // @ts-ignore;\r\n    this.describeMaps[key][keyNum] = desc;\r\n  }\r\n}\r\nconst requestAnimationFrame = window.requestAnimationFrame ||\r\n  // @ts-ignore;\r\n  window.webkitrequestAnimationFrame ||\r\n  // @ts-ignore;\r\n  window.mozrequestAnimationFrame;//\r\nconst wrap = DomUtil.node('div');\r\nwrap.className = 'short-cut-view';\r\nDomUtil.append(document.body, wrap);\r\n\r\nconst triggered: string[][] = [];\r\nexport class ShortCut extends ShortCutAbstract{\r\n  static toast(message: string[]){\r\n\r\n    const node = DomUtil.node('div');\r\n    message.forEach(key => {\r\n      DomUtil.append(node, DomUtil.node('span', key.toUpperCase()))\r\n    });\r\n\r\n    DomUtil.prepend(wrap, node);\r\n    requestAnimationFrame(() => {\r\n      requestAnimationFrame(() => {\r\n        DomUtil.class(node, 'active');\r\n        setTimeout(() => {\r\n          DomUtil.class(node, 'hide');\r\n          setTimeout(() => {\r\n            requestAnimationFrame(() => DomUtil.remove(node));\r\n          }, 2000);\r\n        }, 1000);\r\n      })\r\n    });\r\n  }\r\n  hasInited: boolean = false;\r\n  maps = {};\r\n\r\n  describeMaps = {};\r\n\r\n  static triggeredCacheLength = 20;\r\n  static triggered : string[][] = triggered;\r\n  static cacheTriggered(keys: string[]){\r\n    const {triggered, triggeredCacheLength} = ShortCut;\r\n    const prev = triggered[0];\r\n    if (prev && keys.every(((val, index) => prev[index] === val))) return;\r\n    triggered.unshift(keys);\r\n\r\n    ShortCut.toast(keys)\r\n    if (triggered.length > triggeredCacheLength) {\r\n      triggered.pop();\r\n    }\r\n  }\r\n\r\n\r\n  init(dom?: Node, fns: any = {}, describeMaps: any = {}) {\r\n    const slef = this;\r\n    const $body = dom || document.querySelector(\"body\");\r\n    // @ts-ignore;\r\n    this.hasInited || $body.addEventListener('keydown', (ev: Event) => {\r\n      let keys = [];\r\n\r\n      let key = '';\r\n      // @ts-ignore;\r\n      if (ev.ctrlKey) {\r\n        keys.push('ctrl');\r\n      }\r\n      // @ts-ignore;\r\n      if (ev.altKey) {\r\n        keys.push('alt');\r\n      }\r\n      // @ts-ignore;\r\n      if (ev.shiftKey) {\r\n        keys.push('shift');\r\n      }\r\n      key = keys.join('') || '';\r\n      // @ts-ignore;\r\n      keys.push(keyMap_[ev.which]);\r\n\r\n      // @ts-ignore;\r\n      const describeMaps_ = this.describeMaps[key || 'common'] || {};\r\n      // @ts-ignore;\r\n      keys.push(describeMaps_[ev.which] || '');\r\n\r\n      // @ts-ignore;\r\n      const cmd = `slef.maps.${key || 'common'}[${ev.which}](ev)`;\r\n      try {\r\n        eval(cmd);\r\n        ShortCut.cacheTriggered(keys);\r\n      } catch (e) {\r\n        // console.log(e)\r\n      }\r\n\r\n    });\r\n    if (fns) {\r\n      GetType.isObject(fns) && Object.keys(fns).forEach((key: string) => {\r\n        // @ts-ignore;\r\n        fns[key] && Object.keys(fns[key]).forEach(item => this[key](item, fns[key][item]));\r\n      });\r\n    }\r\n    if (describeMaps) {\r\n      GetType.isObject(describeMaps) && Object.keys(describeMaps).forEach((key: string) => {\r\n        // @ts-ignore;\r\n        describeMaps[key] && Object.keys(describeMaps[key]).forEach(item => this[`${key}Desc`](item, describeMaps[key][item]));\r\n      });\r\n    }\r\n    this.hasInited = true;\r\n  };\r\n}\r\n\r\n['common', 'ctrl', 'alt', 'shift', 'ctrl_alt', 'ctrl_shift', 'alt_shift', 'ctrl_alt_shift',].forEach(makeShortCutInitFn);\r\n\r\n\r\n\r\n\r\nexport const shortCut = new ShortCut();\r\nshortCut.init();\r\n","const soundMap = {\r\n  change: \"./sound/change.mp3\",\r\n  confirm: \"./sound/confirm.mp3\",\r\n  done: \"./sound/done.mp3\",\r\n  warning: \"./sound/warning.mp3\",\r\n};\r\nclass CacheList {\r\n  list: Element[];\r\n  constructor(){\r\n    this.list = [];\r\n  }\r\n  getAudio(){\r\n    let dom = this.list.shift();\r\n    const playEnd = () => {\r\n      dom && this.list.push(dom);\r\n    };\r\n    if (!dom) {\r\n      dom = document.createElement('audio');\r\n      // @ts-ignore;\r\n      dom.volume = .2;\r\n      // @ts-ignore;\r\n      dom.autoplay = 'autoplay';\r\n      const body = document.querySelector(\"body\");\r\n      body && body.appendChild(dom);\r\n\r\n      dom.addEventListener('ended', playEnd);\r\n      dom.addEventListener('error', playEnd);\r\n    }\r\n\r\n    return dom;\r\n  }\r\n}\r\n\r\nconst cacheList = new CacheList();\r\ntype TSoundType = keyof typeof soundMap;\r\nexport class Sound {\r\n  static play(url: TSoundType){\r\n    const dom = cacheList.getAudio();\r\n    const volumeMap = {\r\n      change: 0.01,\r\n      confirm: 0.01,\r\n      done: 0.2,\r\n      warning: 0.01,\r\n    }\r\n    // @ts-ignore;\r\n    dom.volume = volumeMap[url] || 0.1;\r\n    // @ts-ignore;\r\n    dom.src = soundMap[url] || url;\r\n  }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\t__webpack_require__.O();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdy_player\"] = self[\"webpackChunkdy_player\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1986); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}