{"version":3,"sources":["webpack://dy-player/./src/App.vue","webpack://dy-player/./src/App.vue?d5d2","webpack://dy-player/./src/registerServiceWorker.ts","webpack://dy-player/./src/views/Index.vue","webpack://dy-player/./src/music/Music.ts","webpack://dy-player/./src/utils.ts","webpack://dy-player/./src/units/appendStyle.ts","webpack://dy-player/./src/picture/Picture.ts","webpack://dy-player/./src/music/MusicConfig.ts","webpack://dy-player/./src/components/canvasConfig.js","webpack://dy-player/./src/music/MusicVisualizer.ts","webpack://dy-player/./src/components/NavBar.vue","webpack://dy-player/./src/components/NavBar.vue?98f1","webpack://dy-player/./src/components/MusicSearchBox.vue","webpack://dy-player/./proxy/httpConf.js","webpack://dy-player/./proxy/http.js","webpack://dy-player/./src/units/ListBox.ts","webpack://dy-player/./src/components/ListBoxView.vue","webpack://dy-player/./src/components/ListBoxView.vue?17a2","webpack://dy-player/./src/components/MusicSearchBox.vue?2de1","webpack://dy-player/./src/components/MusicLocalBox.vue","webpack://dy-player/./src/components/MusicLocalBox.vue?dc41","webpack://dy-player/./src/components/ModifyBox.vue","webpack://dy-player/./src/components/ModifyBox.vue?0929","webpack://dy-player/./src/components/CanvasView.vue","webpack://dy-player/./src/components/CanvasView.vue?869e","webpack://dy-player/./src/components/CanvasPic.vue","webpack://dy-player/./src/tools/random.js","webpack://dy-player/./src/tools/PS.ts","webpack://dy-player/./src/components/CanvasPic.vue?db94","webpack://dy-player/./src/components/CanvasTitle.vue","webpack://dy-player/./src/components/CanvasTitle.vue?521e","webpack://dy-player/./src/components/CanvasText.vue","webpack://dy-player/./src/components/CanvasText.vue?35e3","webpack://dy-player/./src/components/VideoView.vue","webpack://dy-player/./src/components/VideoView.vue?534f","webpack://dy-player/./src/components/DomClock.vue","webpack://dy-player/./src/tools/Time.ts","webpack://dy-player/./src/components/DomClockItem.vue","webpack://dy-player/./src/components/DomClockItem.vue?0560","webpack://dy-player/./src/components/DomClock.vue?cd3d","webpack://dy-player/./src/components/GameUI.vue","webpack://dy-player/./src/components/GameUI.vue?4106","webpack://dy-player/./src/views/Index.vue?2afe","webpack://dy-player/./src/router/index.ts","webpack://dy-player/./src/main.ts","webpack://dy-player/./src/tools/DomUtil.ts","webpack://dy-player/./src/tools/GetType.ts","webpack://dy-player/./src/tools/ShortCut.ts","webpack://dy-player/./src/tools/Sound.ts","webpack://dy-player/webpack/bootstrap","webpack://dy-player/webpack/runtime/chunk loaded","webpack://dy-player/webpack/runtime/compat get default export","webpack://dy-player/webpack/runtime/define property getters","webpack://dy-player/webpack/runtime/global","webpack://dy-player/webpack/runtime/hasOwnProperty shorthand","webpack://dy-player/webpack/runtime/make namespace object","webpack://dy-player/webpack/runtime/jsonp chunk loading","webpack://dy-player/webpack/startup"],"names":["id","script","render","ready","console","log","registered","cached","updatefound","updated","offline","error","class","commonOptions","CanvasPic","CanvasText","CanvasView","item","constructor","name","modifyManager","list","index","config","VideoView","VideoView1","DomClock","EventTarget_","type","callback","this","listeners","push","stack","i","l","length","splice","removeEventListener","event","target","call","MusicDataFlags","RhythmPoint","vol","isRhythmPoint","EventTar","fnMap","ev","fns","forEach","MVData","data","soundTrackArr","prevAvrLevel","prevAddSpeed","total","reduce","a","b","avrLevel","addSpeed","gameTrack","RhythmPointVolumeFloatRange","rhythmPoint","shockNum","Event","dispatchEvent","soundTrackArrMaxLen","shift","MusicData","realTimeData","originData","GameScore","score","gameScore","DomUtil","classList","add","innerHTML","toString","document","body","prevNode","GameCombo","combo","undefined","GameNode","gameList","isDebug","gameInner","calculateScore","Date","now","remove","time","dom","className","style","hueRange","deg","RhythmPointCenterPointOffset","innerDom","addEventListener","endFunction","currentTime","Math","abs","delay","setCurrentScore","Sound","RhythmPointMissTipSound","GameList","mv","delayTime","value","ended","currentScore","totalScore","maxCombo","missCount","uselessCount","isStop","isMiss","setCombo","buffer","find","gameNode","indexOf","eventTarget","GameScene","gameData","musicData","filter","x","per","map","join","destroy","Color","round","rate","r","g","min","dCompose","MakeThrottle","prevTime","propertyKey","descriptor","fn","apply","arguments","appendStyle","compName","styleStr","forceUpdate","cacheMap","createElement","replace","head","appendChild","canvas","pciCanvas","Picture","musicConfig","compressRate","ctx","getContext","cacheList","cacheImg","img","onload","setImage","src","width","height","drawImage","imageData","getImageData","result","color","aviOfArr","noNeedChangeCurrentImgAviColor","currentImgAviColor","url","makeEl","test","offsetWidth","offsetHeight","pciCtx","y","w","h","sumOfArr","arr","sum","num","MusicConfig","options","_x","_y","_main","main","images","imageGroup","pictureCanvasCtx","setPictureCanvasCtx","currentImgSrc","changePic","mouseMoveConf","enent","touches","clientX","clientY","conf","Object","keys","key","lrc","reverse","unshift","pop","shockAtOnce","picDom","load","shock","volume","Track","defaultValue","current","playing","commonConfigs","valueType","max","desc","defaultVal","defineProperty","get","len","play","setIndex","thisItem","val","CanvasTrack","rest","VideoTrack","setConfig","CommonOptionsTrack","GameTrack","BalanceTrack","biquadFilterFrequency","ModifyManager","updateCommonOptions","setList","TrackList","init","trackList","balanceTrack","savePresets","replacer","enc","dec","prev","next","delete","copy","constructorList","parent","loadPresets","constructorName","hasDto","some","localStorage","setItem","JSON","stringify","presets","parse","getItem","hasDot","e","includes","createPanner","MusicVisualizer","ac","panner","panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","positionX","positionY","positionZ","setOrientation","setPosition","initListener","listener","forwardX","forwardY","forwardZ","upX","upY","upZ","createBiquadFilters","input","output","biquadFilters","frequency","createBiquadFilter","biquadFilter","connect","createAudioSource","context","$audio","source","createMediaElementSource","crossOrigin","autoplay","onended","obj","analyser","createAnalyser","analyserBefore","gain","createGain","size","fftSize","createDelay","destination","xhr","XMLHttpRequest","draw","changeVolume","visualize","fun","stopType","abort","open","responseType","response","send","arrayBuffer","decodeAudioData","err","path","n","count","stop","resetLatestPlayTime","ArrayBuffer","decode","bufferSource","createBufferSource","start","latestPlayTime","window","isPhone","percent","Uint8Array","frequencyBinCount","requestAnimationFrame","webkitrequestAnimationFrame","mozrequestAnimationFrame","hidden","getByteFrequencyData","setVolume","AudioContext","webkitAudioContext","resumeAudio","state","resume","active","navList","provide","components","mixins","props","inject","searchText","computed","watch","methods","mounted","makeAjax","cb","then","fullUrl","location","protocol","hostname","fetch","encodeURI","xhrFields","withCredentials","credentials","res","json","catch","special","ajax","camel","str","split","toUpperCase","slice","httpConf","file","route","ListBox","shallPlay","for","isFocus","ref","placeholder","focus","blur","tabs","tabItem","getImgUrl","song","_index","focusKey","$refs","isFocus_","setTimeout","coverImgUrl","al","picUrl","album","beforeDestory","$shortCut","ShortCut","common","up","s","down","q","107","c","4","6","left","right","d","8","prevItem","2","nextItem","esc","alt","ctrl","enter","search","backspace","ListBoxView","lrcs","sheet","message","sheetList","playlist","tracks","timer","account","changeBG_When_LRC_Changed","setLrc","immediate","handler","parseInt","curIndex","getUserSongList","getLrc","songId","lrcList","lyric","info","match","login","user","phone","password","getMySheets","getSongUrl","durationTime","duration","dt","startSong","paused","pause","uid","recommend","like","playlistTracks","op","pid","keywords","songs","clearInterval","endSong","setInterval","nextTime","p","songList","deep","renderCanvas","canvasConfig","$canvasHidded","$el","dataSize","viewCtx","calculateColors","dataBefore","data1","copyData","dataBefore_","showDataBefore","data2","renderData","noZero","baseSize","baseSizeType","midPosition","midPositionX","midPositionY","mainRadius","avrLevelMainRadiusModify","floatRange","avrLevelFloatRangeModify","fillStyle","disable","clearPrevView","fillRect","clearRect","strokeStyle","mainRadiusOpacity","lineWidth","mainRadiusLineWidth","beginPath","direction","arc","PI","closePath","stroke","perDeg","stepModify","halfPerDeg","rotate","lineLineWidth","dataModify","offset","dataOffsetModify","minHeight","minHeightModify","nextVal","lin1","point1","sin","cos","point2","lr","createLinearGradient","addColorStop","moveTo","lineTo","edge","line","nextEdge","bezierCurveTo","dot","position","fill","rect","renderVal","threshold","dots","renderType","$canvas","OffscreenCanvas","Random","max_","min_","sign_","exec","GetType","unique","int","boolean","random","sign","aisleMap","PS","aisleType","cutType","ret","cur","cutFnMap","xOffset","yOffset","zoom","aisleData","getAisle","1","3","thisCount","imgCtx","shallMalfunction","commonOptions_","CanvasPicMalfunction","putImageData","querySelector","des","index_","ps","dirR","off","aisleOffset","$canvasImage","textStyle","musicDataFlags","opa","scale","CanvasTextMalfunction","font","measureText","floor","textAlign","textBaseline","strokeText","pattern","createPattern","fillText","W","_w","_h","__y","muted","handelEnded","shallChange","srcs","changeVideo","isChangeDot","beforeDestroy","d3wrapStyle","list_","Time","stamp","getFullYear","to00","getMonth","getDate","getHours","getMinutes","getSeconds","to000","getMilliseconds","DomClockItem","maxDeg","transform","dataFlag","format","progressStyle","formConfigs","formConfig","label","globalData","gameWrap","pow","createGameNode","trick","NavBar","MusicSearchBox","MusicLocalBox","ModifyBox","GameUI","CanvasTitle","shockFlag","spacebar","shootGameNode","handelMouseMove","setBuffer","RhythmPointRemoveFloatRange","update","getPure","r2","g2","b2","routes","component","router","history","IsPhone","navigator","userAgent","App","use","mount","sDom","eDom","sDom_","eDom_","hasChild","parentNode","node","nodeType","childNodes","every","isEmptyTag","textContent","isTag","tagName","child","targetTagNames","endAt","toLowerCase","tag","newNode","removeChild","nodeName","targetType","contains","createTextNode","template","oldDom","newDom","insertBefore","nextSibling","isTagNode","text","textNode","end","start_","mid_","end_","nodeValue","insertAfter","prototype","getType","keyMap","keyMap_","ShortCutAbstract","keyNum","makeShortCutInitFn","maps","stopPropagation","preventDefault","describeMaps","wrap","triggered","slef","$body","hasInited","ctrlKey","altKey","shiftKey","which","describeMaps_","cmd","eval","cacheTriggered","triggeredCacheLength","toast","shortCut","soundMap","change","confirm","done","warning","CacheList","playEnd","getAudio","volumeMap","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","getter","__esModule","definition","o","enumerable","globalThis","Function","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","143","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"mappings":"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","file":"js/app.4c284130.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<style lang=\"less\">\n\n  * {\n    border: 0;\n    padding: 0;\n    margin: 0;\n    outline: 0;\n    box-sizing: border-box;\n  }\n\n  *::-webkit-scrollbar {\n    width: 0;\n  }\n\n  ul, li {\n    list-style: none;\n  }\n\n  html, body {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n    position: relative;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n  }\n\n  b {\n    display: block;\n    position: absolute;\n    background-size: 1920px 1080px;\n    border-radius: 2px;\n    z-index: 2;\n    color: pink;\n    text-align: center;\n  }\n\n  img {\n    width: 100%;\n    top: 0;\n    left: 0;\n    position: absolute;\n    opacity: 0;\n  }\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=04d92844\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=04d92844&lang=less\"\nscript.render = render\n\nexport default script","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","<style lang=\"less\" scoped>\r\n</style>\r\n<template>\r\n  <div class=\"container\">\r\n    <NavBar></NavBar>\r\n    <div class=\"box-wrap\">\r\n      <MusicSearchBox></MusicSearchBox>\r\n      <MusicLocalBox></MusicLocalBox>\r\n      <ModifyBox></ModifyBox>\r\n    </div>\r\n    <div class=\"canvas-view-wrap\">\r\n      <GameUI></GameUI>\r\n      <CanvasPic v-if=\"commonOptions.CanvasPic\"></CanvasPic>\r\n      <CanvasText v-if=\"commonOptions.CanvasText\"></CanvasText>\r\n      <CanvasView\r\n        v-for=\"(item, index) in modifyManager.list[0].list\"\r\n        :config=\"item\"\r\n        v-if=\"commonOptions.CanvasView && item && item.constructor.name === 'CanvasTrack'\"\r\n      ></CanvasView>\r\n    </div>\r\n    <VideoView :index=\"0\" v-if=\"commonOptions.VideoView\"></VideoView>\r\n    <VideoView :index=\"1\" v-if=\"commonOptions.VideoView1\"></VideoView>\r\n    <DomClock v-if=\"commonOptions.DomClock\"></DomClock>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {onMounted} from 'vue';\r\n  import {shortCut} from \"../tools/ShortCut\";\r\n  import {Color, GameList, GameScene, MusicData, MusicDataFlags} from \"../music/Music\";\r\n  import {MusicConfig} from \"../music/MusicConfig\";\r\n  import {MusicVisualizer} from \"../music/MusicVisualizer\";\r\n  import {DomUtil} from \"../tools/DomUtil\";\r\n  import {ModifyManager} from \"../components/canvasConfig\";\r\n\r\n  import NavBar from '../components/NavBar';\r\n  import MusicSearchBox from '../components/MusicSearchBox';\r\n  import MusicLocalBox from '../components/MusicLocalBox';\r\n  import ModifyBox from '../components/ModifyBox';\r\n  import CanvasView from '../components/CanvasView';\r\n  import CanvasPic from '../components/CanvasPic';\r\n  import CanvasTitle from '../components/CanvasTitle';\r\n  import CanvasText from '../components/CanvasText';\r\n  import VideoView from '../components/VideoView';\r\n  import DomClock from '../components/DomClock';\r\n  import GameUI from '../components/GameUI';\r\n\r\n\r\n  const globalData = (function () {\r\n\r\n    const modifyManager = new ModifyManager();\r\n\r\n    const commonOptions_ = modifyManager.list.find(i => i.constructor.name === 'TrackList')\r\n      .list.find(i => i.constructor.name === 'CommonOptionsTrack').list;\r\n\r\n    const gameWrap = DomUtil.node('div');\r\n    DomUtil.class(gameWrap, 'game-wrap');\r\n    DomUtil.append(document.body, gameWrap);\r\n\r\n    const gameInner = DomUtil.node('div');\r\n    DomUtil.class(gameInner, 'game-inner');\r\n    DomUtil.append(gameWrap, gameInner);\r\n\r\n    const musicDataFlags = new MusicDataFlags;\r\n\r\n    const musicData = new MusicData(modifyManager);\r\n\r\n    // @ts-ignore;\r\n    const images = ['22824.jpg', '22891.jpg'];\r\n    const musicConfig = new MusicConfig({\r\n      images,\r\n    });\r\n\r\n\r\n    const mv = new MusicVisualizer({\r\n      //定义的音频数组长度\r\n      size: Math.pow(2, 6),\r\n      // draw: draw,\r\n      musicConfig,\r\n      volume: 0.3\r\n    });\r\n\r\n    const gameList = new GameList(mv, gameInner, modifyManager);\r\n\r\n\r\n    const createGameNode = function (ev) {\r\n      // @ts-ignore;\r\n      gameList.createGameNode(ev.rhythmPoint, modifyManager.gameTrack.trick);\r\n    };\r\n\r\n    musicData.originData.event.addEventListener('shock', createGameNode);\r\n    musicData.originData.event.addEventListener('update', () => {\r\n      window.isPhone || new GameScene(musicData.originData, musicData, gameInner, modifyManager);\r\n      const {_x, _y} = musicConfig.mouseMoveConf;\r\n      const maxDeg = 180;\r\n      //@ts-ignore;d\r\n      gameInner.style = `transform: rotateY(${-_x * maxDeg}deg) rotateX(${_y * maxDeg}deg) translateZ(100px);`;\r\n    });\r\n\r\n    return {\r\n      navList: [],\r\n      commonOptions_,\r\n      modifyManager,\r\n      musicDataFlags,\r\n      musicData,\r\n      musicConfig,\r\n      gameList,\r\n      mv\r\n    }\r\n  })();\r\n\r\n\r\n  export default {\r\n    name: \"DashBoard\",\r\n    components: {\r\n      NavBar,\r\n      MusicSearchBox,\r\n      MusicLocalBox,\r\n      ModifyBox,\r\n      GameUI,\r\n      CanvasView,\r\n      VideoView,\r\n      CanvasPic,\r\n      CanvasText,\r\n      CanvasTitle,\r\n      DomClock,\r\n    },\r\n    provide() {\r\n      const {\r\n        navList,\r\n        commonOptions_,\r\n        modifyManager,\r\n        musicDataFlags,\r\n        musicData,\r\n        musicConfig,\r\n        gameList,\r\n        mv\r\n      } = this;\r\n      return {\r\n        navList,\r\n        commonOptions_,\r\n        modifyManager,\r\n        musicDataFlags,\r\n        musicData,\r\n        musicConfig,\r\n        gameList,\r\n        mv\r\n      }\r\n    },\r\n    computed: {\r\n      commonOptions() {\r\n        const commonOptions = {};\r\n        const list = this.commonOptions_;\r\n        list.forEach(item => {\r\n          commonOptions[item.key] = item.value;\r\n        });\r\n        return commonOptions;\r\n      }\r\n    },\r\n    mounted() {\r\n      const {musicData, musicDataFlags, musicConfig, mv} = this;\r\n\r\n      musicData.realTimeData.event.addEventListener('shock', () => {\r\n        musicDataFlags && musicDataFlags.shockFlag++;\r\n        musicConfig && musicConfig.shock();\r\n      });\r\n\r\n      shortCut.init(undefined, {\r\n        common: {\r\n          spacebar: () => this.gameList.shootGameNode(),\r\n          enter: () => this.gameList.shootGameNode(),\r\n        }\r\n      }, {common: {spacebar: '消除节奏点', enter: '消除节奏点'}});\r\n      mv.draw = (data) => {this.draw(data)};\r\n\r\n      // @ts-ignore;\r\n      window.isPhone ? document.addEventListener(\"touchmove\", function (ev) {\r\n        musicConfig.handelMouseMove(ev)\r\n      }) : document.addEventListener(\"mousemove\", function (ev) {\r\n        musicConfig.handelMouseMove(ev)\r\n      });\r\n    },\r\n    data() {\r\n      return globalData;\r\n    },\r\n    methods: {\r\n\r\n      draw({realTimeData, originData}) {\r\n        const {modifyManager, musicDataFlags, musicData, musicConfig, gameList,} = this;\r\n        gameList.setBuffer(modifyManager.gameTrack.RhythmPointRemoveFloatRange * 10);\r\n        musicData.realTimeData.update(realTimeData);\r\n        musicData.originData.update(originData);\r\n\r\n        const [r, g, b, a] = musicConfig.currentImgAviColor;\r\n        const [[r1, g1, b1], [r2, g2, b2]] = musicData.calculateColors = Color.getPure(r, g, b);\r\n\r\n        const {soundTrackArr} = musicData.realTimeData;\r\n\r\n        // @ts-ignore;\r\n        document.querySelector('.sound-track').innerHTML = soundTrackArr.map(\r\n          // @ts-ignore;\r\n          (item) => `<li style=\"${[\r\n            `transform: translateY(-${item.vol}px);`,\r\n            `opacity: ${item.isRhythmPoint ? 1 : item.vol / 256 / 2 + .25};`,\r\n            `background-color: ${item.isRhythmPoint ? `rgba(${255 - r2},${255 - g2},${255 - b2}, 1)` : '#fff'};`\r\n          ].join('')}\"></li>`\r\n        ).join('');\r\n\r\n        musicDataFlags.dataFlag++;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .container {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .canvas-view-wrap {\r\n    display: flex;\r\n    position: absolute;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n</style>\r\n","import {MusicConfig} from \"./MusicConfig\";\r\nimport {MusicVisualizer} from \"./MusicVisualizer\";\r\n\r\n// @ts-ignore;\r\nimport {ModifyManager} from \"./canvasConfig.js\";\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\nimport {Sound} from \"@/tools/Sound\"\r\n// @ts-ignore;\r\n\r\n\r\nclass EventTarget_ {\r\n  listeners: {[index: string]: any} = {};\r\n  public addEventListener(type: string, callback: Function) {\r\n    if(!(type in this.listeners)) {\r\n      this.listeners[type] = [];\r\n    }\r\n    this.listeners[type].push(callback);\r\n  }\r\n  public removeEventListener(type: string, callback: Function): any {\r\n    if(!(type in this.listeners)) {\r\n      return;\r\n    }\r\n    const stack = this.listeners[type];\r\n    for(let i = 0, l = stack.length; i < l; i++) {\r\n      if(stack[i] === callback){\r\n        stack.splice(i, 1);\r\n        return this.removeEventListener(type, callback);\r\n      }\r\n    }\r\n  }\r\n  public dispatchEvent(event: Event) {\r\n    if(!(event.type in this.listeners)) {\r\n      return;\r\n    }\r\n    const stack = this.listeners[event.type];\r\n    // @ts-ignore;\r\n    event.target = this;\r\n    for(let i = 0, l = stack.length; i < l; i++) {\r\n      stack[i].call(this, event);\r\n    }\r\n  }\r\n}\r\n\r\nexport class MusicDataFlags {\r\n  dataFlag: number = 0;\r\n  shockFlag: number = 0;\r\n}\r\n\r\nclass RhythmPoint{\r\n  isRhythmPoint: boolean;\r\n  vol: number;\r\n  constructor(vol: number, isRhythmPoint: boolean){\r\n    this.vol = vol;\r\n    this.isRhythmPoint = isRhythmPoint;\r\n  }\r\n}\r\n\r\ntype IColor = [number, number, number, number] | [number, number, number];\r\n\r\nclass EventTar {\r\n  fnMap:{[index: string]: Function[]} = {};\r\n  addEventListener(type: string, callback: Function){\r\n    this.fnMap[type] || (this.fnMap[type] = []);\r\n    this.fnMap[type].push(callback)\r\n  }\r\n  dispatchEvent(ev: Event){\r\n    const fns = this.fnMap[ev.type];\r\n    fns && fns.forEach(i => i(ev));\r\n  }\r\n}\r\nclass MVData{\r\n  event: EventTar = new EventTar();\r\n  prevAddSpeed: number = 0;\r\n  prevAvrLevel: number = 0;\r\n  data?: Uint8Array;\r\n  avrLevel: number = 0;\r\n  total: number = 0;\r\n  addSpeed: number = 0;\r\n  soundTrackArr: RhythmPoint[] = [];\r\n  soundTrackArrMaxLen: number = 100;\r\n  shockNum: number = 0;\r\n  modifyManager: ModifyManager;\r\n  constructor(modifyManager: ModifyManager){\r\n    this.modifyManager = modifyManager;\r\n  }\r\n  update(data: Uint8Array){\r\n    const {soundTrackArr, prevAvrLevel, prevAddSpeed} = this;\r\n    this.data = data;\r\n    this.total = data.reduce((a = 0, b = 0) => (a + b));\r\n    const avrLevel = this.avrLevel = this.total / data.length;\r\n    const addSpeed = this.addSpeed = avrLevel - prevAvrLevel;\r\n\r\n    const {RhythmPointVolumeFloatRange = 0} = this.modifyManager.gameTrack;\r\n    /**\r\n     * 转折点， 声音开始变大的第一帧。 乐器的吹奏、敲击（或者人发声）的瞬间， 大概率会使音量提高。\r\n     * 所以就是 音量从减小， 突变到开始升高表示是个节奏点；\r\n     */\r\n    const isRhythmPoint = prevAddSpeed <= 0 && addSpeed > RhythmPointVolumeFloatRange / 10;\r\n\r\n    const rhythmPoint = new RhythmPoint(avrLevel, isRhythmPoint);\r\n    soundTrackArr.push(rhythmPoint);\r\n    if (isRhythmPoint) {\r\n      this.shockNum ++;\r\n      const ev = new Event('shock');\r\n      // @ts-ignore;\r\n      ev.rhythmPoint = rhythmPoint;\r\n      this.event.dispatchEvent(ev);\r\n    }\r\n\r\n    if (soundTrackArr.length > this.soundTrackArrMaxLen) {\r\n      soundTrackArr.shift();\r\n    }\r\n\r\n    this.prevAddSpeed = addSpeed;\r\n    this.prevAvrLevel = avrLevel;\r\n\r\n    this.event.dispatchEvent(new Event('update'));\r\n  }\r\n}\r\n\r\nexport class MusicData {\r\n  realTimeData: MVData;\r\n  originData: MVData;\r\n  currentImgAviColor: IColor = [0,0,0,0];\r\n  calculateColors: [IColor, IColor] = [[255, 255, 255], [255, 255, 255]];\r\n  modifyManager: ModifyManager;\r\n  constructor(\r\n    modifyManager: ModifyManager\r\n  ){\r\n    this.modifyManager = modifyManager;\r\n    this.realTimeData = new MVData(modifyManager);\r\n    this.originData = new MVData(modifyManager);\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nclass GameScore{\r\n  static prevNode?: Node;\r\n  constructor(score: number | string){\r\n    const gameScore = DomUtil.node('div');\r\n    gameScore.classList.add('game-score');\r\n    gameScore.innerHTML = score.toString();\r\n    DomUtil.append(document.body, gameScore);\r\n    GameScore.prevNode && DomUtil.remove(GameScore.prevNode);\r\n    GameScore.prevNode = gameScore;\r\n  }\r\n}\r\n\r\n\r\nclass GameCombo{\r\n  static prevNode?: Node;\r\n  constructor(combo: number){\r\n    GameCombo.prevNode && DomUtil.remove(GameCombo.prevNode);\r\n    GameCombo.prevNode = undefined;\r\n    if (combo > 5) {\r\n      const gameScore = DomUtil.node('div');\r\n      gameScore.classList.add('game-combo');\r\n      gameScore.innerHTML = `${combo || 0} x combo`;\r\n      DomUtil.append(document.body, gameScore);\r\n      GameCombo.prevNode = gameScore;\r\n    }\r\n\r\n  }\r\n}\r\n\r\nclass GameNode {\r\n  gameList: GameList;\r\n  dom: Node;\r\n  score?: number;\r\n  time: number;\r\n  isDebug?: boolean = false;\r\n  modifyManager: ModifyManager;\r\n  constructor(\r\n    gameList: GameList,\r\n    rhythmPoint: RhythmPoint,\r\n    isDebug: boolean = false,\r\n    gameInner: Element,\r\n    modifyManager: ModifyManager,\r\n  ){\r\n    this.gameList = gameList;\r\n    this.time = Date.now();\r\n    this.modifyManager = modifyManager;\r\n    const dom = this.dom = DomUtil.node('div');\r\n    dom.className = 'game-item';\r\n\r\n\r\n    if (isDebug) {\r\n      this.isDebug = isDebug;\r\n      // @ts-ignore;\r\n      dom.style = `animation: gamingDebug linear 0.945s;`;\r\n    }\r\n\r\n    const hueRange = 120;\r\n    const deg = rhythmPoint.vol * this.modifyManager.gameTrack.RhythmPointCenterPointOffset;\r\n\r\n    const innerDom = DomUtil.node('div');\r\n    DomUtil.append(dom, innerDom);\r\n    // @ts-ignore;\r\n      innerDom.style = `\r\n      transform: rotate(${deg}deg) translate(0, calc(${150 + rhythmPoint.vol/3}px));\r\n      background-color: hsl(${90 - hueRange * rhythmPoint.vol / 255}, 50%, 50%);\r\n    `;\r\n    DomUtil.append(gameInner, dom);\r\n\r\n    dom.addEventListener(\"webkitAnimationEnd\", this.endFunction);\r\n    dom.addEventListener(\"animationend\", this.endFunction);\r\n  }\r\n  calculateScore(currentTime: number){\r\n    const {gameList, time} = this;\r\n    this.score = Math.abs(currentTime - time - gameList.delay);\r\n  }\r\n  remove(){\r\n    const {dom} = this;\r\n    this.gameList.setCurrentScore(this.score);\r\n\r\n    if (this.score !== undefined) {\r\n      Sound.play(\"done\");\r\n    }else {\r\n      this.modifyManager.gameTrack.RhythmPointMissTipSound && Sound.play('warning');\r\n    }\r\n\r\n    dom.removeEventListener('webkitAnimationEnd', this.endFunction);\r\n    dom.removeEventListener('animationend', this.endFunction);\r\n    dom && DomUtil.remove(dom);\r\n  }\r\n  endFunction = (ev?: Event) => {\r\n    if (this.isDebug) {\r\n      this.calculateScore(Date.now())\r\n    }\r\n    this.remove();\r\n    this.gameList.remove(this);\r\n  }\r\n}\r\n\r\n\r\nexport class GameList {\r\n  currentTime: number = 0;\r\n  durationTime: number = 0;\r\n  ended: boolean = false;\r\n  combo: number = 0;\r\n  maxCombo: number = 0;\r\n  currentScore: number = 0;\r\n  totalScore: number = 0;\r\n  total: number = 0;\r\n  missCount: number = 0;\r\n  uselessCount: number = 0;\r\n  mv: MusicVisualizer;\r\n  gameInner: Element;\r\n  modifyManager: ModifyManager;\r\n  public endSong(){\r\n    this.ended = true;\r\n  }\r\n  public startSong(){\r\n    this.ended = false;\r\n    this.currentScore = 0;\r\n    this.totalScore = 0;\r\n    this.total = 0;\r\n    this.combo = 0;\r\n    this.maxCombo = 0;\r\n    this.missCount = 0;\r\n    this.uselessCount = 0;\r\n  }\r\n\r\n  constructor(\r\n    mv: MusicVisualizer,\r\n    gameInner: Element,\r\n    modifyManager: ModifyManager\r\n  ){\r\n\r\n    this.modifyManager = modifyManager;\r\n    this.mv = mv;\r\n    this.delay = this.mv.delay.delayTime.value * 1000\r\n    this.gameInner = gameInner;\r\n  }\r\n  setCombo(isStop: boolean){\r\n    isStop ? (this.combo = 0) : (this.combo ++);\r\n    this.combo > this.maxCombo && (this.maxCombo = this.combo);\r\n    new GameCombo(this.combo);\r\n  }\r\n\r\n  setCurrentScore(score: number | undefined){\r\n    this.currentScore = score || 0;\r\n    this.totalScore += (score || 0);\r\n    const isMiss = score === undefined;\r\n\r\n    isMiss && (this.missCount ++);\r\n    this.setCombo(isMiss);\r\n    new GameScore(isMiss ? 'miss' : `score - ${score}`);\r\n  }\r\n  eventTarget: EventTarget_ = new EventTarget_();\r\n  delay: number;\r\n  buffer: number = 150;\r\n  duration: number = 2000;\r\n  list: GameNode[] = [];\r\n\r\n  find(time: number): GameNode | undefined {\r\n    const {buffer, delay} = this;\r\n    // return this.list[0];\r\n    return this.list.find((item) => Math.abs(time - item.time - delay) < buffer);\r\n  }\r\n  indexOf(gameNode: GameNode){\r\n    return this.list.indexOf(gameNode);\r\n  }\r\n  remove(gameNode: GameNode){\r\n    const index = this.indexOf(gameNode);\r\n    index !== -1 && this.list.splice(index,1);\r\n  }\r\n  createGameNode(rhythmPoint: RhythmPoint, isDebug: boolean = false){\r\n    const gameNode = new GameNode(this, rhythmPoint, isDebug, this.gameInner, this.modifyManager);\r\n    this.list.push(gameNode);\r\n    this.total ++;\r\n    return gameNode;\r\n  }\r\n  setBuffer(buffer: number){\r\n    this.buffer = buffer;\r\n    this.eventTarget.dispatchEvent(new Event('bufferChange'));\r\n  }\r\n  shootGameNode(){\r\n    // 得分 目前时间 - 开始生成时间 - delay\r\n    const time = Date.now();\r\n    const gameNode = this.find(time);\r\n    if (gameNode) {\r\n      gameNode.calculateScore(time);\r\n\r\n      gameNode.endFunction();\r\n    } else {\r\n      this.uselessCount ++;\r\n      new GameScore('userLess press');\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport class GameScene {\r\n  dom: Node;\r\n  time: number;\r\n  modifyManager: ModifyManager;\r\n  constructor(gameData: MVData, musicData: MusicData, gameInner: Element, modifyManager: ModifyManager){\r\n    this.modifyManager = modifyManager;\r\n    this.time = Date.now();\r\n    const dom = this.dom = DomUtil.node('div');\r\n    dom.className = 'game-scene';\r\n\r\n    // @ts-ignore;\r\n    let list = [...gameData.data].filter(i => i).filter((x, i) => !(i % 16));\r\n    // list.length || (list = [0]);\r\n    const per = 360 / list.length;\r\n    const deg = musicData.originData.avrLevel * modifyManager.gameTrack.RhythmPointCenterPointOffset;\r\n    // @ts-ignore;\r\n    dom.innerHTML = list.map((item: number, index: number) => {\r\n      return `<div style=\"transform: rotateZ(${-(index) * per + 180 +deg}deg) translate(0, calc(400px + ${item * 10}px));\"></div>`;\r\n    }).join('');\r\n\r\n    DomUtil.append(gameInner, dom);\r\n\r\n    dom.addEventListener(\"webkitAnimationEnd\", this.destroy);\r\n    dom.addEventListener(\"animationend\", this.destroy);\r\n  }\r\n  remove(){\r\n    const {dom} = this;\r\n    dom.removeEventListener('webkitAnimationEnd', this.destroy);\r\n    dom.removeEventListener('animationend', this.destroy);\r\n    dom && DomUtil.remove(dom);\r\n  }\r\n  destroy = () => {\r\n    this.remove();\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport class Color {\r\n  static compose(i: number) {\r\n    i = i / 255;\r\n    return Math.round((i + (i - .5) * (1 - i)) * 255);\r\n  }\r\n  static dCompose(i: number, time = 0) {\r\n    i = i / 255;\r\n    let rate = (1 - i);\r\n    while (time + 3) {\r\n      rate *= (1 - i);\r\n      time --;\r\n    }\r\n    return Math.round((1- rate) * 255);\r\n  }\r\n  static getPure(r: number, g: number, b: number, time = 2): [IColor, IColor]{\r\n    // 同时减去最小值\r\n    const min = Math.min(r, g, b);\r\n    const per = min / 256;\r\n    const {dCompose, reduce} = Color\r\n    return [\r\n      [\r\n        dCompose(r, time),\r\n        dCompose(r, time),\r\n        dCompose(r, time)\r\n      ], [\r\n        dCompose(reduce(r, per), time + 2),\r\n        dCompose(reduce(g, per), time + 2),\r\n        dCompose(reduce(b, per), time + 2)\r\n      ]\r\n    ];\r\n  }\r\n  static reduce(r: number, per: number){\r\n    return Math.round((r - 255 * per) / (1  -  per));\r\n  }\r\n}\r\n\r\n\r\n","export function MakeThrottle_(fn: Function, time = 300) {\r\n  let prevTime = 0;\r\n  const ret = function () {\r\n    if (Date.now() - prevTime - ret.time > 0) {\r\n      fn.apply(null, [...arguments]);\r\n      prevTime = Date.now();\r\n    }\r\n  }\r\n  ret.time = time;\r\n  return ret;\r\n}\r\n\r\nexport function MakeThrottle(time = 300) {\r\n  let prevTime = 0;\r\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const fn = target[propertyKey];\r\n    target[propertyKey] = function () {\r\n      if (Date.now() - prevTime - time > 0) {\r\n        fn.apply(target, [...arguments]);\r\n        prevTime = Date.now();\r\n      }\r\n    }\r\n  }\r\n}\r\n","export function appendStyle(compName: string, styleStr: string, forceUpdate: boolean = false) {\r\n  // @ts-ignore;\r\n  appendStyle.cacheMap || (appendStyle.cacheMap = {});\r\n  // @ts-ignore;\r\n  if (forceUpdate || !appendStyle.cacheMap[compName]) {\r\n    const style = document.createElement('style');\r\n    style.innerHTML = styleStr.replace(/<\\/?style.*?>/g, '');\r\n    document.head.appendChild(style);\r\n    // @ts-ignore;\r\n    appendStyle.cacheMap[compName] = styleStr;\r\n  } else {\r\n    console.log(`[style][${compName}] is already exist!`);\r\n  }\r\n}\r\n","import {appendStyle} from \"@/units/appendStyle\";\r\n\r\nappendStyle(``, ``);\r\n\r\nlet canvas = document.createElement('canvas');\r\n\r\nconst pciCanvas = document.createElement('canvas');\r\n\r\n\r\nexport class Picture {\r\n  static pciCanvas = pciCanvas;\r\n  static pciCtx = pciCanvas.getContext(\"2d\");\r\n  compressRate: number;\r\n  canvas: Element;\r\n  ctx: any;\r\n  musicConfig: any;\r\n  cacheList: Element[];\r\n  cacheImg: {[index: string]: number[]};\r\n  constructor(musicConfig: any) {\r\n    this.compressRate = 0.1;\r\n    this.musicConfig = musicConfig;\r\n    this.canvas = canvas = canvas || document.createElement(\"canvas\");\r\n    this.ctx = canvas.getContext('2d');\r\n    this.cacheList = [];\r\n    this.cacheImg = {};\r\n  }\r\n\r\n  static setImage(img: any) {\r\n    const {offsetWidth, offsetHeight} = document.body;\r\n    Picture.pciCanvas.width = offsetWidth;\r\n    Picture.pciCanvas.height = offsetHeight;\r\n    Picture && Picture.pciCtx && Picture.pciCtx.drawImage(img, (offsetWidth - img.width) / 2, (offsetHeight - img.height) / 2, img.width, img.height);\r\n  }\r\n\r\n  static getImageData(x: number, y: number, w: number, h: number):ImageData {\r\n    // @ts-ignore;\r\n    return Picture.pciCtx && Picture.pciCtx.getImageData(x, y, w, h);\r\n  }\r\n\r\n  makeEl() {\r\n    const img = document.createElement(\"img\");\r\n    const {cacheList, cacheImg, ctx, compressRate} = this;\r\n    img.onload = () => {\r\n      Picture.setImage(img);\r\n      if (!cacheImg[img.src]) {\r\n        const {width, height} = img;\r\n        canvas.width = width * compressRate;\r\n        canvas.height = height * compressRate;\r\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        const result:number[][] = [[], [], [], []];\r\n        imageData.data.forEach((color: number, index: number) => {\r\n          result[index % 4].push(color);\r\n        });\r\n        cacheImg[img.src] = [\r\n          aviOfArr(result[0]), aviOfArr(result[1]), aviOfArr(result[2]), aviOfArr(result[3])\r\n        ];\r\n      }\r\n      // @ts-ignore;\r\n      img.noNeedChangeCurrentImgAviColor || (this.musicConfig.currentImgAviColor = cacheImg[img.src]);\r\n      cacheList.push(img);\r\n    };\r\n    return img;\r\n  }\r\n\r\n  load(url: string, noNeedChangeCurrentImgAviColor?: boolean) {\r\n    if (!url) return;\r\n    const img = this.cacheList.shift() || this.makeEl();\r\n    // @ts-ignore;\r\n    img.noNeedChangeCurrentImgAviColor = noNeedChangeCurrentImgAviColor;\r\n    // @ts-ignore;\r\n    img.src = /:\\/\\//.test(url) ? url : `./img/${url}`;\r\n    return img;\r\n  }\r\n}\r\n\r\n\r\nfunction sumOfArr(arr: number[]) {\r\n  return arr.reduce((sum, num) => sum += num, 0);\r\n}\r\n\r\nfunction aviOfArr(arr: number[]) {\r\n  return Math.round(sumOfArr(arr) / arr.length);\r\n}\r\n\r\n","// @ts-ignore;\r\nimport {MakeThrottle} from \"@/utils\";\r\nimport {Picture} from \"@/picture/Picture\";\r\n\r\n\r\n// 图片\r\ninterface IMusicConfigOptions {\r\n  images: string[];\r\n}\r\n\r\nexport class MusicConfig {\r\n  lrc: string = '';\r\n  ended?:Function;\r\n  pictureCanvasCtx?: Picture;\r\n  picDom?: Node = undefined;\r\n  imageGroup: string[][] = [];\r\n\r\n  mouseMoveConf = {x: 0, y: 0, w: 1, h: 1, _x: .5, _y: .5}; // 鼠标位置\r\n  // 当前图片计算出来的色调\r\n  currentImgAviColor: [number, number, number, number] =  [255, 255, 255, 1];\r\n  // 当前主音量\r\n  volume: { _main: number; main: number; } = {\r\n    _main: 1,\r\n    main: .01,\r\n  };\r\n  // 当前图片的链接\r\n  currentImgSrc:string = '';\r\n\r\n  constructor(options: IMusicConfigOptions){\r\n    const {images} = options;\r\n    this.imageGroup = [options.images];\r\n\r\n\r\n    const pictureCanvasCtx = new Picture(this);\r\n    this.setPictureCanvasCtx(pictureCanvasCtx);\r\n\r\n    this.currentImgSrc = images[0];\r\n\r\n    if (this.currentImgSrc) {\r\n      this.changePic(undefined, true);\r\n    }\r\n  }\r\n  handelMouseMove(ev: Event){\r\n    if (ev.target !== document.body) return;\r\n    const {mouseMoveConf} = this;\r\n    // @ts-ignore;\r\n    const enent = ev.touches ? ev.touches[0] : ev;\r\n    // @ts-ignore;\r\n    const [x, y, w, h] = [enent.clientX, enent.clientY, enent.target.offsetWidth, enent.target.offsetHeight];\r\n    const conf = {\r\n      x, y, w, h,\r\n      _x: (x - w / 2) / w,\r\n      _y: (y - h / 2) / h\r\n    };\r\n    Object.keys(mouseMoveConf).forEach(key => {\r\n      // @ts-ignore;\r\n      mouseMoveConf[key] = conf[key]\r\n    })\r\n  }\r\n  @MakeThrottle(1)\r\n  shock() {\r\n    // DesktopImage.play(musicConfig.currentImgSrc);\r\n  };\r\n  setLrc(lrc: string){\r\n    this.lrc = lrc;\r\n  }\r\n  getImageData(x: number, y: number, w: number, h: number): ImageData{\r\n    return Picture.getImageData(x, y, w, h);\r\n  };\r\n\r\n\r\n  changePicGroup(reverse: boolean) {\r\n    const {imageGroup} = this;\r\n    if (imageGroup.length) {\r\n      // @ts-ignore;\r\n      reverse ? imageGroup.unshift(imageGroup.pop()) : imageGroup.push(imageGroup.shift());\r\n    }\r\n    this.changePic();\r\n  }\r\n  // 切换图片 // 传参 isReverse // false 时 下一张 true 时 上一张\r\n  changePic(reverse?: boolean, shockAtOnce?: boolean) {\r\n    const images = this.imageGroup[0];\r\n    if (images.length) {\r\n      // @ts-ignore;\r\n      reverse ? images.unshift(images.pop()) : images.push(images.shift());\r\n      this.currentImgSrc = images[0];\r\n      if (this.pictureCanvasCtx) {\r\n        this.picDom =  this.pictureCanvasCtx.load(this.currentImgSrc);\r\n      }\r\n\r\n      shockAtOnce && this.shock();\r\n    }\r\n\r\n  }\r\n  // 增加音量\r\n  encVolume() {\r\n    let {main} = this.volume;\r\n    main = main + 0.05;\r\n    if (main < 0) main = 0;\r\n    if (main > 1) main = 1;\r\n    this.volume.main = main;\r\n  }\r\n  // 减小音量\r\n  decVolumn() {\r\n    let {main} = this.volume;\r\n    main = main - 0.05;\r\n    if (main < 0) main = 0;\r\n    if (main > 1) main = 1;\r\n    this.volume.main = main;\r\n  }\r\n  setPictureCanvasCtx (pictureCanvasCtx: Picture){\r\n    this.pictureCanvasCtx = pictureCanvasCtx;\r\n  }\r\n}\r\n\r\n\r\n\r\n","import defaultJson from '../../userConfig/trackPresets/default';\r\nexport class Track {\r\n  static commonConfigs = {};\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    CanvasTrack.commonConfigs.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n\r\n  constructor(defaultValue = {}) {\r\n    this.current = 0;\r\n    this.playing = 0;\r\n    this.list = [];\r\n    Track.commonConfigs[this.constructor.name].forEach(item => {\r\n      const [key, name, value, valueType, min, max, desc] = item;\r\n      const defaultVal = defaultValue[key];\r\n      this.list.push({key, name, value: defaultVal !== undefined ? defaultVal : value, valueType, min, max, desc});\r\n    });\r\n\r\n    this.list.forEach(item => {\r\n      Object.defineProperty(this, item.key, {\r\n        get() {\r\n          return item.value;\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length\r\n  }\r\n\r\n  // 设置轨道\r\n  setIndex(index) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n  }\r\n\r\n  // 设置轨道， 打开轨道编辑器\r\n  play() {\r\n    this.playing = this.current;\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n  }\r\n\r\n  enc() {\r\n    const thisItem = this.list[this.current];\r\n    let val = thisItem.value + 1;\r\n\r\n    if (val > thisItem.max) {\r\n      val = thisItem.max\r\n    }\r\n    if (val < thisItem.min) {\r\n      val = thisItem.min;\r\n    }\r\n    thisItem.value = val;\r\n  }\r\n\r\n  dec() {\r\n    const thisItem = this.list[this.current];\r\n    let val = thisItem.value - 1;\r\n\r\n    if (val > thisItem.max) {\r\n      val = thisItem.max\r\n    }\r\n    if (val < thisItem.min) {\r\n      val = thisItem.min;\r\n    }\r\n    thisItem.value = val;\r\n  }\r\n}\r\n\r\nexport class CanvasTrack extends Track {\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.CanvasTrack || (Track.commonConfigs.CanvasTrack = []);\r\n    Track.commonConfigs.CanvasTrack.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n}\r\n\r\n\r\nexport class VideoTrack extends Track {\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.VideoTrack || (Track.commonConfigs.VideoTrack = []);\r\n    Track.commonConfigs.VideoTrack.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n}\r\n\r\n\r\nCanvasTrack.setConfig('disable', '是否启用', 0, 'int', 0, 1, '是否启用');\r\nCanvasTrack.setConfig('renderType', '渲染方式', 2, 'int', 0, 3, '渲染方式');\r\nCanvasTrack.setConfig('direction', '渲染方向', 0, 'int', 0, 1, '渲染方式');\r\nCanvasTrack.setConfig('baseSizeType', '基础尺寸单位', 0, 'int', 0, 1, '0: 屏幕较小边， 1： 屏幕较大边');\r\nCanvasTrack.setConfig('noZero', '删除无效数据', 1, 'int', 0, 1, '将频谱数据复制一份， 并逆向拼接在源数据后面');\r\nCanvasTrack.setConfig('copyData', '复制并反向数据', 1, 'int', 0, 1, '将频谱数据复制一份， 并逆向拼接在源数据后面');\r\nCanvasTrack.setConfig('showDataBefore', '展示均衡前的数据', 0, 'int', 0, 1, '展示均衡前的数据');\r\n\r\nCanvasTrack.setConfig('midPositionX', 'X中心位子', 50, 'int', 0, 100, '绘制中心位于屏幕位置， 0在最左， 100在最右');\r\nCanvasTrack.setConfig('midPositionY', 'Y中心位子', 50, 'int', 0, 100, '绘制中心位于屏幕位置， 0在最上， 100在最下');\r\nCanvasTrack.setConfig('clearPrevView', '保留上次渲染', 70, 'int', 0, 100, '保留上次绘制（百分比）');\r\nCanvasTrack.setConfig('mainRadius', '基线距中心点位置（Y轴）', 25, 'int', -100, 100, '圆形时为半径, 百分比基于基础尺寸单位');\r\nCanvasTrack.setConfig('avrLevelMainRadiusModify', '频谱均值基线距离修正系数', 25, 'int', 0, 100, '基线随频谱修正系数（百分比）');\r\n\r\nCanvasTrack.setConfig('mainRadiusOpacity', '基线透明度', 75, 'int', 0, 100, '基线透明度');\r\nCanvasTrack.setConfig('mainRadiusLineWidth', '基线宽度', 3, 'int', 0, 100, '基线宽度， 千分比基准此村');\r\n\r\nCanvasTrack.setConfig('floatRange', '频谱波动范围', 2, 'int', -10, 10, '频谱波动范围 相对基础尺寸 百分制');\r\nCanvasTrack.setConfig('avrLevelFloatRangeModify', '频谱均值波动范围修正系数', 25, 'int', 0, 100, '基线随频谱修正系数（百分比）');\r\n\r\nCanvasTrack.setConfig('stepModify', '频谱间隔修正', 10, 'int', 0, 100, ' 十分比预设');\r\nCanvasTrack.setConfig('lineLineWidth', '频谱宽度', 3, 'int', 0, 100, ' 千分比预设');\r\nCanvasTrack.setConfig('dataModify', '频谱修正系数', 15, 'int', 0, 100, '十分比预设');\r\nCanvasTrack.setConfig('dataOffsetModify', '频谱偏移修正系数', 6, 'int', -100, 100, '百分比预设');\r\nCanvasTrack.setConfig('minHeightModify', '频谱最小修正系数', -0, 'int', -300, 100, '百分比预设');\r\nCanvasTrack.setConfig('threshold', '阈值', 7, 'int', 0, 100, '百分比预设');\r\n\r\n\r\nexport class CommonOptionsTrack extends Track {\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.CommonOptionsTrack || (Track.commonConfigs.CommonOptionsTrack = []);\r\n    Track.commonConfigs.CommonOptionsTrack.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n}\r\n\r\nCommonOptionsTrack.setConfig('CanvasView', '开启音频可视化轨道', 1, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('CanvasPic', '开启背景轨道', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('CanvasPicMalfunction', '开启背景轨道故障特效', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('CanvasText', '开启歌词轨道', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('CanvasTextMalfunction', '开启歌词轨道故障特效', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('changeBG_When_LRC_Changed', '背景歌词同步切换', 1, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('VideoView', '开启视频轨道1', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('VideoView1', '开启视频轨道2', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('DomClock', '显示时钟', 0, 'int', 0, 1, '是否启用');\r\nCommonOptionsTrack.setConfig('BalanceTrack', '显示均衡器', 0, 'int', 0, 1, '是否启用');\r\n\r\n\r\n\r\nexport class GameTrack extends Track {\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.GameTrack || (Track.commonConfigs.GameTrack = []);\r\n    Track.commonConfigs.GameTrack.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n}\r\n\r\n\r\nGameTrack.setConfig('RhythmPointVolumeFloatRange', '节奏点浮动范围', 1, 'int', 0, 30, '值越大， 则节奏点越少');\r\nGameTrack.setConfig('RhythmPointTimeout', '节奏点最小间隔', 15, 'int', 0, 30, 'timeout = (num * 10) ms');\r\nGameTrack.setConfig('RhythmPointRemoveFloatRange', '节奏点消除范围', 20, 'int', 5, 60, 'range = (num * 10)');\r\nGameTrack.setConfig('RhythmPointMissTipSound', 'miss提示音', 0, 'int', 0, 1, '是否开启');\r\nGameTrack.setConfig('RhythmPointCenterPointOffset', '轨道偏移量', -30, 'int', -60, 60, '轨道偏移量');\r\nGameTrack.setConfig('trick', '开启作弊模式', 0, 'int', 0, 1, '是否开启');\r\n\r\n\r\nexport class BalanceTrack extends Track {\r\n  constructor() {\r\n    const [name, ...rest] = arguments;\r\n    super(...rest);\r\n    this.name = name || this.constructor.name;\r\n  }\r\n\r\n  static setConfig(key, name, value, valueType, min, max, desc) {\r\n    Track.commonConfigs.BalanceTrack || (Track.commonConfigs.BalanceTrack = []);\r\n    Track.commonConfigs.BalanceTrack.push([key, name, value, valueType, min, max, desc]);\r\n  }\r\n}\r\n\r\nexport const biquadFilterFrequency = [31, 63, 125, 250, 500, 1000, 2000, 4000, 8000, 16000, 20000, 24000];\r\nbiquadFilterFrequency.forEach((item, index) => {\r\n  BalanceTrack.setConfig(`balance${index}`, `${item}`, 0, 'int', -12, 12, 'db');\r\n});\r\n\r\nexport class ModifyManager {\r\n  constructor(updateCommonOptions) {\r\n    this.list = [];\r\n    this.playing = 0;\r\n    this.current = 0;\r\n    this.setList([new TrackList(this)]);\r\n    this.setIndex(0);\r\n    this.updateCommonOptions = updateCommonOptions;\r\n    this.init();\r\n  }\r\n\r\n\r\n\r\n\r\n  init(){\r\n    this.trackList = this.list.find(i => i.constructor.name === 'TrackList');\r\n    this.commonOptions = this.list.find(i => i.constructor.name === 'TrackList').list.find(i => i.constructor.name === 'CommonOptionsTrack');\r\n    this.gameTrack = this.list.find(i => i.constructor.name === 'TrackList').list.find(i => i.constructor.name === 'GameTrack');\r\n    this.balanceTrack = this.list.find(i => i.constructor.name === 'TrackList').list.find(i => i.constructor.name === 'BalanceTrack');\r\n    this.updateCommonOptions && this.updateCommonOptions()\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n  savePresets(){\r\n    this.trackList.savePresets();\r\n  }\r\n\r\n  setList(list) {\r\n    this.list = list;\r\n    this.current = 0;\r\n  }\r\n\r\n  replace(index, replacer) {\r\n    this.list.splice(index, 1, replacer);\r\n  }\r\n\r\n  // 设置轨道\r\n  setIndex(index) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n  }\r\n\r\n  // 设置轨道， 打开轨道编辑器\r\n  play() {\r\n    this.playing = this.current;\r\n    if (this.current === 0) {\r\n      this.replace(1, this.list[this.current])\r\n    }\r\n    this.list[this.current].play()\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n  }\r\n\r\n  enc() {\r\n    this.list[this.current] && this.list[this.current].enc();\r\n    this.trackList.savePresets();\r\n  }\r\n\r\n  dec() {\r\n    this.list[this.current] && this.list[this.current].dec();\r\n    this.trackList.savePresets();\r\n  }\r\n\r\n  prevItem() {\r\n    this.list[this.current] && this.list[this.current].prev()\r\n  }\r\n\r\n  nextItem() {\r\n    this.list[this.current] && this.list[this.current].next()\r\n  }\r\n\r\n  up() {\r\n    this.list[0].prev()\r\n  }\r\n\r\n  down() {\r\n    this.list[0].next()\r\n  }\r\n\r\n  add() {\r\n    this.list[0].add.call(this.list[0], ...arguments);\r\n    this.list[0].savePresets();\r\n  }\r\n\r\n  delete() {\r\n    this.list[0].delete.call(this.list[0], ...arguments);\r\n    this.list[0].savePresets();\r\n  }\r\n\r\n  copy() {\r\n    this.list[0].copy.call(this.list[0], ...arguments);\r\n    this.list[0].savePresets();\r\n  }\r\n}\r\n\r\nconst constructorList = [GameTrack, BalanceTrack, CommonOptionsTrack];\r\n\r\n// 轨道列表管理器\r\n// 可以是 canvas 轨道 和视频轨道 // 左侧第一栏\r\nclass TrackList {\r\n  static CanvasTrack = CanvasTrack;\r\n  static VideoTrack = VideoTrack;\r\n  static CommonOptionsTrack = CommonOptionsTrack;\r\n  static BalanceTrack = BalanceTrack;\r\n  static GameTrack = GameTrack;\r\n\r\n\r\n\r\n  savePresets(name) {\r\n    const result = this.list.map(item => {\r\n      const data = {};\r\n      item.list.forEach(key => {\r\n        data[key.key] = item[key.key];\r\n      });\r\n      return {name: item.name, data, type: item.constructor.name}\r\n    });\r\n    this.parent.updateCommonOptions();\r\n    localStorage.setItem('configPresets', JSON.stringify(result));\r\n\r\n    // const {fs, path, process} = window.node;\r\n    // const outputPath = path.join(process.cwd(), './userConfig/trackPresets/default.json');\r\n    // fs.writeFileSync(outputPath, JSON.stringify(result, null, 2));\r\n  }\r\n\r\n  loadPresets() {\r\n    try {\r\n      const presets = JSON.parse(localStorage.getItem('configPresets') || '[]');\r\n\r\n      // eval(`(${fs.readFileSync(outputPath, {encoding: 'utf-8'})})`);\r\n      presets.length || presets.push({});\r\n\r\n      constructorList.forEach(constructor => {\r\n        const constructorName = constructor.name;\r\n        const hasDot = presets.some(i => i.type === constructorName);\r\n        if (!hasDot) {\r\n          this.add({type: constructorName, name: constructorName})\r\n        }\r\n      });\r\n\r\n      presets.forEach(item => {\r\n        this.add(item);\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      console.log('load presets fail.');\r\n    }\r\n  }\r\n\r\n  constructor(parent) {\r\n    this.list = [];\r\n    this.parent = parent;\r\n    this.playing = 0;\r\n    this.current = 0;\r\n    this.loadPresets();\r\n\r\n    constructorList.forEach(constructor => {\r\n      const constructorName = constructor.name;\r\n      const hasDto = this.list.some(i => i.constructor.name === constructorName);\r\n      if (!hasDto) {\r\n        this.add({type: constructorName, name: constructorName})\r\n      }\r\n    })\r\n\r\n\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n\r\n  add(options = {}, len = 1) {\r\n    const {type = 'CanvasTrack', name, data} = options;\r\n    for (let i = 0; i < len; i++) {\r\n      this.list.push(new TrackList[type](name, data));\r\n    }\r\n    this.setIndex(this.len - 1);\r\n  }\r\n\r\n  delete() {\r\n    const item = this.list[this.current];\r\n    if (item) {\r\n      this.list.splice(this.current, 1);\r\n      this.setIndex(0);\r\n    }\r\n  }\r\n\r\n  copy() {\r\n    const item = this.list[this.current];\r\n    if (item && !['CommonOptionsTrack', 'BalanceTrack'].includes(item.constructor.name)) {\r\n      this.list.splice(this.current, 0, new item.constructor(item.name + 'Copy', item));\r\n      this.setIndex(this.current + 1);\r\n    }\r\n  }\r\n\r\n  setList(list) {\r\n    this.list = list;\r\n    this.current = 0;\r\n  }\r\n\r\n  // 设置轨道\r\n  setIndex(index) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    this.play();\r\n  }\r\n\r\n  // 设置轨道， 打开轨道编辑器\r\n  play() {\r\n    this.playing = this.current;\r\n    this.parent.replace(1, this.list[this.current]);\r\n  }\r\n\r\n  prev() {\r\n    this.setIndex((this.current - 1 + this.len) % this.len);\r\n  }\r\n\r\n  next() {\r\n    this.setIndex((this.current + 1) % this.len);\r\n  }\r\n}\r\n\r\n\r\n","// 其他 AudioContext API 移步 https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext\r\n// @ts-ignore;\r\nimport {MusicConfig} from \"src/music/MusicConfig\";\r\n// @ts-ignore;\r\nimport {biquadFilterFrequency} from \"@/components/canvasConfig\";\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\n\r\n\r\n\r\n\r\ninterface IMusicVisualizerConifg {\r\n  musicConfig: MusicConfig;\r\n  size: number;\r\n  draw?: Function;\r\n  volume?: number;\r\n}\r\n\r\nfunction createPanner(){\r\n  console.log(MusicVisualizer.ac.createPanner)\r\n  const panner = MusicVisualizer.ac.createPanner();\r\n  panner.panningModel = 'HRTF';\r\n  panner.distanceModel = 'inverse';\r\n  panner.refDistance = 1;\r\n  panner.maxDistance = 10;\r\n  panner.rolloffFactor = 10;\r\n  panner.coneInnerAngle = 360;\r\n  panner.coneOuterAngle = 0;\r\n  panner.coneOuterGain = 0;\r\n\r\n\r\n  if (panner.orientationX) {\r\n    panner.orientationX.value = 0;\r\n    panner.orientationY.value = 0;\r\n    panner.orientationZ.value = 0;\r\n\r\n    panner.positionX.value = 0;\r\n    panner.positionY.value = 0;\r\n    panner.positionZ.value = 0;\r\n  } else {\r\n    panner.setOrientation && panner.setOrientation(0,0,0);\r\n    panner.setPosition && panner.setPosition(0,0,0)\r\n  }\r\n\r\n  return panner;\r\n}\r\n\r\nfunction initListener (){\r\n  const listener = MusicVisualizer.ac.listener;\r\n\r\n  if (listener.forwardX) {\r\n\r\n    listener.forwardX.value = 0;\r\n    listener.forwardY.value = 1;\r\n    listener.forwardZ.value = 0;\r\n\r\n    listener.upX.value = 0;\r\n    listener.upY.value = 0;\r\n    listener.upZ.value = 1;\r\n\r\n\r\n    listener.positionX.value = 0;\r\n    listener.positionY.value = 0;\r\n    listener.positionZ.value = 0;\r\n  } else {\r\n\r\n    listener.setOrientation && listener.setOrientation(0, 1, 0, 0, 0, 1);\r\n    listener.setPosition && listener.setPosition(0, 0, 0)\r\n  }\r\n  return listener;\r\n}\r\n\r\n\r\nfunction createBiquadFilters(input: AudioNode, output: AudioNode) {\r\n  // @ts-ignore;\r\n  const biquadFilters =  biquadFilterFrequency.map(frequency => createBiquadFilter(frequency));\r\n  // @ts-ignore;\r\n  biquadFilters.forEach(biquadFilter => {\r\n    input.connect(biquadFilter);\r\n    input = biquadFilter;\r\n  });\r\n  input.connect(output);\r\n  return biquadFilters;\r\n}\r\n\r\nfunction createBiquadFilter(frequency: number) {\r\n  const biquadFilter = MusicVisualizer.ac.createBiquadFilter();\r\n  biquadFilter.type = 'peaking';\r\n  biquadFilter.frequency.value = frequency;\r\n  return biquadFilter;\r\n}\r\n\r\nfunction createAudioSource(context: MusicVisualizer) {\r\n  const $audio = context.$audio = document.createElement('audio');\r\n  const source = MusicVisualizer.ac.createMediaElementSource($audio);\r\n  $audio.crossOrigin = \"anonymous\";\r\n  $audio.autoplay = true;\r\n  $audio.volume = context.musicConfig.volume.main;\r\n\r\n  $audio.onended = () => context.musicConfig.ended && context.musicConfig.ended();\r\n  return {$audio, source}\r\n}\r\n\r\n\r\nexport class MusicVisualizer {\r\n  duration: number = 1;\r\n  playing: boolean = false;\r\n  stopType: string = '';\r\n  source?: any = null;\r\n  latestPlayTime: number = 0;\r\n  count: number = 0;\r\n  delay: DelayNode;\r\n  musicConfig: MusicConfig;\r\n  gain: GainNode;\r\n  // merger: ChannelMergerNode;\r\n  // splitter: ChannelSplitterNode;\r\n  // gainNodes: { main: GainNode, left: GainNode, right: GainNode };\r\n  size: number;\r\n  analyser: AnalyserNode;\r\n  analyserBefore: AnalyserNode;\r\n\r\n  biquadFilters: BiquadFilterNode[];\r\n  draw?: Function;\r\n  resetLatestPlayTime: boolean = false;\r\n  xhr: XMLHttpRequest;\r\n  panner: PannerNode;\r\n  $audio: HTMLMediaElement;\r\n  // 音频上下文\r\n  ac: AudioContext;\r\n  // @ts-ignore;\r\n  static ac: AudioContext = new (window.AudioContext || window.webkitAudioContext)();//共用的\r\n  constructor(obj: IMusicVisualizerConifg) {\r\n\r\n    this.ac = MusicVisualizer.ac;\r\n    this.musicConfig = obj.musicConfig;\r\n\r\n    const {$audio, source} = createAudioSource(this);\r\n    this.$audio = $audio;\r\n    $audio.volume = 0.01;\r\n    const panner = this.panner = createPanner();\r\n    initListener();\r\n\r\n    const analyser = this.analyser = MusicVisualizer.ac.createAnalyser();\r\n    const analyserBefore = this.analyserBefore = MusicVisualizer.ac.createAnalyser();\r\n    const gain = this.gain = MusicVisualizer.ac.createGain();\r\n    gain.gain.value = 0.5;\r\n\r\n\r\n    this.size = obj.size || 8;\r\n    analyserBefore.fftSize = analyser.fftSize = this.size * 2;\r\n\r\n\r\n    const delay = this.delay = MusicVisualizer.ac.createDelay();\r\n    delay.delayTime.value = 1.8;\r\n    // navigator.mediaDevices.getUserMedia({audio: true, video: false}).then(res=> {\r\n    //   const node = MusicVisualizer.ac.createMediaStreamSource(res);\r\n    //   $audio.autoplay = false;\r\n    //   node.connect(analyserBefore);\r\n    // });\r\n\r\n\r\n    source.connect(analyserBefore);\r\n    // 音源 -> 滤波器\r\n    // @ts-ignore;\r\n    this.biquadFilters = createBiquadFilters(analyserBefore, delay);\r\n\r\n    delay.connect(analyser);\r\n    analyser.connect(panner); // 最终听到的\r\n    panner.connect(gain);\r\n    gain.connect(MusicVisualizer.ac.destination);\r\n\r\n\r\n    // ajax\r\n    this.xhr = new XMLHttpRequest();\r\n    this.draw = obj.draw;\r\n\r\n    obj.volume && this.changeVolume(obj.volume);\r\n    this.visualize();\r\n  }\r\n\r\n  load(url: string, fun: Function) {\r\n    this.stopType = '';\r\n    this.playing = false;\r\n    this.xhr.abort();\r\n    this.xhr.open(\"GET\", url);\r\n    this.xhr.responseType = \"arraybuffer\";\r\n    this.xhr.onload = () => {\r\n      fun(this.xhr.response);\r\n    };\r\n    this.xhr.send();\r\n  };\r\n\r\n\r\n// BaseAudioContext.decodeAudioData()用来生成AudioBuffer\r\n// AudioBuffer供AudioBufferSourceNode使用，这样，AudioBufferSourceNode才可以播放音频数据\r\n  decode(arrayBuffer: ArrayBuffer, fun: Function) {\r\n    MusicVisualizer.ac.decodeAudioData(arrayBuffer, function (buffer: any) {\r\n      fun(buffer);\r\n    }, function (err: Error) {\r\n      console.log(err);\r\n    });\r\n  };\r\n\r\n  play(path: ArrayBuffer | string) {\r\n    const n = ++this.count;\r\n    this.source && this.source[this.source.stop ? \"stop\" : \"noteOff\"](); // 开始前先暂停之前音频的播放，防止多份音频同时播放\r\n    this.resetLatestPlayTime = true;\r\n\r\n    if (path instanceof ArrayBuffer) {\r\n      this.decode(path, (buffer: ArrayBuffer) => {\r\n        if (n !== this.count) return;\r\n        const bufferSource: AudioBufferSourceNode = MusicVisualizer.ac.createBufferSource();\r\n        // 将解码成功后的buffer赋值给bufferSource的buffer属性\r\n        // @ts-ignore;\r\n        bufferSource.buffer = buffer;\r\n        // bufferSource.loop = true;\r\n        bufferSource.connect(this.analyserBefore);\r\n        // @ts-ignore;\r\n        bufferSource[bufferSource.start ? \"start\" : \"noteOn\"](0);\r\n        this.source = bufferSource;\r\n        this.resetLatestPlayTime && (this.latestPlayTime = MusicVisualizer.ac.currentTime);\r\n      });\r\n    } else {\r\n\r\n      console.log('play')\r\n      // @ts-ignore;\r\n      if (window.isPhone) {\r\n        console.log('play')\r\n        this.load(path, (arrayBuffer: ArrayBuffer) => {\r\n          if (n !== this.count) return;\r\n          this.decode(arrayBuffer, (buffer: ArrayBuffer) => {\r\n            this.playing = true;\r\n            if (n !== this.count) return;\r\n            const bufferSource: AudioBufferSourceNode = MusicVisualizer.ac.createBufferSource();\r\n            // @ts-ignore;\r\n            bufferSource.buffer = buffer;\r\n            bufferSource.connect(this.analyserBefore);\r\n            // @ts-ignore;\r\n            bufferSource[bufferSource.start ? \"start\" : \"noteOn\"](0);\r\n            this.source = bufferSource;\r\n            bufferSource.onended = () => {\r\n              if (this.stopType) {\r\n              } else {\r\n                this.musicConfig.ended && this.musicConfig.ended();\r\n              }\r\n            };\r\n            this.resetLatestPlayTime && (this.latestPlayTime = MusicVisualizer.ac.currentTime);\r\n          });\r\n        });\r\n      } else {\r\n        this.$audio.src = path;\r\n      }\r\n\r\n\r\n    }\r\n  };\r\n\r\n  // 主音量控制方法\r\n  changeVolume(percent: number) {\r\n    // @ts-ignore;\r\n    this.musicConfig.volume.main = percent;\r\n  };\r\n\r\n  // 左右声道控制方法\r\n  setVolume() {\r\n    const {musicConfig} = this;\r\n    const {main,} = musicConfig.volume;\r\n\r\n    this.$audio.volume = main;\r\n    const {panner} = this;\r\n\r\n    const {x, y, w, h} = musicConfig.mouseMoveConf;\r\n\r\n    const _x = (x-w/2)/w;\r\n    const _y = -(y-h/2)/h;\r\n\r\n    if (panner.positionX) {\r\n      panner.positionX.value = _x;\r\n      panner.positionY.value = _y;\r\n    } else {\r\n      panner.setPosition && panner.setPosition(_x,_y,0)\r\n    }\r\n  };\r\n\r\n  visualize() {\r\n    const realTimeData = new Uint8Array(this.analyser.frequencyBinCount);//数组长度是fftsize的一半\r\n    const originData = new Uint8Array(this.analyserBefore.frequencyBinCount);//数组长度是fftsize的一半\r\n\r\n    const requestAnimationFrame = window.requestAnimationFrame ||\r\n      // @ts-ignore;\r\n      window.webkitrequestAnimationFrame ||\r\n      // @ts-ignore;\r\n      window.mozrequestAnimationFrame;//兼容\r\n    const fn = () => {\r\n      // @ts-ignore;\r\n      if (!window.hidden) {\r\n        if (this.draw) {\r\n          this.analyser.getByteFrequencyData(realTimeData);// 将音频频域数据复制到传入的Uint8Array数组\r\n          this.analyserBefore.getByteFrequencyData(originData);// 将音频频域数据复制到传入的Uint8Array数组\r\n          this.draw({realTimeData, originData});\r\n        }\r\n        this.setVolume();\r\n      }\r\n      requestAnimationFrame(fn);\r\n    }\r\n    requestAnimationFrame(fn);\r\n  }\r\n}\r\n\r\n\r\n// 解决 Chrome 66之后高版本中AudioContext被强行suspend的问题\r\n// @ts-ignore;\r\nif (typeof AudioContext !== \"undefined\" || typeof webkitAudioContext !== \"undefined\") {\r\n  const resumeAudio = function () {\r\n    if (!MusicVisualizer.ac) return;\r\n    MusicVisualizer.ac.state === \"suspended\" && MusicVisualizer.ac.resume();\r\n    document.removeEventListener(\"click\", resumeAudio);\r\n  };\r\n  document.addEventListener(\"click\", resumeAudio);\r\n}\r\n\r\n","<template>\r\n  <div class=\"nav-bar\" :class=\"{active: active}\" @click=\"active =! active\">\r\n    <ul>\r\n      <li v-for=\"(item, index) in navList\" @click.stop=\"item.callback && item.callback()\">{{item.name}}</li>\r\n      <slot></slot>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n\r\n  export default {\r\n    name: 'BalanceView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList',\r\n    ],\r\n    data() {\r\n      return {\r\n        balanceTrack: this.modifyManager.balanceTrack,\r\n        searchText: '',\r\n        active: false,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n    },\r\n    methods: {\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .nav-bar {\r\n    position: fixed;\r\n    top: 0;\r\n    right: 0;\r\n    width: 60px;\r\n    height: 60px;\r\n    padding-right: 60px;\r\n    overflow: hidden;\r\n    z-index: 3010;\r\n    transition: all .3s;\r\n    background-color: rgba(255,255,255,.3);\r\n    &.active{\r\n      width: 100%;\r\n    }\r\n    ul{\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      /deep/li{\r\n        display: flex;\r\n        height: 60px;\r\n        padding: 0 10px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        white-space: nowrap;\r\n        background-color: rgba(255,255,255,.3);\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./NavBar.vue?vue&type=template&id=6662a141&scoped=true\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=6662a141&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6662a141\"\n\nexport default script","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n\r\n  import {ajax} from \"../../proxy/http\";\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import {ListBox} from \"../units/ListBox\";\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'MusicSearchBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      const tabs = new ListBox();\r\n      const lrcs = new ListBox();\r\n      const sheet = new ListBox({\r\n        play: (message) => this.play(message),\r\n      });\r\n      const sheetList = new ListBox({\r\n        play: () => {\r\n          ajax.playlistDetail({id: this.sheetList.list[this.sheetList.current].id})(res => {\r\n            this.sheet.setList(res.playlist.tracks, true);\r\n          });\r\n        },\r\n      });\r\n      tabs.setList([sheetList, sheet, lrcs]);\r\n\r\n      return {\r\n        config: {\r\n          type: 'listBox',\r\n          name: '网易云音乐',\r\n          tabs,\r\n          searchText: '',\r\n          focusKey: 'q',\r\n          search: () => this.search()\r\n        },\r\n        currentTime: 0,\r\n        timer: null,\r\n        tabs,\r\n        lrcs,\r\n        sheet,\r\n        sheetList,\r\n        account: null,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n      \"lrcs.current\"() {\r\n        const {list, current} = this.lrcs;\r\n        this.modifyManager.commonOptions.changeBG_When_LRC_Changed && this.musicConfig.changePic();\r\n        this.musicConfig.setLrc(list[current] && list[current].name || '');\r\n      },\r\n      currentTime: {\r\n        immediate: true,\r\n        handler() {\r\n          const currentTime = this.mv.$audio.currentTime;\r\n          this.gameList.currentTime = currentTime * 1000;\r\n          const index = parseInt(currentTime * 10);\r\n          let curIndex = 0;\r\n          this.lrcs.list.some((item, _index) => {\r\n            if (item.time <= index) {\r\n              curIndex = _index\r\n            }\r\n            return item.time > index;\r\n          });\r\n          this.lrcs.setIndex(curIndex);\r\n        }\r\n      },\r\n      account: {\r\n        immediate: true,\r\n        handler() {\r\n          if (this.account) {\r\n            this.getUserSongList();\r\n          }\r\n        },\r\n      }\r\n    },\r\n    methods: {\r\n      getLrc() {\r\n        const song = this.sheet.list[this.sheet.current];\r\n        if (song) {\r\n          ajax.lyric({id: song.id || song.songId})(res => {\r\n            const lrcList = res.lrc.lyric.split(/\\n/).map(item => {\r\n              const info = item.match(/(?:\\[)(\\d+)(?::)([^\\]]+)(?:\\])([^\\[\\]]*)/);\r\n              // 转成百毫秒数\r\n              return {name: info ? info[3] : \"\", time: info ? parseInt((+info[1] * 60 + +info[2]) * 10) : 0,}\r\n            });\r\n            this.lrcs.setList(lrcList);\r\n          });\r\n          this.lrcs.setList([]);\r\n        }\r\n\r\n      },\r\n      login() {\r\n        localStorage.setItem('userPhone', '16621079485')\r\n        localStorage.setItem('password', 'a13789')\r\n        const user = {phone: localStorage.getItem('userPhone'), password: localStorage.getItem('password'),};\r\n        if (!user.password || !user.password) {\r\n          ShortCut.toast(['正式环境位开放远程歌曲']);\r\n          setTimeout(() => {\r\n            ShortCut.toast(['请使用测试歌曲']);\r\n          }, 600);\r\n          return;\r\n        }\r\n        ajax.loginCellphone(user)(res => {\r\n          this.account = res.account;\r\n          this.getMySheets();\r\n        });\r\n      },\r\n      getImgUrl(song) {\r\n        return song && (song.coverImgUrl || song.al && song.al.picUrl || song.album && song.album.picUrl);\r\n      },\r\n      getSongUrl() {\r\n        const {mv} = this;\r\n        const song = this.sheet.list[this.sheet.current];\r\n        if (song) {\r\n          this.gameList.durationTime = mv.duration = mv.duration = song.duration || song.dt;\r\n          ajax.songUrl({id: song.id})(res => {\r\n            mv.play(res.data[0].url);\r\n          });\r\n        }\r\n\r\n      },\r\n      play(message) {\r\n        const {gameList, mv} = this;\r\n        const play = () => {\r\n          gameList.startSong();\r\n          mv.stopType = message;\r\n          this.getSongUrl();\r\n          this.getLrc();\r\n          this.tabs.setIndex(1);\r\n          // 清除输入\r\n          this.config.searchText = \"\";\r\n        };\r\n        if (mv.$audio.paused){\r\n          play()\r\n        } else {\r\n          mv.$audio.pause();\r\n          setTimeout(() => {\r\n            play()\r\n          }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n        }\r\n\r\n      },\r\n      getUserSongList() {\r\n        ajax.userPlaylist({uid: this.account.id})(res => {\r\n          this.sheetList.setList(res.playlist, true);\r\n        });\r\n      },\r\n      getMySheets() {\r\n        ajax.recommendSongs()(res => {\r\n          this.sheet.setList(res.recommend || []);\r\n        });\r\n      },\r\n      like(){\r\n        const song = this.sheet.list[this.sheet.current];\r\n        const sheet = this.sheetList.list[0];\r\n\r\n        sheet && song && ajax.playlistTracks({\r\n          op: 'add',\r\n          pid: sheet.id,\r\n          tracks: song.id\r\n        })(res => {\r\n          console.log('like');\r\n        });\r\n      },\r\n      // 搜索\r\n      search() {\r\n        this.config.searchText && ajax.search({keywords: this.config.searchText})(res => {\r\n          this.sheet.setList(res.result.songs, true);\r\n          this.config.searchText = '';\r\n        })\r\n      },\r\n    },\r\n    beforeDestory() {\r\n      clearInterval(this.timer);\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv} = this;\r\n      musicConfig.ended = () => {\r\n        setTimeout(() => {\r\n          gameList.endSong();\r\n          setTimeout(() => {\r\n            this.sheet.next();\r\n            this.sheet.play();\r\n          }, 5000);\r\n        }, mv.delay.delayTime.value * 1000 + gameList.buffer + 1000)\r\n      };\r\n      this.timer = setInterval(() => (this.currentTime = Date.now()), 50);\r\n      this.login();\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          left: () => {\r\n            const nextTime = mv.$audio.currentTime - 5;\r\n            mv.$audio.currentTime = nextTime>=0 ? nextTime : 0;\r\n          },\r\n          right: () => {\r\n            const nextTime = mv.$audio.currentTime + 5;\r\n            mv.$audio.currentTime = nextTime <= mv.$audio.duration ? nextTime : mv.$audio.duration;\r\n          },\r\n          p: () => mv.$audio.paused ? mv.$audio.play() : mv.$audio.pause(),\r\n        },\r\n        ctrl: {\r\n          left: () => musicConfig.changePic(true),\r\n          right: () => musicConfig.changePic(),\r\n        }\r\n      }, {\r\n        alt: {\r\n          left: `退后5s`,\r\n          right: `前进5s`,\r\n          p: `暂停/播放`,\r\n        },\r\n        ctrl: {\r\n          left: `上一张图片`,\r\n          right: `下一张图片`,\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n\r\n\r\n</style>\r\n","export default [\"album.js\",\"artists.js\",\"artist_album.js\",\"artist_desc.js\",\"artist_list.js\",\"artist_mv.js\",\"artist_sub.js\",\"artist_sublist.js\",\"banner.js\",\"check_music.js\",\"comment.js\",\"comment_album.js\",\"comment_dj.js\",\"comment_hot.js\",\"comment_like.js\",\"comment_music.js\",\"comment_mv.js\",\"comment_playlist.js\",\"comment_video.js\",\"daily_signin.js\",\"dj_catelist.js\",\"dj_detail.js\",\"dj_hot.js\",\"dj_paygift.js\",\"dj_program.js\",\"dj_program_detail.js\",\"dj_recommend.js\",\"dj_recommend_type.js\",\"dj_sub.js\",\"dj_sublist.js\",\"event.js\",\"fm_trash.js\",\"follow.js\",\"like.js\",\"likelist.js\",\"login.js\",\"login_cellphone.js\",\"login_refresh.js\",\"login_status.js\",\"logout.js\",\"lyric.js\",\"mv_detail.js\",\"mv_first.js\",\"mv_sub.js\",\"mv_url.js\",\"personalized.js\",\"personalized_djprogram.js\",\"personalized_mv.js\",\"personalized_newsong.js\",\"personalized_privatecontent.js\",\"personal_fm.js\",\"playlist_catlist.js\",\"playlist_create.js\",\"playlist_detail.js\",\"playlist_hot.js\",\"playlist_subscribe.js\",\"playlist_tracks.js\",\"playlist_update.js\",\"program_recommend.js\",\"recommend_resource.js\",\"recommend_songs.js\",\"related_allvideo.js\",\"related_playlist.js\",\"resource_like.js\",\"search.js\",\"search_hot.js\",\"search_multimatch.js\",\"search_suggest.js\",\"send_playlist.js\",\"send_text.js\",\"simi_artist.js\",\"simi_mv.js\",\"simi_playlist.js\",\"simi_song.js\",\"simi_user.js\",\"song_detail.js\",\"song_url.js\",\"toplist.js\",\"toplist_artist.js\",\"toplist_detail.js\",\"top_album.js\",\"top_artists.js\",\"top_list.js\",\"top_mv.js\",\"top_playlist.js\",\"top_playlist_highquality.js\",\"top_song.js\",\"user_audio.js\",\"user_cloud.js\",\"user_cloud_search.js\",\"user_detail.js\",\"user_dj.js\",\"user_event.js\",\"user_followeds.js\",\"user_follows.js\",\"user_playlist.js\",\"user_record.js\",\"user_subcount.js\",\"user_update.js\",\"video_detail.js\",\"video_sub.js\",\"video_url.js\",\"weblog.js\"]","// const fs = require(\"fs\");\r\n// const path = require(\"path\");\r\n\r\nfunction makeAjax(url) {\r\n  return function (data) {\r\n    const cb = {fn: null, then: fn => (cb.fn = fn)}\r\n    const fullUrl = `${location.protocol}//${location.hostname}:3000` + url + (data ? (\"?\" + Object.keys(data).map(item => item + \"=\" + data[item]).join(\"&\")) : \"\");\r\n    fetch(encodeURI(fullUrl), {\r\n      xhrFields: {withCredentials: true},\r\n      credentials: 'include'\r\n    }).then(res => {\r\n      res.json().then(res => cb.fn && cb.fn(res)).catch(e => console.log(e));\r\n    });\r\n    return fn => cb.fn = fn;\r\n  }\r\n}\r\n\r\nconst special = {\r\n  'daily_signin.js': '/daily_signin',\r\n  'fm_trash.js': '/fm_trash',\r\n  'personal_fm.js': '/personal_fm'\r\n}\r\nexport const ajax = {};\r\n\r\nfunction camel(str) {\r\n  return str.replace(/\\//, \"\")\r\n    .split(/\\//)\r\n    .map((item, index) =>\r\n      index ?\r\n        (item[0].toUpperCase() + item.slice(1)) :\r\n        item\r\n    ).join(\"\");\r\n}\r\nimport httpConf from './httpConf.js';\r\nhttpConf.forEach(file => {\r\n  if (!(/\\.js$/i.test(file))) return;\r\n  let route = (file in special) ? special[file] : '/' + file.replace(/\\.js$/i, '').replace(/_/g, '/');\r\n  ajax[camel(route)] = makeAjax(route)\r\n});\r\n\r\n","interface IListBoxOption {\r\n\r\n  play?: Function;\r\n  playing?: number;\r\n  current?: number;\r\n}\r\n\r\nexport class ListBox {\r\n  play?: Function;\r\n  playing: number = 0;\r\n  current: number = 0;\r\n  list: (ListBox|Object)[];\r\n  constructor(options: IListBoxOption = {}) {\r\n    // @ts-ignore;\r\n    Object.keys(options).forEach(key => this[key] = options[key]);\r\n    this.play = () => this;\r\n    if (options.play) {\r\n      this.play = () => {\r\n        options.play && options.play(...arguments);\r\n        this.playing = this.current;\r\n      }\r\n    }\r\n    this.list = [];\r\n    this.playing = 0;\r\n    this.current = 0;\r\n  }\r\n\r\n  get len() {\r\n    return this.list.length;\r\n  }\r\n\r\n  setList(list: (ListBox|Object)[], shallPlay?: boolean) {\r\n    this.list = list;\r\n    this.current = 0;\r\n    if (shallPlay) this.play && this.play();\r\n    return this;\r\n  }\r\n\r\n  setIndex(index: number) {\r\n    if (index > this.len - 1) index = this.len - 1;\r\n    if (index < 0) index = 0;\r\n    this.current = index;\r\n    return this;\r\n  }\r\n\r\n  prev() {\r\n    this.current = (this.current - 1 + this.len) % this.len;\r\n    return this;\r\n  }\r\n\r\n  next() {\r\n    this.current = (this.current + 1) % this.len;\r\n    return this;\r\n  }\r\n}\r\n","<template>\r\n  <label :for=\"id\" class=\"music-wrap\" :class=\"{focus: isFocus}\">\r\n    <div class=\"search-box\" :class=\"{focus: isFocus}\">\r\n      <input :id=\"id\" ref=\"input\" type=\"text\" v-model=\"config.searchText\" placeholder=\"网易云音乐\" @focus=\"focus\" @blur=\"blur\">\r\n    </div>\r\n    <div class=\"music-lists\">\r\n      <div\r\n        class=\"song-list\"\r\n        v-for=\"(tabItem, index) in config.tabs.list\"\r\n        :class=\"{\r\n          prev: index === (tabs.current - 1 + tabs.list.length) % tabs.list.length,\r\n          active: index === tabs.current,\r\n          next: index === (tabs.current + 1) % tabs.list.length,\r\n        }\"\r\n      >\r\n        <span\r\n          v-if=\"getImgUrl(tabItem.list[tabItem.current])\"\r\n          :style=\"{backgroundImage: `url('${getImgUrl(tabItem.list[tabItem.current])}')`}\"\r\n        ></span>\r\n        <div>\r\n          <ul\r\n            :style=\"{transform: `translateY(-${30 * tabItem.current}px)`}\">\r\n            <li\r\n              v-for=\"(song, _index) in tabItem.list\"\r\n              :class=\"{active: tabItem.current === _index, playing: tabItem.playing === _index}\"\r\n            >\r\n              <span @click.stop=\"tabItem.setIndex(_index).play()\">\r\n                <img :src=\"getImgUrl(song)\" v-if=\"getImgUrl(song)\"/>\r\n                {{ song.name }}\r\n                <template v-if=\"config.type === 'modify' && index === 1\">\r\n                  &nbsp;&nbsp;\r\n                  {{ tabItem.list[_index].value }} /\r\n                  {{ tabItem.list[_index].min }} /\r\n                  {{ tabItem.list[_index].max }}\r\n                  &nbsp;&nbsp;当前/最小/最大\r\n                </template>\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"music-lists-prev\" @click.stop=\"tabs.prev()\"> prev </div>\r\n      <div class=\"music-lists-next\" @click.stop=\"tabs.next()\"> next </div>\r\n    </div>\r\n  </label>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n\r\n  export default {\r\n    name: 'ListBoxView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    props: ['config'],\r\n    computed: {\r\n      tabs(){\r\n        return this.config.tabs;\r\n      },\r\n      id(){\r\n        return `ListBoxView_${this.config.focusKey}`;\r\n      }\r\n    },\r\n    watch: {\r\n    },\r\n    data(){\r\n      this.navList.push({\r\n        name: this.config.name,\r\n        id: this.id,\r\n        callback: () => {\r\n          this.$refs.input.focus()\r\n        }\r\n      });\r\n      return {\r\n        isFocus: false\r\n      }\r\n    },\r\n    methods: {\r\n      focus(){\r\n        const time = this.isFocus_ = Date.now();\r\n        setTimeout(() => {\r\n          time === this.isFocus_ && (this.isFocus = true);\r\n        }, 300)\r\n      },\r\n      blur(){\r\n        const time = this.isFocus_ = Date.now();\r\n        setTimeout(() => {\r\n          time === this.isFocus_ && (this.isFocus = false);\r\n        }, 300)\r\n      },\r\n      getImgUrl(song) {\r\n        return song && (song.coverImgUrl || song.al && song.al.picUrl || song.album && song.album.picUrl);\r\n      },\r\n    },\r\n    beforeDestory() {\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv, config} = this;\r\n      this.$shortCut = new ShortCut();\r\n\r\n      config.type === 'modify' && this.$shortCut.init(this.$refs.input, {\r\n        common: {\r\n          w: () => config.tabs.up(),\r\n          s: () => config.tabs.down(),\r\n          q: () => config.tabs.prev(),\r\n          e: () => config.tabs.next(),\r\n          // enter: () => this.search(),\r\n          107: () => config.tabs.add(),\r\n          delete: () => config.tabs.delete(),\r\n          c: () => config.tabs.copy(),\r\n          4: () => config.tabs.dec(),\r\n          6: () => config.tabs.enc(),\r\n          left: () => config.tabs.dec(),\r\n          right: () => config.tabs.enc(),\r\n          a: () => config.tabs.dec(),\r\n          d: () => config.tabs.enc(),\r\n          8: () => config.tabs.prevItem(),\r\n          2: () => config.tabs.nextItem(),\r\n          up: () => config.tabs.prevItem(),\r\n          down: () => config.tabs.nextItem(),\r\n          esc: () => this.$refs.input.blur(),\r\n        },\r\n        alt: {},\r\n        shift: {},\r\n        ctrl: {}\r\n      }, {\r\n        common: {\r\n          w: `上一项`,\r\n          s: `下一项`,\r\n          q: `左翻页`,\r\n          e: `右翻页`,\r\n          107: `添加配置`,\r\n          delete: `删除配置`,\r\n          c: `复制当前配置`,\r\n          4: `参数小`,\r\n          6: `参数大`,\r\n          left: `参数小`,\r\n          right: `参数大`,\r\n          a: `参数小`,\r\n          d: `参数大`,\r\n          8: `上一项`,\r\n          2: `下一项`,\r\n          up: `上一项`,\r\n          down: `下一项`,\r\n          esc: `关闭配置页面`,\r\n        },\r\n        alt: {},\r\n        shift: {},\r\n        ctrl: {}\r\n      });\r\n\r\n\r\n      config.type === 'listBox' && this.$shortCut.init(this.$refs.input, {\r\n        common: {\r\n          up: () => config.tabs.list[config.tabs.current].prev(),\r\n          down: () => config.tabs.list[config.tabs.current].next(),\r\n          left: () => config.searchText || config.tabs.prev(),\r\n          right: () => config.searchText || config.tabs.next(),\r\n          enter: () => config.search && config.searchText ? config.search() : config.tabs.list[config.tabs.current].play('manual'),\r\n          backspace: () => config.searchText || config.tabs.current && config.tabs.prev(),\r\n          esc: () => this.$refs.input.blur(),\r\n        },\r\n      }, {\r\n        common: {\r\n          up: `上一项`,\r\n          down: `下一项`,\r\n          left: `上一页`,\r\n          right: `上一页`,\r\n          enter: `搜索|播放|确认`,\r\n          backspace: `删除|返回上一页`,\r\n          esc: `关闭页面`,\r\n        },\r\n      });\r\n\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          [this.config.focusKey]: () => {\r\n            this.$refs.input.focus()\r\n          },\r\n        },\r\n      }, {\r\n        alt: {\r\n          [this.config.focusKey]: `打开页面`,\r\n        },\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n  .music-wrap {\r\n    user-select: none;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    transform-origin: center center;\r\n    transform: translate(-50%, -50%) scale(0.7, 0.7);\r\n    opacity: 0;\r\n    transition: all 1s;\r\n    will-change: opacity, transform, background-color;\r\n\r\n    &::before {\r\n      content: '';\r\n      display: block;\r\n      width: 400%;\r\n      height: 400%;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      background-color: rgba(0, 0, 0, 0.9);\r\n    }\r\n\r\n    .music-lists {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      height: 50%;\r\n      width: 40%;\r\n      .music-lists-prev,\r\n      .music-lists-next{\r\n        position: absolute;\r\n        top: 0;\r\n        height: 40px;\r\n        background-color: rgba(255,255,255,0.3);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 0 10px;\r\n        z-index: 4;\r\n      }\r\n      .music-lists-prev{\r\n        right: 100%;\r\n      }\r\n      .music-lists-next{\r\n        left: 100%;\r\n      }\r\n      .song-list {\r\n        background-color: #222;\r\n        position: absolute;\r\n        left: 50%;\r\n        top: 50%;\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        padding: 20px;\r\n        justify-content: center;\r\n        transition: all .3s;\r\n        border: 0;\r\n\r\n        > span {\r\n          display: block;\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          width: 100%;\r\n          height: 100%;\r\n          background-size: cover;\r\n          background-repeat: no-repeat;\r\n          background-position: center center;\r\n          opacity: 0.5;\r\n          filter: blur(0px);\r\n          transition: all 0.4s;\r\n          will-change: opacity;\r\n        }\r\n\r\n        img {\r\n          position: relative;\r\n          opacity: 1;\r\n          width: 14px;\r\n          height: 14px;\r\n          margin-right: 6px;\r\n          border-radius: 4px;\r\n          border: 0;\r\n        }\r\n\r\n        ul {\r\n          position: relative;\r\n          transform: translateX(-100%);\r\n          top: 50%;\r\n          transition: all 1s;\r\n          opacity: 0;\r\n          transform-origin: top;\r\n\r\n          li {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            white-space: nowrap;\r\n            color: #fff;\r\n            font-size: 16px;\r\n            line-height: 30px;\r\n            height: 30px;\r\n            width: 100%;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            transform: translate(0, 0, 0);\r\n            text-shadow: 0 4px 4px #000;\r\n            will-change: transform;\r\n\r\n            span {\r\n              transform: translateY(0) scale(0.6, 0.6);\r\n              transition: all 1s;\r\n              will-change: transform;\r\n            }\r\n\r\n            &.active {\r\n              opacity: 1;\r\n\r\n              span {\r\n                transform: translateY(0) scale(1, 1);\r\n              }\r\n            }\r\n\r\n            &.playing {\r\n              span {\r\n                transform: translateY(0) scale(0.9, 0.9);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        &.prev {\r\n          z-index: 1;\r\n          border-radius: 50% 0 0 50%;\r\n          transform: translate(-100%, -50%) scale(.8, .8);\r\n        }\r\n\r\n\r\n\r\n        &.next {\r\n          z-index: 2;\r\n          border-radius: 0 50% 50% 0;\r\n          transform: translate(0, -50%) scale(.8, .8);\r\n        }\r\n        &:only-child,\r\n        &.active {\r\n          z-index: 3;\r\n          border-radius: 10%;\r\n          transform: translate(-50%, -50%);\r\n          > span {\r\n            opacity: .8;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.focus {\r\n      z-index: 3009 !important;\r\n      opacity: 1;\r\n      transform: translate(-50%, -50%) scale(1, 1);\r\n\r\n      .song-list {\r\n\r\n        ul {\r\n          opacity: 0.5;\r\n        }\r\n\r\n        &.active {\r\n          opacity: 1;\r\n\r\n          ul {\r\n            opacity: 1;\r\n            transform: translateX(0);\r\n          }\r\n        }\r\n\r\n        > div {\r\n          height: 100%;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .search-box {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    display: flex;\r\n    align-items: flex-end;\r\n    justify-content: center;\r\n    height: 10%;\r\n    overflow: hidden;\r\n\r\n    input {\r\n      text-align: right;\r\n      border: 0;\r\n      padding: 0 20px;\r\n      outline: 0;\r\n      color: #fff;\r\n      font-size: 52px;\r\n      text-shadow: 0 0 8px #ffa800;\r\n      background-color: transparent;\r\n\r\n      &::-webkit-input-placeholder {\r\n        color: rgba(255, 255, 255, 0.8);\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./ListBoxView.vue?vue&type=template&id=1edde2f6\"\nimport script from \"./ListBoxView.vue?vue&type=script&lang=js\"\nexport * from \"./ListBoxView.vue?vue&type=script&lang=js\"\n\nimport \"./ListBoxView.vue?vue&type=style&index=0&id=1edde2f6&lang=less\"\nscript.render = render\n\nexport default script","import { render } from \"./MusicSearchBox.vue?vue&type=template&id=2413f72e\"\nimport script from \"./MusicSearchBox.vue?vue&type=script&lang=js\"\nexport * from \"./MusicSearchBox.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n  import {shortCut, ShortCut} from \"../tools/ShortCut\";\r\n  import {ListBox} from \"../units/ListBox\";\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'MusicLocalBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'navList'\r\n    ],\r\n    data() {\r\n      const tabs = new ListBox();\r\n      const songList = new ListBox({\r\n        play: () => {\r\n          this.play()\r\n        },\r\n      });\r\n      tabs.setList([songList]);\r\n      songList.setList([{name: 'testSong', url: './sound/testSound.mp3'}]);\r\n\r\n      return {\r\n        config: {\r\n          type: 'listBox',\r\n          name: '测试歌曲',\r\n          tabs,\r\n          searchText: '',\r\n          focusKey: 'e',\r\n        },\r\n        tabs,\r\n        songList,\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n    },\r\n    methods: {\r\n      play(message) {\r\n        const {gameList, mv} = this;\r\n        const play = () => {\r\n          gameList.startSong();\r\n          mv.stopType = message;\r\n          mv.play(this.songList.list[this.songList.current].url);\r\n          // 清除输入\r\n          this.searchText = \"\";\r\n        };\r\n        if (mv.$audio.paused){\r\n          play()\r\n        } else {\r\n          mv.$audio.pause();\r\n          setTimeout(() => {\r\n            play()\r\n          }, mv.delay.delayTime.value * 1000 + gameList.buffer)\r\n        }\r\n\r\n      },\r\n    },\r\n    mounted() {\r\n      const {musicConfig, gameList, mv} = this;\r\n      musicConfig.ended = () => {\r\n        setTimeout(() => {\r\n          gameList.endSong();\r\n          setTimeout(() => {\r\n            this.songList.next();\r\n            this.songList.play();\r\n          }, 5000);\r\n        }, mv.delay.delayTime.value * 1000 + gameList.buffer + 1000)\r\n      };\r\n\r\n      shortCut.init(undefined, {\r\n        alt: {\r\n          left: () => {\r\n            const nextTime = mv.$audio.currentTime - 5;\r\n            mv.$audio.currentTime = nextTime>=0 ? nextTime : 0;\r\n          },\r\n          right: () => {\r\n            const nextTime = mv.$audio.currentTime + 5;\r\n            mv.$audio.currentTime = nextTime <= mv.$audio.duration ? nextTime : mv.$audio.duration;\r\n          },\r\n          p: () => mv.$audio.paused ? mv.$audio.play() : mv.$audio.pause(),\r\n        },\r\n        ctrl: {\r\n        }\r\n      }, {\r\n        alt: {\r\n          left: `退后5s`,\r\n          right: `前进5s`,\r\n          p: `暂停/播放`,\r\n        },\r\n        ctrl: {\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\">\r\n</style>\r\n","import { render } from \"./MusicLocalBox.vue?vue&type=template&id=e5e03e44\"\nimport script from \"./MusicLocalBox.vue?vue&type=script&lang=js\"\nexport * from \"./MusicLocalBox.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <ListBoxView :config=\"config\"></ListBoxView>\r\n</template>\r\n<script>\r\n  import ListBoxView from \"./ListBoxView\";\r\n\r\n  export default {\r\n    name: 'ModifyBox',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {\r\n      ListBoxView\r\n    },\r\n    mixins: [],\r\n    inject: ['modifyManager', 'navList'],\r\n    data() {\r\n      return {\r\n        config: {\r\n          type: 'modify',\r\n          name: '参数调整',\r\n          tabs: this.modifyManager,\r\n          searchText: '',\r\n          focusKey: 'w',\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    watch: {},\r\n    methods: {\r\n      search() {\r\n      },\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .music-wrap {\r\n    .song-list {\r\n      background-color: rgba(34, 34, 34, 0.8);\r\n    }\r\n\r\n    &::before {\r\n      background-color: rgba(0, 0, 0, 0);\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./ModifyBox.vue?vue&type=template&id=59e8abba&scoped=true\"\nimport script from \"./ModifyBox.vue?vue&type=script&lang=js\"\nexport * from \"./ModifyBox.vue?vue&type=script&lang=js\"\n\nimport \"./ModifyBox.vue?vue&type=style&index=0&id=59e8abba&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-59e8abba\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'CanvasView',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0, height: 0,\r\n      }\r\n    },\r\n    computed: {\r\n    },\r\n    props: ['config'],\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        deep: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          // this.$canvas && this.ctx && this.renderCanvas()\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n        const canvasConfig = this.config;\r\n        this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n        this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n        mv.size = canvasConfig.dataSize * 8;\r\n\r\n        const {height, width, ctx, viewCtx} = this;\r\n\r\n        const {originData, realTimeData, calculateColors} = musicData;\r\n\r\n        const {avrLevel, data} = realTimeData;\r\n        const dataBefore = originData.data;\r\n\r\n        // 拷贝并反向数据\r\n        const data1 = [...(canvasConfig.copyData ? data : [])];\r\n        data1.reverse();\r\n\r\n        let dataBefore_= [];\r\n        if (canvasConfig.showDataBefore) {\r\n          const data2 = [...(canvasConfig.copyData ? dataBefore : [])];\r\n          data2.reverse();\r\n          dataBefore_ = [...dataBefore, ...data2];\r\n          dataBefore_.reverse();\r\n        }\r\n\r\n        const renderData = [...data, ...data1, ...dataBefore_].filter(i=> canvasConfig.noZero ? i : true);\r\n        const {currentImgAviColor,  mouseMoveConf} = musicConfig;\r\n\r\n        const baseSize = [Math.min(height, width), Math.max(height, width)][canvasConfig.baseSizeType];\r\n\r\n        const midPosition = {\r\n          x: width * canvasConfig.midPositionX / 100,\r\n          y: height * canvasConfig.midPositionY / 100,\r\n        };\r\n\r\n        const mainRadius = baseSize * canvasConfig.mainRadius / 100 * (\r\n          100 - canvasConfig.avrLevelMainRadiusModify +\r\n          canvasConfig.avrLevelMainRadiusModify * avrLevel / 256\r\n        ) / 100;\r\n\r\n        const floatRange = baseSize * canvasConfig.floatRange / 100 * (\r\n          100 - canvasConfig.avrLevelFloatRangeModify +\r\n          canvasConfig.avrLevelFloatRangeModify * avrLevel / 256\r\n        ) / 100;\r\n\r\n        // 绘制背景色 // 半透明 是想保留一部分之前的绘制；\r\n        ctx.fillStyle = `rgba(0, 0, 0, ${canvasConfig.disable ? 1 : (1 - canvasConfig.clearPrevView / 100)})`;\r\n        ctx.fillRect(0, 0, this.width, this.height);\r\n\r\n        ctx.clearRect(0, 0, width, height);\r\n        viewCtx.clearRect(0, 0, width, height);\r\n\r\n        if (canvasConfig.disable) {\r\n          viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n          return;\r\n        }\r\n\r\n\r\n        // 中心区域园\r\n        ctx.fillStyle = ctx.strokeStyle = `rgba(${calculateColors[0].join(', ')}, ${canvasConfig.mainRadiusOpacity / 100})`;\r\n        ctx.lineWidth = baseSize * canvasConfig.mainRadiusLineWidth / 1000;\r\n        ctx.beginPath();\r\n        if (canvasConfig.direction === 0) {\r\n          ctx.arc(midPosition.x, midPosition.y, mainRadius, 0, 2 * Math.PI);\r\n        } else {\r\n\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n\r\n\r\n        const len = renderData.length || 1; // 防 除以0 报错；\r\n        const perDeg = Math.PI * 2 / (len || 1) * canvasConfig.stepModify / 10;\r\n\r\n        const halfPerDeg = perDeg / 2;\r\n        const rotate = Math.PI * 0;\r\n\r\n        ctx.lineWidth = baseSize * canvasConfig.lineLineWidth / 1000;\r\n        const rate = canvasConfig.dataModify / 10;\r\n        const offset = 1 + canvasConfig.dataOffsetModify / 100;\r\n        ctx.closePath();\r\n        const length  = renderData.length;\r\n        const minHeight =  canvasConfig.minHeightModify / 100;\r\n        renderData.forEach((val, index) => {\r\n\r\n          val = val / 256 + minHeight;\r\n          const  nextVal = renderData[(index + 1) % length] / 256 + minHeight;\r\n          const deg = perDeg * index + rotate;\r\n\r\n          function lin1() {\r\n            const _x = (index - len/2) * canvasConfig.stepModify;\r\n            // x, y;\r\n            const point1 = [\r\n              [\r\n                Math.sin(deg) * (val * rate  + offset * mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (val * rate  + offset * mainRadius)+ midPosition.y\r\n              ], [\r\n                midPosition.x + _x,\r\n                -(val * rate  + offset * mainRadius)+ midPosition.y,\r\n              ]\r\n            ][canvasConfig.direction];\r\n            const point2 = [\r\n              [\r\n                Math.sin(deg) * (val * rate * floatRange * 3 + offset*mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y\r\n              ],[\r\n                midPosition.x + _x,\r\n                -(val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y,\r\n              ]\r\n            ][canvasConfig.direction];\r\n            const lr = ctx.createLinearGradient(\r\n              point1[0],\r\n              point1[1],\r\n              point2[0],\r\n              point2[1],\r\n            );\r\n            lr.addColorStop(1, `rgba(${calculateColors[0].join(', ')}, 1)`);\r\n            lr.addColorStop(.75, `rgba(${calculateColors[1].join(', ')}, 1)`);\r\n            lr.addColorStop(0, `rgba(${calculateColors[1].join(', ')}, 1)`);\r\n            ctx.strokeStyle = lr;\r\n            ctx.beginPath();\r\n            ctx.moveTo(point1[0], point1[1]);\r\n            ctx.lineTo(point2[0], point2[1]);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n\r\n          const edge = val * rate * floatRange * 3+ mainRadius;\r\n          function line(){\r\n            ctx.strokeStyle = `rgba(${calculateColors[1].join(', ')}, ${avrLevel * 2/255 + 0.25})`;\r\n            const nextEdge = nextVal * rate * floatRange * 3 + mainRadius;\r\n            ctx.beginPath();\r\n            ctx.moveTo(\r\n              Math.sin(deg) *edge + midPosition.x,\r\n              Math.cos(deg) * edge+ midPosition.y\r\n            );\r\n            ctx.bezierCurveTo(\r\n              Math.sin(deg+perDeg/3) * edge + midPosition.x,\r\n              Math.cos(deg+perDeg/3) * edge+ midPosition.y,\r\n              Math.sin(deg+perDeg/3*2) * nextEdge + midPosition.x,\r\n              Math.cos(deg+perDeg/3*2) * nextEdge+ midPosition.y,\r\n              Math.sin(deg+perDeg) * nextEdge + midPosition.x,\r\n              Math.cos(deg+perDeg) * nextEdge+ midPosition.y,\r\n            );\r\n\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n          // lin1();\r\n          // line();\r\n          // dot();\r\n\r\n          ;[\r\n            lin1,\r\n            line,\r\n            rect,\r\n            dot\r\n          ][canvasConfig.renderType]()\r\n\r\n          function dot() {\r\n            ctx.fillStyle = `rgba(${calculateColors[1].join(', ')}, 1)`;\r\n            ctx.beginPath();\r\n\r\n            const _x = (index - len/2) * canvasConfig.stepModify + midPosition.x;\r\n            const position =[\r\n              [\r\n                Math.sin(deg) * edge + midPosition.x,\r\n                Math.cos(deg) * edge+ midPosition.y,\r\n              ],[\r\n                _x,\r\n                -(val * rate * floatRange * 3 + offset*mainRadius)+ midPosition.y\r\n              ]\r\n            ][canvasConfig.direction] || [];\r\n            const x = position[0];\r\n            const y = position[1];\r\n            ctx.arc(\r\n              x, y,\r\n              baseSize * canvasConfig.lineLineWidth / 1000,\r\n              0, 2 * Math.PI\r\n            );\r\n            ctx.closePath();\r\n            ctx.fill();\r\n          }\r\n          function rect() {\r\n            ctx.strokeStyle = `rgba(${calculateColors[1].join(', ')}, 1)`;\r\n            ctx.beginPath();\r\n            let renderVal = (val * rate  - canvasConfig.threshold / 10) * floatRange;\r\n            renderVal < 0 &&(renderVal = 0);\r\n            const dots = [\r\n              [ // 左\r\n                Math.sin(deg-halfPerDeg) * (mainRadius) + midPosition.x,\r\n                Math.cos(deg-halfPerDeg) * (mainRadius)+ midPosition.y\r\n              ],\r\n              [ // 右\r\n                Math.sin(deg+halfPerDeg) * (mainRadius) + midPosition.x,\r\n                Math.cos(deg+halfPerDeg) * (mainRadius)+ midPosition.y\r\n              ],\r\n              [ // 上\r\n                Math.sin(deg) * (-renderVal+ mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (-renderVal+ mainRadius)+ midPosition.y\r\n              ],\r\n              [ // 下\r\n                Math.sin(deg) * (renderVal+ mainRadius) + midPosition.x,\r\n                Math.cos(deg) * (renderVal+ mainRadius)+ midPosition.y\r\n              ],\r\n            ];\r\n            ;[0,2,1,3,0,2].forEach(item => {\r\n              ctx.lineTo.apply(ctx, dots[item]);\r\n            })\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n          }\r\n        });\r\n        ctx.closePath();\r\n        viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import { render } from \"./CanvasView.vue?vue&type=template&id=4339fdd8&scoped=true\"\nimport script from \"./CanvasView.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasView.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasView.vue?vue&type=style&index=0&id=4339fdd8&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4339fdd8\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random, random} from \"../tools/random\";\r\n  import {PS} from \"../tools/PS\";\r\n\r\n\r\n  export default {\r\n    name: 'CanvasPic',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager',\r\n      'commonOptions_'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        shallMalfunction: 0,\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          this.commonOptions_.CanvasPicMalfunction && (this.shallMalfunction = 2);\r\n        }\r\n      },\r\n\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          this.$canvas && this.ctx && this.renderCanvas();\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n\r\n        const {height, width, ctx, imgCtx, musicConfig, musicData} = this;\r\n        const {realTimeData} = musicData;\r\n        const {avrLevel} = realTimeData;\r\n        ctx.putImageData(musicConfig.getImageData(0, 0, width, height), 0, 0);\r\n\r\n        if (this.shallMalfunction) {\r\n          const list = [0, 1, 2, 3, 4, 5];\r\n\r\n          function blur(id, x, y) {\r\n            return `<filter id=\"${id}\"><feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"${x},${y}\"></feGaussianBlur></filter>`;\r\n          }\r\n          document.querySelector('#svg-all').innerHTML = `<defs>${\r\n            list.map(item => blur(`blur${item * 2}`, 0, item ? avrLevel / 255 / item * 20 : 0)).join('')\r\n          }${\r\n            list.map(item => blur(`blur${item * 2}-v`, item ? avrLevel / 255 / item * 20 : 0, 0)).join('')\r\n          }${\r\n            list.map(item => blur(`blur${item * 2}--45`, item ? avrLevel / 255 / item * 20 : 0, 0)).join('')\r\n          }</defs>`;\r\n        }\r\n        const des = (index_ = 0) => {\r\n\r\n          const w = index_ ? Random.int(width, width / (index_ + index_ * .2)) : width;\r\n          const h = index_ ? Random.int(height, height / (index_ * 5)) : height / 10;\r\n          const x = (width - w) / 2;\r\n          const y = (height - h) / 2 + Random.int(h / 2, 0, true);\r\n\r\n          const imageData = musicConfig.getImageData(x, y, w, h);\r\n          if (!imageData) return;\r\n\r\n          const ps = new PS(imageData);\r\n          const dirR = Random.boolean();\r\n          const max = avrLevel / 4;\r\n\r\n          if (this.shallMalfunction) {\r\n            const fnMap = [\r\n              (off) => ps.aisleOffset('r', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n              (off) => ps.aisleOffset('g', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n              (off) => ps.aisleOffset('b', dirR ? off : 0, dirR ? 0 : off, undefined, Random.int(3, 0)),\r\n            ];\r\n\r\n            const index = Random.int(2, 0);\r\n            fnMap[index](Random.int(max, max / 2, true));\r\n            Random.boolean() && fnMap[(index + 1) % fnMap.length](Random.int(max, max / 3, true));\r\n            Random.boolean() && fnMap[(index + 2) % fnMap.length](Random.int(max, max / 4, true));\r\n            ctx.putImageData(ps.imageData, x + Random.int(20 * index_, 0, true), y + Random.int(10 * index_, 0, true));\r\n          }\r\n          ctx.putImageData(imageData, x, y);\r\n\r\n\r\n        }\r\n        if (musicConfig.picDom && this.shallMalfunction === 2) {\r\n          des(0);\r\n          // des(1);\r\n          // des(2);\r\n        }\r\n\r\n        this.viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n        this.shallMalfunction && (this.shallMalfunction --);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage.width = this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n      this.$canvasImage.height = this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n      this.imgCtx = this.$canvasImage.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 0.4;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","\r\nimport {GetType} from \"@/tools/GetType\";\r\nexport class Random {\r\n  exec() {\r\n    const {max_, min_, sign_} = this;\r\n    return Random.exec(max_, min_, sign_);\r\n  }\r\n  sign() {\r\n    this.sign_ = -1;\r\n    return this;\r\n  }\r\n  min(min) {\r\n    GetType.isNumber(min) && (this.min_ = min);\r\n    return this;\r\n  }\r\n\r\n  max(max) {\r\n    GetType.isNumber(max) && (this.max_ = max);\r\n    return this;\r\n  }\r\n\r\n  int(size, unique) {\r\n    const {max_, min_, sign_,} = this;\r\n    return Random.int(max_, min_, sign_, size, unique)\r\n  }\r\n\r\n  static exec(max_, min_, sign_) {\r\n    let val = Math.random();\r\n    GetType.isNumber(max_) && (val = val * max_);\r\n    GetType.isNumber(min_) && (val = val + min_);\r\n    sign_ && (val = val * -1);\r\n    return val;\r\n  }\r\n\r\n  static int(max = 1, min = 0, sign){\r\n    return (sign && Random.boolean() ? -1 : 1) * Math.round(Math.random() * max + min)\r\n  }\r\n  static boolean() {\r\n    return Math.round(Math.random());\r\n  }\r\n  static time(){\r\n    return Date.now().toString();\r\n  }\r\n  boolean(){\r\n    return  Random.boolean(size, rate)\r\n  }\r\n}\r\n\r\nexport function random() {\r\n  return new Random()\r\n}\r\n\r\n","const aisleMap = {\r\n  r: 0, g: 1, b: 2, a: 3\r\n};\r\ntype TAisleType = keyof typeof aisleMap;\r\n// @ts-ignore;\r\nimport {Random, random} from \"@/tools/random\";\r\nexport class PS {\r\n  aisleMap = aisleMap;\r\n  imageData: ImageData;\r\n\r\n  static cutFnMap: {[index: number]: () => number} = {\r\n    1: () => 255,\r\n    2: () => 0,\r\n    3: () => Random.int(255,0)\r\n  };\r\n  constructor(imageData: ImageData) {\r\n    this.imageData = imageData;\r\n  }\r\n\r\n  getAisle(aisleType: TAisleType, cutType: number = 0) {\r\n    const offset = this.aisleMap[aisleType];\r\n    if (offset === undefined) return [];\r\n    const {data, width, height} = this.imageData;\r\n\r\n    const ret: number[][] = [];\r\n    for (let y = 0; y < height; y++) {\r\n      const line: number[] = [];\r\n      ret.push(line);\r\n      const cur = width * y;\r\n      for (let x = 0; x < width; x++) {\r\n        line.push(data[(cur + x) * 4 + offset]);\r\n        cutType && (data[(cur + x) * 4 + offset] = PS.cutFnMap[cutType] &&  PS.cutFnMap[cutType]() || 255);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  aisleOffset(aisleType: TAisleType, xOffset = 0, yOffset = 0, zoom: number = 1, cutType: number = 0) {\r\n    const offset = this.aisleMap[aisleType];\r\n    if (offset === undefined) return;\r\n    const aisleData = this.getAisle(aisleType, cutType);\r\n    const {data, width, height} = this.imageData;\r\n    for (let y = 0; y < height; y++) {\r\n      const line = aisleData[y + yOffset] || {};\r\n      const cur = width * (y + yOffset) + xOffset;\r\n      for (let x = 0; x < width; x++) {\r\n        data[(cur + x) * 4 + offset] = (line[x] || 0) * zoom;\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { render } from \"./CanvasPic.vue?vue&type=template&id=0226e92a&scoped=true\"\nimport script from \"./CanvasPic.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasPic.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasPic.vue?vue&type=style&index=0&id=0226e92a&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0226e92a\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <div :style=\"textStyle\">Happy new Year!</div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random, random} from \"../tools/random\";\r\n  import {musicConfig} from \"../music/MusicConfig\";\r\n  import {musicData, musicDataFlags} from \"../music/Music\";\r\n  import {PS} from \"../tools/PS\";\r\n\r\n  export default {\r\n    name: 'CanvasText',\r\n    data() {\r\n      return {\r\n        musicDataFlags,\r\n        musicConfig,\r\n        musicData,\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        textStyle: ''\r\n      }\r\n    },\r\n    computed: {},\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          const {realTimeData, calculateColors} = musicData;\r\n          const {avrLevel} = realTimeData;\r\n          const per = avrLevel / 255;\r\n          const rate = Math.round(avrLevel / 255 * 100) + 10;\r\n          const opa = avrLevel / 255 + .75;\r\n          const scale = avrLevel / 255 / 2 + .75;\r\n          this.textStyle = `text-shadow: ${[\r\n            `0 0 ${rate}px #fff`,\r\n            `0 0 ${rate * 2}px #fff`,\r\n            `0 0 ${rate * 3}px #fff`,\r\n            `0 0 ${rate * 4}px #fff`,\r\n            `0 0 ${rate * 5}px #ff5722`,\r\n            `0 0 ${rate * 6}px #ff5722`,\r\n            `0 0 ${rate * 7}px #ff5722`,\r\n            `0 0 ${rate * 8}px #ff5722`,\r\n          ].join(',')}; opacity: ${opa > 1 ? 1 : opa}; transform: translate3d(0,0,0) scale(${scale}, ${scale}) rotate(${Random.exec(per*3, per*-3,)}deg)`;\r\n        }\r\n      }\r\n    },\r\n    methods: {}\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2900;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding-bottom: 40vh;\r\n    font-size: 120px;\r\n    font-family: \"微软雅黑\";\r\n    filter: brightness(110%);\r\n\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    will-change: opacity, box-shadow, transform;\r\n  }\r\n</style>\r\n","import { render } from \"./CanvasTitle.vue?vue&type=template&id=a931abd0&scoped=true\"\nimport script from \"./CanvasTitle.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasTitle.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasTitle.vue?vue&type=style&index=0&id=a931abd0&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a931abd0\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <canvas ref=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Random} from \"../tools/random\";\r\n  import {PS} from \"../tools/PS\";\r\n  import {Picture} from \"../picture/Picture\";\r\n\r\n  export default {\r\n    name: 'CanvasText',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      return {\r\n        width: 0,\r\n        height: 0,\r\n        count: 0,\r\n        thisCount: 0,\r\n        imgCtx: null,\r\n        shallMalfunction: false,\r\n        size: 0,\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          this.$canvas && this.ctx && this.renderCanvas();\r\n        }\r\n      },\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          this.modifyManager.commonOptions.CanvasTextMalfunction && (this.shallMalfunction = true);\r\n          this.size = 0;\r\n          console.log(789)\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n        const {height, width, ctx, imgCtx, musicConfig, viewCtx, musicData} = this;\r\n        const {realTimeData, calculateColors} = musicData;\r\n        const {avrLevel} = realTimeData;\r\n\r\n        const w = width;\r\n        const h = 100;\r\n        const x = width / 2;\r\n        const y = height * .66;\r\n        let size =\r\n          this.size =\r\n            this.size ||\r\n            160 + Random.int(10 * avrLevel / 255, 0, true) - (musicConfig.lrc || '').length * 1.5;\r\n\r\n        // 清除原先的画布\r\n        ctx.clearRect(0, 0, width, height);\r\n        viewCtx.clearRect(0, 0, width, height);\r\n\r\n        if (musicConfig.lrc) {\r\n          ctx.fillStyle = `rgba(0,0,0,.5)`;\r\n          ctx.fillRect(0, height / 7 * 3.9, width, height / 7 * 1.3);\r\n        }\r\n\r\n        // 庞门正道标题体\r\n        ctx.font = `${size}px pmzdbtt`;\r\n\r\n\r\n        const measureText = ctx.measureText(musicConfig.lrc);\r\n        if (measureText.width > (width - 100)) {\r\n          size =\r\n            this.size =\r\n              Math.floor(this.size /measureText.width * (width - 100));\r\n          ctx.font = `${size}px pmzdbtt`;\r\n        }\r\n        // 字体居中\r\n        ctx.textAlign = 'center';\r\n        ctx.textBaseline = 'middle';\r\n        ctx.lineWidth = 1;\r\n\r\n        const percent = avrLevel / 255;\r\n        const offset = percent * size / 4 + 4;\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255).join(', ')}, ${percent})`;\r\n        ctx.strokeText(musicConfig.lrc, x + offset, y - offset);\r\n\r\n\r\n        const pattern = ctx.createPattern(Picture.pciCanvas,\"repeat\");\r\n        ctx.fillStyle = pattern;\r\n        ctx.fillText(musicConfig.lrc, x + offset, y - offset);\r\n\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255).join(', ')}, ${percent * 0.8})`;\r\n        ctx.strokeText(musicConfig.lrc, x + offset / 2, y - offset / 2);\r\n\r\n\r\n        ctx.fillStyle = `rgba(255,255,255,.3)`;\r\n        ctx.fillText(musicConfig.lrc, x + offset / 2, y - offset / 2);\r\n\r\n\r\n        ctx.strokeStyle = `rgba(${calculateColors[1].map(i => 255 - i).join(', ')}, 1)`;\r\n        ctx.strokeText(musicConfig.lrc, x, y);\r\n\r\n\r\n        ctx.fillStyle = `rgba(${calculateColors[1].join(', ')}, 0.3)`;\r\n        ctx.fillText(musicConfig.lrc, x, y);\r\n\r\n\r\n\r\n\r\n        const des = (index_ = 0) => {\r\n          const W = ctx.measureText(musicConfig.lrc).width || 1;\r\n          if (!W) return;\r\n\r\n          const _w = W;\r\n          const _h = size * index_ / 4;\r\n          const __x = 0;\r\n          const __y = size;\r\n\r\n          const _x = (width - _w) / 2;\r\n          const _y = y - __y / 2 + Random.int(size - _h, 0);\r\n\r\n          if (_h < 0) return;\r\n          const imageData = ctx.getImageData(_x, _y, _w, _h);\r\n\r\n          const ps = new PS(imageData);\r\n          const max = (h - size) / 4;\r\n\r\n          if (this.shallMalfunction) {\r\n            const fnMap = [\r\n              () => ps.aisleOffset('r', Random.int(max, max / 2, true), Random.int(max, max / 2, true)),\r\n              () => ps.aisleOffset('g', Random.int(max, max / 3, true), Random.int(max, max / 3, true)),\r\n              () => ps.aisleOffset('b', Random.int(max, max / 4, true), Random.int(max, max / 4, true)),\r\n            ];\r\n            const len = fnMap.length;\r\n            let index = Random.int(2, 0);\r\n            fnMap[index]();\r\n            Random.boolean() && fnMap[++index % len]();\r\n            Random.boolean() && fnMap[++index % len]();\r\n          }\r\n\r\n          ctx.putImageData(ps.imageData, _x, _y);\r\n\r\n          viewCtx.drawImage(this.$canvasHidded, 0, 0);\r\n        };\r\n        if (musicConfig.picDom) {\r\n          des(1);\r\n          des(2);\r\n          des(3);\r\n        }\r\n        this.shallMalfunction = false;\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$canvas = this.$refs.canvas;\r\n      this.viewCtx = this.$canvas.getContext(\"2d\");\r\n      this.$canvasHidded = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage = window.OffscreenCanvas ?\r\n        new OffscreenCanvas(this.$canvas.width, this.$canvas.height) :\r\n        document.createElement('canvas');\r\n\r\n      this.$canvasImage.width = this.$canvasHidded.width = this.width = this.$el.offsetWidth;\r\n      this.$canvasImage.height = this.$canvasHidded.height = this.height = this.$el.offsetHeight;\r\n\r\n      this.ctx = this.$canvasHidded.getContext(\"2d\");\r\n      this.imgCtx = this.$canvasImage.getContext(\"2d\");\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    opacity: 0.8;\r\n    z-index: 2900;\r\n  }\r\n\r\n  .canvas-view canvas {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import { render } from \"./CanvasText.vue?vue&type=template&id=0ebf586b&scoped=true\"\nimport script from \"./CanvasText.vue?vue&type=script&lang=js\"\nexport * from \"./CanvasText.vue?vue&type=script&lang=js\"\n\nimport \"./CanvasText.vue?vue&type=style&index=0&id=0ebf586b&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0ebf586b\"\n\nexport default script","<template>\r\n  <div class=\"canvas-view\">\r\n    <video :src=\"src\" autoplay=\"autoplay\" muted @ended=\"handelEnded\"></video>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'VideoView',\r\n    provide() {\r\n      return {}\r\n    },\r\n    components: {},\r\n    mixins: [],\r\n    props: ['index'],\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    data() {\r\n      return {\r\n        ended: true,\r\n        shallChange: false,\r\n        current: this.index,\r\n        src: '',\r\n        srcs: [\r\n          './videos/1.mp4',\r\n          './videos/2.mp4',\r\n          './videos/3.mp4',\r\n          './videos/4.mp4',\r\n        ],\r\n        width: 0, height: 0,\r\n        play: () => {\r\n          // this.$refs.video && this.$refs.video.play();\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      changeVideo(){\r\n        return this.musicData.soundTrackArr.find(item => item.isChangeDot)\r\n      },\r\n    },\r\n    methods: {\r\n      handelEnded(){\r\n        this.ended = true;\r\n      },\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag'(){\r\n        if (this.ended) {\r\n          this.current ++;\r\n          this.src = this.srcs[this.current%this.srcs.length];\r\n          this.ended = false;\r\n        }\r\n      },\r\n    },\r\n    beforeDestroy(){\r\n      document.removeEventListener('click', this.play);\r\n    },\r\n    mounted() {\r\n      document.addEventListener('click', this.play);\r\n      this.play();\r\n      this.width = this.$el.offsetWidth;\r\n      this.height = this.$el.offsetHeight;\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .canvas-view {\r\n    position: absolute;\r\n    opacity: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    top: 0;\r\n    left: 0;\r\n    overflow: hidden;\r\n    z-index: 2950;\r\n    background-blend-mode: lighten;\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .canvas-view video {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n  }\r\n</style>\r\n","import { render } from \"./VideoView.vue?vue&type=template&id=3830f794&scoped=true\"\nimport script from \"./VideoView.vue?vue&type=script&lang=js\"\nexport * from \"./VideoView.vue?vue&type=script&lang=js\"\n\nimport \"./VideoView.vue?vue&type=style&index=0&id=3830f794&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3830f794\"\n\nexport default script","<template>\r\n  <div class=\"dom-clock\">\r\n    <div v-for=\"(list, index) in time\" :style=\"d3wrapStyle\">\r\n      <div v-for=\"(list_, index_) in list\">\r\n        <template v-if=\"index_\"><span>{{index ? ':' : '-'}}</span></template>\r\n        <template v-for=\"(num) in list_\">\r\n          <DomClockItem :num=\"num\"/>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {Time} from \"../tools/Time\";\r\n  import DomClockItem from './DomClockItem.vue'\r\n\r\n  export default {\r\n    name: 'DomClock',\r\n    components: {DomClockItem},\r\n    data() {\r\n      return {\r\n        time: '',\r\n      }\r\n    },\r\n\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv',\r\n      'modifyManager'\r\n    ],\r\n    computed: {\r\n      d3wrapStyle(){\r\n        const {musicConfig} = this;\r\n        const {_x, _y} = musicConfig.mouseMoveConf;\r\n        const maxDeg = 150;\r\n        return {\r\n          transform: `translateZ(-400px) rotateX(${-_y*maxDeg - 20}deg) rotateY(${_x*maxDeg}deg)`,\r\n        }\r\n      },\r\n      dataFlag(){\r\n        return this.musicDataFlags.dataFlag\r\n      }\r\n    },\r\n    watch: {\r\n      'musicDataFlags.shockFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          // 重新渲染的时候， 可能没初始化? // 其实是之前的被销毁了\r\n          // modifyManager.commonOptions.CanvasPicMalfunction && (this.shallMalfunction = 2);\r\n        }\r\n      },\r\n      'dataFlag': {\r\n        immediate: true,\r\n        handler() {\r\n          const stamp = new Date();\r\n          this.time = [\r\n            Time.format(stamp, `yea mon dat`).split(' ').map(i => i.split('')),\r\n            Time.format(stamp, `hou min sec`).split(' ').map(i => i.split(''))\r\n          ];\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n      }\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .dom-clock {\r\n    position: absolute;\r\n    top: 20vh;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    flex: 1 1 0;\r\n    z-index: 2900;\r\n    perspective:1000px;\r\n\r\n    >div{\r\n      display: flex;\r\n      justify-content: center;\r\n      margin: 20px 0;\r\n      transform-style:preserve-3d;\r\n      >div{\r\n        display: flex;\r\n        align-items: flex-end;\r\n        >span{\r\n          opacity: 1;\r\n          margin: 20px;\r\n          font-size: 80px;\r\n          transform: translateZ(20px);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","export class Time {\r\n  static format(stamp?: Date, format = `yea-mon-dat`){\r\n    const time  = stamp || new Date();\r\n    return  format.replace(/yea/g, time.getFullYear().toString())\r\n      .replace(/mon/g, Time.to00(time.getMonth() + 1))\r\n      .replace(/dat/g, Time.to00(time.getDate()))\r\n      .replace(/hou/g, Time.to00(time.getHours()))\r\n      .replace(/min/g, Time.to00(time.getMinutes()))\r\n      .replace(/sec/g, Time.to00(time.getSeconds()))\r\n      .replace(/mis/g, Time.to000(time.getMilliseconds()))\r\n  }\r\n  static to00(num: number){ return num>9 ? `${num}` : `0${num}`}\r\n  static to000(num: number){ return num>99 ? `${num}` : `0${Time.to00(num)}`}\r\n}\r\n","<template>\r\n  <div class=\"dom-clock-item-wrap\">\r\n    <div class=\"dom-clock-item\">\r\n      <div v-for=\"(num, index) in list\" :class=\"{track: true}\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"dom-clock-item\">\r\n      <div v-for=\"(num, index) in list\" :class=\"{active: num}\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\n  import {musicData, musicDataFlags} from \"../music/Music\";\r\n  const list = [\r\n    [1, 1, 1, 1, 1, 1, 0],\r\n    [0, 1, 1, 0, 0, 0, 0],\r\n    [1, 1, 0, 1, 1, 0, 1],\r\n    [1, 1, 1, 1, 0, 0, 1],\r\n    [0, 1, 1, 0, 0, 1, 1],\r\n    [1, 0, 1, 1, 0, 1, 1],\r\n    [1, 0, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 0, 0, 0, 0],\r\n    [1, 1, 1, 1, 1, 1, 1],\r\n    [1, 1, 1, 1, 0, 1, 1],\r\n  ];\r\n  export default {\r\n    name: 'DomClockItem',\r\n    props: ['num'],\r\n    data(){\r\n      return {\r\n        musicData,\r\n        musicDataFlags\r\n      }\r\n    },\r\n    computed: {\r\n      list() {\r\n        return list[this.num]\r\n      },\r\n      // wrapStyle(){\r\n      //   const {data, avrLevel, total, cacheList, calculateColors} = this.musicData;\r\n      //   this.musicDataFlags.dataFlag;\r\n      //   return {\r\n      //     '--animateTime': `${.3 - avrLevel / 255 * 0.3}s`,\r\n      //     '--radius': `${avrLevel / 255 * 40}px`\r\n      //   }\r\n      // }\r\n    },\r\n    methods: {\r\n      renderCanvas() {\r\n      }\r\n    },\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n\r\n  .dom-clock-item-wrap {\r\n    --animateTime: 0.7s;\r\n    --radius: 40px;\r\n    --textRadius: 2px;\r\n    --radius_: 0;\r\n    --time: 0.05s;\r\n    --a: 80px;\r\n    --b: calc(var(--a) / 10);\r\n    --a2: calc(var(--a) * 2);\r\n    --ha: calc(var(--a) / 2);\r\n    --hb: calc(var(--b) / 2);\r\n    --h: calc(var(--b) / 2);\r\n    --offsetx: calc((var(--hb) + var(--h)) * -1);\r\n    --offsety: calc(var(--h) * -1);\r\n    --offset2: calc((var(--hb) + var(--h) * 2) * -1);\r\n\r\n    margin: calc(var(--b) * 2);\r\n    position: relative;\r\n    height: var(--a2);\r\n    line-height: var(--a2);\r\n    font-size: 40px;\r\n    width: var(--a);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-shadow:\r\n      0 0 calc(var(--textRadius) * 1) #fff,\r\n      0 0 calc(var(--textRadius) * 2) #fff,\r\n      0 0 calc(var(--textRadius) * 3) #fff,\r\n      0 0 calc(var(--textRadius) * 4) #fff,\r\n      0 0 calc(var(--textRadius) * 5) #ff5722,\r\n      0 0 calc(var(--textRadius) * 6) #ff5722,\r\n      0 0 calc(var(--textRadius) * 7) #ff5722,\r\n      0 0 calc(var(--textRadius) * 8) #ff5722;\r\n\r\n    .dom-clock-item {\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 100%;\r\n\r\n      > div {\r\n        position: absolute;\r\n        display: block;\r\n        transform: translateZ(0);\r\n        box-shadow:\r\n          0 0 calc(var(--radius_) * 1) #fff,\r\n          0 0 calc(var(--radius_) * 2) #fff,\r\n          0 0 calc(var(--radius_) * 3) #fff,\r\n          0 0 calc(var(--radius_) * 4) #fff,\r\n          0 0 calc(var(--radius_) * 5) #ff5722,\r\n          0 0 calc(var(--radius_) * 6) #ff5722,\r\n          0 0 calc(var(--radius_) * 7) #ff5722,\r\n          0 0 calc(var(--radius_) * 8) #ff5722;\r\n\r\n        > div {\r\n          width: 100%;\r\n          height: 100%;\r\n          background-color: rgba(0, 0, 0, 1);\r\n          clip-path: polygon(var(--hb) 0, calc(100% - var(--hb)) 0, 100% var(--hb), 100% calc(100% - var(--hb)), calc(100% - var(--hb)) 100%, var(--hb) 100%, 0 calc(100% - var(--hb)), 0 var(--hb));\r\n        }\r\n\r\n        &.track {\r\n          > div {\r\n            background-color: rgba(0, 0, 0, 1);\r\n          }\r\n        }\r\n\r\n        &.active {\r\n          box-shadow:\r\n            0 0 calc(var(--radius) * 1) #fff,\r\n            0 0 calc(var(--radius) * 2) #fff,\r\n            0 0 calc(var(--radius) * 3) #fff,\r\n            0 0 calc(var(--radius) * 4) #fff,\r\n            0 0 calc(var(--radius) * 5) #ff5722,\r\n            0 0 calc(var(--radius) * 6) #ff5722,\r\n            0 0 calc(var(--radius) * 7) #ff5722,\r\n            0 0 calc(var(--radius) * 8) #ff5722;\r\n          transform: translateZ(40px);\r\n\r\n          > div {\r\n            background-color: rgba(255, 255, 255, 1);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(1) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          top: var(--offset2);\r\n          left: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 1) cubic-bezier(.6,.42,.34,1.48);\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 1) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(2) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          top: var(--offsety);\r\n          right: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 2) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 2) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(3) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          bottom: var(--offsety);\r\n          right: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 3) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 3) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(4) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          bottom: var(--offset2);\r\n          right: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 4) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 4) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(5) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          left: var(--offsetx);\r\n          bottom: var(--offsety);\r\n          transition: all var(--animateTime) calc(var(--time) * 5) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 5) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(6) {\r\n          width: var(--b);\r\n          height: var(--a);\r\n          top: var(--offsety);\r\n          left: var(--offsetx);\r\n          transition: all var(--animateTime) calc(var(--time) * 6) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 6) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n\r\n        &:nth-of-type(7) {\r\n          width: var(--a);\r\n          height: var(--b);\r\n          top: calc(50% - var(--hb));\r\n          left: 0;\r\n          transition: all var(--animateTime) calc(var(--time) * 7) cubic-bezier(.6,.42,.34,1.48);\r\n\r\n          > div {\r\n            transition: all var(--animateTime) calc(var(--time) * 7) cubic-bezier(.6,.42,.34,1.48);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</style>\r\n","import { render } from \"./DomClockItem.vue?vue&type=template&id=f8f17254&scoped=true\"\nimport script from \"./DomClockItem.vue?vue&type=script&lang=js\"\nexport * from \"./DomClockItem.vue?vue&type=script&lang=js\"\n\nimport \"./DomClockItem.vue?vue&type=style&index=0&id=f8f17254&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-f8f17254\"\n\nexport default script","import { render } from \"./DomClock.vue?vue&type=template&id=591f40bb&scoped=true\"\nimport script from \"./DomClock.vue?vue&type=script&lang=js\"\nexport * from \"./DomClock.vue?vue&type=script&lang=js\"\n\nimport \"./DomClock.vue?vue&type=style&index=0&id=591f40bb&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-591f40bb\"\n\nexport default script","<template>\r\n  <div class=\"game-ui\" :class=\"{active: gameList.ended}\">\r\n    <div class=\"progress\">\r\n      <span :style=\"progressStyle\"></span>\r\n    </div>\r\n    <ul>\r\n      <li v-for=\"(formConfig, index) in formConfigs\">\r\n        <div>{{formConfig.label}}</div>\r\n        <div>{{gameList[formConfig.key]}}</div>\r\n      </li>\r\n\r\n      <!--<li>-->\r\n        <!--<div>平均每击扣分</div>-->\r\n        <!--<div v-if=\"gameList.total\">{{gameList.totalScore / (gameList.total - gameList.missCount)}}</div>-->\r\n        <!--<div v-if=\"!gameList.total\">&#45;&#45;</div>-->\r\n      <!--</li>-->\r\n      <li>\r\n        <div>realTimeData</div>\r\n        <div>{{musicData.realTimeData.shockNum}}</div>\r\n      </li>\r\n      <li>\r\n        <div>originData</div>\r\n        <div>{{musicData.originData.shockNum}}</div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\n\r\n  export default {\r\n    name: 'GameUI',\r\n    inject: [\r\n      'musicDataFlags',\r\n      'musicData',\r\n      'musicConfig',\r\n      'gameList',\r\n      'mv'\r\n    ],\r\n    data() {\r\n      return {\r\n        formConfigs: [\r\n          {\r\n            key: 'total',\r\n            label: '节点数',\r\n          },\r\n          {\r\n            key: 'totalScore',\r\n            label: '扣除分数',\r\n          },\r\n          {\r\n            key: 'maxCombo',\r\n            label: '最大连击数',\r\n          },\r\n          {\r\n            key: 'missCount',\r\n            label: 'miss',\r\n          },\r\n          {\r\n            key: 'uselessCount',\r\n            label: '无效按键',\r\n          },\r\n\r\n        ]\r\n      }\r\n    },\r\n    computed: {\r\n      progressStyle() {\r\n        const {currentTime, durationTime} = this.gameList;\r\n        return {\r\n          transform: `scale(${durationTime ? currentTime / durationTime : 0}, 1)`\r\n        }\r\n      }\r\n    },\r\n    watch: {},\r\n    methods: {},\r\n    mounted() {\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" type=\"text/less\" scoped>\r\n  .game-ui {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex: 1 1 0;\r\n    overflow: hidden;\r\n    z-index: 2999;\r\n\r\n    .progress {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      height: 6px;\r\n      width: 100%;\r\n      text-align: left;\r\n\r\n      span {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: linear-gradient(90deg, hsla(0, 50%, 50%, 1), hsla(-30, 50%, 50%, 1), hsla(0, 50%, 50%, 1));\r\n      }\r\n    }\r\n\r\n    ul {\r\n      overflow: hidden;\r\n      border-radius: 10%;\r\n      opacity: 0.4;\r\n      position: absolute;\r\n      width: 90%;\r\n      top: 50%;\r\n      left: 50%;\r\n      padding: 5vh 0 10vh 0;\r\n      transform: translate(-50%, -50%);\r\n      transition: all 0.6s ease-in-out;\r\n      border: 2px solid hsla(15, 50%, 50%, 0);\r\n      white-space: nowrap;\r\n\r\n      &::before {\r\n        content: '';\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        background: linear-gradient(hsla(0, 50%, 50%, 0.6), hsla(10, 50%, 50%, 0.2) 10%, hsla(20, 50%, 50%, 0.2) 90%, hsla(30, 50%, 50%, 0.6));\r\n        opacity: 0;\r\n        transition: all 0.6s ease-in-out;\r\n      }\r\n\r\n      li {\r\n        position: relative;\r\n        padding: 1vh 0;\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        div {\r\n          padding: 0 1vw;\r\n\r\n          &:first-of-type {\r\n            flex: 1 1 0;\r\n            text-align: right;\r\n          }\r\n\r\n          &:last-of-type {\r\n            font-size: 32px;\r\n            color: #fff;\r\n            font-weight: bold;\r\n            flex: 5 5 0;\r\n            text-align: left;\r\n            transition: all 0.6s ease-in-out;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &.active {\r\n      ul {\r\n        padding: 5vh 5vw 10vh 5vw;\r\n        opacity: 1;\r\n        width: 60%;\r\n        border: 2px solid hsla(15, 50%, 50%, 1);\r\n\r\n        &::before {\r\n          opacity: 1;\r\n        }\r\n\r\n        li {\r\n          div {\r\n            &:last-of-type {\r\n              flex: 1 1 0;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./GameUI.vue?vue&type=template&id=17b5a148&scoped=true\"\nimport script from \"./GameUI.vue?vue&type=script&lang=js\"\nexport * from \"./GameUI.vue?vue&type=script&lang=js\"\n\nimport \"./GameUI.vue?vue&type=style&index=0&id=17b5a148&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-17b5a148\"\n\nexport default script","import { render } from \"./Index.vue?vue&type=template&id=7629e62c&scoped=true\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport \"./Index.vue?vue&type=style&index=0&id=7629e62c&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7629e62c\"\n\nexport default script","import { createRouter, createWebHashHistory, RouteRecordRaw } from 'vue-router'\nimport Home from '../views/Index.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: '/',\n    name: 'Index',\n    component: Home\n  }\n];\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n});\n\nexport default router\n","function IsPhone() {\r\n  return /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)\r\n}\r\n// @ts-ignore;\r\nwindow.isPhone = IsPhone();\r\nimport './assets/style/index.less'\r\nimport { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport './registerServiceWorker'\r\nimport router from './router'\r\n\r\ncreateApp(App).use(router).mount('#app')\r\n","import {GetType} from \"@/tools/GetType\";\r\n\r\nexport class DomUtil {\r\n  static getBothAncestor(sDom: Node, eDom: Node) {\r\n    let sDom_: undefined | Node = sDom;\r\n    let eDom_: undefined | Node = eDom;\r\n    while (sDom_) {\r\n      if (DomUtil.hasChild(sDom_, eDom)) {\r\n        return sDom_;\r\n      }\r\n      // @ts-ignore;\r\n      sDom_ = sDom_.parentNode;\r\n    }\r\n    while (eDom_) {\r\n      if (DomUtil.hasChild(eDom_, sDom)) {\r\n        return eDom_;\r\n      }\r\n      // @ts-ignore;\r\n      eDom_ = eDom_.parentNode;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 判断一个节点是否为空节点， 文本节点\r\n   * @param node\r\n   */\r\n  static isEmptyTag(node: Node): boolean {\r\n    if (node.nodeType === 1) {\r\n      if (node.childNodes.length === 0) return true;\r\n      return [...node.childNodes].every(i => DomUtil.isEmptyTag(i))\r\n    } else if (node.nodeType === 3) {\r\n      return !node.textContent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isSameTag(a: Node, b: Node): boolean {\r\n    if (!(a && b)) return false;\r\n    if (a.nodeType === 3 && b.nodeType === 3) {\r\n      return true;\r\n    }\r\n    if (a.nodeType === 1 && b.nodeType === 1) {\r\n      // @ts-ignore;\r\n      return DomUtil.isTag(a, b.tagName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * parentNode 的子孙中是否包含 child\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static hasChild(parentNode: Node, child: Node): boolean {\r\n    const list = [...parentNode.childNodes];\r\n    // @ts-ignore;\r\n    return list.includes(child) || list.some(item => DomUtil.hasChild(item, child))\r\n  }\r\n\r\n  /**\r\n   * 判断child 的祖先中是否包含 parentNode\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static isChildOf(parentNode: ParentNode, child: Node | null) {\r\n    while (child) {\r\n      if (child.parentNode === parentNode) return true;\r\n      child = child.parentNode\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isAncestor(target: Node, dom: Node | null) {\r\n    while (dom && dom.parentNode) {\r\n      if (dom.parentNode === target) return true;\r\n      // @ts-ignore;\r\n      dom = dom.parentNode;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 传入节点的父级中最近的指定标签的一项， 直到 ’根节点‘\r\n   * @param node\r\n   * @param targetTagNames\r\n   * @param endAt 若传入该项， 则匹配到该项时会中断查找（此时不会返回值）\r\n   */\r\n  static findNearestTargetParentNodeByTag(node: Node | undefined | null, targetTagNames: string[] = [], endAt?: Node) {\r\n    targetTagNames = targetTagNames.map(i => i.toLowerCase())\r\n    while (node && !(endAt && node !== endAt)) {\r\n      // @ts-ignore;\r\n      const tagName = (node.tagName || '').toLowerCase();\r\n      if (targetTagNames.includes(tagName)) {\r\n        return node;\r\n      }\r\n      node = node.parentNode\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 替换 nodeName， 注意替换后，为新节点， 且原子节点均转移到新节点\r\n   * @param node\r\n   * @param tag\r\n   */\r\n  static changeTag(node: Node, tag: string) {\r\n    const newNode = DomUtil.node(tag);\r\n    [...node.childNodes].forEach(item => {\r\n      newNode.appendChild(item)\r\n    });\r\n    DomUtil.replace(node, newNode);\r\n    return newNode;\r\n  }\r\n\r\n  /**\r\n   * 将节点从父节点中移除， 如果有父节点的话\r\n   * @param dom\r\n   */\r\n  static remove(dom: Node) {\r\n    dom.parentNode && dom.parentNode.removeChild(dom);\r\n  }\r\n\r\n  /**\r\n   * 判断节点是否为指定标签类型\r\n   * @param dom\r\n   * @param tag\r\n   */\r\n  static isTag(dom: Node, tag: string = ''): boolean {\r\n    return dom.nodeName.toLowerCase() === tag.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * 判断父节点的节点\r\n   * @param dom\r\n   * @param targetType\r\n   */\r\n  static isParentNodeTheTargetType(dom: Node, targetType: string = '') {\r\n    const parentNode = dom.parentNode;\r\n    // @ts-ignore;\r\n    return parentNode && parentNode.tagName.toLowerCase() === targetType.toLowerCase();\r\n  }\r\n\r\n  /**\r\n   * 生成 tagName 的空标签\r\n   * @param tagName\r\n   * @param innerHTML\r\n   */\r\n  static node(tagName: string, innerHTML?: string) {\r\n    const node = document.createElement(tagName);\r\n    innerHTML && (node.innerHTML = innerHTML);\r\n    return node;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param node\r\n   * @param className\r\n   */\r\n  static class(node: Node, className: string) {\r\n    if (node) {\r\n      // @ts-ignore;\r\n      node.classList.contains(className) || node.classList.add(className);\r\n    }\r\n  }\r\n\r\n  static removeClass(node: Node, className: string) {\r\n    if (node) {\r\n      // @ts-ignore;\r\n      node.classList.contains(className) || node.classList.remove(className)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 生成文本节点\r\n   * @param text\r\n   */\r\n  static text(text: string) {\r\n    return document.createTextNode(text);\r\n  }\r\n\r\n  static list(list: { [index: string]: any }[], template: string) {\r\n  }\r\n\r\n  /**\r\n   * 在之前插入， 如果有父节点的话\r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static insertBefore(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    if (parentNode) {\r\n      parentNode.insertBefore(newDom, oldDom)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 在最后插入子节点\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static append(parentNode: Node, child: Node): void;\r\n  static append(parentNode: Node, childList: Node[]): void;\r\n  static append(parentNode: Node, child: Node | Node[]) {\r\n    if (GetType.isArray(child)) {\r\n      // @ts-ignore;\r\n      child.forEach((i: Node) => {\r\n        parentNode.appendChild(i);\r\n      })\r\n    } else {\r\n      // @ts-ignore;\r\n      parentNode.appendChild(child);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * 在开头插入子节点\r\n   * @param parentNode\r\n   * @param child\r\n   */\r\n  static prepend(parentNode: Node, child: Node) {\r\n    const prev = parentNode.childNodes[0];\r\n    if (prev) {\r\n      DomUtil.insertBefore(prev, child)\r\n    } else {\r\n      parentNode.appendChild(child);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 在节点后插入， 如果有父节点的话\r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static insertAfter(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    const nextSibling = oldDom.nextSibling;\r\n\r\n    if (!parentNode) return;\r\n    if (nextSibling) {\r\n      parentNode.insertBefore(newDom, nextSibling)\r\n    } else {\r\n      parentNode.appendChild(newDom);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 替换节点， 如果有父节点的话\r\n   * @param oldDom\r\n   * @param newDom\r\n   */\r\n  static replace(oldDom: Node, newDom: Node) {\r\n    const parentNode = oldDom.parentNode;\r\n    if (parentNode) {\r\n      parentNode.insertBefore(newDom, oldDom);\r\n      parentNode.removeChild(oldDom);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * 判断是否为标签节点\r\n   * @param node\r\n   */\r\n  static isTagNode(node: Node) {\r\n    return node.nodeType === 1\r\n  }\r\n\r\n  /**\r\n   * 根据该节点的 tagName 生成新的同名标签, 忽略属性及子节点， 如传入 <p id=\"1\"></p> => <p></p>\r\n   * @param node\r\n   */\r\n  static copyEmptyTagNode(node: Node): Node {\r\n    if (!DomUtil.isTagNode(node)) return DomUtil.text('');\r\n    // @ts-ignore;\r\n    return DomUtil.node(node.tagName);\r\n  }\r\n\r\n  /**\r\n   * 递归查找第一个节点的文本节点，（如果首子节点为标签节点， 则递归查找其首子节点）\r\n   * @param dom\r\n   */\r\n  static findFirstTextNode(dom: Node | undefined) {\r\n    while (dom && dom.nodeType === 1) {\r\n      if (dom.nodeType === 1) {\r\n        return dom\r\n      }\r\n      dom = dom.childNodes[0]\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * 递归查找第后一个节点的文本节点，（如果末子节点为标签节点， 则递归查找其末子节点）\r\n   * @param dom\r\n   */\r\n  static findLastTextNode(dom: Node | undefined) {\r\n    while (dom && dom.nodeType === 1) {\r\n      if (dom.nodeType === 1) {\r\n        return dom\r\n      }\r\n      dom = dom.childNodes[dom.childNodes.length - 1]\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n\r\n  /**\r\n   * 请文本拆分成三份， 中间的五部分未原来的节点\r\n   * @param textNode\r\n   * @param start\r\n   * @param end\r\n   */\r\n  static splitTextNode(textNode: Node, start: number | undefined, end: number | undefined) {\r\n    const textContent = textNode.textContent || '';\r\n    const start_ = textContent.slice(0, start || 0);\r\n    const mid_ = textContent.slice(start || 0, end || undefined);\r\n    const end_ = textContent.slice(end || textContent.length);\r\n    const sDom = start_ && DomUtil.text(start_);\r\n    const eDom = end_ && DomUtil.text(end_);\r\n\r\n    sDom && DomUtil.insertBefore(textNode, sDom);\r\n    textNode.nodeValue = mid_;\r\n    eDom && DomUtil.insertAfter(textNode, eDom);\r\n    return [sDom, textNode, eDom];\r\n  }\r\n}\r\n\r\n","export class GetType {\r\n  static getType(item: any) {\r\n    return Object.prototype.toString.call(item).slice(8, -1);\r\n  }\r\n\r\n  static isNumber(item: any) {\r\n    return GetType.getType(item) === \"Number\"\r\n  };\r\n\r\n  static isString(item: any) {\r\n    return GetType.getType(item) === \"String\"\r\n  };\r\n\r\n  static isArray(item: any) {\r\n    return GetType.getType(item) === \"Array\"\r\n  };\r\n\r\n  static isObject(item: any) {\r\n    return GetType.getType(item) === \"Object\"\r\n  };\r\n\r\n  static isBoolean(item: any) {\r\n    return GetType.getType(item) === \"Boolean\"\r\n  };\r\n\r\n  static isNull(item: any) {\r\n    return GetType.getType(item) === \"Null\"\r\n  };\r\n\r\n  static isUndefined(item: any) {\r\n    return GetType.getType(item) === \"Undefined\"\r\n  };\r\n\r\n  static isFunction(item: any) {\r\n    return GetType.getType(item) === \"Function\"\r\n  };\r\n\r\n  static isDate(item: any) {\r\n    return GetType.getType(item) === \"Date\"\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {GetType} from \"./GetType\";\r\nimport {Sound} from \"./Sound\";\r\n// @ts-ignore;\r\nimport {Random} from './random';\r\nimport {DomUtil} from \"@/tools/DomUtil\";\r\n\r\nconst keyMap: {[index: string]: string} = {\r\n  \"0\": \"96\", \"1\": \"97\", \"2\": \"98\", \"3\": \"99\", \"4\": \"100\", \"5\": \"101\", \"6\": \"102\", \"7\": \"103\", \"8\": \"104\", \"9\": \"105\",\r\n\r\n  \"a\": \"65\", \"b\": \"66\", \"c\": \"67\", \"d\": \"68\", \"e\": \"69\", \"f\": \"70\", \"g\": \"71\",\r\n  \"h\": \"72\", \"i\": \"73\", \"j\": \"74\", \"k\": \"75\", \"l\": \"76\", \"m\": \"77\", \"n\": \"78\",\r\n  \"o\": \"79\", \"p\": \"80\", \"q\": \"81\",\r\n  \"r\": \"82\", \"s\": \"83\", \"t\": \"84\",\r\n  \"u\": \"85\", \"v\": \"86\", \"w\": \"87\",\r\n  \"x\": \"88\", \"y\": \"89\", \"z\": \"90\",\r\n\r\n  \"f1\": \"112\", \"f2\": \"113\", \"f3\": \"114\", \"f4\": \"115\",\r\n  \"f5\": \"116\", \"f6\": \"117\", \"f7\": \"118\", \"f8\": \"119\",\r\n  \"f9\": \"120\", \"f10\": \"121\", \"f11\": \"122\", \"f12\": \"123\",\r\n\r\n  \"+\": \"107\", \"-\": \"109\", \"*\": \"106\", \"/\": \"111\", \".\": \"110\",\r\n\r\n  \"backspace\": \"8\", \"tab\": \"9\",\r\n  \"clear\": \"12\", \"enter\": \"13\",\r\n  \"esc\": \"27\", \"spacebar\": \"32\",\r\n  \"left arrow\": \"37\", \"up arrow\": \"38\", \"right arrow\": \"39\", \"down arrow\": \"40\",\r\n  \"left\": \"37\", \"up\": \"38\", \"right\": \"39\", \"down\": \"40\",\r\n\r\n  \";:\": \"186\", \"<\": \"188\", \"=+\": \"187\", \"-_\": \"189\", \">\": \"190\", \"/?\": \"191\", \"`~\": \"192\",\r\n\r\n  \"page up\": \"33\", \"page down\": \"34\",\r\n  \"end\": \"35\", \"home\": \"36\",\r\n  \"insert\": \"45\", \"delete\": \"46\",\r\n\r\n  \"cape lock\": \"20\",\r\n  \"num lock\": \"144\",\r\n\r\n  \"[{\": \"219\", \"\\\\|\": \"220\",\r\n  \"]}\": \"221\", \"'\\\"\": \"222\",\r\n\r\n  \"shift\": \"16\", \"control\": \"17\", \"alt\": \"18\",\r\n\r\n  \"搜索\": \"170\", \"收藏\": \"171\", \"浏览器\": \"172\",\r\n  \"音量减\": \"174\", \"音量加\": \"175\", \"静音\": \"173\", \"停止\": \"179\",\r\n  \"邮件\": \"180\",\r\n};\r\ntype TKeyMap = keyof typeof keyMap;\r\n\r\n\r\nconst keyMap_: {[index: string]: string} = {};\r\n\r\nObject.keys(keyMap).forEach((key: string) => {\r\n  keyMap_[keyMap[key]] = key\r\n});\r\nclass ShortCutAbstract {\r\n  common(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  alt(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl_alt(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  ctrl_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n\r\n  alt_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n  ctrl_alt_shift(keyNum: TKeyMap|number, cb: Function) {\r\n  }\r\n}\r\n\r\nfunction makeShortCutInitFn(key: string) {\r\n  // @ts-ignore;\r\n  ShortCut.prototype[key] = function (keyNum: TKeyMap|number, cb: Function) {\r\n    GetType.isNumber(keyNum) || (keyNum = keyMap[keyNum] || keyNum);\r\n    // @ts-ignore;\r\n    this.maps[key] || (this.maps[key] = {});\r\n    // @ts-ignore;\r\n    this.maps[key][keyNum] = (ev: Event) => {\r\n      Sound.play('confirm');\r\n      const result = cb();\r\n      if (!result) {\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  // @ts-ignore;\r\n  ShortCut.prototype[`${key}Desc`] = function (keyNum: TKeyMap|number, desc: any) {\r\n    GetType.isNumber(keyNum) || (keyNum = keyMap[keyNum] || keyNum);\r\n    // @ts-ignore;\r\n    this.describeMaps[key] || (this.describeMaps[key] = {});\r\n    // @ts-ignore;\r\n    this.describeMaps[key][keyNum] = desc;\r\n  }\r\n}\r\nconst requestAnimationFrame = window.requestAnimationFrame ||\r\n  // @ts-ignore;\r\n  window.webkitrequestAnimationFrame ||\r\n  // @ts-ignore;\r\n  window.mozrequestAnimationFrame;//兼容\r\nconst wrap = DomUtil.node('div');\r\nwrap.className = 'short-cut-view';\r\nDomUtil.append(document.body, wrap);\r\n\r\nconst triggered: string[][] = [];\r\nexport class ShortCut extends ShortCutAbstract{\r\n  static toast(message: string[]){\r\n\r\n    const node = DomUtil.node('div');\r\n    message.forEach(key => {\r\n      DomUtil.append(node, DomUtil.node('span', key.toUpperCase()))\r\n    });\r\n\r\n    DomUtil.prepend(wrap, node);\r\n    requestAnimationFrame(() => {\r\n      requestAnimationFrame(() => {\r\n        DomUtil.class(node, 'active');\r\n        setTimeout(() => {\r\n          DomUtil.class(node, 'hide');\r\n          setTimeout(() => {\r\n            requestAnimationFrame(() => DomUtil.remove(node));\r\n          }, 2000);\r\n        }, 1000);\r\n      })\r\n    });\r\n  }\r\n  hasInited: boolean = false;\r\n  maps = {};\r\n\r\n  describeMaps = {};\r\n\r\n  static triggeredCacheLength = 20;\r\n  static triggered : string[][] = triggered;\r\n  static cacheTriggered(keys: string[]){\r\n    const {triggered, triggeredCacheLength} = ShortCut;\r\n    const prev = triggered[0];\r\n    if (prev && keys.every(((val, index) => prev[index] === val))) return;\r\n    triggered.unshift(keys);\r\n\r\n    ShortCut.toast(keys)\r\n    if (triggered.length > triggeredCacheLength) {\r\n      triggered.pop();\r\n    }\r\n  }\r\n\r\n\r\n  init(dom?: Node, fns: any = {}, describeMaps: any = {}) {\r\n    const slef = this;\r\n    const $body = dom || document.querySelector(\"body\");\r\n    // @ts-ignore;\r\n    this.hasInited || $body.addEventListener('keydown', (ev: Event) => {\r\n      let keys = [];\r\n\r\n      let key = '';\r\n      // @ts-ignore;\r\n      if (ev.ctrlKey) {\r\n        keys.push('ctrl');\r\n      }\r\n      // @ts-ignore;\r\n      if (ev.altKey) {\r\n        keys.push('alt');\r\n      }\r\n      // @ts-ignore;\r\n      if (ev.shiftKey) {\r\n        keys.push('shift');\r\n      }\r\n      key = keys.join('') || '';\r\n      // @ts-ignore;\r\n      keys.push(keyMap_[ev.which]);\r\n\r\n      // @ts-ignore;\r\n      const describeMaps_ = this.describeMaps[key || 'common'] || {};\r\n      // @ts-ignore;\r\n      keys.push(describeMaps_[ev.which] || '暂无描述，待补充');\r\n\r\n      // @ts-ignore;\r\n      const cmd = `slef.maps.${key || 'common'}[${ev.which}](ev)`;\r\n      try {\r\n        eval(cmd);\r\n        ShortCut.cacheTriggered(keys);\r\n      } catch (e) {\r\n        // console.log(e)\r\n      }\r\n\r\n    });\r\n    if (fns) {\r\n      GetType.isObject(fns) && Object.keys(fns).forEach((key: string) => {\r\n        // @ts-ignore;\r\n        fns[key] && Object.keys(fns[key]).forEach(item => this[key](item, fns[key][item]));\r\n      });\r\n    }\r\n    if (describeMaps) {\r\n      GetType.isObject(describeMaps) && Object.keys(describeMaps).forEach((key: string) => {\r\n        // @ts-ignore;\r\n        describeMaps[key] && Object.keys(describeMaps[key]).forEach(item => this[`${key}Desc`](item, describeMaps[key][item]));\r\n      });\r\n    }\r\n    this.hasInited = true;\r\n  };\r\n}\r\n\r\n['common', 'ctrl', 'alt', 'shift', 'ctrl_alt', 'ctrl_shift', 'alt_shift', 'ctrl_alt_shift',].forEach(makeShortCutInitFn);\r\n\r\n\r\n\r\n\r\nexport const shortCut = new ShortCut();\r\nshortCut.init();\r\n","const soundMap = {\r\n  change: \"./sound/change.mp3\",\r\n  confirm: \"./sound/confirm.mp3\",\r\n  done: \"./sound/done.mp3\",\r\n  warning: \"./sound/warning.mp3\",\r\n};\r\nclass CacheList {\r\n  list: Element[];\r\n  constructor(){\r\n    this.list = [];\r\n  }\r\n  getAudio(){\r\n    let dom = this.list.shift();\r\n    const playEnd = () => {\r\n      dom && this.list.push(dom);\r\n    };\r\n    if (!dom) {\r\n      dom = document.createElement('audio');\r\n      // @ts-ignore;\r\n      dom.volume = .2;\r\n      // @ts-ignore;\r\n      dom.autoplay = 'autoplay';\r\n      const body = document.querySelector(\"body\");\r\n      body && body.appendChild(dom);\r\n\r\n      dom.addEventListener('ended', playEnd);\r\n      dom.addEventListener('error', playEnd);\r\n    }\r\n\r\n    return dom;\r\n  }\r\n}\r\n\r\nconst cacheList = new CacheList();\r\ntype TSoundType = keyof typeof soundMap;\r\nexport class Sound {\r\n  static play(url: TSoundType){\r\n    const dom = cacheList.getAudio();\r\n    const volumeMap = {\r\n      change: 0.01,\r\n      confirm: 0.01,\r\n      done: 0.2,\r\n      warning: 0.01,\r\n    }\r\n    // @ts-ignore;\r\n    dom.volume = volumeMap[url] || 0.1;\r\n    // @ts-ignore;\r\n    dom.src = soundMap[url] || url;\r\n  }\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\t__webpack_require__.O();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdy_player\"] = self[\"webpackChunkdy_player\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4502); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}