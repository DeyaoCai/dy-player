(function(){"use strict";var __webpack_modules__={6499:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{lD:function(){return biquadFilterFrequency},lW:function(){return ModifyManager}});var D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(813),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6571),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1278),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2610),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7224),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8309),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4747),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2222),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1249),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9826),core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_find_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(561),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5306),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4916),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7042),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(285),core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_url_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1539),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(8783),core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3948),core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7327),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(6699),core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_16__),_tools_DomUtil__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(7638),_tools_GetType__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2576),_tools_ListEqual__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6392),TrackItem=function(){function e(t,n,i,s,a,r,o,c,_){(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_20__.Z)(this,e),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"key",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"name",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"defValue",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"value",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"valueType",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"min",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"max",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"desc",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"trackList",void 0),this.trackList=t,this.key=n,this.name=i,this.defValue=s,this.value=a,this.valueType=r,this.min=o,this.max=c,this.desc=_}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__.Z)(e,[{key:"enc",value:function(){return this.setVal(this.value+1),this}},{key:"dec",value:function(){return this.setVal(this.value-1),this}},{key:"setMin",value:function(){return this.setVal(this.min),this}},{key:"setMax",value:function(){return this.setVal(this.max),this}},{key:"setVal",value:function(e){return e>this.max&&(e=this.max),e<this.min&&(e=this.min),this.value=e,this.trackList.savePresets(""),this}},{key:"reset",value:function(){return this.setVal(this.defValue),this}}]),e}(),Track=function(){function e(t,n){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_20__.Z)(this,e),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"trackList",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"current",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"playing",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"list",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"name",void 0),this.name=t||this.constructor.name_,this.current=0,this.playing=0,this.trackList=n,this.list=[],e.commonConfigs[this.constructor.name_].forEach((function(e){var t=(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.Z)(e,7),a=t[0],r=t[1],o=t[2],c=t[3],_=t[4],u=t[5],l=t[6],h=s[a];i.list.push(new TrackItem(n,a,r,o,void 0!==h?h:o,c,_,u,l))})),this.list.forEach((function(e){Object.defineProperty(i,e.key,{get:function(){return e.value}})}))}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__.Z)(e,[{key:"rename",value:function(e){console.log(e),this.name=e,this.trackList.savePresets("")}},{key:"len",get:function(){return this.list.length}},{key:"getVal",value:function(e){return _tools_ListEqual__WEBPACK_IMPORTED_MODULE_19__.kI.findByKey(this.list,e).value}},{key:"setIndex",value:function(e){return e>this.len-1&&(e=this.len-1),e<0&&(e=0),this.current=e,this.play(),this}},{key:"play",value:function(){return this.playing=this.current,this}},{key:"prev",value:function(){return this.setIndex((this.current-1+this.len)%this.len),this}},{key:"next",value:function(){return this.setIndex((this.current+1)%this.len),this}},{key:"enc",value:function(){var e=this.list[this.current];return e.enc(),this}},{key:"dec",value:function(){var e=this.list[this.current];return e.dec(),this}},{key:"setMin",value:function(){var e=this.list[this.current];return e.setMin(),this}},{key:"setMax",value:function(){var e=this.list[this.current];return e.setMax(),this}},{key:"setVal",value:function(e){var t=this.list[this.current];return t.setVal(e),this}},{key:"reset",value:function(){var e=this.list[this.current];return e.reset(),this}}]),e}();function createTrackClass(className){var string="\nclass ".concat(className," extends Track {\n  static name_ = '").concat(className,"';\n  constructor() {\n    const [...rest] = arguments;\n    super(...rest);\n  }\n\n  static setConfig(key, name, defaultValue, valueType, min, max, desc) {\n    Track.commonConfigs.").concat(className," || (Track.commonConfigs.").concat(className," = []);\n    Track.commonConfigs.").concat(className,".push([key, name, defaultValue, valueType, min, max, desc]);\n    return ").concat(className,";\n  }\n}");return eval("(".concat(string,")"))}(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(Track,"commonConfigs",{}),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(Track,"name_","Track");var trackConfigs=[{name:"CommonOptionsTrack",required:!0,list:[["CanvasView","开启音频可视化轨道",1,"int",0,1,"是否启用"],["CanvasPic","开启背景轨道",0,"int",0,1,"是否启用"],["CanvasPicMalfunction","开启背景轨道故障特效",0,"int",0,1,"是否启用"],["CanvasText","开启歌词轨道",0,"int",0,1,"是否启用"],["CanvasTextMalfunction","开启歌词轨道故障特效",0,"int",0,1,"是否启用"],["changeBG_When_LRC_Changed","背景歌词同步切换",1,"int",0,1,"是否启用"],["VideoView","开启视频轨道1",0,"int",0,1,"是否启用"],["VideoView1","开启视频轨道2",0,"int",0,1,"是否启用"],["DomClock","显示时钟",0,"int",0,1,"是否启用"],["gameUI","显示游戏界面",0,"int",0,1,"是否启用"],["gameScene","显示游戏场景",1,"int",0,1,"是否启用"]]},{name:"GameTrack",required:!0,list:[["RhythmPointVolumeFloatRange","节奏点浮动范围",1,"int",0,30,"值越大， 则节奏点越少"],["RhythmPointTimeout","节奏点最小间隔",15,"int",0,30,"timeout = (num * 10) ms"],["RhythmPointRemoveFloatRange","节奏点消除范围",20,"int",5,60,"range = (num * 10)"],["RhythmPointMissTipSound","miss提示音",0,"int",0,1,"是否开启"],["RhythmPointCenterPointOffset","轨道偏移量",-30,"int",-60,60,"轨道偏移量"],["trick","开启作弊模式",0,"int",0,1,"是否开启"]]},{multiple:!0,required:!0,name:"CanvasTrack",list:[["disable","是否启用",0,"int",0,1,"是否启用"],["renderType","渲染方式",2,"int",0,3,"渲染方式"],["direction","渲染方向",0,"int",0,1,"渲染方式"],["baseSizeType","基础尺寸单位",0,"int",0,1,"0: 屏幕较小边， 1： 屏幕较大边"],["noZero","删除无效数据",1,"int",0,1,"将频谱数据复制一份， 并逆向拼接在源数据后面"],["copyData","复制并反向数据",1,"int",0,1,"将频谱数据复制一份， 并逆向拼接在源数据后面"],["showDataBefore","展示均衡前的数据",0,"int",0,1,"展示均衡前的数据"],["midPositionX","X中心位子",50,"int",0,100,"绘制中心位于屏幕位置， 0在最左， 100在最右"],["midPositionY","Y中心位子",50,"int",0,100,"绘制中心位于屏幕位置， 0在最上， 100在最下"],["clearPrevView","保留上次渲染",70,"int",0,100,"保留上次绘制（百分比）"],["mainRadius","基线距中心点位置（Y轴）",25,"int",-100,100,"圆形时为半径, 百分比基于基础尺寸单位"],["avrLevelMainRadiusModify","频谱均值基线距离修正系数",25,"int",0,100,"基线随频谱修正系数（百分比）"],["mainRadiusOpacity","基线透明度",75,"int",0,100,"基线透明度"],["mainRadiusLineWidth","基线宽度",3,"int",0,100,"基线宽度， 千分比基准此村"],["floatRange","频谱波动范围",2,"int",-10,10,"频谱波动范围 相对基础尺寸 百分制"],["avrLevelFloatRangeModify","频谱均值波动范围修正系数",25,"int",0,100,"基线随频谱修正系数（百分比）"],["stepModify","频谱间隔修正",10,"int",0,100," 十分比预设"],["lineLineWidth","频谱宽度",3,"int",0,100," 千分比预设"],["dataModify","频谱修正系数",15,"int",0,100,"十分比预设"],["dataOffsetModify","频谱偏移修正系数",6,"int",-100,100,"百分比预设"],["minHeightModify","频谱最小修正系数",-0,"int",-300,100,"百分比预设"],["threshold","阈值",7,"int",0,100,"百分比预设"]]},{name:"VideoTrack",list:[]}],biquadFilterFrequency=[31,63,125,250,500,1e3,2e3,4e3,8e3,16e3,2e4,24e3],balanceTrackConfigs={name:"BalanceTrack",required:!0,list:biquadFilterFrequency.map((function(e,t){return["balance".concat(t),"".concat(e),0,"int",-12,12,"db"]}))};trackConfigs.push(balanceTrackConfigs);var ModifyManager=function(){function e(t){(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_20__.Z)(this,e),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"updateCommonOptions",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"list",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"playing",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"current",void 0),this.list=[],this.playing=0,this.current=0,this.setList([new TrackList(this)]),this.setIndex(0),t&&(this.updateCommonOptions=t),this.init()}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__.Z)(e,[{key:"getTrackByName",value:function(e){return this.list[0].list.find((function(t){return t.constructor.name_===e}))}},{key:"init",value:function(){return this.updateCommonOptions&&this.updateCommonOptions(),this}},{key:"len",get:function(){return this.list.length}},{key:"savePresets",value:function(){var e;return null===(e=this.list[0])||void 0===e||e.savePresets(""),this}},{key:"exportPresets",value:function(){var e;return null===(e=this.list[0])||void 0===e||e.exportPresets(),this}},{key:"importPresets",value:function(e){var t;return null===(t=this.list[0])||void 0===t||t.importPresets(e),this}},{key:"setList",value:function(e){return this.list=e,this.current=0,this}},{key:"replace",value:function(e,t){return this.list.splice(e,1,t),this}},{key:"setIndex",value:function(e){return e>this.len-1&&(e=this.len-1),e<0&&(e=0),this.current=e,this.play(),this}},{key:"play",value:function(){return this.playing=this.current,0===this.current&&this.replace(1,this.list[this.current]),this.list[this.current].play(),this}},{key:"prev",value:function(){return this.setIndex((this.current-1+this.len)%this.len),this}},{key:"next",value:function(){return this.setIndex((this.current+1)%this.len),this}},{key:"enc",value:function(){var e;return this.list[this.current]&&this.list[this.current].enc(),null===(e=this.list[0])||void 0===e||e.savePresets(""),this}},{key:"dec",value:function(){var e;return this.list[this.current]&&this.list[this.current].dec(),null===(e=this.list[0])||void 0===e||e.savePresets(""),this}},{key:"prevItem",value:function(){return this.list[this.current]&&this.list[this.current].prev(),this}},{key:"nextItem",value:function(){return this.list[this.current]&&this.list[this.current].next(),this}},{key:"up",value:function(){return this.list[0].prev(),this}},{key:"down",value:function(){return this.list[0].next(),this}},{key:"add",value:function(){var e,t,n;return null===(e=this.list[0])||void 0===e||(t=e.add).call.apply(t,[this.list[0]].concat(Array.prototype.slice.call(arguments))),null===(n=this.list[0])||void 0===n||n.savePresets(""),this}},{key:"delete",value:function(){var e,t;return(e=this.list[0].delete).call.apply(e,[this.list[0]].concat(Array.prototype.slice.call(arguments))),null===(t=this.list[0])||void 0===t||t.savePresets(),this}},{key:"copy",value:function(){var e;return(e=this.list[0].copy).call.apply(e,[this.list[0]].concat(Array.prototype.slice.call(arguments))),this.list[0].savePresets(),this}}]),e}();function createALink(e,t,n){var i=new Blob([e],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(i),a=_tools_DomUtil__WEBPACK_IMPORTED_MODULE_17__.h.node("a",t);return a.href=s,a.download=t,_tools_DomUtil__WEBPACK_IMPORTED_MODULE_17__.h.append(n||document.body,a),a}var TrackList=function(){function e(t){var n=this;(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_20__.Z)(this,e),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"playing",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"current",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"parent",void 0),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"list",void 0),this.list=[],this.parent=t,this.playing=0,this.current=0,this.loadPresets(),constructorList.forEach((function(e){var t=e.name_,i=n.list.some((function(e){return e.constructor.name_===t}));i||n.add({type:t,name:t})}))}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_22__.Z)(e,[{key:"len",get:function(){return this.list.length}},{key:"add",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.type,i=void 0===n?"CanvasTrack":n,s=e.name,a=e.data,r=0;r<t;r++)TrackClass[i]&&this.list.push(new TrackClass[i](s,this,a));return this.setIndex(this.len-1),this}},{key:"delete",value:function(){var e=this.list[this.current],t=e.constructor.name_,n=trackConfigs.find((function(e){return e.name===t}));if(n.multiple&&!(this.list.filter((function(e){return e.constructor.name_===t})).length<=1))return e&&(this.list.splice(this.current,1),this.setIndex(0)),this}},{key:"copy",value:function(){var e=this.list[this.current],t=e.constructor.name_,n=trackConfigs.find((function(e){return e.name===t}));if(n.multiple)return e&&!["CommonOptionsTrack","BalanceTrack"].includes(e.constructor.name_)&&(this.list.splice(this.current,0,new e.constructor(e.name+"Copy",this,e)),this.setIndex(this.current+1)),this}},{key:"setList",value:function(e){return this.list=e,this.current=0,this}},{key:"setIndex",value:function(e){return e>this.len-1&&(e=this.len-1),e<0&&(e=0),this.current=e,this.play(),this}},{key:"play",value:function(){return this.playing=this.current,this.parent.replace(1,this.list[this.current]),this}},{key:"prev",value:function(){return this.setIndex((this.current-1+this.len)%this.len),this}},{key:"next",value:function(){return this.setIndex((this.current+1)%this.len),this}},{key:"importPresets",value:function(e){var t=this;return e.forEach((function(e,n){var i=t.list.find((function(t){return t.constructor.name_===e.type}));i&&!["CanvasTrack"].includes(e.type)?i.list.forEach((function(t){var n=e.data[t.key];_tools_GetType__WEBPACK_IMPORTED_MODULE_18__.X.isEmpty(n)||(t.value=n)})):t.add(e)})),this.savePresets(""),location.reload(),this}},{key:"exportPresets",value:function(){var e=this.list.map((function(e){var t={};return e.list.forEach((function(n){t[n.key]=e[n.key]})),{name:e.name,data:t,type:e.constructor.name_}})),t=createALink(JSON.stringify(e),"dy_player.preset");t.click(),_tools_DomUtil__WEBPACK_IMPORTED_MODULE_17__.h.remove(t)}},{key:"savePresets",value:function(e){var t,n,i=this.list.map((function(e){var t={};return e.list.forEach((function(n){t[n.key]=e[n.key]})),{name:e.name,data:t,type:e.constructor.name_}}));return(null===(t=this.parent)||void 0===t?void 0:t.updateCommonOptions)&&(null===(n=this.parent)||void 0===n||n.updateCommonOptions()),localStorage.setItem("configPresets",JSON.stringify(i)),this}},{key:"loadPresets",value:function(){var e=this;try{var t=JSON.parse(localStorage.getItem("configPresets")||"[]");t.length||t.push({}),constructorList.forEach((function(n){var i=n.name_,s=t.some((function(e){return e.type===i}));s||e.add({type:i,name:i})})),t.forEach((function(t){e.add(t)}))}catch(n){console.log(n),console.log("load presets fail.")}return this}}]),e}();(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_21__.Z)(TrackList,"name_","TrackList");var TrackClass={};trackConfigs.forEach((function(e){var t=TrackClass[e.name]=createTrackClass(e.name);e.list.forEach((function(e){t.setConfig.apply(t,(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.Z)(e))}))}));var constructorList=trackConfigs.filter((function(e){return e.required})).map((function(e){return TrackClass[e.name]}))},6543:function(e,t,n){var i={};n.r(i),n.d(i,{Il:function(){return A},bs:function(){return Z},J5:function(){return B},ZW:function(){return x},bH:function(){return C},mS:function(){return W}});n(6992),n(8674),n(9601),n(7727);var s=n(9963),a=n(6252),r={id:"app"};function o(e,t){var n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)("div",r,[(0,a.Wm)(n)])}const c={};c.render=o;var _=c,u=n(5205);(0,u.z)("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var l=n(2119),h=(0,a.HX)("data-v-79b672b1");(0,a.dD)("data-v-79b672b1");var d={class:"container"},m={class:"box-wrap"},f={class:"canvas-view-wrap"};(0,a.Cn)();var v=h((function(e,t,n,i,s,r){var o=(0,a.up)("NavBar"),c=(0,a.up)("MusicSearchBox"),_=(0,a.up)("MusicLocalBox"),u=(0,a.up)("ModifyBox"),l=(0,a.up)("GameUI"),h=(0,a.up)("CanvasPic"),v=(0,a.up)("CanvasText"),p=(0,a.up)("CanvasView"),y=(0,a.up)("VideoView"),g=(0,a.up)("DomClock");return(0,a.wg)(),(0,a.j4)("div",d,[(0,a.Wm)(o),(0,a.Wm)("div",m,[(0,a.Wm)(c),(0,a.Wm)(_),(0,a.Wm)(u)]),(0,a.Wm)("div",f,[r.commonOptions.gameUI?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.ry)("",!0),r.commonOptions.CanvasPic?((0,a.wg)(),(0,a.j4)(h,{key:1})):(0,a.ry)("",!0),r.commonOptions.CanvasText?((0,a.wg)(),(0,a.j4)(v,{key:2})):(0,a.ry)("",!0),((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.modifyManager.list[0].list,(function(e,t){return(0,a.wg)(),(0,a.j4)(a.HY,null,[r.commonOptions.CanvasView&&e&&"CanvasTrack"===e.constructor.name_?((0,a.wg)(),(0,a.j4)(p,{key:0,config:e},null,8,["config"])):(0,a.ry)("",!0)],64)})),256))]),r.commonOptions.VideoView?((0,a.wg)(),(0,a.j4)(y,{key:0,index:0})):(0,a.ry)("",!0),r.commonOptions.VideoView1?((0,a.wg)(),(0,a.j4)(y,{key:1,index:1})):(0,a.ry)("",!0),r.commonOptions.DomClock?((0,a.wg)(),(0,a.j4)(g,{key:2})):(0,a.ry)("",!0)])})),p=n(6571),y=(n(2222),n(4747),n(9600),n(1249),n(403)),g=n(813),k=n(1278),b=n(2610),w=n(7224),E=(n(561),n(5827),n(1539),n(9714),n(9826),n(7327),n(4553),n(7638)),D=n(7449),M=function(){function e(){(0,k.Z)(this,e),(0,w.Z)(this,"listeners",{})}return(0,b.Z)(e,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],i=0,s=n.length;i<s;i++)if(n[i]===t)return n.splice(i,1),this.removeEventListener(e,t)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){var t=this.listeners[e.type];e.target=this;for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)}}}]),e}(),C=function e(){(0,k.Z)(this,e),(0,w.Z)(this,"dataFlag",0),(0,w.Z)(this,"shockFlag",0)},P=function e(t,n){(0,k.Z)(this,e),(0,w.Z)(this,"isRhythmPoint",void 0),(0,w.Z)(this,"vol",void 0),this.vol=t,this.isRhythmPoint=n},T=function(){function e(){(0,k.Z)(this,e),(0,w.Z)(this,"fnMap",{})}return(0,b.Z)(e,[{key:"addEventListener",value:function(e,t){this.fnMap[e]||(this.fnMap[e]=[]),this.fnMap[e].push(t)}},{key:"dispatchEvent",value:function(e){var t=this.fnMap[e.type];t&&t.forEach((function(t){return t(e)}))}}]),e}(),O=function(){function e(t){(0,k.Z)(this,e),(0,w.Z)(this,"event",new T),(0,w.Z)(this,"prevAddSpeed",0),(0,w.Z)(this,"prevAvrLevel",0),(0,w.Z)(this,"data",void 0),(0,w.Z)(this,"avrLevel",0),(0,w.Z)(this,"total",0),(0,w.Z)(this,"addSpeed",0),(0,w.Z)(this,"soundTrackArr",[]),(0,w.Z)(this,"soundTrackArrMaxLen",100),(0,w.Z)(this,"shockNum",0),(0,w.Z)(this,"modifyManager",void 0),this.modifyManager=t}return(0,b.Z)(e,[{key:"update",value:function(e){var t=this.soundTrackArr,n=this.prevAvrLevel,i=this.prevAddSpeed;this.data=e,this.total=e.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e+t}));var s=this.avrLevel=this.total/e.length,a=this.addSpeed=s-n,r=this.modifyManager.getTrackByName("GameTrack").getVal("RhythmPointVolumeFloatRange"),o=i<=0&&a>r/10,c=new P(s,o);if(t.push(c),o){this.shockNum++;var _=new Event("shock");_.rhythmPoint=c,this.event.dispatchEvent(_)}t.length>this.soundTrackArrMaxLen&&t.shift(),this.prevAddSpeed=a,this.prevAvrLevel=s,this.event.dispatchEvent(new Event("update"))}}]),e}(),x=function e(t){(0,k.Z)(this,e),(0,w.Z)(this,"realTimeData",void 0),(0,w.Z)(this,"originData",void 0),(0,w.Z)(this,"currentImgAviColor",[0,0,0,0]),(0,w.Z)(this,"calculateColors",[[255,255,255],[255,255,255]]),(0,w.Z)(this,"modifyManager",void 0),this.modifyManager=t,this.realTimeData=new O(t),this.originData=new O(t)},j=function e(t){(0,k.Z)(this,e);var n=E.h.node("div");n.classList.add("game-score"),n.innerHTML=t.toString(),E.h.append(document.body,n),e.prevNode&&E.h.remove(e.prevNode),e.prevNode=n};(0,w.Z)(j,"prevNode",void 0);var L=function e(t){if((0,k.Z)(this,e),e.prevNode&&E.h.remove(e.prevNode),e.prevNode=void 0,t>5){var n=E.h.node("div");n.classList.add("game-combo"),n.innerHTML="".concat(t||0," x combo"),E.h.append(document.body,n),e.prevNode=n}};(0,w.Z)(L,"prevNode",void 0);var I=function(){function e(t,n){var i=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;(0,k.Z)(this,e),(0,w.Z)(this,"gameList",void 0),(0,w.Z)(this,"dom",void 0),(0,w.Z)(this,"score",void 0),(0,w.Z)(this,"time",void 0),(0,w.Z)(this,"isDebug",!1),(0,w.Z)(this,"modifyManager",void 0),(0,w.Z)(this,"endFunction",(function(e){i.isDebug&&i.calculateScore(Date.now()),i.remove(),i.gameList.remove(i)})),this.gameList=t,this.time=Date.now(),this.modifyManager=r;var o=this.dom=E.h.node("div");o.className="game-item",s&&(this.isDebug=s,o.style="animation: gamingDebug linear 0.8s;");var c=120,_=n.vol*this.modifyManager.getTrackByName("GameTrack").getVal("RhythmPointCenterPointOffset"),u=E.h.node("div");E.h.append(o,u),u.style="\n      transform: rotate(".concat(_,"deg) translate(0, calc(").concat(150+n.vol/3,"px));\n      background-color: hsl(").concat(90-c*n.vol/255,", 50%, 50%);\n    "),E.h.append(a,o),o.addEventListener("webkitAnimationEnd",this.endFunction),o.addEventListener("animationend",this.endFunction)}return(0,b.Z)(e,[{key:"calculateScore",value:function(e){var t=this.gameList,n=this.time;this.score=Math.abs(e-n-t.delay)}},{key:"remove",value:function(){var e=this.dom;this.gameList.setCurrentScore(this.score),void 0!==this.score?D.$.play("done"):this.modifyManager.getTrackByName("GameTrack").getVal("RhythmPointMissTipSound")&&D.$.play("warning"),e.removeEventListener("webkitAnimationEnd",this.endFunction),e.removeEventListener("animationend",this.endFunction),e&&E.h.remove(e)}}]),e}(),Z=function(){function e(t,n,i){(0,k.Z)(this,e),(0,w.Z)(this,"currentTime",0),(0,w.Z)(this,"durationTime",0),(0,w.Z)(this,"ended",!1),(0,w.Z)(this,"combo",0),(0,w.Z)(this,"maxCombo",0),(0,w.Z)(this,"currentScore",0),(0,w.Z)(this,"totalScore",0),(0,w.Z)(this,"total",0),(0,w.Z)(this,"missCount",0),(0,w.Z)(this,"uselessCount",0),(0,w.Z)(this,"mv",void 0),(0,w.Z)(this,"gameInner",void 0),(0,w.Z)(this,"modifyManager",void 0),(0,w.Z)(this,"eventTarget",new M),(0,w.Z)(this,"delay",void 0),(0,w.Z)(this,"buffer",150),(0,w.Z)(this,"duration",2e3),(0,w.Z)(this,"list",[]),this.modifyManager=i,this.mv=t,this.delay=1e3*this.mv.delay.delayTime.value,this.gameInner=n}return(0,b.Z)(e,[{key:"endSong",value:function(){this.ended=!0}},{key:"startSong",value:function(){this.ended=!1,this.currentScore=0,this.totalScore=0,this.total=0,this.combo=0,this.maxCombo=0,this.missCount=0,this.uselessCount=0}},{key:"setCombo",value:function(e){e?this.combo=0:this.combo++,this.combo>this.maxCombo&&(this.maxCombo=this.combo),new L(this.combo)}},{key:"setCurrentScore",value:function(e){this.currentScore=e||0,this.totalScore+=e||0;var t=void 0===e;t&&this.missCount++,this.setCombo(t),new j(t?"miss":"score - ".concat(e))}},{key:"find",value:function(e){var t=this.buffer,n=this.delay;return this.list.find((function(i){return Math.abs(e-i.time-n)<t}))}},{key:"indexOf",value:function(e){return this.list.indexOf(e)}},{key:"remove",value:function(e){var t=this.indexOf(e);-1!==t&&this.list.splice(t,1)}},{key:"createGameNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new I(this,e,t,this.gameInner,this.modifyManager);return this.list.push(n),this.total++,n}},{key:"setBuffer",value:function(e){this.buffer=e,this.eventTarget.dispatchEvent(new Event("bufferChange"))}},{key:"shootGameNode",value:function(){var e=Date.now(),t=this.find(e);t?(t.calculateScore(e),t.endFunction()):(this.uselessCount++,new j("userLess press"))}}]),e}(),B=function(){function e(t,n,i,s){var a=this;(0,k.Z)(this,e),(0,w.Z)(this,"dom",void 0),(0,w.Z)(this,"time",void 0),(0,w.Z)(this,"modifyManager",void 0),(0,w.Z)(this,"destroy",(function(){a.remove()})),this.modifyManager=s,this.time=Date.now();var r=this.dom=E.h.node("div");r.className="game-scene";var o=(0,g.Z)(t.data).filter((function(e){return e})).filter((function(e,t){return!(t%16)})),c=360/o.length,_=n.originData.avrLevel*(s.getTrackByName("GameTrack").getVal("RhythmPointCenterPointOffset")||0);r.innerHTML=o.map((function(e,t){return'<div style="transform: rotateZ('.concat(-t*c+180+_,"deg) translate(0, calc(400px + ").concat(10*e,'px));"></div>')})).join(""),E.h.append(i,r),r.addEventListener("webkitAnimationEnd",this.destroy),r.addEventListener("animationend",this.destroy)}return(0,b.Z)(e,[{key:"remove",value:function(){var e=this.dom;e.removeEventListener("webkitAnimationEnd",this.destroy),e.removeEventListener("animationend",this.destroy),e&&E.h.remove(e)}}]),e}(),W=function(){function e(){(0,k.Z)(this,e),(0,w.Z)(this,"list",[])}return(0,b.Z)(e,[{key:"enter",value:function(e){var t=this.list.findIndex((function(t){return e.id===t.id}));-1===t?this.list.push(e):this.list.splice(t,1)}}]),e}(),A=function(){function e(){(0,k.Z)(this,e)}return(0,b.Z)(e,null,[{key:"compose",value:function(e){return e/=255,Math.round(255*(e+(e-.5)*(1-e)))}},{key:"dCompose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e/=255;var n=1-e;while(t+3)n*=1-e,t--;return Math.round(255*(1-n))}},{key:"getPure",value:function(t,n,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=Math.min(t,n,i),r=a/256,o=e.dCompose,c=e.reduce;return[[o(t,s),o(t,s),o(t,s)],[o(c(t,r),s+2),o(c(n,r),s+2),o(c(i,r),s+2)]]}},{key:"reduce",value:function(e,t){return Math.round((e-255*t)/(1-t))}}]),e}(),R=(n(7941),n(655));n(7042);function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=0;return function(n,i,s){var a=n[i];n[i]=function(){Date.now()-t-e>0&&(a.apply(n,Array.prototype.slice.call(arguments)),t=Date.now())}}}n(5306),n(4916);function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(K.cacheMap||(K.cacheMap={}),n||!K.cacheMap[e]){var i=document.createElement("style");i.innerHTML=t.replace(/<\/?style.*?>/g,""),document.head.appendChild(i),K.cacheMap[e]=t}else console.log("[style][".concat(e,"] is already exist!"))}K("","");var S=document.createElement("canvas"),q=document.createElement("canvas"),F=function(){function e(t){(0,k.Z)(this,e),(0,w.Z)(this,"compressRate",void 0),(0,w.Z)(this,"canvas",void 0),(0,w.Z)(this,"ctx",void 0),(0,w.Z)(this,"musicConfig",void 0),(0,w.Z)(this,"cacheList",void 0),(0,w.Z)(this,"cacheImg",void 0),this.compressRate=.1,this.musicConfig=t,this.canvas=S=S||document.createElement("canvas"),this.ctx=S.getContext("2d"),this.cacheList=[],this.cacheImg={}}return(0,b.Z)(e,[{key:"makeEl",value:function(){var t=this,n=document.createElement("img"),i=this.cacheList,s=this.cacheImg,a=this.ctx,r=this.compressRate;return n.onload=function(){if(e.setImage(n),!s[n.src]){var o=n.width,c=n.height;S.width=o*r,S.height=c*r,a.drawImage(n,0,0,S.width,S.height);var _=a.getImageData(0,0,S.width,S.height),u=[[],[],[],[]];_.data.forEach((function(e,t){u[t%4].push(e)})),s[n.src]=[N(u[0]),N(u[1]),N(u[2]),N(u[3])]}n.noNeedChangeCurrentImgAviColor||(t.musicConfig.currentImgAviColor=s[n.src]),i.push(n)},n}},{key:"load",value:function(e,t){if(e){var n=this.cacheList.shift()||this.makeEl();return n.noNeedChangeCurrentImgAviColor=t,n.src=/:\/\//.test(e)?e:"./img/".concat(e),n}}}],[{key:"setImage",value:function(t){var n=document.body,i=n.offsetWidth,s=n.offsetHeight;e.pciCanvas.width=i,e.pciCanvas.height=s,e&&e.pciCtx&&e.pciCtx.drawImage(t,(i-t.width)/2,(s-t.height)/2,t.width,t.height)}},{key:"getImageData",value:function(t,n,i,s){return e.pciCtx&&e.pciCtx.getImageData(t,n,i,s)}}]),e}();function $(e){return e.reduce((function(e,t){return e+t}),0)}function N(e){return Math.round($(e)/e.length)}(0,w.Z)(F,"pciCanvas",q),(0,w.Z)(F,"pciCtx",q.getContext("2d"));var V=function(){function e(t){(0,k.Z)(this,e),(0,w.Z)(this,"lrc",""),(0,w.Z)(this,"ended",void 0),(0,w.Z)(this,"pictureCanvasCtx",void 0),(0,w.Z)(this,"picDom",void 0),(0,w.Z)(this,"imageGroup",[]),(0,w.Z)(this,"mouseMoveConf",{x:0,y:0,w:1,h:1,_x:.5,_y:.5}),(0,w.Z)(this,"currentImgAviColor",[255,255,255,1]),(0,w.Z)(this,"volume",{_main:1,main:.01}),(0,w.Z)(this,"currentImgSrc","");var n=t.images;this.imageGroup=[t.images];var i=new F(this);this.setPictureCanvasCtx(i),this.currentImgSrc=n[0],this.currentImgSrc&&this.changePic(void 0,!0)}return(0,b.Z)(e,[{key:"handelMouseMove",value:function(e){if(e.target===document.body){var t=this.mouseMoveConf,n=e.touches?e.touches[0]:e,i=[n.clientX,n.clientY,n.target.offsetWidth,n.target.offsetHeight],s=i[0],a=i[1],r=i[2],o=i[3],c={x:s,y:a,w:r,h:o,_x:(s-r/2)/r,_y:(a-o/2)/o};Object.keys(t).forEach((function(e){t[e]=c[e]}))}}},{key:"shock",value:function(){}},{key:"setLrc",value:function(e){this.lrc=e}},{key:"getImageData",value:function(e,t,n,i){return F.getImageData(e,t,n,i)}},{key:"changePicGroup",value:function(e){var t=this.imageGroup;t.length&&(e?t.unshift(t.pop()):t.push(t.shift())),this.changePic()}},{key:"changePic",value:function(e,t){var n=this.imageGroup[0];n.length&&(e?n.unshift(n.pop()):n.push(n.shift()),this.currentImgSrc=n[0],this.pictureCanvasCtx&&(this.picDom=this.pictureCanvasCtx.load(this.currentImgSrc)),t&&this.shock())}},{key:"encVolume",value:function(){var e=this.volume.main;e+=.05,e<0&&(e=0),e>1&&(e=1),this.volume.main=e}},{key:"decVolumn",value:function(){var e=this.volume.main;e-=.05,e<0&&(e=0),e>1&&(e=1),this.volume.main=e}},{key:"setPictureCanvasCtx",value:function(e){this.pictureCanvasCtx=e}}]),e}();(0,R.gn)([U(1)],V.prototype,"shock",null);n(8264),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016);var H=n(6499);function z(e){var t=e.ac.createPanner();return t.panningModel="HRTF",t.distanceModel="inverse",t.refDistance=1,t.maxDistance=10,t.rolloffFactor=10,t.coneInnerAngle=360,t.coneOuterAngle=0,t.coneOuterGain=0,t.orientationX?(t.orientationX.value=0,t.orientationY.value=0,t.orientationZ.value=0,t.positionX.value=0,t.positionY.value=0,t.positionZ.value=0):(t.setOrientation&&t.setOrientation(0,0,0),t.setPosition&&t.setPosition(0,0,0)),t}function X(e){var t=e.ac.listener;return t.forwardX?(t.forwardX.value=0,t.forwardY.value=1,t.forwardZ.value=0,t.upX.value=0,t.upY.value=0,t.upZ.value=1,t.positionX.value=0,t.positionY.value=0,t.positionZ.value=0):(t.setOrientation&&t.setOrientation(0,1,0,0,0,1),t.setPosition&&t.setPosition(0,0,0)),t}function G(e,t,n){var i=H.lD.map((function(t){return Y(e,t)}));return i.forEach((function(e){t.connect(e),t=e})),t.connect(n),i}function Y(e,t){var n=e.ac.createBiquadFilter();return n.type="peaking",n.frequency.value=t,n}function J(e){var t=e.$audio=document.createElement("audio"),n=e.ac.createMediaElementSource(t);return t.crossOrigin="anonymous",t.autoplay=!0,t.volume=e.musicConfig.volume.main,t.onended=function(){return e.musicConfig.ended&&e.musicConfig.ended()},{$audio:t,source:n}}window.dy_player_mv_cache||(window.dy_player_mv_cache=[]);var Q=function(){function e(t){if((0,k.Z)(this,e),(0,w.Z)(this,"duration",1),(0,w.Z)(this,"playing",!1),(0,w.Z)(this,"stopType",""),(0,w.Z)(this,"source",null),(0,w.Z)(this,"latestPlayTime",0),(0,w.Z)(this,"count",0),(0,w.Z)(this,"delay",void 0),(0,w.Z)(this,"musicConfig",void 0),(0,w.Z)(this,"gain",void 0),(0,w.Z)(this,"size",void 0),(0,w.Z)(this,"analyser",void 0),(0,w.Z)(this,"analyserBefore",void 0),(0,w.Z)(this,"biquadFilters",void 0),(0,w.Z)(this,"draw",void 0),(0,w.Z)(this,"resetLatestPlayTime",!1),(0,w.Z)(this,"xhr",void 0),(0,w.Z)(this,"panner",void 0),(0,w.Z)(this,"$audio",void 0),(0,w.Z)(this,"isDestoryed",!1),(0,w.Z)(this,"ac",void 0),!t.notClearPrev)while(dy_player_mv_cache.length){var n=dy_player_mv_cache.shift();n.isDestoryed=!0,n.destory()}dy_player_mv_cache.push(this),this.ac=new(window.AudioContext||window.webkitAudioContext),this.musicConfig=t.musicConfig;var i=J(this),s=i.$audio,a=i.source;this.$audio=s,s.volume=.01;var r=this.panner=z(this);X(this);var o=this.analyser=this.ac.createAnalyser(),c=this.analyserBefore=this.ac.createAnalyser(),_=this.gain=this.ac.createGain();_.gain.value=.5,this.size=t.size||8,c.fftSize=o.fftSize=2*this.size;var u=this.delay=this.ac.createDelay();u.delayTime.value=.8,a.connect(c),this.biquadFilters=G(this,c,u),u.connect(o),o.connect(r),r.connect(_),_.connect(this.ac.destination),this.xhr=new XMLHttpRequest,this.draw=t.draw,t.volume&&this.changeVolume(t.volume),this.visualize()}return(0,b.Z)(e,[{key:"load",value:function(e,t){var n=this;this.stopType="",this.playing=!1,this.xhr.abort(),this.xhr.open("GET",e),this.xhr.responseType="arraybuffer",this.xhr.onload=function(){t(n.xhr.response)},this.xhr.send()}},{key:"destory",value:function(){this.$audio&&this.$audio.pause(),this.ac.suspend()}},{key:"decode",value:function(e,t){this.ac.decodeAudioData(e,(function(e){t(e)}),(function(e){console.log(e)}))}},{key:"play",value:function(e){var t=this,n=++this.count;this.source&&this.source[this.source.stop?"stop":"noteOff"](),this.resetLatestPlayTime=!0,e instanceof ArrayBuffer?this.decode(e,(function(e){if(n===t.count){var i=t.ac.createBufferSource();i.buffer=e,i.connect(t.analyserBefore),i[i.start?"start":"noteOn"](0),t.source=i,t.resetLatestPlayTime&&(t.latestPlayTime=t.ac.currentTime)}})):window.isPhone?this.load(e,(function(e){n===t.count&&t.decode(e,(function(e){if(t.playing=!0,n===t.count){var i=t.ac.createBufferSource();i.buffer=e,i.connect(t.analyserBefore),i[i.start?"start":"noteOn"](0),t.source=i,i.onended=function(){t.stopType||t.musicConfig.ended&&t.musicConfig.ended()},t.resetLatestPlayTime&&(t.latestPlayTime=t.ac.currentTime)}}))})):this.$audio.src=e}},{key:"changeVolume",value:function(e){this.musicConfig.volume.main=e}},{key:"setVolume",value:function(){var e=this.musicConfig,t=e.volume.main;this.$audio.volume=t;var n=this.panner,i=e.mouseMoveConf,s=i.x,a=i.y,r=i.w,o=i.h,c=(s-r/2)/r,_=-(a-o/2)/o;n.positionX?(n.positionX.value=c,n.positionY.value=_):n.setPosition&&n.setPosition(c,_,0)}},{key:"visualize",value:function(){var e=this,t=new Uint8Array(this.analyser.frequencyBinCount),n=new Uint8Array(this.analyserBefore.frequencyBinCount),i=window.requestAnimationFrame||window.webkitrequestAnimationFrame||window.mozrequestAnimationFrame,s=function s(){window.hidden||(e.draw&&(e.analyser.getByteFrequencyData(t),e.analyserBefore.getByteFrequencyData(n),e.draw({realTimeData:t,originData:n})),e.setVolume()),e.isDestoryed||i(s)};i(s)}}]),e}();(0,w.Z)(Q,"dtos",[]);n(8309);var ee=n(3577),te=(0,a.HX)("data-v-d6d933a2"),ne=te((function(e,t,n,i,r,o){return(0,a.wg)(),(0,a.j4)("div",{class:["nav-bar",{active:r.active}],onClick:t[1]||(t[1]=function(e){return r.active=!r.active})},[(0,a.Wm)("ul",null,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(o.navList.list,(function(e,t){return(0,a.wg)(),(0,a.j4)("li",null,["fileReader"===e.type?((0,a.wg)(),(0,a.j4)("label",{key:0,for:e.id},[(0,a.Uk)((0,ee.zw)(e.name)+" ",1),(0,a.Wm)("input",{type:"file",id:e.id,onChange:(0,s.iM)((function(t){return e.callback&&e.callback(t)}),["stop"])},null,40,["id","onChange"])],8,["for"])):((0,a.wg)(),(0,a.j4)("div",{key:1,onClick:(0,s.iM)((function(t){return e.callback&&e.callback()}),["stop"])},(0,ee.zw)(e.name),9,["onClick"]))])})),256)),(0,a.WI)(e.$slots,"default",{},void 0,!0)])],2)})),ie={name:"BalanceView",provide:function(){return{}},components:{},mixins:[],props:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],data:function(){return{balanceTrack:this.modifyManager.balanceTrack,searchText:"",active:!1}},computed:{},watch:{},methods:{},mounted:function(){}};ie.render=ne,ie.__scopeId="data-v-d6d933a2";var se=ie;function ae(e,t,n,i,s,r){var o=(0,a.up)("ListBoxView");return(0,a.wg)(),(0,a.j4)(o,{config:s.config},null,8,["config"])}n(6699),n(4765),n(3123),n(4723);var re=["album.js","artists.js","artist_album.js","artist_desc.js","artist_list.js","artist_mv.js","artist_sub.js","artist_sublist.js","banner.js","check_music.js","comment.js","comment_album.js","comment_dj.js","comment_hot.js","comment_like.js","comment_music.js","comment_mv.js","comment_playlist.js","comment_video.js","daily_signin.js","dj_catelist.js","dj_detail.js","dj_hot.js","dj_paygift.js","dj_program.js","dj_program_detail.js","dj_recommend.js","dj_recommend_type.js","dj_sub.js","dj_sublist.js","event.js","fm_trash.js","follow.js","like.js","likelist.js","login.js","login_cellphone.js","login_refresh.js","login_status.js","logout.js","lyric.js","mv_detail.js","mv_first.js","mv_sub.js","mv_url.js","personalized.js","personalized_djprogram.js","personalized_mv.js","personalized_newsong.js","personalized_privatecontent.js","personal_fm.js","playlist_catlist.js","playlist_create.js","playlist_detail.js","playlist_hot.js","playlist_subscribe.js","playlist_tracks.js","playlist_update.js","program_recommend.js","recommend_resource.js","recommend_songs.js","related_allvideo.js","related_playlist.js","resource_like.js","search.js","search_hot.js","search_multimatch.js","search_suggest.js","send_playlist.js","send_text.js","simi_artist.js","simi_mv.js","simi_playlist.js","simi_song.js","simi_user.js","song_detail.js","song_url.js","toplist.js","toplist_artist.js","toplist_detail.js","top_album.js","top_artists.js","top_list.js","top_mv.js","top_playlist.js","top_playlist_highquality.js","top_song.js","user_audio.js","user_cloud.js","user_cloud_search.js","user_detail.js","user_dj.js","user_event.js","user_followeds.js","user_follows.js","user_playlist.js","user_record.js","user_subcount.js","user_update.js","video_detail.js","video_sub.js","video_url.js","weblog.js"];function oe(e){return function(t){var n={fn:null,then:function(e){return n.fn=e}},i="".concat(location.protocol,"//").concat(location.hostname,":3000")+e+(t?"?"+Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"):"");return fetch(encodeURI(i),{xhrFields:{withCredentials:!0},credentials:"include"}).then((function(e){e.json().then((function(e){return n.fn&&n.fn(e)})).catch((function(e){return console.log(e)}))})),function(e){return n.fn=e}}}var ce={"daily_signin.js":"/daily_signin","fm_trash.js":"/fm_trash","personal_fm.js":"/personal_fm"},_e={};function ue(e){return e.replace(/\//,"").split(/\//).map((function(e,t){return t?e[0].toUpperCase()+e.slice(1):e})).join("")}re.forEach((function(e){if(/\.js$/i.test(e)){var t=e in ce?ce[e]:"/"+e.replace(/\.js$/i,"").replace(/_/g,"/");_e[ue(t)]=oe(t)}}));var le=function(){function e(){var t=this,n=arguments,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,k.Z)(this,e),(0,w.Z)(this,"play",void 0),(0,w.Z)(this,"playing",0),(0,w.Z)(this,"current",0),(0,w.Z)(this,"list",void 0),Object.keys(i).forEach((function(e){return t[e]=i[e]})),this.play=function(){return t},i.play&&(this.play=function(){i.play&&i.play.apply(i,(0,g.Z)(n)),t.playing=t.current}),this.list=[],this.playing=0,this.current=0}return(0,b.Z)(e,[{key:"len",get:function(){return this.list.length}},{key:"setList",value:function(e,t){return this.list=e,this.current=0,t&&this.play&&this.play(),this}},{key:"setIndex",value:function(e){return e>this.len-1&&(e=this.len-1),e<0&&(e=0),this.current=e,this}},{key:"prev",value:function(e){return console.log(e),this.setIndex.apply(this,[(this.current-1+this.len)%this.len].concat(Array.prototype.slice.call(arguments))),this}},{key:"next",value:function(){return this.setIndex.apply(this,[(this.current+1)%this.len].concat(Array.prototype.slice.call(arguments))),this}}]),e}(),he={class:"music-lists"};function de(e,t,n,i,r,o){var c=(0,a.up)("ProgressBar");return(0,a.wg)(),(0,a.j4)("label",{for:o.itemId,class:["music-wrap",{focus:r.isFocus}]},[(0,a.Wm)("div",{class:["search-box",{focus:r.isFocus}]},[(0,a.wy)((0,a.Wm)("input",{id:o.itemId,ref:"input",type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.config.searchText=e}),autocomplete:"off",placeholder:"网易云音乐",onFocus:t[2]||(t[2]=function(){return o.focus&&o.focus.apply(o,arguments)}),onBlur:t[3]||(t[3]=function(){return o.blur&&o.blur.apply(o,arguments)})},null,40,["id"]),[[s.nr,n.config.searchText]])],2),(0,a.Wm)("div",he,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(n.config.tabs.list,(function(e,t){return(0,a.wg)(),(0,a.j4)("div",{class:["song-list",{prev:t===(o.tabs.current-1+o.tabs.list.length)%o.tabs.list.length,active:t===o.tabs.current,next:t===(o.tabs.current+1)%o.tabs.list.length}]},[o.getImgUrl(e.list[e.current])?((0,a.wg)(),(0,a.j4)("span",{key:0,style:{backgroundImage:"url('".concat(o.getImgUrl(e.list[e.current]),"')")}},null,4)):(0,a.ry)("",!0),(0,a.Wm)("div",null,[(0,a.Wm)("ul",{style:{transform:"translateY(-".concat(50*e.current,"px)")}},[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.list,(function(i,r){return(0,a.wg)(),(0,a.j4)("li",{class:{active:e.current===r,playing:e.playing===r},onClick:(0,s.iM)((function(t){return e.setIndex(r,"list_box_click")}),["stop"])},[(0,a.Wm)("span",null,["modify"===n.config.type&&1===t?((0,a.wg)(),(0,a.j4)(c,{key:0,template:"",config:i},null,8,["config"])):((0,a.wg)(),(0,a.j4)(a.HY,{key:1},[o.getImgUrl(i)?((0,a.wg)(),(0,a.j4)("img",{key:0,src:o.getImgUrl(i)},null,8,["src"])):(0,a.ry)("",!0),(0,a.Uk)(" "+(0,ee.zw)(i.name)+" ",1),(0,a.Wm)("span",{class:"button",onClick:function(t){return e.setIndex(r,"list_box_click").play("list_box_click")}},"play",8,["onClick"]),e.copy?((0,a.wg)(),(0,a.j4)("span",{key:1,class:"button",onClick:function(t){return e.setIndex(r,"list_box_click").copy("list_box_click")}},"copy",8,["onClick"])):(0,a.ry)("",!0),e.delete?((0,a.wg)(),(0,a.j4)("span",{key:2,class:"button",onClick:function(t){return e.setIndex(r,"list_box_click").delete("list_box_click")}},"delete",8,["onClick"])):(0,a.ry)("",!0),i.rename?((0,a.wg)(),(0,a.j4)("span",{key:3,class:"button",onClick:function(e){return n.config.searchText&&i.rename(n.config.searchText,"list_box_click")}},"rename",8,["onClick"])):(0,a.ry)("",!0)],64))])],10,["onClick"])})),256))],4)])],2)})),256)),(0,a.Wm)("div",{class:"music-lists-prev",onClick:t[4]||(t[4]=(0,s.iM)((function(e){return o.tabs.prev()}),["stop"]))}),(0,a.Wm)("div",{class:"music-lists-next",onClick:t[5]||(t[5]=(0,s.iM)((function(e){return o.tabs.next()}),["stop"]))})])],10,["for"])}var me=(0,a.HX)("data-v-3982f1bd");(0,a.dD)("data-v-3982f1bd");var fe={class:"progress-bar-wrap"},ve={class:"progress-bar"};(0,a.Cn)();var pe=me((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",fe,[(0,a.Wm)("div",ve,[(0,a.Wm)("span",null,(0,ee.zw)(n.config.name),1),(0,a.Wm)("span",null,(0,ee.zw)(n.config.min),1),(0,a.Wm)("div",{onMousedown:t[1]||(t[1]=function(e){return r.touchEv(e)}),onMousemove:t[2]||(t[2]=function(e){return r.moveEv(e)}),onMouseup:t[3]||(t[3]=function(e){return r.endEv()}),onMouseleave:t[4]||(t[4]=function(e){return r.endEv()}),ref:"drag"},[(0,a.Wm)("span",{style:r.barStyle},null,4)],544),(0,a.Wm)("span",null,(0,ee.zw)(n.config.max),1),(0,a.Wm)("span",{onClick:t[5]||(t[5]=function(e){return n.config.setMin()})},"min"),(0,a.Wm)("span",{onClick:t[6]||(t[6]=function(e){return n.config.dec()})},"dec"),(0,a.Wm)("span",null,(0,ee.zw)(n.config.value),1),(0,a.Wm)("span",{onClick:t[7]||(t[7]=function(e){return n.config.enc()})},"enc"),(0,a.Wm)("span",{onClick:t[8]||(t[8]=function(e){return n.config.setMax()})},"max"),(0,a.Wm)("span",{onClick:t[9]||(t[9]=function(e){return n.config.reset()})},"reset")])])})),ye=(n(2023),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,k.Z)(this,e),(0,w.Z)(this,"rect",void 0),(0,w.Z)(this,"position",void 0),(0,w.Z)(this,"$el",void 0),(0,w.Z)(this,"direction",void 0),(0,w.Z)(this,"_direction",void 0),(0,w.Z)(this,"oriPoint",void 0),(0,w.Z)(this,"ori",void 0),(0,w.Z)(this,"pre",void 0),(0,w.Z)(this,"now",void 0),(0,w.Z)(this,"doNotStopWhenMatch",void 0),(0,w.Z)(this,"isTouching",void 0),(0,w.Z)(this,"touched",void 0),(0,w.Z)(this,"cachePosition",void 0),(0,w.Z)(this,"moved",!1),(0,w.Z)(this,"DOMRect",void 0),(0,w.Z)(this,"resetPositionWhenTouch",void 0),this.direction=t.direction||"xy",this.oriPoint={y:0,x:0},this.ori={y:0,x:0},this.pre={y:0,x:0},this.now={y:0,x:0},this.doNotStopWhenMatch=t.doNotStopWhenMatch,this.resetPositionWhenTouch=t.resetPositionWhenTouch||!1,this.position=t.position||{x:0,y:0},this.isTouching=!1,this._direction="",this.touched=!1,this.cachePosition=[]}return(0,b.Z)(e,[{key:"setEl",value:function(e){this.$el=e;var t=this.DOMRect=e.getBoundingClientRect();this.rect={h:t.bottom-t.top,w:t.right-t.left}}},{key:"touchEv",value:function(e){if(this.setEl(e.target),this.resetPositionWhenTouch){var t=this.position,n=this.DOMRect;n&&(t.x=e.screenX-n.left,t.y=e.screenY-n.top)}this.touched=!0;var i=e.touches?e.touches[0]:e,s=i.clientY,a=i.clientX;this.oriPoint={y:s,x:a},this.direction.includes("x")||(a=0),this.direction.includes("y")||(s=0),this.ori={y:s,x:a},this.pre={y:s,x:a},this.now={y:s,x:a},this.isTouching=!0,this.moved=!1,this.cachePosition=[],this._direction=""}},{key:"moveEv",value:function(e){if(this.touched){var t=e.touches?e.touches[0]:e,n=t.clientY,i=t.clientX,s={y:0,x:0};this._direction||(this._direction=Math.abs(i-this.oriPoint.x)<Math.abs(n-this.oriPoint.y)?"y":"x"),this.direction.includes("x")&&(s.x=i),this.direction.includes("y")&&(s.y=n),this.cachePosition.push(s),this.direction.includes(this._direction)&&(this.pre=this.now,this.now=s,this.doNotStopWhenMatch||(e.cancelBubble=!0,e.stopPropagation(),e.preventDefault()))}}},{key:"endEv",value:function(){this.touched=!1,this.isTouching=!1;var e=this.getOffset(),t=this.position,n=this.rect,i={x:t.x+e.x,y:t.y+e.y};n&&(i.x<0&&(i.x=0),i.y<0&&(i.y=0),i.x>n.w&&(i.x=n.w),i.y>n.h&&(i.y=n.h)),this.position=i}},{key:"getPercent",value:function(){var e=this.rect,t=this.position,n=this.isTouching,i=this.getOffset();if(e)return{x:(t.x+(n?i.x:0))/e.w,y:(t.y+(n?i.y:0))/e.h}}},{key:"setPercent",value:function(e){var t=this.rect,n=this.position,i=e.x,s=e.y;t&&(n.x=i*t.w,n.y=s*t.h)}},{key:"getOffset",value:function(){return{y:this.now.y-this.ori.y,x:this.now.x-this.ori.x}}},{key:"getSpeed",value:function(){return{y:this.now.y-this.pre.y,x:this.now.x-this.pre.x}}}]),e}()),ge=ye,ke={name:"ProgressBar",inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","commonOptions_"],props:["config"],data:function(){return{drag:new ge({doNotStopWhenMatch:!0,resetPositionWhenTouch:!0})}},methods:{touchEv:function(e){this.drag.touchEv(e)},moveEv:function(e){this.drag.moveEv(e)},endEv:function(e){this.drag.endEv(e),this.setPer()},setPer:function(){if(this.$el&&!this.drag.isTouching){var e=this.config,t=this.drag;t.setPercent({x:(this.currentVal-e.min)/(e.max-e.min),y:0})}}},computed:{percent:function(){var e=this.drag,t=(e.isTouching,e.position,e.getPercent());return t?t.x:0},barStyle:function(){var e=this.drag.isTouching;return{width:"".concat(100*this.percent,"%"),transition:"all ".concat(e?0:.3,"s")}},currentVal:function(){var e=this.config;return e?e.value:0}},watch:{currentVal:{immediate:!0,handler:function(){this.setPer()}},config:{immediate:!0,handler:function(){this.setPer()}},percent:function(){var e=this.config;e.setVal(Math.round(this.percent*(e.max-e.min))+e.min)}},mounted:function(){var e=this.config,t=this.drag;e.current=8,t.setEl(this.$refs.drag),this.setPer()}};ke.render=pe,ke.__scopeId="data-v-3982f1bd";var be=ke,we={name:"ListBoxView",provide:function(){return{}},components:{ProgressBar:be},mixins:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],props:["config"],computed:{tabs:function(){return this.config.tabs},itemId:function(){return"ListBoxView_".concat(this.config.focusKey)}},watch:{},data:function(){return{isFocus:!1}},methods:{focus:function(){var e=this,t=this.isFocus_=Date.now();setTimeout((function(){t===e.isFocus_&&(e.isFocus=!0)}),300)},blur:function(){var e=this,t=this.isFocus_=Date.now();setTimeout((function(){t===e.isFocus_&&(e.isFocus=!1)}),300)},getImgUrl:function(e){return e&&(e.coverImgUrl||e.al&&e.al.picUrl||e.album&&e.album.picUrl)}},beforeDestory:function(){},mounted:function(){var e=this;this.navList.enter({name:this.config.name,id:this.itemId,callback:function(){e.$refs.input.focus()}});this.musicConfig,this.gameList,this.mv;var t=this.config,n=t.tabs;this.$shortCut=new y.r,"modify"===t.type&&this.$shortCut.init(this.$refs.input,{common:{w:function(){return t.tabs.up("list_box_shortcut")},s:function(){return t.tabs.down("list_box_shortcut")},q:function(){return t.tabs.prev("list_box_shortcut")},e:function(){return t.tabs.next("list_box_shortcut")},enter:function(){return t.searchText?n.search&&n.search():n.play&&n.play()},107:function(){return t.tabs.add(void 0,"list_box_shortcut")},delete:function(){return t.tabs.delete(void 0,"list_box_shortcut")},c:function(){return t.tabs.copy(void 0,"list_box_shortcut")},4:function(){return t.tabs.dec("list_box_shortcut")},6:function(){return t.tabs.enc("list_box_shortcut")},left:function(){return t.tabs.dec("list_box_shortcut")},right:function(){return t.tabs.enc("list_box_shortcut")},a:function(){return t.tabs.dec("list_box_shortcut")},d:function(){return t.tabs.enc("list_box_shortcut")},8:function(){return t.tabs.prevItem("list_box_shortcut")},2:function(){return t.tabs.nextItem("list_box_shortcut")},up:function(){return t.tabs.prevItem("list_box_shortcut")},down:function(){return t.tabs.nextItem("list_box_shortcut")},esc:function(){return e.$refs.input.blur("list_box_shortcut")}},alt:{},shift:{},ctrl:{}},{common:{w:"上一项",s:"下一项",q:"左翻页",e:"右翻页",107:"添加配置",delete:"删除配置",c:"复制当前配置",4:"参数小",6:"参数大",left:"参数小",right:"参数大",a:"参数小",d:"参数大",8:"上一项",2:"下一项",up:"上一项",down:"下一项",esc:"关闭配置页面"},alt:{},shift:{},ctrl:{}}),"listBox"===t.type&&this.$shortCut.init(this.$refs.input,{common:{up:function(){return t.tabs.list[t.tabs.current].prev("list_box_shortcut")},down:function(){return t.tabs.list[t.tabs.current].next("list_box_shortcut")},left:function(){return t.searchText||t.tabs.prev("list_box_shortcut")},right:function(){return t.searchText||t.tabs.next("list_box_shortcut")},enter:function(){return t.search&&t.searchText?t.search():t.tabs.list[t.tabs.current].play()},backspace:function(){return t.searchText||t.tabs.current&&t.tabs.prev("list_box_shortcut")},esc:function(){return e.$refs.input.blur()}}},{common:{up:"上一项",down:"下一项",left:"上一页",right:"上一页",enter:"搜索|播放|确认",backspace:"删除|返回上一页",esc:"关闭页面"}}),y.t.init(void 0,{alt:(0,w.Z)({},this.config.focusKey,(function(){e.$refs.input.focus()}))},{alt:(0,w.Z)({},this.config.focusKey,"打开页面")})}};we.render=de;var Ee=we,De={name:"MusicSearchBox",provide:function(){return{}},components:{ListBoxView:Ee},mixins:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],data:function(){var e=this,t=new le,n=new le({play:function(t){var i=n.list[n.current];e.mv.$audio.currentTime=i.time/10},setIndex:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.setIndexFlag&&!n)return this;if(["list_box_click","list_box_shortcut"].includes(n)){var i=this.setIndexFlag=Date.now();setTimeout((function(){i===t.setIndexFlag&&(t.setIndexFlag=void 0)}),3e3)}return e>this.len-1&&(e=this.len-1),e<0&&(e=0),this.current=e,this}}),i=new le({play:function(t){return e.play(t)}}),s=new le({play:function(){_e.playlistDetail({id:e.sheetList.list[e.sheetList.current].id})((function(t){e.sheet.setList(t.playlist.tracks,!0)}))}});return t.setList([s,i,n]),{config:{type:"listBox",name:"网易云音乐",tabs:t,searchText:"",focusKey:"q",search:function(){return e.search()}},currentTime:0,timer:null,tabs:t,lrcs:n,sheet:i,sheetList:s,account:null}},computed:{},watch:{"lrcs.current":function(){var e=this.lrcs,t=e.list,n=e.current;this.modifyManager.getTrackByName("CommonOptionsTrack").getVal("changeBG_When_LRC_Changed")&&this.musicConfig.changePic(),this.musicConfig.setLrc(t[n]&&t[n].name||"")},currentTime:{immediate:!0,handler:function(){var e=this.mv.$audio.currentTime;this.gameList.currentTime=1e3*e;var t=parseInt(10*e),n=0;this.lrcs.list.some((function(e,i){return e.time<=t&&(n=i),e.time>t})),this.lrcs.setIndex(n)}},account:{immediate:!0,handler:function(){this.account&&this.getUserSongList()}}},methods:{getLrc:function(){var e=this,t=this.sheet.list[this.sheet.current];t&&(_e.lyric({id:t.id||t.songId})((function(t){var n=t.lrc.lyric.split(/\n/).map((function(e){var t=e.match(/(?:\[)(\d+)(?::)([^\]]+)(?:\])([^\[\]]*)/);return{name:t?t[3]:"",time:t?parseInt(10*(60*+t[1]+ +t[2])):0}}));e.lrcs.setList(n)})),this.lrcs.setList([]))},login:function(){var e=this,t={phone:localStorage.getItem("userPhone"),password:localStorage.getItem("password")};if(!t.password||!t.password)return y.r.toast(["正式环境位开放远程歌曲"]),void setTimeout((function(){y.r.toast(["请使用测试歌曲"])}),600);_e.loginCellphone(t)((function(t){e.account=t.account,e.getMySheets()}))},getImgUrl:function(e){return e&&(e.coverImgUrl||e.al&&e.al.picUrl||e.album&&e.album.picUrl)},getSongUrl:function(){var e=this.mv,t=this.sheet.list[this.sheet.current];t&&(this.gameList.durationTime=e.duration=e.duration=t.duration||t.dt,_e.songUrl({id:t.id})((function(t){e.play(t.data[0].url)})))},play:function(e){var t=this,n=this.gameList,i=this.mv,s=function(){n.startSong(),i.stopType=e,t.getSongUrl(),t.getLrc(),t.tabs.setIndex(1),t.config.searchText=""};i.$audio.paused?s():(i.$audio.pause(),setTimeout((function(){s()}),1e3*i.delay.delayTime.value+n.buffer))},getUserSongList:function(){var e=this;_e.userPlaylist({uid:this.account.id})((function(t){e.sheetList.setList(t.playlist,!0)}))},getMySheets:function(){var e=this;_e.recommendSongs()((function(t){e.sheet.setList(t.recommend||[])}))},like:function(){var e=this.sheet.list[this.sheet.current],t=this.sheetList.list[0];t&&e&&_e.playlistTracks({op:"add",pid:t.id,tracks:e.id})((function(e){console.log("like")}))},search:function(){var e=this;this.config.searchText&&_e.search({keywords:this.config.searchText})((function(t){e.sheet.setList(t.result.songs,!0),e.config.searchText=""}))}},beforeDestory:function(){clearInterval(this.timer)},mounted:function(){var e=this,t=this.musicConfig,n=this.gameList,i=this.mv;t.ended=function(){setTimeout((function(){n.endSong(),setTimeout((function(){e.sheet.next(),e.sheet.play()}),5e3)}),1e3*i.delay.delayTime.value+n.buffer+1e3)},this.timer=setInterval((function(){return e.currentTime=Date.now()}),50),this.login(),y.t.init(void 0,{alt:{left:function(){var e=i.$audio.currentTime-5;i.$audio.currentTime=e>=0?e:0},right:function(){var e=i.$audio.currentTime+5;i.$audio.currentTime=e<=i.$audio.duration?e:i.$audio.duration},p:function(){return i.$audio.paused?i.$audio.play():i.$audio.pause()}},ctrl:{left:function(){return t.changePic(!0)},right:function(){return t.changePic()}}},{alt:{left:"退后5s",right:"前进5s",p:"暂停/播放"},ctrl:{left:"上一张图片",right:"下一张图片"}})}};De.render=ae;var Me=De;function Ce(e,t,n,i,s,r){var o=(0,a.up)("ListBoxView");return(0,a.wg)(),(0,a.j4)(o,{config:s.config},null,8,["config"])}var Pe={name:"MusicLocalBox",provide:function(){return{}},components:{ListBoxView:Ee},mixins:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],data:function(){var e=this,t=new le,n=new le({play:function(){e.play()}});return t.setList([n]),n.setList([{name:"testSong",url:"./sound/testSound.mp3"}]),{config:{type:"listBox",name:"测试歌曲",tabs:t,searchText:"",focusKey:"w"},tabs:t,songList:n}},computed:{},watch:{},methods:{play:function(e){var t=this,n=this.gameList,i=this.mv,s=function(){n.startSong(),i.stopType=e,i.play(t.songList.list[t.songList.current].url),t.searchText=""};i.$audio.paused?s():(i.$audio.pause(),setTimeout((function(){s()}),1e3*i.delay.delayTime.value+n.buffer))}},mounted:function(){this.musicConfig,this.gameList;var e=this.mv;y.t.init(void 0,{alt:{left:function(){var t=e.$audio.currentTime-5;e.$audio.currentTime=t>=0?t:0},right:function(){var t=e.$audio.currentTime+5;e.$audio.currentTime=t<=e.$audio.duration?t:e.$audio.duration},p:function(){return e.$audio.paused?e.$audio.play():e.$audio.pause()}},ctrl:{}},{alt:{left:"退后5s",right:"前进5s",p:"暂停/播放"},ctrl:{}})}};Pe.render=Ce;var Te=Pe,Oe=(0,a.HX)("data-v-a24a1548"),xe=Oe((function(e,t,n,i,s,r){var o=(0,a.up)("ListBoxView");return(0,a.wg)(),(0,a.j4)(o,{config:s.config},null,8,["config"])})),je={name:"ModifyBox",provide:function(){return{}},components:{ListBoxView:Ee},mixins:[],inject:["modifyManager","navList"],data:function(){return{config:{type:"modify",name:"参数调整",tabs:this.modifyManager,searchText:"",focusKey:"e"}}},computed:{},watch:{},methods:{search:function(){}},mounted:function(){}};je.render=xe,je.__scopeId="data-v-a24a1548";var Le=je,Ie=(0,a.HX)("data-v-bd352cee");(0,a.dD)("data-v-bd352cee");var Ze={class:"canvas-view"};(0,a.Cn)();var Be=Ie((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",Ze,[(0,a.Wm)("canvas",{ref:"canvas",width:s.width,height:s.height},null,8,["width","height"])])})),We=(n(3290),{name:"CanvasView",inject:["musicDataFlags","musicData","musicConfig","gameList","mv"],data:function(){return{width:0,height:0}},computed:{},props:["config"],watch:{"musicDataFlags.dataFlag":{immediate:!0,deep:!0,handler:function(){this.$canvas&&this.ctx&&this.renderCanvas()}}},methods:{renderCanvas:function(){var e=this.mv,t=this.musicData,n=this.config,i=this.musicConfig,s=n;this.$canvasHidded.width=this.width=this.$el.offsetWidth,this.$canvasHidded.height=this.height=this.$el.offsetHeight,e.size=8*s.dataSize;var a=this.height,r=this.width,o=this.ctx,c=this.viewCtx,_=t.originData,u=t.realTimeData,l=t.calculateColors,h=u.avrLevel,d=u.data,m=_.data,f=(0,g.Z)(s.copyData?d:[]);f.reverse();var v=[];if(s.showDataBefore){var p=(0,g.Z)(s.copyData?m:[]);p.reverse(),v=[].concat((0,g.Z)(m),(0,g.Z)(p)),v.reverse()}var y=[].concat((0,g.Z)(d),(0,g.Z)(f),(0,g.Z)(v)).filter((function(e){return!s.noZero||e})),k=(i.currentImgAviColor,i.mouseMoveConf,[Math.min(a,r),Math.max(a,r)][s.baseSizeType]),b={x:r*s.midPositionX/100,y:a*s.midPositionY/100},w=k*s.mainRadius/100*(100-s.avrLevelMainRadiusModify+s.avrLevelMainRadiusModify*h/256)/100,E=k*s.floatRange/100*(100-s.avrLevelFloatRangeModify+s.avrLevelFloatRangeModify*h/256)/100;if(o.fillStyle="rgba(0, 0, 0, ".concat(s.disable?1:1-s.clearPrevView/100,")"),o.fillRect(0,0,this.width,this.height),o.clearRect(0,0,r,a),c.clearRect(0,0,r,a),s.disable)c.drawImage(this.$canvasHidded,0,0);else{o.fillStyle=o.strokeStyle="rgba(".concat(l[0].join(", "),", ").concat(s.mainRadiusOpacity/100,")"),o.lineWidth=k*s.mainRadiusLineWidth/1e3,o.beginPath(),0===s.direction&&o.arc(b.x,b.y,Math.abs(w),0,2*Math.PI),o.closePath(),o.stroke();var D=y.length||1,M=2*Math.PI/(D||1)*s.stepModify/10,C=M/2,P=0*Math.PI;o.lineWidth=k*s.lineLineWidth/1e3;var T=s.dataModify/10,O=1+s.dataOffsetModify/100;o.closePath();var x=y.length,j=s.minHeightModify/100;y.forEach((function(e,t){e=e/256+j;var n=y[(t+1)%x]/256+j,i=M*t+P;function a(){var n=(t-D/2)*s.stepModify,a=[[Math.sin(i)*(e*T+O*w)+b.x,Math.cos(i)*(e*T+O*w)+b.y],[b.x+n,-(e*T+O*w)+b.y]][s.direction],r=[[Math.sin(i)*(e*T*E*3+O*w)+b.x,Math.cos(i)*(e*T*E*3+O*w)+b.y],[b.x+n,-(e*T*E*3+O*w)+b.y]][s.direction],c=o.createLinearGradient(a[0],a[1],r[0],r[1]);c.addColorStop(1,"rgba(".concat(l[0].join(", "),", 1)")),c.addColorStop(.75,"rgba(".concat(l[1].join(", "),", 1)")),c.addColorStop(0,"rgba(".concat(l[1].join(", "),", 1)")),o.strokeStyle=c,o.beginPath(),o.moveTo(a[0],a[1]),o.lineTo(r[0],r[1]),o.closePath(),o.stroke()}var r=e*T*E*3+w;function c(){o.strokeStyle="rgba(".concat(l[1].join(", "),", ").concat(2*h/255+.25,")");var e=n*T*E*3+w;o.beginPath(),o.moveTo(Math.sin(i)*r+b.x,Math.cos(i)*r+b.y),o.bezierCurveTo(Math.sin(i+M/3)*r+b.x,Math.cos(i+M/3)*r+b.y,Math.sin(i+M/3*2)*e+b.x,Math.cos(i+M/3*2)*e+b.y,Math.sin(i+M)*e+b.x,Math.cos(i+M)*e+b.y),o.closePath(),o.stroke()}function _(){o.fillStyle="rgba(".concat(l[1].join(", "),", 1)"),o.beginPath();var n=(t-D/2)*s.stepModify+b.x,a=[[Math.sin(i)*r+b.x,Math.cos(i)*r+b.y],[n,-(e*T*E*3+O*w)+b.y]][s.direction]||[],c=a[0],_=a[1];o.arc(c,_,k*s.lineLineWidth/1e3,0,2*Math.PI),o.closePath(),o.fill()}function u(){o.strokeStyle="rgba(".concat(l[1].join(", "),", 1)"),o.beginPath();var t=(e*T-s.threshold/10)*E;t<0&&(t=0);var n=[[Math.sin(i-C)*w+b.x,Math.cos(i-C)*w+b.y],[Math.sin(i+C)*w+b.x,Math.cos(i+C)*w+b.y],[Math.sin(i)*(-t+w)+b.x,Math.cos(i)*(-t+w)+b.y],[Math.sin(i)*(t+w)+b.x,Math.cos(i)*(t+w)+b.y]];[0,2,1,3,0,2].forEach((function(e){o.lineTo.apply(o,n[e])})),o.closePath(),o.stroke()}[a,c,u,_][s.renderType]()})),o.closePath(),c.drawImage(this.$canvasHidded,0,0)}}},mounted:function(){this.$canvas=this.$refs.canvas,this.viewCtx=this.$canvas.getContext("2d"),this.$canvasHidded=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.ctx=this.$canvasHidded.getContext("2d")}});We.render=Be,We.__scopeId="data-v-bd352cee";var Ae=We,Re=(0,a.HX)("data-v-0226e92a");(0,a.dD)("data-v-0226e92a");var Ue={class:"canvas-view"};(0,a.Cn)();var Ke=Re((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",Ue,[(0,a.Wm)("canvas",{ref:"canvas",width:s.width,height:s.height},null,8,["width","height"])])})),Se=n(2576),qe=function(){function e(){(0,k.Z)(this,e)}return(0,b.Z)(e,[{key:"exec",value:function(){var t=this.max_,n=this.min_,i=this.sign_;return e.exec(t,n,i)}},{key:"sign",value:function(){return this.sign_=-1,this}},{key:"min",value:function(e){return Se.X.isNumber(e)&&(this.min_=e),this}},{key:"max",value:function(e){return Se.X.isNumber(e)&&(this.max_=e),this}},{key:"int",value:function(t,n){var i=this.max_,s=this.min_,a=this.sign_;return e.int(i,s,a,t,n)}},{key:"boolean",value:function(){return e.boolean(size,rate)}}],[{key:"exec",value:function(e,t,n){var i=Math.random();return Se.X.isNumber(e)&&(i*=e),Se.X.isNumber(t)&&(i+=t),n&&(i*=-1),i}},{key:"int",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return(i&&e.boolean()?-1:1)*Math.round(Math.random()*t+n)}},{key:"boolean",value:function(){return Math.round(Math.random())}},{key:"time",value:function(){return Date.now().toString()}}]),e}();var Fe={r:0,g:1,b:2,a:3},$e=function(){function e(t){(0,k.Z)(this,e),(0,w.Z)(this,"aisleMap",Fe),(0,w.Z)(this,"imageData",void 0),this.imageData=t}return(0,b.Z)(e,[{key:"getAisle",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.aisleMap[t];if(void 0===i)return[];for(var s=this.imageData,a=s.data,r=s.width,o=s.height,c=[],_=0;_<o;_++){var u=[];c.push(u);for(var l=r*_,h=0;h<r;h++)u.push(a[4*(l+h)+i]),n&&(a[4*(l+h)+i]=e.cutFnMap[n]&&e.cutFnMap[n]()||255)}return c}},{key:"aisleOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.aisleMap[e];if(void 0!==a)for(var r=this.getAisle(e,s),o=this.imageData,c=o.data,_=o.width,u=o.height,l=0;l<u;l++)for(var h=r[l+n]||{},d=_*(l+n)+t,m=0;m<_;m++)c[4*(d+m)+a]=(h[m]||0)*i}}]),e}();(0,w.Z)($e,"cutFnMap",{1:function(){return 255},2:function(){return 0},3:function(){return qe.int(255,0)}});var Ne={name:"CanvasPic",inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","commonOptions_"],data:function(){return{width:0,height:0,count:0,thisCount:0,imgCtx:null,shallMalfunction:0}},watch:{"musicDataFlags.shockFlag":{immediate:!0,handler:function(){this.commonOptions_.CanvasPicMalfunction&&(this.shallMalfunction=2)}},"musicDataFlags.dataFlag":{immediate:!0,handler:function(){this.$canvas&&this.ctx&&this.renderCanvas()}}},methods:{renderCanvas:function(){var e=this,t=this.height,n=this.width,i=this.ctx,s=(this.imgCtx,this.musicConfig),a=this.musicData,r=a.realTimeData,o=r.avrLevel;if(i.putImageData(s.getImageData(0,0,n,t),0,0),this.shallMalfunction){var c=[0,1,2,3,4,5];function _(e,t,n){return'<filter id="'.concat(e,'"><feGaussianBlur in="SourceGraphic" stdDeviation="').concat(t,",").concat(n,'"></feGaussianBlur></filter>')}document.querySelector("#svg-all").innerHTML="<defs>".concat(c.map((function(e){return _("blur".concat(2*e),0,e?o/255/e*20:0)})).join("")).concat(c.map((function(e){return _("blur".concat(2*e,"-v"),e?o/255/e*20:0,0)})).join("")).concat(c.map((function(e){return _("blur".concat(2*e,"--45"),e?o/255/e*20:0,0)})).join(""),"</defs>")}var u=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=a?qe.int(n,n/(a+.2*a)):n,c=a?qe.int(t,t/(5*a)):t/10,_=(n-r)/2,u=(t-c)/2+qe.int(c/2,0,!0),l=s.getImageData(_,u,r,c);if(l){var h=new $e(l),d=qe.boolean(),m=o/4;if(e.shallMalfunction){var f=[function(e){return h.aisleOffset("r",d?e:0,d?0:e,void 0,qe.int(3,0))},function(e){return h.aisleOffset("g",d?e:0,d?0:e,void 0,qe.int(3,0))},function(e){return h.aisleOffset("b",d?e:0,d?0:e,void 0,qe.int(3,0))}],v=qe.int(2,0);f[v](qe.int(m,m/2,!0)),qe.boolean()&&f[(v+1)%f.length](qe.int(m,m/3,!0)),qe.boolean()&&f[(v+2)%f.length](qe.int(m,m/4,!0)),i.putImageData(h.imageData,_+qe.int(20*a,0,!0),u+qe.int(10*a,0,!0))}i.putImageData(l,_,u)}};s.picDom&&2===this.shallMalfunction&&u(0),this.viewCtx.drawImage(this.$canvasHidded,0,0),this.shallMalfunction&&this.shallMalfunction--}},mounted:function(){this.$canvas=this.$refs.canvas,this.viewCtx=this.$canvas.getContext("2d"),this.$canvasHidded=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage.width=this.$canvasHidded.width=this.width=this.$el.offsetWidth,this.$canvasImage.height=this.$canvasHidded.height=this.height=this.$el.offsetHeight,this.ctx=this.$canvasHidded.getContext("2d"),this.imgCtx=this.$canvasImage.getContext("2d")}};Ne.render=Ke,Ne.__scopeId="data-v-0226e92a";var Ve=Ne,He=(0,a.HX)("data-v-7a6a75bb");(0,a.dD)("data-v-7a6a75bb");var ze={class:"canvas-view"};(0,a.Cn)();var Xe=He((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",ze,[(0,a.Wm)("div",{style:s.textStyle},"Happy new Year!",4)])})),Ge={name:"CanvasText",inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],data:function(){return{width:0,height:0,count:0,thisCount:0,imgCtx:null,textStyle:""}},computed:{},watch:{"musicDataFlags.dataFlag":{immediate:!0,handler:function(){var e=musicData,t=e.realTimeData,n=(e.calculateColors,t.avrLevel),i=n/255,s=Math.round(n/255*100)+10,a=n/255+.75,r=n/255/2+.75;this.textStyle="text-shadow: ".concat(["0 0 ".concat(s,"px #fff"),"0 0 ".concat(2*s,"px #fff"),"0 0 ".concat(3*s,"px #fff"),"0 0 ".concat(4*s,"px #fff"),"0 0 ".concat(5*s,"px #ff5722"),"0 0 ".concat(6*s,"px #ff5722"),"0 0 ".concat(7*s,"px #ff5722"),"0 0 ".concat(8*s,"px #ff5722")].join(","),"; opacity: ").concat(a>1?1:a,"; transform: translate3d(0,0,0) scale(").concat(r,", ").concat(r,") rotate(").concat(qe.exec(3*i,-3*i),"deg)")}}},methods:{}};Ge.render=Xe,Ge.__scopeId="data-v-7a6a75bb";var Ye=Ge,Je=(0,a.HX)("data-v-3153c9aa");(0,a.dD)("data-v-3153c9aa");var Qe={class:"canvas-view"};(0,a.Cn)();var et=Je((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",Qe,[(0,a.Wm)("canvas",{ref:"canvas",width:s.width,height:s.height},null,8,["width","height"])])})),tt={name:"CanvasText",inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],data:function(){return{width:0,height:0,count:0,thisCount:0,imgCtx:null,shallMalfunction:!1,size:0}},watch:{"musicDataFlags.dataFlag":{immediate:!0,handler:function(){this.$canvas&&this.ctx&&this.renderCanvas()}},"musicDataFlags.shockFlag":{immediate:!0,handler:function(){this.modifyManager.getTrackByName("CommonOptionsTrack").getVal("CanvasTextMalfunction")&&(this.shallMalfunction=!0),this.size=0}}},methods:{renderCanvas:function(){var e=this,t=this.height,n=this.width,i=this.ctx,s=(this.imgCtx,this.musicConfig),a=this.viewCtx,r=this.musicData,o=r.realTimeData,c=r.calculateColors,_=o.avrLevel,u=100,l=n/2,h=.66*t,d=this.size=this.size||160+qe.int(10*_/255,0,!0)-1.5*(s.lrc||"").length;i.clearRect(0,0,n,t),a.clearRect(0,0,n,t),s.lrc&&(i.fillStyle="rgba(0,0,0,.5)",i.fillRect(0,t/7*3.9,n,t/7*1.3)),i.font="".concat(d,"px pmzdbtt");var m=i.measureText(s.lrc);m.width>n-100&&(d=this.size=Math.floor(this.size/m.width*(n-100)),i.font="".concat(d,"px pmzdbtt")),i.textAlign="center",i.textBaseline="middle",i.lineWidth=1;var f=_/255,v=f*d/4+4;i.strokeStyle="rgba(".concat(c[1].map((function(e){return 255})).join(", "),", ").concat(f,")"),i.strokeText(s.lrc,l+v,h-v);var p=i.createPattern(F.pciCanvas,"repeat");i.fillStyle=p,i.fillText(s.lrc,l+v,h-v),i.strokeStyle="rgba(".concat(c[1].map((function(e){return 255})).join(", "),", ").concat(.8*f,")"),i.strokeText(s.lrc,l+v/2,h-v/2),i.fillStyle="rgba(255,255,255,.3)",i.fillText(s.lrc,l+v/2,h-v/2),i.strokeStyle="rgba(".concat(c[1].map((function(e){return 255-e})).join(", "),", 1)"),i.strokeText(s.lrc,l,h),i.fillStyle="rgba(".concat(c[1].join(", "),", 0.3)"),i.fillText(s.lrc,l,h);var y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=i.measureText(s.lrc).width||1;if(r){var o=r,c=d*t/4,_=d,l=(n-o)/2,m=h-_/2+qe.int(d-c,0);if(!(c<0)){var f=i.getImageData(l,m,o,c),v=new $e(f),p=(u-d)/4;if(e.shallMalfunction){var y=[function(){return v.aisleOffset("r",qe.int(p,p/2,!0),qe.int(p,p/2,!0))},function(){return v.aisleOffset("g",qe.int(p,p/3,!0),qe.int(p,p/3,!0))},function(){return v.aisleOffset("b",qe.int(p,p/4,!0),qe.int(p,p/4,!0))}],g=y.length,k=qe.int(2,0);y[k](),qe.boolean()&&y[++k%g](),qe.boolean()&&y[++k%g]()}i.putImageData(v.imageData,l,m),a.drawImage(e.$canvasHidded,0,0)}}};s.picDom&&(y(1),y(2),y(3)),this.shallMalfunction=!1}},mounted:function(){this.$canvas=this.$refs.canvas,this.viewCtx=this.$canvas.getContext("2d"),this.$canvasHidded=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage.width=this.$canvasHidded.width=this.width=this.$el.offsetWidth,this.$canvasImage.height=this.$canvasHidded.height=this.height=this.$el.offsetHeight,this.ctx=this.$canvasHidded.getContext("2d"),this.imgCtx=this.$canvasImage.getContext("2d")}};tt.render=et,tt.__scopeId="data-v-3153c9aa";var nt=tt,it=(0,a.HX)("data-v-3830f794");(0,a.dD)("data-v-3830f794");var st={class:"canvas-view"};(0,a.Cn)();var at=it((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",st,[(0,a.Wm)("video",{src:s.src,autoplay:"autoplay",muted:"",onEnded:t[1]||(t[1]=function(){return r.handelEnded&&r.handelEnded.apply(r,arguments)})},null,40,["src"])])})),rt={name:"VideoView",provide:function(){return{}},components:{},mixins:[],props:["index"],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],data:function(){return{ended:!0,shallChange:!1,current:this.index,src:"",srcs:["./videos/1.mp4","./videos/2.mp4","./videos/3.mp4","./videos/4.mp4"],width:0,height:0,play:function(){}}},computed:{changeVideo:function(){return this.musicData.soundTrackArr.find((function(e){return e.isChangeDot}))}},methods:{handelEnded:function(){this.ended=!0}},watch:{"musicDataFlags.shockFlag":function(){this.ended&&(this.current++,this.src=this.srcs[this.current%this.srcs.length],this.ended=!1)}},beforeDestroy:function(){document.removeEventListener("click",this.play)},mounted:function(){document.addEventListener("click",this.play),this.play(),this.width=this.$el.offsetWidth,this.height=this.$el.offsetHeight}};rt.render=at,rt.__scopeId="data-v-3830f794";var ot=rt,ct=(0,a.HX)("data-v-591f40bb");(0,a.dD)("data-v-591f40bb");var _t={class:"dom-clock"},ut={key:0};(0,a.Cn)();var lt=ct((function(e,t,n,i,s,r){var o=(0,a.up)("DomClockItem");return(0,a.wg)(),(0,a.j4)("div",_t,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(s.time,(function(e,t){return(0,a.wg)(),(0,a.j4)("div",{style:r.d3wrapStyle},[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e,(function(e,n){return(0,a.wg)(),(0,a.j4)("div",null,[n?((0,a.wg)(),(0,a.j4)("span",ut,(0,ee.zw)(t?":":"-"),1)):(0,a.ry)("",!0),((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e,(function(e){return(0,a.wg)(),(0,a.j4)(o,{num:e},null,8,["num"])})),256))])})),256))],4)})),256))])})),ht=function(){function e(){(0,k.Z)(this,e)}return(0,b.Z)(e,null,[{key:"format",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yea-mon-dat",i=t||new Date;return n.replace(/yea/g,i.getFullYear().toString()).replace(/mon/g,e.to00(i.getMonth()+1)).replace(/dat/g,e.to00(i.getDate())).replace(/hou/g,e.to00(i.getHours())).replace(/min/g,e.to00(i.getMinutes())).replace(/sec/g,e.to00(i.getSeconds())).replace(/mis/g,e.to000(i.getMilliseconds()))}},{key:"to00",value:function(e){return e>9?"".concat(e):"0".concat(e)}},{key:"to000",value:function(t){return t>99?"".concat(t):"0".concat(e.to00(t))}}]),e}(),dt=(0,a.HX)("data-v-f8f17254");(0,a.dD)("data-v-f8f17254");var mt={class:"dom-clock-item-wrap"},ft={class:"dom-clock-item"},vt={class:{track:!0}},pt=(0,a.Wm)("div",null,null,-1),yt={class:"dom-clock-item"},gt=(0,a.Wm)("div",null,null,-1);(0,a.Cn)();var kt=dt((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",mt,[(0,a.Wm)("div",ft,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(r.list,(function(e,t){return(0,a.wg)(),(0,a.j4)("div",vt,[pt])})),256))]),(0,a.Wm)("div",yt,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(r.list,(function(e,t){return(0,a.wg)(),(0,a.j4)("div",{class:{active:e}},[gt],2)})),256))])])})),bt=[[1,1,1,1,1,1,0],[0,1,1,0,0,0,0],[1,1,0,1,1,0,1],[1,1,1,1,0,0,1],[0,1,1,0,0,1,1],[1,0,1,1,0,1,1],[1,0,1,1,1,1,1],[1,1,1,0,0,0,0],[1,1,1,1,1,1,1],[1,1,1,1,0,1,1]],wt={name:"DomClockItem",props:["num"],data:function(){return{musicData:i.musicData,musicDataFlags:i.musicDataFlags}},computed:{list:function(){return bt[this.num]}},methods:{renderCanvas:function(){}},mounted:function(){}};wt.render=kt,wt.__scopeId="data-v-f8f17254";var Et=wt,Dt={name:"DomClock",components:{DomClockItem:Et},data:function(){return{time:""}},inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],computed:{d3wrapStyle:function(){var e=this.musicConfig,t=e.mouseMoveConf,n=t._x,i=t._y,s=150;return{transform:"translateZ(-400px) rotateX(".concat(-i*s-20,"deg) rotateY(").concat(n*s,"deg)")}},dataFlag:function(){return this.musicDataFlags.dataFlag}},watch:{"musicDataFlags.shockFlag":{immediate:!0,handler:function(){}},dataFlag:{immediate:!0,handler:function(){var e=new Date;this.time=[ht.format(e,"yea mon dat").split(" ").map((function(e){return e.split("")})),ht.format(e,"hou min sec").split(" ").map((function(e){return e.split("")}))]}}},methods:{renderCanvas:function(){}},mounted:function(){}};Dt.render=lt,Dt.__scopeId="data-v-591f40bb";var Mt=Dt,Ct=(0,a.HX)("data-v-17b5a148");(0,a.dD)("data-v-17b5a148");var Pt={class:"progress"},Tt=(0,a.Wm)("div",null,"realTimeData",-1),Ot=(0,a.Wm)("div",null,"originData",-1);(0,a.Cn)();var xt=Ct((function(e,t,n,i,s,r){return(0,a.wg)(),(0,a.j4)("div",{class:["game-ui",{active:r.gameList.ended}]},[(0,a.Wm)("div",Pt,[(0,a.Wm)("span",{style:r.progressStyle},null,4)]),(0,a.Wm)("ul",null,[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(s.formConfigs,(function(e,t){return(0,a.wg)(),(0,a.j4)("li",null,[(0,a.Wm)("div",null,(0,ee.zw)(e.label),1),(0,a.Wm)("div",null,(0,ee.zw)(r.gameList[e.key]),1)])})),256)),(0,a.Wm)("li",null,[Tt,(0,a.Wm)("div",null,(0,ee.zw)(r.musicData.realTimeData.shockNum),1)]),(0,a.Wm)("li",null,[Ot,(0,a.Wm)("div",null,(0,ee.zw)(r.musicData.originData.shockNum),1)])])],2)})),jt={name:"GameUI",inject:["musicDataFlags","musicData","musicConfig","gameList","mv"],data:function(){return{formConfigs:[{key:"total",label:"节点数"},{key:"totalScore",label:"扣除分数"},{key:"maxCombo",label:"最大连击数"},{key:"missCount",label:"miss"},{key:"uselessCount",label:"无效按键"}]}},computed:{progressStyle:function(){var e=this.gameList,t=e.currentTime,n=e.durationTime;return{transform:"scale(".concat(n?t/n:0,", 1)")}}},watch:{},methods:{},mounted:function(){}};jt.render=xt,jt.__scopeId="data-v-17b5a148";var Lt=jt,It=function(){var e=new H.lW,t=e.getTrackByName("CommonOptionsTrack"),n=e.getTrackByName("BalanceTrack"),i=E.h.node("div");E.h.class(i,"game-wrap"),E.h.append(document.body,i);var s=E.h.node("div");E.h.class(s,"game-inner"),E.h.append(i,s);var a=new C,r=new x(e),o=["22824.jpg","22891.jpg"],c=new V({images:o}),_=new Q({size:Math.pow(2,6),musicConfig:c,volume:.3}),u=new Z(_,s,e),l=e.getTrackByName("GameTrack"),h=function(e){var n=t.getVal("gameUI");n&&u.createGameNode(e.rhythmPoint,l.getVal("trick"))};r.originData.event.addEventListener("shock",h),r.originData.event.addEventListener("update",(function(){var n=t.getVal("gameScene");if(n){window.isPhone||new B(r.originData,r,s,e);var i=c.mouseMoveConf,a=i._x,o=i._y,_=180;s.style="transform: rotateY(".concat(-a*_,"deg) rotateX(").concat(o*_,"deg) translateZ(100px);")}}));var d=new W;return d.enter({name:"导出预设",id:"export_presets",callback:function(){e.exportPresets()}}),d.enter({type:"fileReader",name:"读取预设",id:"import_presets",callback:function(t){var n=t.target.files;console.log(n);var i=new FileReader;i.onload=function(){try{var t=JSON.parse(i.result);e.importPresets(t)}catch(n){y.r.toast(["解析配置失败"])}},n[0]&&i.readAsText(n[0])}}),{balanceOptions:n,navList:d,commonOptions_:t,modifyManager:e,musicDataFlags:a,musicData:r,musicConfig:c,gameList:u,mv:_}}(),Zt={name:"DashBoard",components:{NavBar:se,MusicSearchBox:Me,MusicLocalBox:Te,ModifyBox:Le,GameUI:Lt,CanvasView:Ae,VideoView:ot,CanvasPic:Ve,CanvasText:nt,CanvasTitle:Ye,DomClock:Mt},provide:function(){var e=this.navList,t=this.commonOptions_,n=this.modifyManager,i=this.musicDataFlags,s=this.musicData,a=this.musicConfig,r=this.gameList,o=this.mv;return{navList:e,commonOptions_:t,modifyManager:n,musicDataFlags:i,musicData:s,musicConfig:a,gameList:r,mv:o}},computed:{commonOptions:function(){var e={},t=this.commonOptions_.list;return t.forEach((function(t){e[t.key]=t.value})),e}},mounted:function(){var e=this,t=this.musicData,n=this.musicDataFlags,i=this.musicConfig,s=this.mv;t.realTimeData.event.addEventListener("shock",(function(){n&&n.shockFlag++,i&&i.shock()})),y.t.init(void 0,{common:{spacebar:function(){return e.gameList.shootGameNode()},enter:function(){return e.gameList.shootGameNode()}}},{common:{spacebar:"消除节奏点",enter:"消除节奏点"}}),s.draw=function(t){e.draw(t)},document.addEventListener(window.isPhone?"touchmove":"mousemove",(function(e){i.handelMouseMove(e)}))},data:function(){return It},watch:{balanceOptions:{immediate:!0,deep:!0,handler:function(){var e=this.balanceOptions,t=this.mv;t.biquadFilters&&t.biquadFilters.forEach((function(t,n){t.gain.value=e.getVal("balance".concat(n)),t.gain.Q=1}))}}},methods:{draw:function(e){var t=e.realTimeData,n=e.originData,i=this.modifyManager,s=this.musicDataFlags,a=this.musicData,r=this.musicConfig,o=this.gameList;o.setBuffer(10*i.getTrackByName("GameTrack").getVal("RhythmPointRemoveFloatRange")),a.realTimeData.update(t),a.originData.update(n);var c=(0,p.Z)(r.currentImgAviColor,4),_=c[0],u=c[1],l=c[2],h=(c[3],a.calculateColors=A.getPure(_,u,l)),d=(0,p.Z)(h,2),m=(0,p.Z)(d[0],3),f=(m[0],m[1],m[2],(0,p.Z)(d[1],3)),v=f[0],y=f[1],g=f[2],k=a.realTimeData.soundTrackArr;this.commonOptions.gameUI&&(document.querySelector(".sound-track").innerHTML=k.map((function(e){return'<li style="'.concat(["transform: translateY(-".concat(e.vol,"px);"),"opacity: ".concat(e.isRhythmPoint?1:e.vol/256/2+.25,";"),"background-color: ".concat(e.isRhythmPoint?"rgba(".concat(255-v,",").concat(255-y,",").concat(255-g,", 1)"):"#fff",";")].join(""),'"></li>')})).join("")),s.dataFlag++}}};Zt.render=v,Zt.__scopeId="data-v-79b672b1";var Bt=Zt,Wt=[{path:"/",name:"Index",component:Bt}],At=(0,l.p7)({history:(0,l.r5)(),routes:Wt}),Rt=At;function Ut(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}window.isPhone=Ut(),(0,s.ri)(_).use(Rt).mount("#app")},7638:function(e,t,n){n.d(t,{h:function(){return o}});var i=n(813),s=n(1278),a=n(2610),r=(n(6699),n(2023),n(1249),n(4747),n(5306),n(4916),n(7042),n(2576)),o=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,null,[{key:"getBothAncestor",value:function(t,n){var i=t,s=n;while(i){if(e.hasChild(i,n))return i;i=i.parentNode}while(s){if(e.hasChild(s,t))return s;s=s.parentNode}}},{key:"isEmptyTag",value:function(t){return 1===t.nodeType?0===t.childNodes.length||(0,i.Z)(t.childNodes).every((function(t){return e.isEmptyTag(t)})):3===t.nodeType&&!t.textContent}},{key:"isSameTag",value:function(t,n){return!(!t||!n)&&(3===t.nodeType&&3===n.nodeType||1===t.nodeType&&1===n.nodeType&&e.isTag(t,n.tagName))}},{key:"hasChild",value:function(t,n){var s=(0,i.Z)(t.childNodes);return s.includes(n)||s.some((function(t){return e.hasChild(t,n)}))}},{key:"isChildOf",value:function(e,t){while(t){if(t.parentNode===e)return!0;t=t.parentNode}return!1}},{key:"isAncestor",value:function(e,t){while(t&&t.parentNode){if(t.parentNode===e)return!0;t=t.parentNode}return!1}},{key:"findNearestTargetParentNodeByTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;t=t.map((function(e){return e.toLowerCase()}));while(e&&(!n||e===n)){var i=(e.tagName||"").toLowerCase();if(t.includes(i))return e;e=e.parentNode}}},{key:"changeTag",value:function(t,n){var s=e.node(n);return(0,i.Z)(t.childNodes).forEach((function(e){s.appendChild(e)})),e.replace(t,s),s}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"isTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.nodeName.toLowerCase()===t.toLowerCase()}},{key:"isParentNodeTheTargetType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.parentNode;return n&&n.tagName.toLowerCase()===t.toLowerCase()}},{key:"node",value:function(e,t){var n=document.createElement(e);return t&&(n.innerHTML=t),n}},{key:"class",value:function(e,t){e&&(e.classList.contains(t)||e.classList.add(t))}},{key:"removeClass",value:function(e,t){e&&(e.classList.contains(t)||e.classList.remove(t))}},{key:"text",value:function(e){return document.createTextNode(e)}},{key:"list",value:function(e,t){}},{key:"insertBefore",value:function(e,t){var n=e.parentNode;n&&n.insertBefore(t,e)}},{key:"append",value:function(e,t){r.X.isArray(t)?t.forEach((function(t){e.appendChild(t)})):e.appendChild(t)}},{key:"prepend",value:function(t,n){var i=t.childNodes[0];i?e.insertBefore(i,n):t.appendChild(n)}},{key:"insertAfter",value:function(e,t){var n=e.parentNode,i=e.nextSibling;n&&(i?n.insertBefore(t,i):n.appendChild(t))}},{key:"replace",value:function(e,t){var n=e.parentNode;n&&(n.insertBefore(t,e),n.removeChild(e))}},{key:"isTagNode",value:function(e){return 1===e.nodeType}},{key:"copyEmptyTagNode",value:function(t){return e.isTagNode(t)?e.node(t.tagName):e.text("")}},{key:"findFirstTextNode",value:function(e){while(e&&1===e.nodeType){if(1===e.nodeType)return e;e=e.childNodes[0]}}},{key:"findLastTextNode",value:function(e){while(e&&1===e.nodeType){if(1===e.nodeType)return e;e=e.childNodes[e.childNodes.length-1]}}},{key:"splitTextNode",value:function(t,n,i){var s=t.textContent||"",a=s.slice(0,n||0),r=s.slice(n||0,i||void 0),o=s.slice(i||s.length),c=a&&e.text(a),_=o&&e.text(o);return c&&e.insertBefore(t,c),t.nodeValue=r,_&&e.insertAfter(t,_),[c,t,_]}}]),e}()},2576:function(e,t,n){n.d(t,{X:function(){return a}});var i=n(1278),s=n(2610),a=(n(7042),n(1539),n(6699),function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,null,[{key:"getType",value:function(e){return Object.prototype.toString.call(e).slice(8,-1)}},{key:"isNumber",value:function(t){return"Number"===e.getType(t)}},{key:"isString",value:function(t){return"String"===e.getType(t)}},{key:"isArray",value:function(t){return"Array"===e.getType(t)}},{key:"isObject",value:function(t){return"Object"===e.getType(t)}},{key:"isBoolean",value:function(t){return"Boolean"===e.getType(t)}},{key:"isNull",value:function(t){return"Null"===e.getType(t)}},{key:"isUndefined",value:function(t){return"Undefined"===e.getType(t)}},{key:"isFunction",value:function(t){return"Function"===e.getType(t)}},{key:"isDate",value:function(t){return"Date"===e.getType(t)}},{key:"isEmpty",value:function(e){return["",void 0,null].includes(e)}}]),e}())},6392:function(e,t,n){n.d(t,{kI:function(){return _}});var i=n(1278),s=n(2610);n(9826),n(4553),n(561),n(4747);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.find((function(e){return e[t]===n}))||{}}function r(e,t,n){var i=e.findIndex((function(e){return e[t]===n}));-1!==i&&e.splice(i,1)}function o(e,t,n,i){var s=e.findIndex((function(e){return e[t]===n}));t?-1!==s?e.splice(s,1,i):i&&e.push(i):e.push(i)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){e&&e.forEach((function(e){o(n,t,e[t],e)}))})),n}var _=function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,null,[{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return a(e,t,n)}},{key:"findByKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return a(e,"key",t)}},{key:"delete",value:function(e,t,n){return r(e,t,n)}},{key:"deleteByKey",value:function(e,t){return r(e,"key",t)}},{key:"replace",value:function(e,t,n,i){return o(e,t,n,i)}},{key:"replaceByKey",value:function(e,t,n){return o(e,"key",t,n)}},{key:"concat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return c(e,t,n)}},{key:"concatByKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c(e,"key",t)}}]),e}()},403:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{r:function(){return ShortCut},t:function(){return shortCut}});var D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5461),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(485),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8218),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7224),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1278),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2610),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4747),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7941),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2222),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9600),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4__),_GetType__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2576),_Sound__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7449),_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7638),keyMap={0:"96",1:"97",2:"98",3:"99",4:"100",5:"101",6:"102",7:"103",8:"104",9:"105",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",f11:"122",f12:"123","+":"107","-":"109","*":"106","/":"111",".":"110",backspace:"8",tab:"9",clear:"12",enter:"13",esc:"27",spacebar:"32","left arrow":"37","up arrow":"38","right arrow":"39","down arrow":"40",left:"37",up:"38",right:"39",down:"40",";:":"186","<":"188","=+":"187","-_":"189",">":"190","/?":"191","`~":"192","page up":"33","page down":"34",end:"35",home:"36",insert:"45",delete:"46","cape lock":"20","num lock":"144","[{":"219","\\|":"220","]}":"221","'\"":"222",shift:"16",control:"17",alt:"18","搜索":"170","收藏":"171","浏览器":"172","音量减":"174","音量加":"175","静音":"173","停止":"179","邮件":"180"},keyMap_={};Object.keys(keyMap).forEach((function(e){keyMap_[keyMap[e]]=e}));var ShortCutAbstract=function(){function e(){(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__.Z)(this,e)}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__.Z)(e,[{key:"common",value:function(e,t){}},{key:"ctrl",value:function(e,t){}},{key:"alt",value:function(e,t){}},{key:"shift",value:function(e,t){}},{key:"ctrl_alt",value:function(e,t){}},{key:"ctrl_shift",value:function(e,t){}},{key:"alt_shift",value:function(e,t){}},{key:"ctrl_alt_shift",value:function(e,t){}}]),e}();function makeShortCutInitFn(e){ShortCut.prototype[e]=function(t,n){_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isNumber(t)||(t=keyMap[t]||t),this.maps[e]||(this.maps[e]={}),this.maps[e][t]=function(e){_Sound__WEBPACK_IMPORTED_MODULE_6__.$.play("confirm");var t=n();t||(e.stopPropagation(),e.preventDefault())}},ShortCut.prototype["".concat(e,"Desc")]=function(t,n){_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isNumber(t)||(t=keyMap[t]||t),this.describeMaps[e]||(this.describeMaps[e]={}),this.describeMaps[e][t]=n}}var requestAnimationFrame=window.requestAnimationFrame||window.webkitrequestAnimationFrame||window.mozrequestAnimationFrame,wrap=_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.node("div");wrap.className="short-cut-view",_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.append(document.body,wrap);var triggered=[],ShortCut=function(_ShortCutAbstract){(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_10__.Z)(ShortCut,_ShortCutAbstract);var _super=(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_0__.Z)(ShortCut);function ShortCut(){var e;(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__.Z)(this,ShortCut);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=_super.call.apply(_super,[this].concat(n)),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)((0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(e),"hasInited",!1),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)((0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(e),"maps",{}),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)((0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(e),"describeMaps",{}),e}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__.Z)(ShortCut,[{key:"init",value:function init(dom){var _this2=this,fns=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},describeMaps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},slef=this,$body=dom||document.querySelector("body");this.hasInited||$body.addEventListener("keydown",(function(ev){var keys=[],key="";ev.ctrlKey&&keys.push("ctrl"),ev.altKey&&keys.push("alt"),ev.shiftKey&&keys.push("shift"),key=keys.join("")||"",keys.push(keyMap_[ev.which]);var describeMaps_=_this2.describeMaps[key||"common"]||{};keys.push(describeMaps_[ev.which]||"暂无描述，待补充");var cmd="slef.maps.".concat(key||"common","[").concat(ev.which,"](ev)");try{eval(cmd),ShortCut.cacheTriggered(keys)}catch(e){}})),fns&&_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isObject(fns)&&Object.keys(fns).forEach((function(e){fns[e]&&Object.keys(fns[e]).forEach((function(t){return _this2[e](t,fns[e][t])}))})),describeMaps&&_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isObject(describeMaps)&&Object.keys(describeMaps).forEach((function(e){describeMaps[e]&&Object.keys(describeMaps[e]).forEach((function(t){return _this2["".concat(e,"Desc")](t,describeMaps[e][t])}))})),this.hasInited=!0}}],[{key:"toast",value:function(e){var t=_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.node("div");e.forEach((function(e){_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.append(t,_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.node("span",e.toUpperCase()))})),_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.prepend(wrap,t),requestAnimationFrame((function(){requestAnimationFrame((function(){_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.class(t,"active"),setTimeout((function(){_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.class(t,"hide"),setTimeout((function(){requestAnimationFrame((function(){return _tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.remove(t)}))}),2e3)}),1e3)}))}))}},{key:"cacheTriggered",value:function(e){var t=ShortCut.triggered,n=ShortCut.triggeredCacheLength,i=t[0];i&&e.every((function(e,t){return i[t]===e}))||(t.unshift(e),ShortCut.toast(e),t.length>n&&t.pop())}}]),ShortCut}(ShortCutAbstract);(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)(ShortCut,"triggeredCacheLength",20),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)(ShortCut,"triggered",triggered),["common","ctrl","alt","shift","ctrl_alt","ctrl_shift","alt_shift","ctrl_alt_shift"].forEach(makeShortCutInitFn);var shortCut=new ShortCut;shortCut.init()},7449:function(e,t,n){n.d(t,{$:function(){return _}});var i=n(1278),s=n(2610),a=n(7224),r={change:"./sound/change.mp3",confirm:"./sound/confirm.mp3",done:"./sound/done.mp3",warning:"./sound/warning.mp3"},o=function(){function e(){(0,i.Z)(this,e),(0,a.Z)(this,"list",void 0),this.list=[]}return(0,s.Z)(e,[{key:"getAudio",value:function(){var e=this,t=this.list.shift(),n=function(){t&&e.list.push(t)};if(!t){t=document.createElement("audio"),t.volume=.2,t.autoplay="autoplay";var i=document.querySelector("body");i&&i.appendChild(t),t.addEventListener("ended",n),t.addEventListener("error",n)}return t}}]),e}(),c=new o,_=function(){function e(){(0,i.Z)(this,e)}return(0,s.Z)(e,null,[{key:"play",value:function(e){var t=c.getAudio(),n={change:.01,confirm:.01,done:.2,warning:.01};t.volume=n[e]||.1,t.src=r[e]||e}}]),e}()}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,n,i,s){if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],s=e[c][2];for(var r=!0,o=0;o<n.length;o++)(!1&s||a>=s)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](n[o])}))?n.splice(o--,1):(r=!1,s<a&&(a=s));r&&(e.splice(c--,1),t=i())}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,i,s]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,a=n[0],r=n[1],o=n[2],c=0;for(i in r)__webpack_require__.o(r,i)&&(__webpack_require__.m[i]=r[i]);for(o&&o(__webpack_require__),t&&t(n);c<a.length;c++)s=a[c],__webpack_require__.o(e,s)&&e[s]&&e[s][0](),e[a[c]]=0;__webpack_require__.O()},n=self["webpackChunkdy_player"]=self["webpackChunkdy_player"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(6543)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.e73e6684.js.map