(function(){"use strict";var __webpack_modules__={4502:function(t,e,n){var i={};n.r(i),n.d(i,{Il:function(){return B},bs:function(){return S},J5:function(){return A},ZW:function(){return Z},bH:function(){return j}});var a={};n.r(a),n.d(a,{N:function(){return H}});n(6992),n(8674),n(9601),n(7727);var s=n(9963),o=n(6252),r={id:"app"};function c(t,e){var n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)("div",r,[(0,o.Wm)(n)])}const u={};u.render=c;var l=u,h=n(5205);(0,h.z)("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var d=n(2119),f=(n(8309),(0,o.HX)("data-v-7629e62c"));(0,o.dD)("data-v-7629e62c");var m={class:"container"},_={class:"box-wrap"},v={class:"canvas-view-wrap"};(0,o.Cn)();var p=f((function(t,e,n,i,a,s){var r=(0,o.up)("NavBar"),c=(0,o.up)("MusicSearchBox"),u=(0,o.up)("MusicLocalBox"),l=(0,o.up)("ModifyBox"),h=(0,o.up)("GameUI"),d=(0,o.up)("CanvasPic"),f=(0,o.up)("CanvasText"),p=(0,o.up)("CanvasView"),g=(0,o.up)("VideoView"),y=(0,o.up)("DomClock");return(0,o.wg)(),(0,o.j4)("div",m,[(0,o.Wm)(r),(0,o.Wm)("div",_,[(0,o.Wm)(c),(0,o.Wm)(u),(0,o.Wm)(l)]),(0,o.Wm)("div",v,[(0,o.Wm)(h),s.commonOptions.CanvasPic?((0,o.wg)(),(0,o.j4)(d,{key:0})):(0,o.ry)("",!0),s.commonOptions.CanvasText?((0,o.wg)(),(0,o.j4)(f,{key:1})):(0,o.ry)("",!0),s.commonOptions.CanvasView&&t.item&&"CanvasTrack"===t.item.constructor.name?((0,o.wg)(!0),(0,o.j4)(o.HY,{key:2},(0,o.Ko)(t.modifyManager.list[0].list,(function(t,e){return(0,o.wg)(),(0,o.j4)(p,{config:t},null,8,["config"])})),256)):(0,o.ry)("",!0)]),s.commonOptions.VideoView?((0,o.wg)(),(0,o.j4)(g,{key:0,index:0})):(0,o.ry)("",!0),s.commonOptions.VideoView1?((0,o.wg)(),(0,o.j4)(g,{key:1,index:1})):(0,o.ry)("",!0),s.commonOptions.DomClock?((0,o.wg)(),(0,o.j4)(y,{key:2})):(0,o.ry)("",!0)])})),g=n(6571),y=(n(9826),n(2222),n(4747),n(9600),n(1249),n(403)),k=n(813),w=n(1278),C=n(2610),b=n(7224),M=(n(561),n(5827),n(1539),n(9714),n(7327),n(7638)),D=n(7449),T=function(){function t(){(0,w.Z)(this,t),(0,b.Z)(this,"listeners",{})}return(0,C.Z)(t,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],i=0,a=n.length;i<a;i++)if(n[i]===e)return n.splice(i,1),this.removeEventListener(t,e)}},{key:"dispatchEvent",value:function(t){if(t.type in this.listeners){var e=this.listeners[t.type];t.target=this;for(var n=0,i=e.length;n<i;n++)e[n].call(this,t)}}}]),t}(),j=function t(){(0,w.Z)(this,t),(0,b.Z)(this,"dataFlag",0),(0,b.Z)(this,"shockFlag",0)},x=function t(e,n){(0,w.Z)(this,t),(0,b.Z)(this,"isRhythmPoint",void 0),(0,b.Z)(this,"vol",void 0),this.vol=e,this.isRhythmPoint=n},E=function(){function t(){(0,w.Z)(this,t),(0,b.Z)(this,"fnMap",{})}return(0,C.Z)(t,[{key:"addEventListener",value:function(t,e){this.fnMap[t]||(this.fnMap[t]=[]),this.fnMap[t].push(e)}},{key:"dispatchEvent",value:function(t){var e=this.fnMap[t.type];e&&e.forEach((function(e){return e(t)}))}}]),t}(),L=function(){function t(e){(0,w.Z)(this,t),(0,b.Z)(this,"event",new E),(0,b.Z)(this,"prevAddSpeed",0),(0,b.Z)(this,"prevAvrLevel",0),(0,b.Z)(this,"data",void 0),(0,b.Z)(this,"avrLevel",0),(0,b.Z)(this,"total",0),(0,b.Z)(this,"addSpeed",0),(0,b.Z)(this,"soundTrackArr",[]),(0,b.Z)(this,"soundTrackArrMaxLen",100),(0,b.Z)(this,"shockNum",0),(0,b.Z)(this,"modifyManager",void 0),this.modifyManager=e}return(0,C.Z)(t,[{key:"update",value:function(t){var e=this.soundTrackArr,n=this.prevAvrLevel,i=this.prevAddSpeed;this.data=t,this.total=t.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t+e}));var a=this.avrLevel=this.total/t.length,s=this.addSpeed=a-n,o=this.modifyManager.gameTrack.RhythmPointVolumeFloatRange,r=void 0===o?0:o,c=i<=0&&s>r/10,u=new x(a,c);if(e.push(u),c){this.shockNum++;var l=new Event("shock");l.rhythmPoint=u,this.event.dispatchEvent(l)}e.length>this.soundTrackArrMaxLen&&e.shift(),this.prevAddSpeed=s,this.prevAvrLevel=a,this.event.dispatchEvent(new Event("update"))}}]),t}(),Z=function t(e){(0,w.Z)(this,t),(0,b.Z)(this,"realTimeData",void 0),(0,b.Z)(this,"originData",void 0),(0,b.Z)(this,"currentImgAviColor",[0,0,0,0]),(0,b.Z)(this,"calculateColors",[[255,255,255],[255,255,255]]),(0,b.Z)(this,"modifyManager",void 0),this.modifyManager=e,this.realTimeData=new L(e),this.originData=new L(e)},P=function t(e){(0,w.Z)(this,t);var n=M.h.node("div");n.classList.add("game-score"),n.innerHTML=e.toString(),M.h.append(document.body,n),t.prevNode&&M.h.remove(t.prevNode),t.prevNode=n};(0,b.Z)(P,"prevNode",void 0);var O=function t(e){if((0,w.Z)(this,t),t.prevNode&&M.h.remove(t.prevNode),t.prevNode=void 0,e>5){var n=M.h.node("div");n.classList.add("game-combo"),n.innerHTML="".concat(e||0," x combo"),M.h.append(document.body,n),t.prevNode=n}};(0,b.Z)(O,"prevNode",void 0);var I=function(){function t(e,n){var i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;(0,w.Z)(this,t),(0,b.Z)(this,"gameList",void 0),(0,b.Z)(this,"dom",void 0),(0,b.Z)(this,"score",void 0),(0,b.Z)(this,"time",void 0),(0,b.Z)(this,"isDebug",!1),(0,b.Z)(this,"modifyManager",void 0),(0,b.Z)(this,"endFunction",(function(t){i.isDebug&&i.calculateScore(Date.now()),i.remove(),i.gameList.remove(i)})),this.gameList=e,this.time=Date.now(),this.modifyManager=o;var r=this.dom=M.h.node("div");r.className="game-item",a&&(this.isDebug=a,r.style="animation: gamingDebug linear 0.945s;");var c=120,u=n.vol*this.modifyManager.gameTrack.RhythmPointCenterPointOffset,l=M.h.node("div");M.h.append(r,l),l.style="\n      transform: rotate(".concat(u,"deg) translate(0, calc(").concat(150+n.vol/3,"px));\n      background-color: hsl(").concat(90-c*n.vol/255,", 50%, 50%);\n    "),M.h.append(s,r),r.addEventListener("webkitAnimationEnd",this.endFunction),r.addEventListener("animationend",this.endFunction)}return(0,C.Z)(t,[{key:"calculateScore",value:function(t){var e=this.gameList,n=this.time;this.score=Math.abs(t-n-e.delay)}},{key:"remove",value:function(){var t=this.dom;this.gameList.setCurrentScore(this.score),void 0!==this.score?D.$.play("done"):this.modifyManager.gameTrack.RhythmPointMissTipSound&&D.$.play("warning"),t.removeEventListener("webkitAnimationEnd",this.endFunction),t.removeEventListener("animationend",this.endFunction),t&&M.h.remove(t)}}]),t}(),S=function(){function t(e,n,i){(0,w.Z)(this,t),(0,b.Z)(this,"currentTime",0),(0,b.Z)(this,"durationTime",0),(0,b.Z)(this,"ended",!1),(0,b.Z)(this,"combo",0),(0,b.Z)(this,"maxCombo",0),(0,b.Z)(this,"currentScore",0),(0,b.Z)(this,"totalScore",0),(0,b.Z)(this,"total",0),(0,b.Z)(this,"missCount",0),(0,b.Z)(this,"uselessCount",0),(0,b.Z)(this,"mv",void 0),(0,b.Z)(this,"gameInner",void 0),(0,b.Z)(this,"modifyManager",void 0),(0,b.Z)(this,"eventTarget",new T),(0,b.Z)(this,"delay",void 0),(0,b.Z)(this,"buffer",150),(0,b.Z)(this,"duration",2e3),(0,b.Z)(this,"list",[]),this.modifyManager=i,this.mv=e,this.delay=1e3*this.mv.delay.delayTime.value,this.gameInner=n}return(0,C.Z)(t,[{key:"endSong",value:function(){this.ended=!0}},{key:"startSong",value:function(){this.ended=!1,this.currentScore=0,this.totalScore=0,this.total=0,this.combo=0,this.maxCombo=0,this.missCount=0,this.uselessCount=0}},{key:"setCombo",value:function(t){t?this.combo=0:this.combo++,this.combo>this.maxCombo&&(this.maxCombo=this.combo),new O(this.combo)}},{key:"setCurrentScore",value:function(t){this.currentScore=t||0,this.totalScore+=t||0;var e=void 0===t;e&&this.missCount++,this.setCombo(e),new P(e?"miss":"score - ".concat(t))}},{key:"find",value:function(t){var e=this.buffer,n=this.delay;return this.list.find((function(i){return Math.abs(t-i.time-n)<e}))}},{key:"indexOf",value:function(t){return this.list.indexOf(t)}},{key:"remove",value:function(t){var e=this.indexOf(t);-1!==e&&this.list.splice(e,1)}},{key:"createGameNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new I(this,t,e,this.gameInner,this.modifyManager);return this.list.push(n),this.total++,n}},{key:"setBuffer",value:function(t){this.buffer=t,this.eventTarget.dispatchEvent(new Event("bufferChange"))}},{key:"shootGameNode",value:function(){var t=Date.now(),e=this.find(t);e?(e.calculateScore(t),e.endFunction()):(this.uselessCount++,new P("userLess press"))}}]),t}(),A=function(){function t(e,n,i,a){var s=this;(0,w.Z)(this,t),(0,b.Z)(this,"dom",void 0),(0,b.Z)(this,"time",void 0),(0,b.Z)(this,"modifyManager",void 0),(0,b.Z)(this,"destroy",(function(){s.remove()})),this.modifyManager=a,this.time=Date.now();var o=this.dom=M.h.node("div");o.className="game-scene";var r=(0,k.Z)(e.data).filter((function(t){return t})).filter((function(t,e){return!(e%16)})),c=360/r.length,u=n.originData.avrLevel*a.gameTrack.RhythmPointCenterPointOffset;o.innerHTML=r.map((function(t,e){return'<div style="transform: rotateZ('.concat(-e*c+180+u,"deg) translate(0, calc(400px + ").concat(10*t,'px));"></div>')})).join(""),M.h.append(i,o),o.addEventListener("webkitAnimationEnd",this.destroy),o.addEventListener("animationend",this.destroy)}return(0,C.Z)(t,[{key:"remove",value:function(){var t=this.dom;t.removeEventListener("webkitAnimationEnd",this.destroy),t.removeEventListener("animationend",this.destroy),t&&M.h.remove(t)}}]),t}(),B=function(){function t(){(0,w.Z)(this,t)}return(0,C.Z)(t,null,[{key:"compose",value:function(t){return t/=255,Math.round(255*(t+(t-.5)*(1-t)))}},{key:"dCompose",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t/=255;var n=1-t;while(e+3)n*=1-t,e--;return Math.round(255*(1-n))}},{key:"getPure",value:function(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=Math.min(e,n,i),o=s/256,r=t.dCompose,c=t.reduce;return[[r(e,a),r(e,a),r(e,a)],[r(c(e,o),a+2),r(c(n,o),a+2),r(c(i,o),a+2)]]}},{key:"reduce",value:function(t,e){return Math.round((t-255*e)/(1-e))}}]),t}(),W=(n(7941),n(655));n(7042);function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=0;return function(n,i,a){var s=n[i];n[i]=function(){Date.now()-e-t>0&&(s.apply(n,Array.prototype.slice.call(arguments)),e=Date.now())}}}n(5306),n(4916);function R(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(R.cacheMap||(R.cacheMap={}),n||!R.cacheMap[t]){var i=document.createElement("style");i.innerHTML=e.replace(/<\/?style.*?>/g,""),document.head.appendChild(i),R.cacheMap[t]=e}else console.log("[style][".concat(t,"] is already exist!"))}R("","");var F=document.createElement("canvas"),U=document.createElement("canvas"),N=function(){function t(e){(0,w.Z)(this,t),(0,b.Z)(this,"compressRate",void 0),(0,b.Z)(this,"canvas",void 0),(0,b.Z)(this,"ctx",void 0),(0,b.Z)(this,"musicConfig",void 0),(0,b.Z)(this,"cacheList",void 0),(0,b.Z)(this,"cacheImg",void 0),this.compressRate=.1,this.musicConfig=e,this.canvas=F=F||document.createElement("canvas"),this.ctx=F.getContext("2d"),this.cacheList=[],this.cacheImg={}}return(0,C.Z)(t,[{key:"makeEl",value:function(){var e=this,n=document.createElement("img"),i=this.cacheList,a=this.cacheImg,s=this.ctx,o=this.compressRate;return n.onload=function(){if(t.setImage(n),!a[n.src]){var r=n.width,c=n.height;F.width=r*o,F.height=c*o,s.drawImage(n,0,0,F.width,F.height);var u=s.getImageData(0,0,F.width,F.height),l=[[],[],[],[]];u.data.forEach((function(t,e){l[e%4].push(t)})),a[n.src]=[K(l[0]),K(l[1]),K(l[2]),K(l[3])]}n.noNeedChangeCurrentImgAviColor||(e.musicConfig.currentImgAviColor=a[n.src]),i.push(n)},n}},{key:"load",value:function(t,e){if(t){var n=this.cacheList.shift()||this.makeEl();return n.noNeedChangeCurrentImgAviColor=e,n.src=/:\/\//.test(t)?t:"./img/".concat(t),n}}}],[{key:"setImage",value:function(e){var n=document.body,i=n.offsetWidth,a=n.offsetHeight;t.pciCanvas.width=i,t.pciCanvas.height=a,t&&t.pciCtx&&t.pciCtx.drawImage(e,(i-e.width)/2,(a-e.height)/2,e.width,e.height)}},{key:"getImageData",value:function(e,n,i,a){return t.pciCtx&&t.pciCtx.getImageData(e,n,i,a)}}]),t}();function q(t){return t.reduce((function(t,e){return t+e}),0)}function K(t){return Math.round(q(t)/t.length)}(0,b.Z)(N,"pciCanvas",U),(0,b.Z)(N,"pciCtx",U.getContext("2d"));var H=function(){function t(e){(0,w.Z)(this,t),(0,b.Z)(this,"lrc",""),(0,b.Z)(this,"ended",void 0),(0,b.Z)(this,"pictureCanvasCtx",void 0),(0,b.Z)(this,"picDom",void 0),(0,b.Z)(this,"imageGroup",[]),(0,b.Z)(this,"mouseMoveConf",{x:0,y:0,w:1,h:1,_x:.5,_y:.5}),(0,b.Z)(this,"currentImgAviColor",[255,255,255,1]),(0,b.Z)(this,"volume",{_main:1,main:.01}),(0,b.Z)(this,"currentImgSrc","");var n=e.images;this.imageGroup=[e.images];var i=new N(this);this.setPictureCanvasCtx(i),this.currentImgSrc=n[0],this.currentImgSrc&&this.changePic(void 0,!0)}return(0,C.Z)(t,[{key:"handelMouseMove",value:function(t){if(t.target===document.body){var e=this.mouseMoveConf,n=t.touches?t.touches[0]:t,i=[n.clientX,n.clientY,n.target.offsetWidth,n.target.offsetHeight],a=i[0],s=i[1],o=i[2],r=i[3],c={x:a,y:s,w:o,h:r,_x:(a-o/2)/o,_y:(s-r/2)/r};Object.keys(e).forEach((function(t){e[t]=c[t]}))}}},{key:"shock",value:function(){}},{key:"setLrc",value:function(t){this.lrc=t}},{key:"getImageData",value:function(t,e,n,i){return N.getImageData(t,e,n,i)}},{key:"changePicGroup",value:function(t){var e=this.imageGroup;e.length&&(t?e.unshift(e.pop()):e.push(e.shift())),this.changePic()}},{key:"changePic",value:function(t,e){var n=this.imageGroup[0];n.length&&(t?n.unshift(n.pop()):n.push(n.shift()),this.currentImgSrc=n[0],this.pictureCanvasCtx&&(this.picDom=this.pictureCanvasCtx.load(this.currentImgSrc)),e&&this.shock())}},{key:"encVolume",value:function(){var t=this.volume.main;t+=.05,t<0&&(t=0),t>1&&(t=1),this.volume.main=t}},{key:"decVolumn",value:function(){var t=this.volume.main;t-=.05,t<0&&(t=0),t>1&&(t=1),this.volume.main=t}},{key:"setPictureCanvasCtx",value:function(t){this.pictureCanvasCtx=t}}]),t}();(0,W.gn)([$(1)],H.prototype,"shock",null);n(8264),n(2472),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016);var z=n(485),V=n(8218),X=(n(6699),function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,w.Z)(this,t),this.current=0,this.playing=0,this.list=[],t.commonConfigs[this.constructor.name].forEach((function(t){var i=(0,g.Z)(t,7),a=i[0],s=i[1],o=i[2],r=i[3],c=i[4],u=i[5],l=i[6],h=n[a];e.list.push({key:a,name:s,value:void 0!==h?h:o,valueType:r,min:c,max:u,desc:l})})),this.list.forEach((function(t){Object.defineProperty(e,t.key,{get:function(){return t.value}})}))}return(0,C.Z)(t,[{key:"len",get:function(){return this.list.length}},{key:"setIndex",value:function(t){t>this.len-1&&(t=this.len-1),t<0&&(t=0),this.current=t,this.play()}},{key:"play",value:function(){this.playing=this.current}},{key:"prev",value:function(){this.setIndex((this.current-1+this.len)%this.len)}},{key:"next",value:function(){this.setIndex((this.current+1)%this.len)}},{key:"enc",value:function(){var t=this.list[this.current],e=t.value+1;e>t.max&&(e=t.max),e<t.min&&(e=t.min),t.value=e}},{key:"dec",value:function(){var t=this.list[this.current],e=t.value-1;e>t.max&&(e=t.max),e<t.min&&(e=t.min),t.value=e}}],[{key:"setConfig",value:function(t,e,n,i,a,s,o){G.commonConfigs.push([t,e,n,i,a,s,o])}}]),t}());(0,b.Z)(X,"commonConfigs",{});var G=function(t){(0,z.Z)(n,t);var e=(0,V.Z)(n);function n(){var t;(0,w.Z)(this,n);var i=Array.prototype.slice.call(arguments),a=i[0],s=i.slice(1);return t=e.call.apply(e,[this].concat((0,k.Z)(s))),t.name=a||t.constructor.name,t}return(0,C.Z)(n,null,[{key:"setConfig",value:function(t,e,n,i,a,s,o){X.commonConfigs.CanvasTrack||(X.commonConfigs.CanvasTrack=[]),X.commonConfigs.CanvasTrack.push([t,e,n,i,a,s,o])}}]),n}(X),Y=function(t){(0,z.Z)(n,t);var e=(0,V.Z)(n);function n(){var t;(0,w.Z)(this,n);var i=Array.prototype.slice.call(arguments),a=i[0],s=i.slice(1);return t=e.call.apply(e,[this].concat((0,k.Z)(s))),t.name=a||t.constructor.name,t}return(0,C.Z)(n,null,[{key:"setConfig",value:function(t,e,n,i,a,s,o){X.commonConfigs.VideoTrack||(X.commonConfigs.VideoTrack=[]),X.commonConfigs.VideoTrack.push([t,e,n,i,a,s,o])}}]),n}(X);G.setConfig("disable","是否启用",0,"int",0,1,"是否启用"),G.setConfig("renderType","渲染方式",2,"int",0,3,"渲染方式"),G.setConfig("direction","渲染方向",0,"int",0,1,"渲染方式"),G.setConfig("baseSizeType","基础尺寸单位",0,"int",0,1,"0: 屏幕较小边， 1： 屏幕较大边"),G.setConfig("noZero","删除无效数据",1,"int",0,1,"将频谱数据复制一份， 并逆向拼接在源数据后面"),G.setConfig("copyData","复制并反向数据",1,"int",0,1,"将频谱数据复制一份， 并逆向拼接在源数据后面"),G.setConfig("showDataBefore","展示均衡前的数据",0,"int",0,1,"展示均衡前的数据"),G.setConfig("midPositionX","X中心位子",50,"int",0,100,"绘制中心位于屏幕位置， 0在最左， 100在最右"),G.setConfig("midPositionY","Y中心位子",50,"int",0,100,"绘制中心位于屏幕位置， 0在最上， 100在最下"),G.setConfig("clearPrevView","保留上次渲染",70,"int",0,100,"保留上次绘制（百分比）"),G.setConfig("mainRadius","基线距中心点位置（Y轴）",25,"int",-100,100,"圆形时为半径, 百分比基于基础尺寸单位"),G.setConfig("avrLevelMainRadiusModify","频谱均值基线距离修正系数",25,"int",0,100,"基线随频谱修正系数（百分比）"),G.setConfig("mainRadiusOpacity","基线透明度",75,"int",0,100,"基线透明度"),G.setConfig("mainRadiusLineWidth","基线宽度",3,"int",0,100,"基线宽度， 千分比基准此村"),G.setConfig("floatRange","频谱波动范围",2,"int",-10,10,"频谱波动范围 相对基础尺寸 百分制"),G.setConfig("avrLevelFloatRangeModify","频谱均值波动范围修正系数",25,"int",0,100,"基线随频谱修正系数（百分比）"),G.setConfig("stepModify","频谱间隔修正",10,"int",0,100," 十分比预设"),G.setConfig("lineLineWidth","频谱宽度",3,"int",0,100," 千分比预设"),G.setConfig("dataModify","频谱修正系数",15,"int",0,100,"十分比预设"),G.setConfig("dataOffsetModify","频谱偏移修正系数",6,"int",-100,100,"百分比预设"),G.setConfig("minHeightModify","频谱最小修正系数",-0,"int",-300,100,"百分比预设"),G.setConfig("threshold","阈值",7,"int",0,100,"百分比预设");var J=function(t){(0,z.Z)(n,t);var e=(0,V.Z)(n);function n(){var t;(0,w.Z)(this,n);var i=Array.prototype.slice.call(arguments),a=i[0],s=i.slice(1);return t=e.call.apply(e,[this].concat((0,k.Z)(s))),t.name=a||t.constructor.name,t}return(0,C.Z)(n,null,[{key:"setConfig",value:function(t,e,n,i,a,s,o){X.commonConfigs.CommonOptionsTrack||(X.commonConfigs.CommonOptionsTrack=[]),X.commonConfigs.CommonOptionsTrack.push([t,e,n,i,a,s,o])}}]),n}(X);J.setConfig("CanvasView","开启音频可视化轨道",1,"int",0,1,"是否启用"),J.setConfig("CanvasPic","开启背景轨道",0,"int",0,1,"是否启用"),J.setConfig("CanvasPicMalfunction","开启背景轨道故障特效",0,"int",0,1,"是否启用"),J.setConfig("CanvasText","开启歌词轨道",0,"int",0,1,"是否启用"),J.setConfig("CanvasTextMalfunction","开启歌词轨道故障特效",0,"int",0,1,"是否启用"),J.setConfig("changeBG_When_LRC_Changed","背景歌词同步切换",1,"int",0,1,"是否启用"),J.setConfig("VideoView","开启视频轨道1",0,"int",0,1,"是否启用"),J.setConfig("VideoView1","开启视频轨道2",0,"int",0,1,"是否启用"),J.setConfig("DomClock","显示时钟",0,"int",0,1,"是否启用"),J.setConfig("BalanceTrack","显示均衡器",0,"int",0,1,"是否启用");var Q=function(t){(0,z.Z)(n,t);var e=(0,V.Z)(n);function n(){var t;(0,w.Z)(this,n);var i=Array.prototype.slice.call(arguments),a=i[0],s=i.slice(1);return t=e.call.apply(e,[this].concat((0,k.Z)(s))),t.name=a||t.constructor.name,t}return(0,C.Z)(n,null,[{key:"setConfig",value:function(t,e,n,i,a,s,o){X.commonConfigs.GameTrack||(X.commonConfigs.GameTrack=[]),X.commonConfigs.GameTrack.push([t,e,n,i,a,s,o])}}]),n}(X);Q.setConfig("RhythmPointVolumeFloatRange","节奏点浮动范围",1,"int",0,30,"值越大， 则节奏点越少"),Q.setConfig("RhythmPointTimeout","节奏点最小间隔",15,"int",0,30,"timeout = (num * 10) ms"),Q.setConfig("RhythmPointRemoveFloatRange","节奏点消除范围",20,"int",5,60,"range = (num * 10)"),Q.setConfig("RhythmPointMissTipSound","miss提示音",0,"int",0,1,"是否开启"),Q.setConfig("RhythmPointCenterPointOffset","轨道偏移量",-30,"int",-60,60,"轨道偏移量"),Q.setConfig("trick","开启作弊模式",0,"int",0,1,"是否开启");var tt=function(t){(0,z.Z)(n,t);var e=(0,V.Z)(n);function n(){var t;(0,w.Z)(this,n);var i=Array.prototype.slice.call(arguments),a=i[0],s=i.slice(1);return t=e.call.apply(e,[this].concat((0,k.Z)(s))),t.name=a||t.constructor.name,t}return(0,C.Z)(n,null,[{key:"setConfig",value:function(t,e,n,i,a,s,o){X.commonConfigs.BalanceTrack||(X.commonConfigs.BalanceTrack=[]),X.commonConfigs.BalanceTrack.push([t,e,n,i,a,s,o])}}]),n}(X),et=[31,63,125,250,500,1e3,2e3,4e3,8e3,16e3,2e4,24e3];et.forEach((function(t,e){tt.setConfig("balance".concat(e),"".concat(t),0,"int",-12,12,"db")}));var nt=function(){function t(e){(0,w.Z)(this,t),this.list=[],this.playing=0,this.current=0,this.setList([new at(this)]),this.setIndex(0),this.updateCommonOptions=e,this.init()}return(0,C.Z)(t,[{key:"init",value:function(){this.trackList=this.list.find((function(t){return"TrackList"===t.constructor.name})),this.commonOptions=this.list.find((function(t){return"TrackList"===t.constructor.name})).list.find((function(t){return"CommonOptionsTrack"===t.constructor.name})),this.gameTrack=this.list.find((function(t){return"TrackList"===t.constructor.name})).list.find((function(t){return"GameTrack"===t.constructor.name})),this.balanceTrack=this.list.find((function(t){return"TrackList"===t.constructor.name})).list.find((function(t){return"BalanceTrack"===t.constructor.name})),this.updateCommonOptions&&this.updateCommonOptions()}},{key:"len",get:function(){return this.list.length}},{key:"savePresets",value:function(){this.trackList.savePresets()}},{key:"setList",value:function(t){this.list=t,this.current=0}},{key:"replace",value:function(t,e){this.list.splice(t,1,e)}},{key:"setIndex",value:function(t){t>this.len-1&&(t=this.len-1),t<0&&(t=0),this.current=t,this.play()}},{key:"play",value:function(){this.playing=this.current,0===this.current&&this.replace(1,this.list[this.current]),this.list[this.current].play()}},{key:"prev",value:function(){this.setIndex((this.current-1+this.len)%this.len)}},{key:"next",value:function(){this.setIndex((this.current+1)%this.len)}},{key:"enc",value:function(){this.list[this.current]&&this.list[this.current].enc(),this.trackList.savePresets()}},{key:"dec",value:function(){this.list[this.current]&&this.list[this.current].dec(),this.trackList.savePresets()}},{key:"prevItem",value:function(){this.list[this.current]&&this.list[this.current].prev()}},{key:"nextItem",value:function(){this.list[this.current]&&this.list[this.current].next()}},{key:"up",value:function(){this.list[0].prev()}},{key:"down",value:function(){this.list[0].next()}},{key:"add",value:function(){var t;(t=this.list[0].add).call.apply(t,[this.list[0]].concat(Array.prototype.slice.call(arguments))),this.list[0].savePresets()}},{key:"delete",value:function(){var t;(t=this.list[0].delete).call.apply(t,[this.list[0]].concat(Array.prototype.slice.call(arguments))),this.list[0].savePresets()}},{key:"copy",value:function(){var t;(t=this.list[0].copy).call.apply(t,[this.list[0]].concat(Array.prototype.slice.call(arguments))),this.list[0].savePresets()}}]),t}(),it=[Q,tt,J],at=function(){function t(e){var n=this;(0,w.Z)(this,t),this.list=[],this.parent=e,this.playing=0,this.current=0,this.loadPresets(),it.forEach((function(t){var e=t.name,i=n.list.some((function(t){return t.constructor.name===e}));i||n.add({type:e,name:e})}))}return(0,C.Z)(t,[{key:"savePresets",value:function(t){var e=this.list.map((function(t){var e={};return t.list.forEach((function(n){e[n.key]=t[n.key]})),{name:t.name,data:e,type:t.constructor.name}}));this.parent.updateCommonOptions(),localStorage.setItem("configPresets",JSON.stringify(e))}},{key:"loadPresets",value:function(){var t=this;try{var e=JSON.parse(localStorage.getItem("configPresets")||"[]");e.length||e.push({}),it.forEach((function(n){var i=n.name,a=e.some((function(t){return t.type===i}));a||t.add({type:i,name:i})})),e.forEach((function(e){t.add(e)}))}catch(n){console.log(n),console.log("load presets fail.")}}},{key:"len",get:function(){return this.list.length}},{key:"add",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.type,a=void 0===i?"CanvasTrack":i,s=e.name,o=e.data,r=0;r<n;r++)this.list.push(new t[a](s,o));this.setIndex(this.len-1)}},{key:"delete",value:function(){var t=this.list[this.current];t&&(this.list.splice(this.current,1),this.setIndex(0))}},{key:"copy",value:function(){var t=this.list[this.current];t&&!["CommonOptionsTrack","BalanceTrack"].includes(t.constructor.name)&&(this.list.splice(this.current,0,new t.constructor(t.name+"Copy",t)),this.setIndex(this.current+1))}},{key:"setList",value:function(t){this.list=t,this.current=0}},{key:"setIndex",value:function(t){t>this.len-1&&(t=this.len-1),t<0&&(t=0),this.current=t,this.play()}},{key:"play",value:function(){this.playing=this.current,this.parent.replace(1,this.list[this.current])}},{key:"prev",value:function(){this.setIndex((this.current-1+this.len)%this.len)}},{key:"next",value:function(){this.setIndex((this.current+1)%this.len)}}]),t}();function st(){console.log(lt.ac.createPanner);var t=lt.ac.createPanner();return t.panningModel="HRTF",t.distanceModel="inverse",t.refDistance=1,t.maxDistance=10,t.rolloffFactor=10,t.coneInnerAngle=360,t.coneOuterAngle=0,t.coneOuterGain=0,t.orientationX?(t.orientationX.value=0,t.orientationY.value=0,t.orientationZ.value=0,t.positionX.value=0,t.positionY.value=0,t.positionZ.value=0):(t.setOrientation&&t.setOrientation(0,0,0),t.setPosition&&t.setPosition(0,0,0)),t}function ot(){var t=lt.ac.listener;return t.forwardX?(t.forwardX.value=0,t.forwardY.value=1,t.forwardZ.value=0,t.upX.value=0,t.upY.value=0,t.upZ.value=1,t.positionX.value=0,t.positionY.value=0,t.positionZ.value=0):(t.setOrientation&&t.setOrientation(0,1,0,0,0,1),t.setPosition&&t.setPosition(0,0,0)),t}function rt(t,e){var n=et.map((function(t){return ct(t)}));return n.forEach((function(e){t.connect(e),t=e})),t.connect(e),n}function ct(t){var e=lt.ac.createBiquadFilter();return e.type="peaking",e.frequency.value=t,e}function ut(t){var e=t.$audio=document.createElement("audio"),n=lt.ac.createMediaElementSource(e);return e.crossOrigin="anonymous",e.autoplay=!0,e.volume=t.musicConfig.volume.main,e.onended=function(){return t.musicConfig.ended&&t.musicConfig.ended()},{$audio:e,source:n}}(0,b.Z)(at,"CanvasTrack",G),(0,b.Z)(at,"VideoTrack",Y),(0,b.Z)(at,"CommonOptionsTrack",J),(0,b.Z)(at,"BalanceTrack",tt),(0,b.Z)(at,"GameTrack",Q);var lt=function(){function t(e){(0,w.Z)(this,t),(0,b.Z)(this,"duration",1),(0,b.Z)(this,"playing",!1),(0,b.Z)(this,"stopType",""),(0,b.Z)(this,"source",null),(0,b.Z)(this,"latestPlayTime",0),(0,b.Z)(this,"count",0),(0,b.Z)(this,"delay",void 0),(0,b.Z)(this,"musicConfig",void 0),(0,b.Z)(this,"gain",void 0),(0,b.Z)(this,"size",void 0),(0,b.Z)(this,"analyser",void 0),(0,b.Z)(this,"analyserBefore",void 0),(0,b.Z)(this,"biquadFilters",void 0),(0,b.Z)(this,"draw",void 0),(0,b.Z)(this,"resetLatestPlayTime",!1),(0,b.Z)(this,"xhr",void 0),(0,b.Z)(this,"panner",void 0),(0,b.Z)(this,"$audio",void 0),(0,b.Z)(this,"ac",void 0),this.ac=t.ac,this.musicConfig=e.musicConfig;var n=ut(this),i=n.$audio,a=n.source;this.$audio=i,i.volume=.01;var s=this.panner=st();ot();var o=this.analyser=t.ac.createAnalyser(),r=this.analyserBefore=t.ac.createAnalyser(),c=this.gain=t.ac.createGain();c.gain.value=.5,this.size=e.size||8,r.fftSize=o.fftSize=2*this.size;var u=this.delay=t.ac.createDelay();u.delayTime.value=1.8,a.connect(r),this.biquadFilters=rt(r,u),u.connect(o),o.connect(s),s.connect(c),c.connect(t.ac.destination),this.xhr=new XMLHttpRequest,this.draw=e.draw,e.volume&&this.changeVolume(e.volume),this.visualize()}return(0,C.Z)(t,[{key:"load",value:function(t,e){var n=this;this.stopType="",this.playing=!1,this.xhr.abort(),this.xhr.open("GET",t),this.xhr.responseType="arraybuffer",this.xhr.onload=function(){e(n.xhr.response)},this.xhr.send()}},{key:"decode",value:function(e,n){t.ac.decodeAudioData(e,(function(t){n(t)}),(function(t){console.log(t)}))}},{key:"play",value:function(e){var n=this,i=++this.count;this.source&&this.source[this.source.stop?"stop":"noteOff"](),this.resetLatestPlayTime=!0,e instanceof ArrayBuffer?this.decode(e,(function(e){if(i===n.count){var a=t.ac.createBufferSource();a.buffer=e,a.connect(n.analyserBefore),a[a.start?"start":"noteOn"](0),n.source=a,n.resetLatestPlayTime&&(n.latestPlayTime=t.ac.currentTime)}})):(console.log("play"),window.isPhone?(console.log("play"),this.load(e,(function(e){i===n.count&&n.decode(e,(function(e){if(n.playing=!0,i===n.count){var a=t.ac.createBufferSource();a.buffer=e,a.connect(n.analyserBefore),a[a.start?"start":"noteOn"](0),n.source=a,a.onended=function(){n.stopType||n.musicConfig.ended&&n.musicConfig.ended()},n.resetLatestPlayTime&&(n.latestPlayTime=t.ac.currentTime)}}))}))):this.$audio.src=e)}},{key:"changeVolume",value:function(t){this.musicConfig.volume.main=t}},{key:"setVolume",value:function(){var t=this.musicConfig,e=t.volume.main;this.$audio.volume=e;var n=this.panner,i=t.mouseMoveConf,a=i.x,s=i.y,o=i.w,r=i.h,c=(a-o/2)/o,u=-(s-r/2)/r;n.positionX?(n.positionX.value=c,n.positionY.value=u):n.setPosition&&n.setPosition(c,u,0)}},{key:"visualize",value:function(){var t=this,e=new Uint8Array(this.analyser.frequencyBinCount),n=new Uint8Array(this.analyserBefore.frequencyBinCount),i=window.requestAnimationFrame||window.webkitrequestAnimationFrame||window.mozrequestAnimationFrame,a=function a(){window.hidden||(t.draw&&(t.analyser.getByteFrequencyData(e),t.analyserBefore.getByteFrequencyData(n),t.draw({realTimeData:e,originData:n})),t.setVolume()),i(a)};i(a)}}]),t}();if((0,b.Z)(lt,"ac",new(window.AudioContext||window.webkitAudioContext)),"undefined"!==typeof AudioContext||"undefined"!==typeof webkitAudioContext){var ht=function t(){lt.ac&&("suspended"===lt.ac.state&&lt.ac.resume(),document.removeEventListener("click",t))};document.addEventListener("click",ht)}var dt=n(3577),ft=(0,o.HX)("data-v-6662a141"),mt=ft((function(t,e,n,i,a,r){return(0,o.wg)(),(0,o.j4)("div",{class:["nav-bar",{active:a.active}],onClick:e[1]||(e[1]=function(t){return a.active=!a.active})},[(0,o.Wm)("ul",null,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(r.navList,(function(t,e){return(0,o.wg)(),(0,o.j4)("li",{onClick:(0,s.iM)((function(e){return t.callback&&t.callback()}),["stop"])},(0,dt.zw)(t.name),9,["onClick"])})),256)),(0,o.WI)(t.$slots,"default",{},void 0,!0)])],2)})),_t={name:"BalanceView",provide:function(){return{}},components:{},mixins:[],props:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],data:function(){return{balanceTrack:this.modifyManager.balanceTrack,searchText:"",active:!1}},computed:{},watch:{},methods:{},mounted:function(){}};_t.render=mt,_t.__scopeId="data-v-6662a141";var vt=_t;function pt(t,e,n,i,a,s){var r=(0,o.up)("ListBoxView");return(0,o.wg)(),(0,o.j4)(r,{config:a.config},null,8,["config"])}n(4765),n(3123),n(4723);var gt=["album.js","artists.js","artist_album.js","artist_desc.js","artist_list.js","artist_mv.js","artist_sub.js","artist_sublist.js","banner.js","check_music.js","comment.js","comment_album.js","comment_dj.js","comment_hot.js","comment_like.js","comment_music.js","comment_mv.js","comment_playlist.js","comment_video.js","daily_signin.js","dj_catelist.js","dj_detail.js","dj_hot.js","dj_paygift.js","dj_program.js","dj_program_detail.js","dj_recommend.js","dj_recommend_type.js","dj_sub.js","dj_sublist.js","event.js","fm_trash.js","follow.js","like.js","likelist.js","login.js","login_cellphone.js","login_refresh.js","login_status.js","logout.js","lyric.js","mv_detail.js","mv_first.js","mv_sub.js","mv_url.js","personalized.js","personalized_djprogram.js","personalized_mv.js","personalized_newsong.js","personalized_privatecontent.js","personal_fm.js","playlist_catlist.js","playlist_create.js","playlist_detail.js","playlist_hot.js","playlist_subscribe.js","playlist_tracks.js","playlist_update.js","program_recommend.js","recommend_resource.js","recommend_songs.js","related_allvideo.js","related_playlist.js","resource_like.js","search.js","search_hot.js","search_multimatch.js","search_suggest.js","send_playlist.js","send_text.js","simi_artist.js","simi_mv.js","simi_playlist.js","simi_song.js","simi_user.js","song_detail.js","song_url.js","toplist.js","toplist_artist.js","toplist_detail.js","top_album.js","top_artists.js","top_list.js","top_mv.js","top_playlist.js","top_playlist_highquality.js","top_song.js","user_audio.js","user_cloud.js","user_cloud_search.js","user_detail.js","user_dj.js","user_event.js","user_followeds.js","user_follows.js","user_playlist.js","user_record.js","user_subcount.js","user_update.js","video_detail.js","video_sub.js","video_url.js","weblog.js"];function yt(t){return function(e){var n={fn:null,then:function(t){return n.fn=t}},i="".concat(location.protocol,"//").concat(location.hostname,":3000")+t+(e?"?"+Object.keys(e).map((function(t){return t+"="+e[t]})).join("&"):"");return fetch(encodeURI(i),{xhrFields:{withCredentials:!0},credentials:"include"}).then((function(t){t.json().then((function(t){return n.fn&&n.fn(t)})).catch((function(t){return console.log(t)}))})),function(t){return n.fn=t}}}var kt={"daily_signin.js":"/daily_signin","fm_trash.js":"/fm_trash","personal_fm.js":"/personal_fm"},wt={};function Ct(t){return t.replace(/\//,"").split(/\//).map((function(t,e){return e?t[0].toUpperCase()+t.slice(1):t})).join("")}gt.forEach((function(t){if(/\.js$/i.test(t)){var e=t in kt?kt[t]:"/"+t.replace(/\.js$/i,"").replace(/_/g,"/");wt[Ct(e)]=yt(e)}}));var bt=function(){function t(){var e=this,n=arguments,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,w.Z)(this,t),(0,b.Z)(this,"play",void 0),(0,b.Z)(this,"playing",0),(0,b.Z)(this,"current",0),(0,b.Z)(this,"list",void 0),Object.keys(i).forEach((function(t){return e[t]=i[t]})),this.play=function(){return e},i.play&&(this.play=function(){i.play&&i.play.apply(i,(0,k.Z)(n)),e.playing=e.current}),this.list=[],this.playing=0,this.current=0}return(0,C.Z)(t,[{key:"len",get:function(){return this.list.length}},{key:"setList",value:function(t,e){return this.list=t,this.current=0,e&&this.play&&this.play(),this}},{key:"setIndex",value:function(t){return t>this.len-1&&(t=this.len-1),t<0&&(t=0),this.current=t,this}},{key:"prev",value:function(){return this.current=(this.current-1+this.len)%this.len,this}},{key:"next",value:function(){return this.current=(this.current+1)%this.len,this}}]),t}(),Mt={class:"music-lists"};function Dt(t,e,n,i,a,r){return(0,o.wg)(),(0,o.j4)("label",{for:r.id,class:["music-wrap",{focus:a.isFocus}]},[(0,o.Wm)("div",{class:["search-box",{focus:a.isFocus}]},[(0,o.wy)((0,o.Wm)("input",{id:r.id,ref:"input",type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.config.searchText=t}),placeholder:"网易云音乐",onFocus:e[2]||(e[2]=function(){return r.focus&&r.focus.apply(r,arguments)}),onBlur:e[3]||(e[3]=function(){return r.blur&&r.blur.apply(r,arguments)})},null,40,["id"]),[[s.nr,n.config.searchText]])],2),(0,o.Wm)("div",Mt,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(n.config.tabs.list,(function(t,e){return(0,o.wg)(),(0,o.j4)("div",{class:["song-list",{prev:e===(r.tabs.current-1+r.tabs.list.length)%r.tabs.list.length,active:e===r.tabs.current,next:e===(r.tabs.current+1)%r.tabs.list.length}]},[r.getImgUrl(t.list[t.current])?((0,o.wg)(),(0,o.j4)("span",{key:0,style:{backgroundImage:"url('".concat(r.getImgUrl(t.list[t.current]),"')")}},null,4)):(0,o.ry)("",!0),(0,o.Wm)("div",null,[(0,o.Wm)("ul",{style:{transform:"translateY(-".concat(30*t.current,"px)")}},[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(t.list,(function(i,a){return(0,o.wg)(),(0,o.j4)("li",{class:{active:t.current===a,playing:t.playing===a}},[(0,o.Wm)("span",{onClick:(0,s.iM)((function(e){return t.setIndex(a).play()}),["stop"])},[r.getImgUrl(i)?((0,o.wg)(),(0,o.j4)("img",{key:0,src:r.getImgUrl(i)},null,8,["src"])):(0,o.ry)("",!0),(0,o.Uk)(" "+(0,dt.zw)(i.name)+" ",1),"modify"===n.config.type&&1===e?((0,o.wg)(),(0,o.j4)(o.HY,{key:1},[(0,o.Uk)("    "+(0,dt.zw)(t.list[a].value)+" / "+(0,dt.zw)(t.list[a].min)+" / "+(0,dt.zw)(t.list[a].max)+"   当前/最小/最大 ",1)],64)):(0,o.ry)("",!0)],8,["onClick"])],2)})),256))],4)])],2)})),256)),(0,o.Wm)("div",{class:"music-lists-prev",onClick:e[4]||(e[4]=(0,s.iM)((function(t){return r.tabs.prev()}),["stop"]))}," prev "),(0,o.Wm)("div",{class:"music-lists-next",onClick:e[5]||(e[5]=(0,s.iM)((function(t){return r.tabs.next()}),["stop"]))}," next ")])],10,["for"])}var Tt={name:"ListBoxView",provide:function(){return{}},components:{},mixins:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],props:["config"],computed:{tabs:function(){return this.config.tabs},id:function(){return"ListBoxView_".concat(this.config.focusKey)}},watch:{},data:function(){var t=this;return this.navList.push({name:this.config.name,id:this.id,callback:function(){t.$refs.input.focus()}}),{isFocus:!1}},methods:{focus:function(){var t=this,e=this.isFocus_=Date.now();setTimeout((function(){e===t.isFocus_&&(t.isFocus=!0)}),300)},blur:function(){var t=this,e=this.isFocus_=Date.now();setTimeout((function(){e===t.isFocus_&&(t.isFocus=!1)}),300)},getImgUrl:function(t){return t&&(t.coverImgUrl||t.al&&t.al.picUrl||t.album&&t.album.picUrl)}},beforeDestory:function(){},mounted:function(){var t=this,e=(this.musicConfig,this.gameList,this.mv,this.config);this.$shortCut=new y.r,"modify"===e.type&&this.$shortCut.init(this.$refs.input,{common:{w:function(){return e.tabs.up()},s:function(){return e.tabs.down()},q:function(){return e.tabs.prev()},e:function(){return e.tabs.next()},107:function(){return e.tabs.add()},delete:function(){return e.tabs.delete()},c:function(){return e.tabs.copy()},4:function(){return e.tabs.dec()},6:function(){return e.tabs.enc()},left:function(){return e.tabs.dec()},right:function(){return e.tabs.enc()},a:function(){return e.tabs.dec()},d:function(){return e.tabs.enc()},8:function(){return e.tabs.prevItem()},2:function(){return e.tabs.nextItem()},up:function(){return e.tabs.prevItem()},down:function(){return e.tabs.nextItem()},esc:function(){return t.$refs.input.blur()}},alt:{},shift:{},ctrl:{}},{common:{w:"上一项",s:"下一项",q:"左翻页",e:"右翻页",107:"添加配置",delete:"删除配置",c:"复制当前配置",4:"参数小",6:"参数大",left:"参数小",right:"参数大",a:"参数小",d:"参数大",8:"上一项",2:"下一项",up:"上一项",down:"下一项",esc:"关闭配置页面"},alt:{},shift:{},ctrl:{}}),"listBox"===e.type&&this.$shortCut.init(this.$refs.input,{common:{up:function(){return e.tabs.list[e.tabs.current].prev()},down:function(){return e.tabs.list[e.tabs.current].next()},left:function(){return e.searchText||e.tabs.prev()},right:function(){return e.searchText||e.tabs.next()},enter:function(){return e.search&&e.searchText?e.search():e.tabs.list[e.tabs.current].play("manual")},backspace:function(){return e.searchText||e.tabs.current&&e.tabs.prev()},esc:function(){return t.$refs.input.blur()}}},{common:{up:"上一项",down:"下一项",left:"上一页",right:"上一页",enter:"搜索|播放|确认",backspace:"删除|返回上一页",esc:"关闭页面"}}),y.t.init(void 0,{alt:(0,b.Z)({},this.config.focusKey,(function(){t.$refs.input.focus()}))},{alt:(0,b.Z)({},this.config.focusKey,"打开页面")})}};Tt.render=Dt;var jt=Tt,xt={name:"MusicSearchBox",provide:function(){return{}},components:{ListBoxView:jt},mixins:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],data:function(){var t=this,e=new bt,n=new bt,i=new bt({play:function(e){return t.play(e)}}),a=new bt({play:function(){wt.playlistDetail({id:t.sheetList.list[t.sheetList.current].id})((function(e){t.sheet.setList(e.playlist.tracks,!0)}))}});return e.setList([a,i,n]),{config:{type:"listBox",name:"网易云音乐",tabs:e,searchText:"",focusKey:"q",search:function(){return t.search()}},currentTime:0,timer:null,tabs:e,lrcs:n,sheet:i,sheetList:a,account:null}},computed:{},watch:{"lrcs.current":function(){var t=this.lrcs,e=t.list,n=t.current;this.modifyManager.commonOptions.changeBG_When_LRC_Changed&&this.musicConfig.changePic(),this.musicConfig.setLrc(e[n]&&e[n].name||"")},currentTime:{immediate:!0,handler:function(){var t=this.mv.$audio.currentTime;this.gameList.currentTime=1e3*t;var e=parseInt(10*t),n=0;this.lrcs.list.some((function(t,i){return t.time<=e&&(n=i),t.time>e})),this.lrcs.setIndex(n)}},account:{immediate:!0,handler:function(){this.account&&this.getUserSongList()}}},methods:{getLrc:function(){var t=this,e=this.sheet.list[this.sheet.current];e&&(wt.lyric({id:e.id||e.songId})((function(e){var n=e.lrc.lyric.split(/\n/).map((function(t){var e=t.match(/(?:\[)(\d+)(?::)([^\]]+)(?:\])([^\[\]]*)/);return{name:e?e[3]:"",time:e?parseInt(10*(60*+e[1]+ +e[2])):0}}));t.lrcs.setList(n)})),this.lrcs.setList([]))},login:function(){var t=this;localStorage.setItem("userPhone","16621079485"),localStorage.setItem("password","a13789");var e={phone:localStorage.getItem("userPhone"),password:localStorage.getItem("password")};if(!e.password||!e.password)return y.r.toast(["正式环境位开放远程歌曲"]),void setTimeout((function(){y.r.toast(["请使用测试歌曲"])}),600);wt.loginCellphone(e)((function(e){t.account=e.account,t.getMySheets()}))},getImgUrl:function(t){return t&&(t.coverImgUrl||t.al&&t.al.picUrl||t.album&&t.album.picUrl)},getSongUrl:function(){var t=this.mv,e=this.sheet.list[this.sheet.current];e&&(this.gameList.durationTime=t.duration=t.duration=e.duration||e.dt,wt.songUrl({id:e.id})((function(e){t.play(e.data[0].url)})))},play:function(t){var e=this,n=this.gameList,i=this.mv,a=function(){n.startSong(),i.stopType=t,e.getSongUrl(),e.getLrc(),e.tabs.setIndex(1),e.config.searchText=""};i.$audio.paused?a():(i.$audio.pause(),setTimeout((function(){a()}),1e3*i.delay.delayTime.value+n.buffer))},getUserSongList:function(){var t=this;wt.userPlaylist({uid:this.account.id})((function(e){t.sheetList.setList(e.playlist,!0)}))},getMySheets:function(){var t=this;wt.recommendSongs()((function(e){t.sheet.setList(e.recommend||[])}))},like:function(){var t=this.sheet.list[this.sheet.current],e=this.sheetList.list[0];e&&t&&wt.playlistTracks({op:"add",pid:e.id,tracks:t.id})((function(t){console.log("like")}))},search:function(){var t=this;this.config.searchText&&wt.search({keywords:this.config.searchText})((function(e){t.sheet.setList(e.result.songs,!0),t.config.searchText=""}))}},beforeDestory:function(){clearInterval(this.timer)},mounted:function(){var t=this,e=this.musicConfig,n=this.gameList,i=this.mv;e.ended=function(){setTimeout((function(){n.endSong(),setTimeout((function(){t.sheet.next(),t.sheet.play()}),5e3)}),1e3*i.delay.delayTime.value+n.buffer+1e3)},this.timer=setInterval((function(){return t.currentTime=Date.now()}),50),this.login(),y.t.init(void 0,{alt:{left:function(){var t=i.$audio.currentTime-5;i.$audio.currentTime=t>=0?t:0},right:function(){var t=i.$audio.currentTime+5;i.$audio.currentTime=t<=i.$audio.duration?t:i.$audio.duration},p:function(){return i.$audio.paused?i.$audio.play():i.$audio.pause()}},ctrl:{left:function(){return e.changePic(!0)},right:function(){return e.changePic()}}},{alt:{left:"退后5s",right:"前进5s",p:"暂停/播放"},ctrl:{left:"上一张图片",right:"下一张图片"}})}};xt.render=pt;var Et=xt;function Lt(t,e,n,i,a,s){var r=(0,o.up)("ListBoxView");return(0,o.wg)(),(0,o.j4)(r,{config:a.config},null,8,["config"])}var Zt={name:"MusicLocalBox",provide:function(){return{}},components:{ListBoxView:jt},mixins:[],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","navList"],data:function(){var t=this,e=new bt,n=new bt({play:function(){t.play()}});return e.setList([n]),n.setList([{name:"testSong",url:"./sound/testSound.mp3"}]),{config:{type:"listBox",name:"测试歌曲",tabs:e,searchText:"",focusKey:"e"},tabs:e,songList:n}},computed:{},watch:{},methods:{play:function(t){var e=this,n=this.gameList,i=this.mv,a=function(){n.startSong(),i.stopType=t,i.play(e.songList.list[e.songList.current].url),e.searchText=""};i.$audio.paused?a():(i.$audio.pause(),setTimeout((function(){a()}),1e3*i.delay.delayTime.value+n.buffer))}},mounted:function(){var t=this,e=this.musicConfig,n=this.gameList,i=this.mv;e.ended=function(){setTimeout((function(){n.endSong(),setTimeout((function(){t.songList.next(),t.songList.play()}),5e3)}),1e3*i.delay.delayTime.value+n.buffer+1e3)},y.t.init(void 0,{alt:{left:function(){var t=i.$audio.currentTime-5;i.$audio.currentTime=t>=0?t:0},right:function(){var t=i.$audio.currentTime+5;i.$audio.currentTime=t<=i.$audio.duration?t:i.$audio.duration},p:function(){return i.$audio.paused?i.$audio.play():i.$audio.pause()}},ctrl:{}},{alt:{left:"退后5s",right:"前进5s",p:"暂停/播放"},ctrl:{}})}};Zt.render=Lt;var Pt=Zt,Ot=(0,o.HX)("data-v-59e8abba"),It=Ot((function(t,e,n,i,a,s){var r=(0,o.up)("ListBoxView");return(0,o.wg)(),(0,o.j4)(r,{config:a.config},null,8,["config"])})),St={name:"ModifyBox",provide:function(){return{}},components:{ListBoxView:jt},mixins:[],inject:["modifyManager","navList"],data:function(){return{config:{type:"modify",name:"参数调整",tabs:this.modifyManager,searchText:"",focusKey:"w"}}},computed:{},watch:{},methods:{search:function(){}},mounted:function(){}};St.render=It,St.__scopeId="data-v-59e8abba";var At=St,Bt=(0,o.HX)("data-v-4339fdd8");(0,o.dD)("data-v-4339fdd8");var Wt={class:"canvas-view"};(0,o.Cn)();var $t=Bt((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",Wt,[(0,o.Wm)("canvas",{ref:"canvas",width:a.width,height:a.height},null,8,["width","height"])])})),Rt=(n(3290),{name:"CanvasView",inject:["musicDataFlags","musicData","musicConfig","gameList","mv"],data:function(){return{width:0,height:0}},computed:{},props:["config"],watch:{"musicDataFlags.dataFlag":{immediate:!0,deep:!0,handler:function(){}}},methods:{renderCanvas:function(){var t=this.config;this.$canvasHidded.width=this.width=this.$el.offsetWidth,this.$canvasHidded.height=this.height=this.$el.offsetHeight,mv.size=8*t.dataSize;var e=this.height,n=this.width,i=this.ctx,a=this.viewCtx,s=musicData,o=s.originData,r=s.realTimeData,c=s.calculateColors,u=r.avrLevel,l=r.data,h=o.data,d=(0,k.Z)(t.copyData?l:[]);d.reverse();var f=[];if(t.showDataBefore){var m=(0,k.Z)(t.copyData?h:[]);m.reverse(),f=[].concat((0,k.Z)(h),(0,k.Z)(m)),f.reverse()}var _=[].concat((0,k.Z)(l),(0,k.Z)(d),(0,k.Z)(f)).filter((function(e){return!t.noZero||e})),v=musicConfig,p=(v.currentImgAviColor,v.mouseMoveConf,[Math.min(e,n),Math.max(e,n)][t.baseSizeType]),g={x:n*t.midPositionX/100,y:e*t.midPositionY/100},y=p*t.mainRadius/100*(100-t.avrLevelMainRadiusModify+t.avrLevelMainRadiusModify*u/256)/100,w=p*t.floatRange/100*(100-t.avrLevelFloatRangeModify+t.avrLevelFloatRangeModify*u/256)/100;if(i.fillStyle="rgba(0, 0, 0, ".concat(t.disable?1:1-t.clearPrevView/100,")"),i.fillRect(0,0,this.width,this.height),i.clearRect(0,0,n,e),a.clearRect(0,0,n,e),t.disable)a.drawImage(this.$canvasHidded,0,0);else{i.fillStyle=i.strokeStyle="rgba(".concat(c[0].join(", "),", ").concat(t.mainRadiusOpacity/100,")"),i.lineWidth=p*t.mainRadiusLineWidth/1e3,i.beginPath(),0===t.direction&&i.arc(g.x,g.y,y,0,2*Math.PI),i.closePath(),i.stroke();var C=_.length||1,b=2*Math.PI/(C||1)*t.stepModify/10,M=b/2,D=0*Math.PI;i.lineWidth=p*t.lineLineWidth/1e3;var T=t.dataModify/10,j=1+t.dataOffsetModify/100;i.closePath();var x=_.length,E=t.minHeightModify/100;_.forEach((function(e,n){e=e/256+E;var a=_[(n+1)%x]/256+E,s=b*n+D;function o(){var a=(n-C/2)*t.stepModify,o=[[Math.sin(s)*(e*T+j*y)+g.x,Math.cos(s)*(e*T+j*y)+g.y],[g.x+a,-(e*T+j*y)+g.y]][t.direction],r=[[Math.sin(s)*(e*T*w*3+j*y)+g.x,Math.cos(s)*(e*T*w*3+j*y)+g.y],[g.x+a,-(e*T*w*3+j*y)+g.y]][t.direction],u=i.createLinearGradient(o[0],o[1],r[0],r[1]);u.addColorStop(1,"rgba(".concat(c[0].join(", "),", 1)")),u.addColorStop(.75,"rgba(".concat(c[1].join(", "),", 1)")),u.addColorStop(0,"rgba(".concat(c[1].join(", "),", 1)")),i.strokeStyle=u,i.beginPath(),i.moveTo(o[0],o[1]),i.lineTo(r[0],r[1]),i.closePath(),i.stroke()}var r=e*T*w*3+y;function l(){i.strokeStyle="rgba(".concat(c[1].join(", "),", ").concat(2*u/255+.25,")");var t=a*T*w*3+y;i.beginPath(),i.moveTo(Math.sin(s)*r+g.x,Math.cos(s)*r+g.y),i.bezierCurveTo(Math.sin(s+b/3)*r+g.x,Math.cos(s+b/3)*r+g.y,Math.sin(s+b/3*2)*t+g.x,Math.cos(s+b/3*2)*t+g.y,Math.sin(s+b)*t+g.x,Math.cos(s+b)*t+g.y),i.closePath(),i.stroke()}function h(){i.fillStyle="rgba(".concat(c[1].join(", "),", 1)"),i.beginPath();var a=(n-C/2)*t.stepModify+g.x,o=[[Math.sin(s)*r+g.x,Math.cos(s)*r+g.y],[a,-(e*T*w*3+j*y)+g.y]][t.direction]||[],u=o[0],l=o[1];i.arc(u,l,p*t.lineLineWidth/1e3,0,2*Math.PI),i.closePath(),i.fill()}function d(){i.strokeStyle="rgba(".concat(c[1].join(", "),", 1)"),i.beginPath();var n=(e*T-t.threshold/10)*w;n<0&&(n=0);var a=[[Math.sin(s-M)*y+g.x,Math.cos(s-M)*y+g.y],[Math.sin(s+M)*y+g.x,Math.cos(s+M)*y+g.y],[Math.sin(s)*(-n+y)+g.x,Math.cos(s)*(-n+y)+g.y],[Math.sin(s)*(n+y)+g.x,Math.cos(s)*(n+y)+g.y]];[0,2,1,3,0,2].forEach((function(t){i.lineTo.apply(i,a[t])})),i.closePath(),i.stroke()}[o,l,d,h][t.renderType]()})),i.closePath(),a.drawImage(this.$canvasHidded,0,0)}}},mounted:function(){this.$canvas=this.$refs.canvas,this.viewCtx=this.$canvas.getContext("2d"),this.$canvasHidded=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.ctx=this.$canvasHidded.getContext("2d")}});Rt.render=$t,Rt.__scopeId="data-v-4339fdd8";var Ft=Rt,Ut=(0,o.HX)("data-v-0226e92a");(0,o.dD)("data-v-0226e92a");var Nt={class:"canvas-view"};(0,o.Cn)();var qt=Ut((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",Nt,[(0,o.Wm)("canvas",{ref:"canvas",width:a.width,height:a.height},null,8,["width","height"])])})),Kt=n(2576),Ht=function(){function t(){(0,w.Z)(this,t)}return(0,C.Z)(t,[{key:"exec",value:function(){var e=this.max_,n=this.min_,i=this.sign_;return t.exec(e,n,i)}},{key:"sign",value:function(){return this.sign_=-1,this}},{key:"min",value:function(t){return Kt.X.isNumber(t)&&(this.min_=t),this}},{key:"max",value:function(t){return Kt.X.isNumber(t)&&(this.max_=t),this}},{key:"int",value:function(e,n){var i=this.max_,a=this.min_,s=this.sign_;return t.int(i,a,s,e,n)}},{key:"boolean",value:function(){return t.boolean(size,rate)}}],[{key:"exec",value:function(t,e,n){var i=Math.random();return Kt.X.isNumber(t)&&(i*=t),Kt.X.isNumber(e)&&(i+=e),n&&(i*=-1),i}},{key:"int",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return(i&&t.boolean()?-1:1)*Math.round(Math.random()*e+n)}},{key:"boolean",value:function(){return Math.round(Math.random())}},{key:"time",value:function(){return Date.now().toString()}}]),t}();var zt={r:0,g:1,b:2,a:3},Vt=function(){function t(e){(0,w.Z)(this,t),(0,b.Z)(this,"aisleMap",zt),(0,b.Z)(this,"imageData",void 0),this.imageData=e}return(0,C.Z)(t,[{key:"getAisle",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.aisleMap[e];if(void 0===i)return[];for(var a=this.imageData,s=a.data,o=a.width,r=a.height,c=[],u=0;u<r;u++){var l=[];c.push(l);for(var h=o*u,d=0;d<o;d++)l.push(s[4*(h+d)+i]),n&&(s[4*(h+d)+i]=t.cutFnMap[n]&&t.cutFnMap[n]()||255)}return c}},{key:"aisleOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=this.aisleMap[t];if(void 0!==s)for(var o=this.getAisle(t,a),r=this.imageData,c=r.data,u=r.width,l=r.height,h=0;h<l;h++)for(var d=o[h+n]||{},f=u*(h+n)+e,m=0;m<u;m++)c[4*(f+m)+s]=(d[m]||0)*i}}]),t}();(0,b.Z)(Vt,"cutFnMap",{1:function(){return 255},2:function(){return 0},3:function(){return Ht.int(255,0)}});var Xt={name:"CanvasPic",inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager","commonOptions_"],data:function(){return{width:0,height:0,count:0,thisCount:0,imgCtx:null,shallMalfunction:0}},watch:{"musicDataFlags.shockFlag":{immediate:!0,handler:function(){this.commonOptions_.CanvasPicMalfunction&&(this.shallMalfunction=2)}},"musicDataFlags.dataFlag":{immediate:!0,handler:function(){this.$canvas&&this.ctx&&this.renderCanvas()}}},methods:{renderCanvas:function(){var t=this,e=this.height,n=this.width,i=this.ctx,a=(this.imgCtx,this.musicConfig),s=this.musicData,o=s.realTimeData,r=o.avrLevel;if(i.putImageData(a.getImageData(0,0,n,e),0,0),this.shallMalfunction){var c=[0,1,2,3,4,5];function u(t,e,n){return'<filter id="'.concat(t,'"><feGaussianBlur in="SourceGraphic" stdDeviation="').concat(e,",").concat(n,'"></feGaussianBlur></filter>')}document.querySelector("#svg-all").innerHTML="<defs>".concat(c.map((function(t){return u("blur".concat(2*t),0,t?r/255/t*20:0)})).join("")).concat(c.map((function(t){return u("blur".concat(2*t,"-v"),t?r/255/t*20:0,0)})).join("")).concat(c.map((function(t){return u("blur".concat(2*t,"--45"),t?r/255/t*20:0,0)})).join(""),"</defs>")}var l=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=s?Ht.int(n,n/(s+.2*s)):n,c=s?Ht.int(e,e/(5*s)):e/10,u=(n-o)/2,l=(e-c)/2+Ht.int(c/2,0,!0),h=a.getImageData(u,l,o,c);if(h){var d=new Vt(h),f=Ht.boolean(),m=r/4;if(t.shallMalfunction){var _=[function(t){return d.aisleOffset("r",f?t:0,f?0:t,void 0,Ht.int(3,0))},function(t){return d.aisleOffset("g",f?t:0,f?0:t,void 0,Ht.int(3,0))},function(t){return d.aisleOffset("b",f?t:0,f?0:t,void 0,Ht.int(3,0))}],v=Ht.int(2,0);_[v](Ht.int(m,m/2,!0)),Ht.boolean()&&_[(v+1)%_.length](Ht.int(m,m/3,!0)),Ht.boolean()&&_[(v+2)%_.length](Ht.int(m,m/4,!0)),i.putImageData(d.imageData,u+Ht.int(20*s,0,!0),l+Ht.int(10*s,0,!0))}i.putImageData(h,u,l)}};a.picDom&&2===this.shallMalfunction&&l(0),this.viewCtx.drawImage(this.$canvasHidded,0,0),this.shallMalfunction&&this.shallMalfunction--}},mounted:function(){this.$canvas=this.$refs.canvas,this.viewCtx=this.$canvas.getContext("2d"),this.$canvasHidded=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage.width=this.$canvasHidded.width=this.width=this.$el.offsetWidth,this.$canvasImage.height=this.$canvasHidded.height=this.height=this.$el.offsetHeight,this.ctx=this.$canvasHidded.getContext("2d"),this.imgCtx=this.$canvasImage.getContext("2d")}};Xt.render=qt,Xt.__scopeId="data-v-0226e92a";var Gt=Xt,Yt=(0,o.HX)("data-v-a931abd0");(0,o.dD)("data-v-a931abd0");var Jt={class:"canvas-view"};(0,o.Cn)();var Qt=Yt((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",Jt,[(0,o.Wm)("div",{style:a.textStyle},"Happy new Year!",4)])})),te={name:"CanvasText",data:function(){return{musicDataFlags:i.musicDataFlags,musicConfig:a.musicConfig,musicData:i.musicData,width:0,height:0,count:0,thisCount:0,imgCtx:null,textStyle:""}},computed:{},watch:{"musicDataFlags.dataFlag":{immediate:!0,handler:function(){var t=i.musicData.realTimeData,e=(i.musicData.calculateColors,t.avrLevel),n=e/255,a=Math.round(e/255*100)+10,s=e/255+.75,o=e/255/2+.75;this.textStyle="text-shadow: ".concat(["0 0 ".concat(a,"px #fff"),"0 0 ".concat(2*a,"px #fff"),"0 0 ".concat(3*a,"px #fff"),"0 0 ".concat(4*a,"px #fff"),"0 0 ".concat(5*a,"px #ff5722"),"0 0 ".concat(6*a,"px #ff5722"),"0 0 ".concat(7*a,"px #ff5722"),"0 0 ".concat(8*a,"px #ff5722")].join(","),"; opacity: ").concat(s>1?1:s,"; transform: translate3d(0,0,0) scale(").concat(o,", ").concat(o,") rotate(").concat(Ht.exec(3*n,-3*n),"deg)")}}},methods:{}};te.render=Qt,te.__scopeId="data-v-a931abd0";var ee=te,ne=(0,o.HX)("data-v-0ebf586b");(0,o.dD)("data-v-0ebf586b");var ie={class:"canvas-view"};(0,o.Cn)();var ae=ne((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",ie,[(0,o.Wm)("canvas",{ref:"canvas",width:a.width,height:a.height},null,8,["width","height"])])})),se={name:"CanvasText",inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],data:function(){return{width:0,height:0,count:0,thisCount:0,imgCtx:null,shallMalfunction:!1,size:0}},watch:{"musicDataFlags.dataFlag":{immediate:!0,handler:function(){this.$canvas&&this.ctx&&this.renderCanvas()}},"musicDataFlags.shockFlag":{immediate:!0,handler:function(){this.modifyManager.commonOptions.CanvasTextMalfunction&&(this.shallMalfunction=!0),this.size=0,console.log(789)}}},methods:{renderCanvas:function(){var t=this,e=this.height,n=this.width,i=this.ctx,a=(this.imgCtx,this.musicConfig),s=this.viewCtx,o=this.musicData,r=o.realTimeData,c=o.calculateColors,u=r.avrLevel,l=100,h=n/2,d=.66*e,f=this.size=this.size||160+Ht.int(10*u/255,0,!0)-1.5*(a.lrc||"").length;i.clearRect(0,0,n,e),s.clearRect(0,0,n,e),a.lrc&&(i.fillStyle="rgba(0,0,0,.5)",i.fillRect(0,e/7*3.9,n,e/7*1.3)),i.font="".concat(f,"px pmzdbtt");var m=i.measureText(a.lrc);m.width>n-100&&(f=this.size=Math.floor(this.size/m.width*(n-100)),i.font="".concat(f,"px pmzdbtt")),i.textAlign="center",i.textBaseline="middle",i.lineWidth=1;var _=u/255,v=_*f/4+4;i.strokeStyle="rgba(".concat(c[1].map((function(t){return 255})).join(", "),", ").concat(_,")"),i.strokeText(a.lrc,h+v,d-v);var p=i.createPattern(N.pciCanvas,"repeat");i.fillStyle=p,i.fillText(a.lrc,h+v,d-v),i.strokeStyle="rgba(".concat(c[1].map((function(t){return 255})).join(", "),", ").concat(.8*_,")"),i.strokeText(a.lrc,h+v/2,d-v/2),i.fillStyle="rgba(255,255,255,.3)",i.fillText(a.lrc,h+v/2,d-v/2),i.strokeStyle="rgba(".concat(c[1].map((function(t){return 255-t})).join(", "),", 1)"),i.strokeText(a.lrc,h,d),i.fillStyle="rgba(".concat(c[1].join(", "),", 0.3)"),i.fillText(a.lrc,h,d);var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=i.measureText(a.lrc).width||1;if(o){var r=o,c=f*e/4,u=f,h=(n-r)/2,m=d-u/2+Ht.int(f-c,0);if(!(c<0)){var _=i.getImageData(h,m,r,c),v=new Vt(_),p=(l-f)/4;if(t.shallMalfunction){var g=[function(){return v.aisleOffset("r",Ht.int(p,p/2,!0),Ht.int(p,p/2,!0))},function(){return v.aisleOffset("g",Ht.int(p,p/3,!0),Ht.int(p,p/3,!0))},function(){return v.aisleOffset("b",Ht.int(p,p/4,!0),Ht.int(p,p/4,!0))}],y=g.length,k=Ht.int(2,0);g[k](),Ht.boolean()&&g[++k%y](),Ht.boolean()&&g[++k%y]()}i.putImageData(v.imageData,h,m),s.drawImage(t.$canvasHidded,0,0)}}};a.picDom&&(g(1),g(2),g(3)),this.shallMalfunction=!1}},mounted:function(){this.$canvas=this.$refs.canvas,this.viewCtx=this.$canvas.getContext("2d"),this.$canvasHidded=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage=window.OffscreenCanvas?new OffscreenCanvas(this.$canvas.width,this.$canvas.height):document.createElement("canvas"),this.$canvasImage.width=this.$canvasHidded.width=this.width=this.$el.offsetWidth,this.$canvasImage.height=this.$canvasHidded.height=this.height=this.$el.offsetHeight,this.ctx=this.$canvasHidded.getContext("2d"),this.imgCtx=this.$canvasImage.getContext("2d")}};se.render=ae,se.__scopeId="data-v-0ebf586b";var oe=se,re=(0,o.HX)("data-v-3830f794");(0,o.dD)("data-v-3830f794");var ce={class:"canvas-view"};(0,o.Cn)();var ue=re((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",ce,[(0,o.Wm)("video",{src:a.src,autoplay:"autoplay",muted:"",onEnded:e[1]||(e[1]=function(){return s.handelEnded&&s.handelEnded.apply(s,arguments)})},null,40,["src"])])})),le={name:"VideoView",provide:function(){return{}},components:{},mixins:[],props:["index"],inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],data:function(){return{ended:!0,shallChange:!1,current:this.index,src:"",srcs:["./videos/1.mp4","./videos/2.mp4","./videos/3.mp4","./videos/4.mp4"],width:0,height:0,play:function(){}}},computed:{changeVideo:function(){return this.musicData.soundTrackArr.find((function(t){return t.isChangeDot}))}},methods:{handelEnded:function(){this.ended=!0}},watch:{"musicDataFlags.shockFlag":function(){this.ended&&(this.current++,this.src=this.srcs[this.current%this.srcs.length],this.ended=!1)}},beforeDestroy:function(){document.removeEventListener("click",this.play)},mounted:function(){document.addEventListener("click",this.play),this.play(),this.width=this.$el.offsetWidth,this.height=this.$el.offsetHeight}};le.render=ue,le.__scopeId="data-v-3830f794";var he=le,de=(0,o.HX)("data-v-591f40bb");(0,o.dD)("data-v-591f40bb");var fe={class:"dom-clock"},me={key:0};(0,o.Cn)();var _e=de((function(t,e,n,i,a,s){var r=(0,o.up)("DomClockItem");return(0,o.wg)(),(0,o.j4)("div",fe,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(a.time,(function(t,e){return(0,o.wg)(),(0,o.j4)("div",{style:s.d3wrapStyle},[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(t,(function(t,n){return(0,o.wg)(),(0,o.j4)("div",null,[n?((0,o.wg)(),(0,o.j4)("span",me,(0,dt.zw)(e?":":"-"),1)):(0,o.ry)("",!0),((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(t,(function(t){return(0,o.wg)(),(0,o.j4)(r,{num:t},null,8,["num"])})),256))])})),256))],4)})),256))])})),ve=function(){function t(){(0,w.Z)(this,t)}return(0,C.Z)(t,null,[{key:"format",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yea-mon-dat",i=e||new Date;return n.replace(/yea/g,i.getFullYear().toString()).replace(/mon/g,t.to00(i.getMonth()+1)).replace(/dat/g,t.to00(i.getDate())).replace(/hou/g,t.to00(i.getHours())).replace(/min/g,t.to00(i.getMinutes())).replace(/sec/g,t.to00(i.getSeconds())).replace(/mis/g,t.to000(i.getMilliseconds()))}},{key:"to00",value:function(t){return t>9?"".concat(t):"0".concat(t)}},{key:"to000",value:function(e){return e>99?"".concat(e):"0".concat(t.to00(e))}}]),t}(),pe=(0,o.HX)("data-v-f8f17254");(0,o.dD)("data-v-f8f17254");var ge={class:"dom-clock-item-wrap"},ye={class:"dom-clock-item"},ke={class:{track:!0}},we=(0,o.Wm)("div",null,null,-1),Ce={class:"dom-clock-item"},be=(0,o.Wm)("div",null,null,-1);(0,o.Cn)();var Me=pe((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",ge,[(0,o.Wm)("div",ye,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(s.list,(function(t,e){return(0,o.wg)(),(0,o.j4)("div",ke,[we])})),256))]),(0,o.Wm)("div",Ce,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(s.list,(function(t,e){return(0,o.wg)(),(0,o.j4)("div",{class:{active:t}},[be],2)})),256))])])})),De=[[1,1,1,1,1,1,0],[0,1,1,0,0,0,0],[1,1,0,1,1,0,1],[1,1,1,1,0,0,1],[0,1,1,0,0,1,1],[1,0,1,1,0,1,1],[1,0,1,1,1,1,1],[1,1,1,0,0,0,0],[1,1,1,1,1,1,1],[1,1,1,1,0,1,1]],Te={name:"DomClockItem",props:["num"],data:function(){return{musicData:i.musicData,musicDataFlags:i.musicDataFlags}},computed:{list:function(){return De[this.num]}},methods:{renderCanvas:function(){}},mounted:function(){}};Te.render=Me,Te.__scopeId="data-v-f8f17254";var je=Te,xe={name:"DomClock",components:{DomClockItem:je},data:function(){return{time:""}},inject:["musicDataFlags","musicData","musicConfig","gameList","mv","modifyManager"],computed:{d3wrapStyle:function(){var t=this.musicConfig,e=t.mouseMoveConf,n=e._x,i=e._y,a=150;return{transform:"translateZ(-400px) rotateX(".concat(-i*a-20,"deg) rotateY(").concat(n*a,"deg)")}},dataFlag:function(){return this.musicDataFlags.dataFlag}},watch:{"musicDataFlags.shockFlag":{immediate:!0,handler:function(){}},dataFlag:{immediate:!0,handler:function(){var t=new Date;this.time=[ve.format(t,"yea mon dat").split(" ").map((function(t){return t.split("")})),ve.format(t,"hou min sec").split(" ").map((function(t){return t.split("")}))]}}},methods:{renderCanvas:function(){}},mounted:function(){}};xe.render=_e,xe.__scopeId="data-v-591f40bb";var Ee=xe,Le=(0,o.HX)("data-v-17b5a148");(0,o.dD)("data-v-17b5a148");var Ze={class:"progress"},Pe=(0,o.Wm)("div",null,"realTimeData",-1),Oe=(0,o.Wm)("div",null,"originData",-1);(0,o.Cn)();var Ie=Le((function(t,e,n,i,a,s){return(0,o.wg)(),(0,o.j4)("div",{class:["game-ui",{active:s.gameList.ended}]},[(0,o.Wm)("div",Ze,[(0,o.Wm)("span",{style:s.progressStyle},null,4)]),(0,o.Wm)("ul",null,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(a.formConfigs,(function(t,e){return(0,o.wg)(),(0,o.j4)("li",null,[(0,o.Wm)("div",null,(0,dt.zw)(t.label),1),(0,o.Wm)("div",null,(0,dt.zw)(s.gameList[t.key]),1)])})),256)),(0,o.Wm)("li",null,[Pe,(0,o.Wm)("div",null,(0,dt.zw)(s.musicData.realTimeData.shockNum),1)]),(0,o.Wm)("li",null,[Oe,(0,o.Wm)("div",null,(0,dt.zw)(s.musicData.originData.shockNum),1)])])],2)})),Se={name:"GameUI",inject:["musicDataFlags","musicData","musicConfig","gameList","mv"],data:function(){return{formConfigs:[{key:"total",label:"节点数"},{key:"totalScore",label:"扣除分数"},{key:"maxCombo",label:"最大连击数"},{key:"missCount",label:"miss"},{key:"uselessCount",label:"无效按键"}]}},computed:{progressStyle:function(){var t=this.gameList,e=t.currentTime,n=t.durationTime;return{transform:"scale(".concat(n?e/n:0,", 1)")}}},watch:{},methods:{},mounted:function(){}};Se.render=Ie,Se.__scopeId="data-v-17b5a148";var Ae=Se,Be=function(){var t=new nt,e=t.list.find((function(t){return"TrackList"===t.constructor.name})).list.find((function(t){return"CommonOptionsTrack"===t.constructor.name})).list,n=M.h.node("div");M.h.class(n,"game-wrap"),M.h.append(document.body,n);var i=M.h.node("div");M.h.class(i,"game-inner"),M.h.append(n,i);var a=new j,s=new Z(t),o=["22824.jpg","22891.jpg"],r=new H({images:o}),c=new lt({size:Math.pow(2,6),musicConfig:r,volume:.3}),u=new S(c,i,t),l=function(e){u.createGameNode(e.rhythmPoint,t.gameTrack.trick)};return s.originData.event.addEventListener("shock",l),s.originData.event.addEventListener("update",(function(){window.isPhone||new A(s.originData,s,i,t);var e=r.mouseMoveConf,n=e._x,a=e._y,o=180;i.style="transform: rotateY(".concat(-n*o,"deg) rotateX(").concat(a*o,"deg) translateZ(100px);")})),{navList:[],commonOptions_:e,modifyManager:t,musicDataFlags:a,musicData:s,musicConfig:r,gameList:u,mv:c}}(),We={name:"DashBoard",components:{NavBar:vt,MusicSearchBox:Et,MusicLocalBox:Pt,ModifyBox:At,GameUI:Ae,CanvasView:Ft,VideoView:he,CanvasPic:Gt,CanvasText:oe,CanvasTitle:ee,DomClock:Ee},provide:function(){var t=this.navList,e=this.commonOptions_,n=this.modifyManager,i=this.musicDataFlags,a=this.musicData,s=this.musicConfig,o=this.gameList,r=this.mv;return{navList:t,commonOptions_:e,modifyManager:n,musicDataFlags:i,musicData:a,musicConfig:s,gameList:o,mv:r}},computed:{commonOptions:function(){var t={},e=this.commonOptions_;return e.forEach((function(e){t[e.key]=e.value})),t}},mounted:function(){var t=this,e=this.musicData,n=this.musicDataFlags,i=this.musicConfig,a=this.mv;e.realTimeData.event.addEventListener("shock",(function(){n&&n.shockFlag++,i&&i.shock()})),y.t.init(void 0,{common:{spacebar:function(){return t.gameList.shootGameNode()},enter:function(){return t.gameList.shootGameNode()}}},{common:{spacebar:"消除节奏点",enter:"消除节奏点"}}),a.draw=function(e){t.draw(e)},window.isPhone?document.addEventListener("touchmove",(function(t){i.handelMouseMove(t)})):document.addEventListener("mousemove",(function(t){i.handelMouseMove(t)}))},data:function(){return Be},methods:{draw:function(t){var e=t.realTimeData,n=t.originData,i=this.modifyManager,a=this.musicDataFlags,s=this.musicData,o=this.musicConfig,r=this.gameList;r.setBuffer(10*i.gameTrack.RhythmPointRemoveFloatRange),s.realTimeData.update(e),s.originData.update(n);var c=(0,g.Z)(o.currentImgAviColor,4),u=c[0],l=c[1],h=c[2],d=(c[3],s.calculateColors=B.getPure(u,l,h)),f=(0,g.Z)(d,2),m=(0,g.Z)(f[0],3),_=(m[0],m[1],m[2],(0,g.Z)(f[1],3)),v=_[0],p=_[1],y=_[2],k=s.realTimeData.soundTrackArr;document.querySelector(".sound-track").innerHTML=k.map((function(t){return'<li style="'.concat(["transform: translateY(-".concat(t.vol,"px);"),"opacity: ".concat(t.isRhythmPoint?1:t.vol/256/2+.25,";"),"background-color: ".concat(t.isRhythmPoint?"rgba(".concat(255-v,",").concat(255-p,",").concat(255-y,", 1)"):"#fff",";")].join(""),'"></li>')})).join(""),a.dataFlag++}}};We.render=p,We.__scopeId="data-v-7629e62c";var $e=We,Re=[{path:"/",name:"Index",component:$e}],Fe=(0,d.p7)({history:(0,d.r5)(),routes:Re}),Ue=Fe;function Ne(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)}window.isPhone=Ne(),(0,s.ri)(l).use(Ue).mount("#app")},7638:function(t,e,n){n.d(e,{h:function(){return r}});var i=n(813),a=n(1278),s=n(2610),o=(n(6699),n(2023),n(1249),n(4747),n(5306),n(4916),n(7042),n(2576)),r=function(){function t(){(0,a.Z)(this,t)}return(0,s.Z)(t,null,[{key:"getBothAncestor",value:function(e,n){var i=e,a=n;while(i){if(t.hasChild(i,n))return i;i=i.parentNode}while(a){if(t.hasChild(a,e))return a;a=a.parentNode}}},{key:"isEmptyTag",value:function(e){return 1===e.nodeType?0===e.childNodes.length||(0,i.Z)(e.childNodes).every((function(e){return t.isEmptyTag(e)})):3===e.nodeType&&!e.textContent}},{key:"isSameTag",value:function(e,n){return!(!e||!n)&&(3===e.nodeType&&3===n.nodeType||1===e.nodeType&&1===n.nodeType&&t.isTag(e,n.tagName))}},{key:"hasChild",value:function(e,n){var a=(0,i.Z)(e.childNodes);return a.includes(n)||a.some((function(e){return t.hasChild(e,n)}))}},{key:"isChildOf",value:function(t,e){while(e){if(e.parentNode===t)return!0;e=e.parentNode}return!1}},{key:"isAncestor",value:function(t,e){while(e&&e.parentNode){if(e.parentNode===t)return!0;e=e.parentNode}return!1}},{key:"findNearestTargetParentNodeByTag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;e=e.map((function(t){return t.toLowerCase()}));while(t&&(!n||t===n)){var i=(t.tagName||"").toLowerCase();if(e.includes(i))return t;t=t.parentNode}}},{key:"changeTag",value:function(e,n){var a=t.node(n);return(0,i.Z)(e.childNodes).forEach((function(t){a.appendChild(t)})),t.replace(e,a),a}},{key:"remove",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"isTag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.nodeName.toLowerCase()===e.toLowerCase()}},{key:"isParentNodeTheTargetType",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.parentNode;return n&&n.tagName.toLowerCase()===e.toLowerCase()}},{key:"node",value:function(t,e){var n=document.createElement(t);return e&&(n.innerHTML=e),n}},{key:"class",value:function(t,e){t&&(t.classList.contains(e)||t.classList.add(e))}},{key:"removeClass",value:function(t,e){t&&(t.classList.contains(e)||t.classList.remove(e))}},{key:"text",value:function(t){return document.createTextNode(t)}},{key:"list",value:function(t,e){}},{key:"insertBefore",value:function(t,e){var n=t.parentNode;n&&n.insertBefore(e,t)}},{key:"append",value:function(t,e){o.X.isArray(e)?e.forEach((function(e){t.appendChild(e)})):t.appendChild(e)}},{key:"prepend",value:function(e,n){var i=e.childNodes[0];i?t.insertBefore(i,n):e.appendChild(n)}},{key:"insertAfter",value:function(t,e){var n=t.parentNode,i=t.nextSibling;n&&(i?n.insertBefore(e,i):n.appendChild(e))}},{key:"replace",value:function(t,e){var n=t.parentNode;n&&(n.insertBefore(e,t),n.removeChild(t))}},{key:"isTagNode",value:function(t){return 1===t.nodeType}},{key:"copyEmptyTagNode",value:function(e){return t.isTagNode(e)?t.node(e.tagName):t.text("")}},{key:"findFirstTextNode",value:function(t){while(t&&1===t.nodeType){if(1===t.nodeType)return t;t=t.childNodes[0]}}},{key:"findLastTextNode",value:function(t){while(t&&1===t.nodeType){if(1===t.nodeType)return t;t=t.childNodes[t.childNodes.length-1]}}},{key:"splitTextNode",value:function(e,n,i){var a=e.textContent||"",s=a.slice(0,n||0),o=a.slice(n||0,i||void 0),r=a.slice(i||a.length),c=s&&t.text(s),u=r&&t.text(r);return c&&t.insertBefore(e,c),e.nodeValue=o,u&&t.insertAfter(e,u),[c,e,u]}}]),t}()},2576:function(t,e,n){n.d(e,{X:function(){return s}});var i=n(1278),a=n(2610),s=(n(7042),n(1539),function(){function t(){(0,i.Z)(this,t)}return(0,a.Z)(t,null,[{key:"getType",value:function(t){return Object.prototype.toString.call(t).slice(8,-1)}},{key:"isNumber",value:function(e){return"Number"===t.getType(e)}},{key:"isString",value:function(e){return"String"===t.getType(e)}},{key:"isArray",value:function(e){return"Array"===t.getType(e)}},{key:"isObject",value:function(e){return"Object"===t.getType(e)}},{key:"isBoolean",value:function(e){return"Boolean"===t.getType(e)}},{key:"isNull",value:function(e){return"Null"===t.getType(e)}},{key:"isUndefined",value:function(e){return"Undefined"===t.getType(e)}},{key:"isFunction",value:function(e){return"Function"===t.getType(e)}},{key:"isDate",value:function(e){return"Date"===t.getType(e)}}]),t}())},403:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{r:function(){return ShortCut},t:function(){return shortCut}});var D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5461),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(485),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8218),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7224),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1278),D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2610),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4747),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7941),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2222),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9600),core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_4__),_GetType__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2576),_Sound__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7449),_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7638),keyMap={0:"96",1:"97",2:"98",3:"99",4:"100",5:"101",6:"102",7:"103",8:"104",9:"105",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",f1:"112",f2:"113",f3:"114",f4:"115",f5:"116",f6:"117",f7:"118",f8:"119",f9:"120",f10:"121",f11:"122",f12:"123","+":"107","-":"109","*":"106","/":"111",".":"110",backspace:"8",tab:"9",clear:"12",enter:"13",esc:"27",spacebar:"32","left arrow":"37","up arrow":"38","right arrow":"39","down arrow":"40",left:"37",up:"38",right:"39",down:"40",";:":"186","<":"188","=+":"187","-_":"189",">":"190","/?":"191","`~":"192","page up":"33","page down":"34",end:"35",home:"36",insert:"45",delete:"46","cape lock":"20","num lock":"144","[{":"219","\\|":"220","]}":"221","'\"":"222",shift:"16",control:"17",alt:"18","搜索":"170","收藏":"171","浏览器":"172","音量减":"174","音量加":"175","静音":"173","停止":"179","邮件":"180"},keyMap_={};Object.keys(keyMap).forEach((function(t){keyMap_[keyMap[t]]=t}));var ShortCutAbstract=function(){function t(){(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__.Z)(this,t)}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__.Z)(t,[{key:"common",value:function(t,e){}},{key:"ctrl",value:function(t,e){}},{key:"alt",value:function(t,e){}},{key:"shift",value:function(t,e){}},{key:"ctrl_alt",value:function(t,e){}},{key:"ctrl_shift",value:function(t,e){}},{key:"alt_shift",value:function(t,e){}},{key:"ctrl_alt_shift",value:function(t,e){}}]),t}();function makeShortCutInitFn(t){ShortCut.prototype[t]=function(e,n){_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isNumber(e)||(e=keyMap[e]||e),this.maps[t]||(this.maps[t]={}),this.maps[t][e]=function(t){_Sound__WEBPACK_IMPORTED_MODULE_6__.$.play("confirm");var e=n();e||(t.stopPropagation(),t.preventDefault())}},ShortCut.prototype["".concat(t,"Desc")]=function(e,n){_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isNumber(e)||(e=keyMap[e]||e),this.describeMaps[t]||(this.describeMaps[t]={}),this.describeMaps[t][e]=n}}var requestAnimationFrame=window.requestAnimationFrame||window.webkitrequestAnimationFrame||window.mozrequestAnimationFrame,wrap=_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.node("div");wrap.className="short-cut-view",_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.append(document.body,wrap);var triggered=[],ShortCut=function(_ShortCutAbstract){(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_10__.Z)(ShortCut,_ShortCutAbstract);var _super=(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_0__.Z)(ShortCut);function ShortCut(){var t;(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__.Z)(this,ShortCut);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t=_super.call.apply(_super,[this].concat(n)),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)((0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(t),"hasInited",!1),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)((0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(t),"maps",{}),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)((0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_12__.Z)(t),"describeMaps",{}),t}return(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_9__.Z)(ShortCut,[{key:"init",value:function init(dom){var _this2=this,fns=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},describeMaps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},slef=this,$body=dom||document.querySelector("body");this.hasInited||$body.addEventListener("keydown",(function(ev){var keys=[],key="";ev.ctrlKey&&keys.push("ctrl"),ev.altKey&&keys.push("alt"),ev.shiftKey&&keys.push("shift"),key=keys.join("")||"",keys.push(keyMap_[ev.which]);var describeMaps_=_this2.describeMaps[key||"common"]||{};keys.push(describeMaps_[ev.which]||"暂无描述，待补充");var cmd="slef.maps.".concat(key||"common","[").concat(ev.which,"](ev)");try{eval(cmd),ShortCut.cacheTriggered(keys)}catch(e){}})),fns&&_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isObject(fns)&&Object.keys(fns).forEach((function(t){fns[t]&&Object.keys(fns[t]).forEach((function(e){return _this2[t](e,fns[t][e])}))})),describeMaps&&_GetType__WEBPACK_IMPORTED_MODULE_5__.X.isObject(describeMaps)&&Object.keys(describeMaps).forEach((function(t){describeMaps[t]&&Object.keys(describeMaps[t]).forEach((function(e){return _this2["".concat(t,"Desc")](e,describeMaps[t][e])}))})),this.hasInited=!0}}],[{key:"toast",value:function(t){var e=_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.node("div");t.forEach((function(t){_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.append(e,_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.node("span",t.toUpperCase()))})),_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.prepend(wrap,e),requestAnimationFrame((function(){requestAnimationFrame((function(){_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.class(e,"active"),setTimeout((function(){_tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.class(e,"hide"),setTimeout((function(){requestAnimationFrame((function(){return _tools_DomUtil__WEBPACK_IMPORTED_MODULE_7__.h.remove(e)}))}),2e3)}),1e3)}))}))}},{key:"cacheTriggered",value:function(t){var e=ShortCut.triggered,n=ShortCut.triggeredCacheLength,i=e[0];i&&t.every((function(t,e){return i[e]===t}))||(e.unshift(t),ShortCut.toast(t),e.length>n&&e.pop())}}]),ShortCut}(ShortCutAbstract);(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)(ShortCut,"triggeredCacheLength",20),(0,D_workspace_dy_player_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__.Z)(ShortCut,"triggered",triggered),["common","ctrl","alt","shift","ctrl_alt","ctrl_shift","alt_shift","ctrl_alt_shift"].forEach(makeShortCutInitFn);var shortCut=new ShortCut;shortCut.init()},7449:function(t,e,n){n.d(e,{$:function(){return u}});var i=n(1278),a=n(2610),s=n(7224),o={change:"./sound/change.mp3",confirm:"./sound/confirm.mp3",done:"./sound/done.mp3",warning:"./sound/warning.mp3"},r=function(){function t(){(0,i.Z)(this,t),(0,s.Z)(this,"list",void 0),this.list=[]}return(0,a.Z)(t,[{key:"getAudio",value:function(){var t=this,e=this.list.shift(),n=function(){e&&t.list.push(e)};if(!e){e=document.createElement("audio"),e.volume=.2,e.autoplay="autoplay";var i=document.querySelector("body");i&&i.appendChild(e),e.addEventListener("ended",n),e.addEventListener("error",n)}return e}}]),t}(),c=new r,u=function(){function t(){(0,i.Z)(this,t)}return(0,a.Z)(t,null,[{key:"play",value:function(t){var e=c.getAudio(),n={change:.01,confirm:.01,done:.2,warning:.01};e.volume=n[t]||.1,e.src=o[t]||t}}]),t}()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,function(){var t=[];__webpack_require__.O=function(e,n,i,a){if(!n){var s=1/0;for(c=0;c<t.length;c++){n=t[c][0],i=t[c][1],a=t[c][2];for(var o=!0,r=0;r<n.length;r++)(!1&a||s>=a)&&Object.keys(__webpack_require__.O).every((function(t){return __webpack_require__.O[t](n[r])}))?n.splice(r--,1):(o=!1,a<s&&(s=a));o&&(t.splice(c--,1),e=i())}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,i,a]}}(),function(){__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return __webpack_require__.d(e,{a:e}),e}}(),function(){__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};__webpack_require__.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,a,s=n[0],o=n[1],r=n[2],c=0;for(i in o)__webpack_require__.o(o,i)&&(__webpack_require__.m[i]=o[i]);for(r&&r(__webpack_require__),e&&e(n);c<s.length;c++)a=s[c],__webpack_require__.o(t,a)&&t[a]&&t[a][0](),t[s[c]]=0;__webpack_require__.O()},n=self["webpackChunkdy_player"]=self["webpackChunkdy_player"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(4502)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.4c284130.js.map